(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var s=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var a=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(s,o,a.get?a:{enumerable:!0,get:function(){return i[o]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(i){return i===null||typeof i!="object"?null:(i=z$1&&i[z$1]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,e,s){this.props=i,this.context=e,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,e,s){this.props=i,this.context=e,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,e,s){var o,a={},c=null,d=null;if(e!=null)for(o in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,o)&&!L$1.hasOwnProperty(o)&&(a[o]=e[o]);var _=arguments.length-2;if(_===1)a.children=s;else if(1<_){for(var j=Array(_),h=0;h<_;h++)j[h]=arguments[h+2];a.children=j}if(i&&i.defaultProps)for(o in _=i.defaultProps,_)a[o]===void 0&&(a[o]=_[o]);return{$$typeof:l$1,type:i,key:c,ref:d,props:a,_owner:K$1.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape$1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):e.toString(36)}function R$1(i,e,s,o,a){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var d=!1;if(i===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=i,a=a(d),i=o===""?"."+Q$1(d,0):o,I$1(a)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$1(a,e,s,"",function(h){return h})):a!=null&&(O$1(a)&&(a=N$1(a,s+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+i)),e.push(a)),1;if(d=0,o=o===""?".":o+":",I$1(i))for(var _=0;_<i.length;_++){c=i[_];var j=o+Q$1(c,_);d+=R$1(c,e,s,j,a)}else if(j=A$1(i),typeof j=="function")for(i=j.call(i),_=0;!(c=i.next()).done;)c=c.value,j=o+Q$1(c,_++),d+=R$1(c,e,s,j,a);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(i,e,s){if(i==null)return i;var o=[],a=0;return R$1(i,o,"","",function(c){return e.call(s,c,a++)}),o}function T$1(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(i,e,s){S$1(i,function(){e.apply(this,arguments)},s)},count:function(i){var e=0;return S$1(i,function(){e++}),e},toArray:function(i){return S$1(i,function(e){return e})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(i,e,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var o=C$1({},i.props),a=i.key,c=i.ref,d=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$1.current),e.key!==void 0&&(a=""+e.key),i.type&&i.type.defaultProps)var _=i.type.defaultProps;for(j in e)J.call(e,j)&&!L$1.hasOwnProperty(j)&&(o[j]=e[j]===void 0&&_!==void 0?_[j]:e[j])}var j=arguments.length-2;if(j===1)o.children=s;else if(1<j){_=Array(j);for(var h=0;h<j;h++)_[h]=arguments[h+2];o.children=_}return{$$typeof:l$1,type:i.type,key:a,ref:c,props:o,_owner:d}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var e=M$1.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$1,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,e){return{$$typeof:x,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=e}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,s){return U$1.current.useImperativeHandle(i,e,s)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,s){return U$1.current.useReducer(i,e,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,s){return U$1.current.useSyncExternalStore(i,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(i,e,s){var o,a={},c=null,d=null;s!==void 0&&(c=""+s),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(o in e)m$1.call(e,o)&&!p$1.hasOwnProperty(o)&&(a[o]=e[o]);if(i&&i.defaultProps)for(o in e=i.defaultProps,e)a[o]===void 0&&(a[o]=e[o]);return{$$typeof:k,type:i,key:c,ref:d,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(ht,lt){var ut=ht.length;ht.push(lt);e:for(;0<ut;){var pt=ut-1>>>1,Et=ht[pt];if(0<a(Et,lt))ht[pt]=lt,ht[ut]=Et,ut=pt;else break e}}function s(ht){return ht.length===0?null:ht[0]}function o(ht){if(ht.length===0)return null;var lt=ht[0],ut=ht.pop();if(ut!==lt){ht[0]=ut;e:for(var pt=0,Et=ht.length,St=Et>>>1;pt<St;){var Ct=2*(pt+1)-1,Pt=ht[Ct],ot=Ct+1,ft=ht[ot];if(0>a(Pt,ut))ot<Et&&0>a(ft,Pt)?(ht[pt]=ft,ht[ot]=ut,pt=ot):(ht[pt]=Pt,ht[Ct]=ut,pt=Ct);else if(ot<Et&&0>a(ft,ut))ht[pt]=ft,ht[ot]=ut,pt=ot;else break e}}return lt}function a(ht,lt){var ut=ht.sortIndex-lt.sortIndex;return ut!==0?ut:ht.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,_=d.now();i.unstable_now=function(){return d.now()-_}}var j=[],h=[],g=1,b=null,$=3,et=!1,_e=!1,nt=!1,st=typeof setTimeout=="function"?setTimeout:null,tt=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function at(ht){for(var lt=s(h);lt!==null;){if(lt.callback===null)o(h);else if(lt.startTime<=ht)o(h),lt.sortIndex=lt.expirationTime,e(j,lt);else break;lt=s(h)}}function ct(ht){if(nt=!1,at(ht),!_e)if(s(j)!==null)_e=!0,Ft(rt);else{var lt=s(h);lt!==null&&Tt(ct,lt.startTime-ht)}}function rt(ht,lt){_e=!1,nt&&(nt=!1,tt(vt),vt=-1),et=!0;var ut=$;try{for(at(lt),b=s(j);b!==null&&(!(b.expirationTime>lt)||ht&&!Vt());){var pt=b.callback;if(typeof pt=="function"){b.callback=null,$=b.priorityLevel;var Et=pt(b.expirationTime<=lt);lt=i.unstable_now(),typeof Et=="function"?b.callback=Et:b===s(j)&&o(j),at(lt)}else o(j);b=s(j)}if(b!==null)var St=!0;else{var Ct=s(h);Ct!==null&&Tt(ct,Ct.startTime-lt),St=!1}return St}finally{b=null,$=ut,et=!1}}var dt=!1,yt=null,vt=-1,gt=5,At=-1;function Vt(){return!(i.unstable_now()-At<gt)}function Nt(){if(yt!==null){var ht=i.unstable_now();At=ht;var lt=!0;try{lt=yt(!0,ht)}finally{lt?It():(dt=!1,yt=null)}}else dt=!1}var It;if(typeof it=="function")It=function(){it(Nt)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,zt=Lt.port2;Lt.port1.onmessage=Nt,It=function(){zt.postMessage(null)}}else It=function(){st(Nt,0)};function Ft(ht){yt=ht,dt||(dt=!0,It())}function Tt(ht,lt){vt=st(function(){ht(i.unstable_now())},lt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ht){ht.callback=null},i.unstable_continueExecution=function(){_e||et||(_e=!0,Ft(rt))},i.unstable_forceFrameRate=function(ht){0>ht||125<ht?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gt=0<ht?Math.floor(1e3/ht):5},i.unstable_getCurrentPriorityLevel=function(){return $},i.unstable_getFirstCallbackNode=function(){return s(j)},i.unstable_next=function(ht){switch($){case 1:case 2:case 3:var lt=3;break;default:lt=$}var ut=$;$=lt;try{return ht()}finally{$=ut}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ht,lt){switch(ht){case 1:case 2:case 3:case 4:case 5:break;default:ht=3}var ut=$;$=ht;try{return lt()}finally{$=ut}},i.unstable_scheduleCallback=function(ht,lt,ut){var pt=i.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?pt+ut:pt):ut=pt,ht){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=ut+Et,ht={id:g++,callback:lt,priorityLevel:ht,startTime:ut,expirationTime:Et,sortIndex:-1},ut>pt?(ht.sortIndex=ut,e(h,ht),s(j)===null&&ht===s(h)&&(nt?(tt(vt),vt=-1):nt=!0,Tt(ct,ut-pt))):(ht.sortIndex=Et,e(j,ht),_e||et||(_e=!0,Ft(rt))),ht},i.unstable_shouldYield=Vt,i.unstable_wrapCallback=function(ht){var lt=$;return function(){var ut=$;$=lt;try{return ht.apply(this,arguments)}finally{$=ut}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,s,o){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,s,o){if(e===null||typeof e>"u"||pa(i,e,s,o))return!0;if(o)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(i,e,s,o,a,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z[i]=new v(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z[e]=new v(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z[i]=new v(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z[i]=new v(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z[i]=new v(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z[i]=new v(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,s,o){var a=z.hasOwnProperty(e)?z[e]:null;(a!==null?a.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,a,o)&&(s=null),o||a===null?oa(e)&&(s===null?i.removeAttribute(e):i.setAttribute(e,""+s)):a.mustUseProperty?i[a.propertyName]=s===null?a.type===3?!1:"":s:(e=a.attributeName,o=a.attributeNamespace,s===null?i.removeAttribute(e):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,o?i.setAttributeNS(o,e,s):i.setAttribute(e,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var o=h}Reflect.construct(i,[],e)}else{try{e.call()}catch(h){o=h}i.call(e.prototype)}else{try{throw Error()}catch(h){o=h}i()}}catch(h){if(h&&o&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),c=o.stack.split(`
`),d=a.length-1,_=c.length-1;1<=d&&0<=_&&a[d]!==c[_];)_--;for(;1<=d&&0<=_;d--,_--)if(a[d]!==c[_]){if(d!==1||_!==1)do if(d--,_--,0>_||a[d]!==c[_]){var j=`
`+a[d].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=d&&0<=_);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),o=""+i[e];if(!i.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,c=s.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,c.call(this,d)}}),Object.defineProperty(i,e,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var s=e.getValue(),o="";return i&&(o=Ta(i)?i.checked?"true":"false":i.value),i=o,i!==s?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var s=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,e){var s=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),i._wrapperState={initialChecked:o,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var s=Sa(e.value),o=e.type;if(s!=null)o==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(o==="submit"||o==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,s):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,s||e===i.value||(i.value=e),i.defaultValue=e}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,e,s){(e!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,e,s,o){if(i=i.options,e){e={};for(var a=0;a<s.length;a++)e["$"+s[a]]=!0;for(s=0;s<i.length;s++)a=e.hasOwnProperty("$"+i[s].value),i[s].selected!==a&&(i[s].selected=a),a&&o&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,a=0;a<i.length;a++){if(i[a].value===s){i[a].selected=!0,o&&(i[a].defaultSelected=!0);return}e!==null||i[a].disabled||(e=i[a])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}e=s}e==null&&(e=""),s=e}i._wrapperState={initialValue:Sa(s)}}function ib(i,e){var s=Sa(e.value),o=Sa(e.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),e.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),o!=null&&(i.defaultValue=""+o)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,o,a){MSApp.execUnsafeLocalFunction(function(){return i(e,s,o,a)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var s in e)if(e.hasOwnProperty(s)){var o=s.indexOf("--")===0,a=rb(s,e[s],o);s==="float"&&(s="cssFloat"),o?i.setProperty(s,a):i[s]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,s){if(Ib)return i(e,s);Ib=!0;try{return Gb(i,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var s=i.stateNode;if(s===null)return null;var o=Db(s);if(o===null)return null;s=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(i=i.type,o=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!o;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,s,o,a,c,d,_,j){var h=Array.prototype.slice.call(arguments,3);try{e.apply(s,h)}catch(g){this.onError(g)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,s,o,a,c,d,_,j){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,s,o,a,c,d,_,j){if(Tb.apply(this,arguments),Ob){if(Ob){var h=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=h)}}function Vb(i){var e=i,s=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(s=e.return),i=e.return;while(i)}return e.tag===3?s:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var s=i,o=e;;){var a=s.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){s=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===s)return Xb(a),i;if(c===o)return Xb(a),e;c=c.sibling}throw Error(p(188))}if(s.return!==o.return)s=a,o=c;else{for(var d=!1,_=a.child;_;){if(_===s){d=!0,s=a,o=c;break}if(_===o){d=!0,o=a,s=c;break}_=_.sibling}if(!d){for(_=c.child;_;){if(_===s){d=!0,s=c,o=a;break}if(_===o){d=!0,o=c,s=a;break}_=_.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==o)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var s=i.pendingLanes;if(s===0)return 0;var o=0,a=i.suspendedLanes,c=i.pingedLanes,d=s&268435455;if(d!==0){var _=d&~a;_!==0?o=tc(_):(c&=d,c!==0&&(o=tc(c)))}else d=s&~a,d!==0?o=tc(d):c!==0&&(o=tc(c));if(o===0)return 0;if(e!==0&&e!==o&&!(e&a)&&(a=o&-o,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(o&4&&(o|=s&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=o;0<e;)s=31-oc(e),a=1<<s,o|=i[s],e&=~a;return o}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var s=i.suspendedLanes,o=i.pingedLanes,a=i.expirationTimes,c=i.pendingLanes;0<c;){var d=31-oc(c),_=1<<d,j=a[d];j===-1?(!(_&s)||_&o)&&(a[d]=vc(_,e)):j<=e&&(i.expiredLanes|=_),c&=~_}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],s=0;31>s;s++)e.push(i);return e}function Ac(i,e,s){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=s}function Bc(i,e){var s=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var o=i.eventTimes;for(i=i.expirationTimes;0<s;){var a=31-oc(s),c=1<<a;e[a]=0,o[a]=-1,i[a]=-1,s&=~c}}function Cc(i,e){var s=i.entangledLanes|=e;for(i=i.entanglements;s;){var o=31-oc(s),a=1<<o;a&e|i[o]&e&&(i[o]|=e),s&=~a}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,s,o,a,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:s,eventSystemFlags:o,nativeEvent:c,targetContainers:[a]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=o,e=i.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),i)}function Uc(i,e,s,o,a){switch(e){case"focusin":return Lc=Tc(Lc,i,e,s,o,a),!0;case"dragenter":return Mc=Tc(Mc,i,e,s,o,a),!0;case"mouseover":return Nc=Tc(Nc,i,e,s,o,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,i,e,s,o,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,i,e,s,o,a)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var s=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var o=new s.constructor(s.type,s);wb=o,s.target.dispatchEvent(o),wb=null}else return e=Cb(s),e!==null&&Fc(e),i.blockedOn=s,!1;e.shift()}return!0}function Zc(i,e,s){Xc(i)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(a){return ad(a,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var o=Kc[s];o.blockedOn===i&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)o=Qc[s],o.blockedOn===i&&(o.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,s,o){var a=C,c=cd.transition;cd.transition=null;try{C=1,fd(i,e,s,o)}finally{C=a,cd.transition=c}}function gd(i,e,s,o){var a=C,c=cd.transition;cd.transition=null;try{C=4,fd(i,e,s,o)}finally{C=a,cd.transition=c}}function fd(i,e,s,o){if(dd){var a=Yc(i,e,s,o);if(a===null)hd(i,e,o,id,s),Sc(i,o);else if(Uc(a,i,e,s,o))o.stopPropagation();else if(Sc(i,o),e&4&&-1<Rc.indexOf(i)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(i,e,s,o),c===null&&hd(i,e,o,id,s),c===a)break;a=c}a!==null&&o.stopPropagation()}else hd(i,e,o,null,s)}}var id=null;function Yc(i,e,s,o){if(id=null,i=xb(o),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(s=e.tag,s===13){if(i=Wb(e),i!==null)return i;i=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,s=e.length,o,a="value"in kd?kd.value:kd.textContent,c=a.length;for(i=0;i<s&&e[i]===a[i];i++);var d=s-i;for(o=1;o<=d&&e[s-o]===a[c-o];o++);return md=a.slice(i,1<o?1-o:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(s,o,a,c,d){this._reactName=s,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(s=i[_],this[_]=s?s(c):c[_]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return i=e.data,i===ee&&fe?null:i;default:return null}}function ke(i,e){if(ie)return i==="compositionend"||!ae&&ge(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le[i.type]:e==="textarea"}function ne(i,e,s,o){Eb(o),e=oe(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,o),i.push({event:s,listeners:e}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var e=ue(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,i,xb(i)),Jb(re,e)}}function Ce(i,e,s){i==="focusin"?(Ae(),pe=e,qe=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,e){if(i==="click")return te(e)}function Fe(i,e){if(i==="input"||i==="change")return te(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var s=Object.keys(i),o=Object.keys(e);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var a=s[o];if(!ja.call(e,a)||!He(i[a],e[a]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var s=Je(i);i=0;for(var o;s;){if(s.nodeType===3){if(o=i+s.textContent.length,i<=e&&o>=e)return{node:s,offset:e-i};i=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),s=i.focusedElem,o=i.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(o!==null&&Ne(s)){if(e=o.start,i=o.end,i===void 0&&(i=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(i,s.value.length);else if(i=(e=s.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var a=s.textContent.length,c=Math.min(o.start,a);o=o.end===void 0?c:Math.min(o.end,a),!i.extend&&c>o&&(a=o,o=c,c=a),a=Ke(s,c);var d=Ke(s,o);a&&d&&(i.rangeCount!==1||i.anchorNode!==a.node||i.anchorOffset!==a.offset||i.focusNode!==d.node||i.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),i.removeAllRanges(),c>o?(i.addRange(e),i.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),i.addRange(e)))}}for(e=[],i=s;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)i=e[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,e,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(e=new td("onSelect","select",null,e,s),i.push({event:e,listeners:o}),e.target=Qe)))}function Ve(i,e){var s={};return s[i.toLowerCase()]=e.toLowerCase(),s["Webkit"+i]="webkit"+e,s["Moz"+i]="moz"+e,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[i]=e[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,s){var o=i.type||"unknown-event";i.currentTarget=s,Ub(o,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var s=0;s<i.length;s++){var o=i[s],a=o.event;o=o.listeners;e:{var c=void 0;if(e)for(var d=o.length-1;0<=d;d--){var _=o[d],j=_.instance,h=_.currentTarget;if(_=_.listener,j!==c&&a.isPropagationStopped())break e;nf(a,_,h),c=j}else for(d=0;d<o.length;d++){if(_=o[d],j=_.instance,h=_.currentTarget,_=_.listener,j!==c&&a.isPropagationStopped())break e;nf(a,_,h),c=j}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var o=i+"__bubble";s.has(o)||(pf(e,i,2,!1),s.add(o))}function qf(i,e,s){var o=0;e&&(o|=4),pf(s,i,o,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,s,o){switch(jd(e)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}s=a.bind(null,e,s,i),a=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),o?a!==void 0?i.addEventListener(e,s,{capture:!0,passive:a}):i.addEventListener(e,s,!0):a!==void 0?i.addEventListener(e,s,{passive:a}):i.addEventListener(e,s,!1)}function hd(i,e,s,o,a){var c=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var _=o.stateNode.containerInfo;if(_===a||_.nodeType===8&&_.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var j=d.tag;if((j===3||j===4)&&(j=d.stateNode.containerInfo,j===a||j.nodeType===8&&j.parentNode===a))return;d=d.return}for(;_!==null;){if(d=Wc(_),d===null)return;if(j=d.tag,j===5||j===6){o=c=d;continue e}_=_.parentNode}}o=o.return}Jb(function(){var h=c,g=xb(s),b=[];e:{var $=df.get(i);if($!==void 0){var et=td,_e=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":et=Rd;break;case"focusin":_e="focus",et=Fd;break;case"focusout":_e="blur",et=Fd;break;case"beforeblur":case"afterblur":et=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Vd;break;case $e:case af:case bf:et=Hd;break;case cf:et=Xd;break;case"scroll":et=vd;break;case"wheel":et=Zd;break;case"copy":case"cut":case"paste":et=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Td}var nt=(e&4)!==0,st=!nt&&i==="scroll",tt=nt?$!==null?$+"Capture":null:$;nt=[];for(var it=h,at;it!==null;){at=it;var ct=at.stateNode;if(at.tag===5&&ct!==null&&(at=ct,tt!==null&&(ct=Kb(it,tt),ct!=null&&nt.push(tf(it,ct,at)))),st)break;it=it.return}0<nt.length&&($=new et($,_e,null,s,g),b.push({event:$,listeners:nt}))}}if(!(e&7)){e:{if($=i==="mouseover"||i==="pointerover",et=i==="mouseout"||i==="pointerout",$&&s!==wb&&(_e=s.relatedTarget||s.fromElement)&&(Wc(_e)||_e[uf]))break e;if((et||$)&&($=g.window===g?g:($=g.ownerDocument)?$.defaultView||$.parentWindow:window,et?(_e=s.relatedTarget||s.toElement,et=h,_e=_e?Wc(_e):null,_e!==null&&(st=Vb(_e),_e!==st||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(et=null,_e=h),et!==_e)){if(nt=Bd,ct="onMouseLeave",tt="onMouseEnter",it="mouse",(i==="pointerout"||i==="pointerover")&&(nt=Td,ct="onPointerLeave",tt="onPointerEnter",it="pointer"),st=et==null?$:ue(et),at=_e==null?$:ue(_e),$=new nt(ct,it+"leave",et,s,g),$.target=st,$.relatedTarget=at,ct=null,Wc(g)===h&&(nt=new nt(tt,it+"enter",_e,s,g),nt.target=at,nt.relatedTarget=st,ct=nt),st=ct,et&&_e)t:{for(nt=et,tt=_e,it=0,at=nt;at;at=vf(at))it++;for(at=0,ct=tt;ct;ct=vf(ct))at++;for(;0<it-at;)nt=vf(nt),it--;for(;0<at-it;)tt=vf(tt),at--;for(;it--;){if(nt===tt||tt!==null&&nt===tt.alternate)break t;nt=vf(nt),tt=vf(tt)}nt=null}else nt=null;et!==null&&wf(b,$,et,nt,!1),_e!==null&&st!==null&&wf(b,st,_e,nt,!0)}}e:{if($=h?ue(h):window,et=$.nodeName&&$.nodeName.toLowerCase(),et==="select"||et==="input"&&$.type==="file")var rt=ve;else if(me($))if(we)rt=Fe;else{rt=De;var dt=Ce}else(et=$.nodeName)&&et.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(rt=Ee);if(rt&&(rt=rt(i,h))){ne(b,rt,s,g);break e}dt&&dt(i,$,h),i==="focusout"&&(dt=$._wrapperState)&&dt.controlled&&$.type==="number"&&cb($,"number",$.value)}switch(dt=h?ue(h):window,i){case"focusin":(me(dt)||dt.contentEditable==="true")&&(Qe=dt,Re=h,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(b,s,g);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(b,s,g)}var yt;if(ae)e:{switch(i){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie?ge(i,s)&&(vt="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(vt="onCompositionStart");vt&&(de&&s.locale!=="ko"&&(ie||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie&&(yt=nd()):(kd=g,ld="value"in kd?kd.value:kd.textContent,ie=!0)),dt=oe(h,vt),0<dt.length&&(vt=new Ld(vt,i,null,s,g),b.push({event:vt,listeners:dt}),yt?vt.data=yt:(yt=he(s),yt!==null&&(vt.data=yt)))),(yt=ce?je(i,s):ke(i,s))&&(h=oe(h,"onBeforeInput"),0<h.length&&(g=new Ld("onBeforeInput","beforeinput",null,s,g),b.push({event:g,listeners:h}),g.data=yt))}se(b,e)})}function tf(i,e,s){return{instance:i,listener:e,currentTarget:s}}function oe(i,e){for(var s=e+"Capture",o=[];i!==null;){var a=i,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(i,s),c!=null&&o.unshift(tf(i,c,a)),c=Kb(i,e),c!=null&&o.push(tf(i,c,a))),i=i.return}return o}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,s,o,a){for(var c=e._reactName,d=[];s!==null&&s!==o;){var _=s,j=_.alternate,h=_.stateNode;if(j!==null&&j===o)break;_.tag===5&&h!==null&&(_=h,a?(j=Kb(s,c),j!=null&&d.unshift(tf(s,j,_))):a||(j=Kb(s,c),j!=null&&d.push(tf(s,j,_)))),s=s.return}d.length!==0&&i.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,s){if(e=zf(e),zf(i)!==e&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var s=e,o=0;do{var a=s.nextSibling;if(i.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(o===0){i.removeChild(a),bd(e);return}o--}else s!=="$"&&s!=="$?"&&s!=="$!"||o++;s=a}while(s);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return i;e--}else s==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var s=i.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return e}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var s=i.type.contextTypes;if(!s)return Vf;var o=i.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in s)a[c]=e[c];return o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H)}function ag(i,e,s){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,s)}function bg(i,e,s){var o=i.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return s;o=o.getChildContext();for(var a in o)if(!(a in e))throw Error(p(108,Ra(i)||"Unknown",a));return A({},s,o)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,e,s){var o=i.stateNode;if(!o)throw Error(p(169));s?(i=bg(i,e,Xf),o.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H),G(H,i)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C;try{var s=eg;for(C=1;i<s.length;i++){var o=s[i];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),a}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var o=rg;i=sg;var a=32-oc(o)-1;o&=~(1<<a),s+=1;var c=32-oc(e)+a;if(30<c){var d=a-a%5;c=(o&(1<<d)-1).toString(32),o>>=d,a-=d,rg=1<<32-oc(e)+a|s<<a|o,sg=c+i}else rg=1<<c|s<<a|o,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=i,e=i.deletions,e===null?(i.deletions=[s],i.flags|=16):e.push(s)}function Cg(i,e){switch(i.tag){case 5:var s=i.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var e=yg;if(e){var s=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(s.nextSibling);var o=xg;e&&Cg(i,e)?Ag(o,s):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var o=s.stateNode}if(!o)throw Error(p(147,i));var a=o,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var _=a.refs;d===null?delete _[c]:_[c]=d},e._stringRef=c,e)}if(typeof i!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,i))}return i}function Mg(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Ng(i){var e=i._init;return e(i._payload)}function Og(i){function e(tt,it){if(i){var at=tt.deletions;at===null?(tt.deletions=[it],tt.flags|=16):at.push(it)}}function s(tt,it){if(!i)return null;for(;it!==null;)e(tt,it),it=it.sibling;return null}function o(tt,it){for(tt=new Map;it!==null;)it.key!==null?tt.set(it.key,it):tt.set(it.index,it),it=it.sibling;return tt}function a(tt,it){return tt=Pg(tt,it),tt.index=0,tt.sibling=null,tt}function c(tt,it,at){return tt.index=at,i?(at=tt.alternate,at!==null?(at=at.index,at<it?(tt.flags|=2,it):at):(tt.flags|=2,it)):(tt.flags|=1048576,it)}function d(tt){return i&&tt.alternate===null&&(tt.flags|=2),tt}function _(tt,it,at,ct){return it===null||it.tag!==6?(it=Qg(at,tt.mode,ct),it.return=tt,it):(it=a(it,at),it.return=tt,it)}function j(tt,it,at,ct){var rt=at.type;return rt===ya?g(tt,it,at.props.children,ct,at.key):it!==null&&(it.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Ha&&Ng(rt)===it.type)?(ct=a(it,at.props),ct.ref=Lg(tt,it,at),ct.return=tt,ct):(ct=Rg(at.type,at.key,at.props,null,tt.mode,ct),ct.ref=Lg(tt,it,at),ct.return=tt,ct)}function h(tt,it,at,ct){return it===null||it.tag!==4||it.stateNode.containerInfo!==at.containerInfo||it.stateNode.implementation!==at.implementation?(it=Sg(at,tt.mode,ct),it.return=tt,it):(it=a(it,at.children||[]),it.return=tt,it)}function g(tt,it,at,ct,rt){return it===null||it.tag!==7?(it=Tg(at,tt.mode,ct,rt),it.return=tt,it):(it=a(it,at),it.return=tt,it)}function b(tt,it,at){if(typeof it=="string"&&it!==""||typeof it=="number")return it=Qg(""+it,tt.mode,at),it.return=tt,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return at=Rg(it.type,it.key,it.props,null,tt.mode,at),at.ref=Lg(tt,null,it),at.return=tt,at;case wa:return it=Sg(it,tt.mode,at),it.return=tt,it;case Ha:var ct=it._init;return b(tt,ct(it._payload),at)}if(eb(it)||Ka(it))return it=Tg(it,tt.mode,at,null),it.return=tt,it;Mg(tt,it)}return null}function $(tt,it,at,ct){var rt=it!==null?it.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return rt!==null?null:_(tt,it,""+at,ct);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case va:return at.key===rt?j(tt,it,at,ct):null;case wa:return at.key===rt?h(tt,it,at,ct):null;case Ha:return rt=at._init,$(tt,it,rt(at._payload),ct)}if(eb(at)||Ka(at))return rt!==null?null:g(tt,it,at,ct,null);Mg(tt,at)}return null}function et(tt,it,at,ct,rt){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return tt=tt.get(at)||null,_(it,tt,""+ct,rt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case va:return tt=tt.get(ct.key===null?at:ct.key)||null,j(it,tt,ct,rt);case wa:return tt=tt.get(ct.key===null?at:ct.key)||null,h(it,tt,ct,rt);case Ha:var dt=ct._init;return et(tt,it,at,dt(ct._payload),rt)}if(eb(ct)||Ka(ct))return tt=tt.get(at)||null,g(it,tt,ct,rt,null);Mg(it,ct)}return null}function _e(tt,it,at,ct){for(var rt=null,dt=null,yt=it,vt=it=0,gt=null;yt!==null&&vt<at.length;vt++){yt.index>vt?(gt=yt,yt=null):gt=yt.sibling;var At=$(tt,yt,at[vt],ct);if(At===null){yt===null&&(yt=gt);break}i&&yt&&At.alternate===null&&e(tt,yt),it=c(At,it,vt),dt===null?rt=At:dt.sibling=At,dt=At,yt=gt}if(vt===at.length)return s(tt,yt),I&&tg(tt,vt),rt;if(yt===null){for(;vt<at.length;vt++)yt=b(tt,at[vt],ct),yt!==null&&(it=c(yt,it,vt),dt===null?rt=yt:dt.sibling=yt,dt=yt);return I&&tg(tt,vt),rt}for(yt=o(tt,yt);vt<at.length;vt++)gt=et(yt,tt,vt,at[vt],ct),gt!==null&&(i&&gt.alternate!==null&&yt.delete(gt.key===null?vt:gt.key),it=c(gt,it,vt),dt===null?rt=gt:dt.sibling=gt,dt=gt);return i&&yt.forEach(function(Vt){return e(tt,Vt)}),I&&tg(tt,vt),rt}function nt(tt,it,at,ct){var rt=Ka(at);if(typeof rt!="function")throw Error(p(150));if(at=rt.call(at),at==null)throw Error(p(151));for(var dt=rt=null,yt=it,vt=it=0,gt=null,At=at.next();yt!==null&&!At.done;vt++,At=at.next()){yt.index>vt?(gt=yt,yt=null):gt=yt.sibling;var Vt=$(tt,yt,At.value,ct);if(Vt===null){yt===null&&(yt=gt);break}i&&yt&&Vt.alternate===null&&e(tt,yt),it=c(Vt,it,vt),dt===null?rt=Vt:dt.sibling=Vt,dt=Vt,yt=gt}if(At.done)return s(tt,yt),I&&tg(tt,vt),rt;if(yt===null){for(;!At.done;vt++,At=at.next())At=b(tt,At.value,ct),At!==null&&(it=c(At,it,vt),dt===null?rt=At:dt.sibling=At,dt=At);return I&&tg(tt,vt),rt}for(yt=o(tt,yt);!At.done;vt++,At=at.next())At=et(yt,tt,vt,At.value,ct),At!==null&&(i&&At.alternate!==null&&yt.delete(At.key===null?vt:At.key),it=c(At,it,vt),dt===null?rt=At:dt.sibling=At,dt=At);return i&&yt.forEach(function(Nt){return e(tt,Nt)}),I&&tg(tt,vt),rt}function st(tt,it,at,ct){if(typeof at=="object"&&at!==null&&at.type===ya&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case va:e:{for(var rt=at.key,dt=it;dt!==null;){if(dt.key===rt){if(rt=at.type,rt===ya){if(dt.tag===7){s(tt,dt.sibling),it=a(dt,at.props.children),it.return=tt,tt=it;break e}}else if(dt.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Ha&&Ng(rt)===dt.type){s(tt,dt.sibling),it=a(dt,at.props),it.ref=Lg(tt,dt,at),it.return=tt,tt=it;break e}s(tt,dt);break}else e(tt,dt);dt=dt.sibling}at.type===ya?(it=Tg(at.props.children,tt.mode,ct,at.key),it.return=tt,tt=it):(ct=Rg(at.type,at.key,at.props,null,tt.mode,ct),ct.ref=Lg(tt,it,at),ct.return=tt,tt=ct)}return d(tt);case wa:e:{for(dt=at.key;it!==null;){if(it.key===dt)if(it.tag===4&&it.stateNode.containerInfo===at.containerInfo&&it.stateNode.implementation===at.implementation){s(tt,it.sibling),it=a(it,at.children||[]),it.return=tt,tt=it;break e}else{s(tt,it);break}else e(tt,it);it=it.sibling}it=Sg(at,tt.mode,ct),it.return=tt,tt=it}return d(tt);case Ha:return dt=at._init,st(tt,it,dt(at._payload),ct)}if(eb(at))return _e(tt,it,at,ct);if(Ka(at))return nt(tt,it,at,ct);Mg(tt,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,it!==null&&it.tag===6?(s(tt,it.sibling),it=a(it,at),it.return=tt,tt=it):(s(tt,it),it=Qg(at,tt.mode,ct),it.return=tt,tt=it),d(tt)):s(tt,it)}return st}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(i){var e=Wg.current;E(Wg),i._currentValue=e}function bh(i,e,s){for(;i!==null;){var o=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),i===s)break;i=i.return}}function ch(i,e){Xg=i,Zg=Yg=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(dh=!0),i.firstContext=null)}function eh(i){var e=i._currentValue;if(Zg!==i)if(i={context:i,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=i,Xg.dependencies={lanes:0,firstContext:i}}else Yg=Yg.next=i;return e}var fh=null;function gh(i){fh===null?fh=[i]:fh.push(i)}function hh(i,e,s,o){var a=e.interleaved;return a===null?(s.next=s,gh(e)):(s.next=a.next,a.next=s),e.interleaved=s,ih(i,o)}function ih(i,e){i.lanes|=e;var s=i.alternate;for(s!==null&&(s.lanes|=e),s=i,i=i.return;i!==null;)i.childLanes|=e,s=i.alternate,s!==null&&(s.childLanes|=e),s=i,i=i.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mh(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(i,e,s){var o=i.updateQueue;if(o===null)return null;if(o=o.shared,K&2){var a=o.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),o.pending=e,ih(i,s)}return a=o.interleaved,a===null?(e.next=e,gh(o)):(e.next=a.next,a.next=e),o.interleaved=e,ih(i,s)}function oh(i,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var o=e.lanes;o&=i.pendingLanes,s|=o,e.lanes=s,Cc(i,s)}}function ph(i,e){var s=i.updateQueue,o=i.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var a=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?a=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?a=c=e:c=c.next=e}else a=c=e;s={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=e:i.next=e,s.lastBaseUpdate=e}function qh(i,e,s,o){var a=i.updateQueue;jh=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,_=a.shared.pending;if(_!==null){a.shared.pending=null;var j=_,h=j.next;j.next=null,d===null?c=h:d.next=h,d=j;var g=i.alternate;g!==null&&(g=g.updateQueue,_=g.lastBaseUpdate,_!==d&&(_===null?g.firstBaseUpdate=h:_.next=h,g.lastBaseUpdate=j))}if(c!==null){var b=a.baseState;d=0,g=h=j=null,_=c;do{var $=_.lane,et=_.eventTime;if((o&$)===$){g!==null&&(g=g.next={eventTime:et,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var _e=i,nt=_;switch($=e,et=s,nt.tag){case 1:if(_e=nt.payload,typeof _e=="function"){b=_e.call(et,b,$);break e}b=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=nt.payload,$=typeof _e=="function"?_e.call(et,b,$):_e,$==null)break e;b=A({},b,$);break e;case 2:jh=!0}}_.callback!==null&&_.lane!==0&&(i.flags|=64,$=a.effects,$===null?a.effects=[_]:$.push(_))}else et={eventTime:et,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},g===null?(h=g=et,j=b):g=g.next=et,d|=$;if(_=_.next,_===null){if(_=a.shared.pending,_===null)break;$=_,_=$.next,$.next=null,a.lastBaseUpdate=$,a.shared.pending=null}}while(!0);if(g===null&&(j=b),a.baseState=j,a.firstBaseUpdate=h,a.lastBaseUpdate=g,e=a.shared.interleaved,e!==null){a=e;do d|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);rh|=d,i.lanes=d,i.memoizedState=b}}function sh(i,e,s){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var o=i[e],a=o.callback;if(a!==null){if(o.callback=null,o=s,typeof a!="function")throw Error(p(191,a));a.call(o)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(i){if(i===th)throw Error(p(174));return i}function yh(i,e){switch(G(wh,e),G(vh,i),G(uh,th),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(i){xh(wh.current);var e=xh(uh.current),s=lb(e,i.type);e!==s&&(G(vh,i),G(uh,s))}function Bh(i){vh.current===i&&(E(uh),E(vh))}var L=Uf(0);function Ch(i){for(var e=i;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var i=0;i<Dh.length;i++)Dh[i]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(i,e){if(e===null)return!1;for(var s=0;s<e.length&&s<i.length;s++)if(!He(i[s],e[s]))return!1;return!0}function Nh(i,e,s,o,a,c){if(Hh=c,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=i===null||i.memoizedState===null?Oh:Ph,i=s(o,a),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,i=s(o,a)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return i}function Sh(){var i=Kh!==0;return Kh=0,i}function Th(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=i:O=O.next=i,O}function Uh(){if(N===null){var i=M.alternate;i=i!==null?i.memoizedState:null}else i=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=i;else{if(i===null)throw Error(p(310));N=i,i={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=i:O=O.next=i}return O}function Vh(i,e){return typeof e=="function"?e(i):e}function Wh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var o=N,a=o.baseQueue,c=s.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}o.baseQueue=a=c,s.pending=null}if(a!==null){c=a.next,o=o.baseState;var _=d=null,j=null,h=c;do{var g=h.lane;if((Hh&g)===g)j!==null&&(j=j.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),o=h.hasEagerState?h.eagerState:i(o,h.action);else{var b={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};j===null?(_=j=b,d=o):j=j.next=b,M.lanes|=g,rh|=g}h=h.next}while(h!==null&&h!==c);j===null?d=o:j.next=_,He(o,e.memoizedState)||(dh=!0),e.memoizedState=o,e.baseState=d,e.baseQueue=j,s.lastRenderedState=o}if(i=s.interleaved,i!==null){a=i;do c=a.lane,M.lanes|=c,rh|=c,a=a.next;while(a!==i)}else a===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var o=s.dispatch,a=s.pending,c=e.memoizedState;if(a!==null){s.pending=null;var d=a=a.next;do c=i(c,d.action),d=d.next;while(d!==a);He(c,e.memoizedState)||(dh=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),s.lastRenderedState=c}return[c,o]}function Yh(){}function Zh(i,e){var s=M,o=Uh(),a=e(),c=!He(o.memoizedState,a);if(c&&(o.memoizedState=a,dh=!0),o=o.queue,$h(ai.bind(null,s,o,i),[i]),o.getSnapshot!==e||c||O!==null&&O.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,o,a,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(s,e,a)}return a}function di(i,e,s){i.flags|=16384,i={getSnapshot:e,value:s},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[i]):(s=e.stores,s===null?e.stores=[i]:s.push(i))}function ci(i,e,s,o){e.value=s,e.getSnapshot=o,ei(e)&&fi(i)}function ai(i,e,s){return s(function(){ei(e)&&fi(i)})}function ei(i){var e=i.getSnapshot;i=i.value;try{var s=e();return!He(i,s)}catch{return!0}}function fi(i){var e=ih(i,1);e!==null&&gi(e,i,1,-1)}function hi(i){var e=Th();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:i},e.queue=i,i=i.dispatch=ii.bind(null,M,i),[e.memoizedState,i]}function bi(i,e,s,o){return i={tag:i,create:e,destroy:s,deps:o,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=i.next=i):(s=e.lastEffect,s===null?e.lastEffect=i.next=i:(o=s.next,s.next=i,i.next=o,e.lastEffect=i)),i}function ji(){return Uh().memoizedState}function ki(i,e,s,o){var a=Th();M.flags|=i,a.memoizedState=bi(1|e,s,void 0,o===void 0?null:o)}function li(i,e,s,o){var a=Uh();o=o===void 0?null:o;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,o!==null&&Mh(o,d.deps)){a.memoizedState=bi(e,s,c,o);return}}M.flags|=i,a.memoizedState=bi(1|e,s,c,o)}function mi(i,e){return ki(8390656,8,i,e)}function $h(i,e){return li(2048,8,i,e)}function ni(i,e){return li(4,2,i,e)}function oi(i,e){return li(4,4,i,e)}function pi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function qi(i,e,s){return s=s!=null?s.concat([i]):null,li(4,4,pi.bind(null,e,i),s)}function ri(){}function si(i,e){var s=Uh();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(s.memoizedState=[i,e],i)}function ti(i,e){var s=Uh();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(i=i(),s.memoizedState=[i,e],i)}function ui(i,e,s){return Hh&21?(He(s,e)||(s=yc(),M.lanes|=s,rh|=s,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,dh=!0),i.memoizedState=s)}function vi(i,e){var s=C;C=s!==0&&4>s?s:4,i(!0);var o=Gh.transition;Gh.transition={};try{i(!1),e()}finally{C=s,Gh.transition=o}}function wi(){return Uh().memoizedState}function xi(i,e,s){var o=yi(i);if(s={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null},zi(i))Ai(e,s);else if(s=hh(i,e,s,o),s!==null){var a=R();gi(s,i,o,a),Bi(s,e,o)}}function ii(i,e,s){var o=yi(i),a={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(i))Ai(e,a);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,_=c(d,s);if(a.hasEagerState=!0,a.eagerState=_,He(_,d)){var j=e.interleaved;j===null?(a.next=a,gh(e)):(a.next=j.next,j.next=a),e.interleaved=a;return}}catch{}finally{}s=hh(i,e,a,o),s!==null&&(a=R(),gi(s,i,o,a),Bi(s,e,o))}}function zi(i){var e=i.alternate;return i===M||e!==null&&e===M}function Ai(i,e){Jh=Ih=!0;var s=i.pending;s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e}function Bi(i,e,s){if(s&4194240){var o=e.lanes;o&=i.pendingLanes,s|=o,e.lanes=s,Cc(i,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(i,e){return Th().memoizedState=[i,e===void 0?null:e],i},useContext:eh,useEffect:mi,useImperativeHandle:function(i,e,s){return s=s!=null?s.concat([i]):null,ki(4194308,4,pi.bind(null,e,i),s)},useLayoutEffect:function(i,e){return ki(4194308,4,i,e)},useInsertionEffect:function(i,e){return ki(4,2,i,e)},useMemo:function(i,e){var s=Th();return e=e===void 0?null:e,i=i(),s.memoizedState=[i,e],i},useReducer:function(i,e,s){var o=Th();return e=s!==void 0?s(e):e,o.memoizedState=o.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},o.queue=i,i=i.dispatch=xi.bind(null,M,i),[o.memoizedState,i]},useRef:function(i){var e=Th();return i={current:i},e.memoizedState=i},useState:hi,useDebugValue:ri,useDeferredValue:function(i){return Th().memoizedState=i},useTransition:function(){var i=hi(!1),e=i[0];return i=vi.bind(null,i[1]),Th().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,s){var o=M,a=Th();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=e(),Q===null)throw Error(p(349));Hh&30||di(o,e,s)}a.memoizedState=s;var c={value:s,getSnapshot:e};return a.queue=c,mi(ai.bind(null,o,c,i),[i]),o.flags|=2048,bi(9,ci.bind(null,o,c,s,e),void 0,null),s},useId:function(){var i=Th(),e=Q.identifierPrefix;if(I){var s=sg,o=rg;s=(o&~(1<<32-oc(o)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return ui(e,N.memoizedState,i)},useTransition:function(){var i=Wh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return N===null?e.memoizedState=i:ui(e,N.memoizedState,i)},useTransition:function(){var i=Xh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(i,e){if(i&&i.defaultProps){e=A({},e),i=i.defaultProps;for(var s in i)e[s]===void 0&&(e[s]=i[s]);return e}return e}function Di(i,e,s,o){e=i.memoizedState,s=s(o,e),s=s==null?e:A({},e,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var Ei={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,s){i=i._reactInternals;var o=R(),a=yi(i),c=mh(o,a);c.payload=e,s!=null&&(c.callback=s),e=nh(i,c,a),e!==null&&(gi(e,i,a,o),oh(e,i,a))},enqueueReplaceState:function(i,e,s){i=i._reactInternals;var o=R(),a=yi(i),c=mh(o,a);c.tag=1,c.payload=e,s!=null&&(c.callback=s),e=nh(i,c,a),e!==null&&(gi(e,i,a,o),oh(e,i,a))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var s=R(),o=yi(i),a=mh(s,o);a.tag=2,e!=null&&(a.callback=e),e=nh(i,a,o),e!==null&&(gi(e,i,o,s),oh(e,i,o))}};function Fi(i,e,s,o,a,c,d){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(o,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie(s,o)||!Ie(a,c):!0}function Gi(i,e,s){var o=!1,a=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=eh(c):(a=Zf(e)?Xf:H.current,o=e.contextTypes,c=(o=o!=null)?Yf(i,a):Vf),e=new e(s,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,i.stateNode=e,e._reactInternals=i,o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=c),e}function Hi(i,e,s,o){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,o),e.state!==i&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(i,e,s,o){var a=i.stateNode;a.props=s,a.state=i.memoizedState,a.refs={},kh(i);var c=e.contextType;typeof c=="object"&&c!==null?a.context=eh(c):(c=Zf(e)?Xf:H.current,a.context=Yf(i,c)),a.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Di(i,e,c,s),a.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ei.enqueueReplaceState(a,a.state,null),qh(i,s,a,o),a.state=i.memoizedState),typeof a.componentDidMount=="function"&&(i.flags|=4194308)}function Ji(i,e){try{var s="",o=e;do s+=Pa(o),o=o.return;while(o);var a=s}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:a,digest:null}}function Ki(i,e,s){return{value:i,source:null,stack:s??null,digest:e??null}}function Li(i,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(i,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var o=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=o),Li(i,e)},s}function Qi(i,e,s){s=mh(-1,s),s.tag=3;var o=i.type.getDerivedStateFromError;if(typeof o=="function"){var a=e.value;s.payload=function(){return o(a)},s.callback=function(){Li(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Li(i,e),typeof o!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),s}function Si(i,e,s){var o=i.pingCache;if(o===null){o=i.pingCache=new Mi;var a=new Set;o.set(e,a)}else a=o.get(e),a===void 0&&(a=new Set,o.set(e,a));a.has(s)||(a.add(s),i=Ti.bind(null,i,e,s),e.then(i,i))}function Ui(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Vi(i,e,s,o,a){return i.mode&1?(i.flags|=65536,i.lanes=a,i):(i===e?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),i)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(i,e,s,o){e.child=i===null?Vg(e,null,s,o):Ug(e,i.child,s,o)}function Yi(i,e,s,o,a){s=s.render;var c=e.ref;return ch(e,a),o=Nh(i,e,s,o,c,a),s=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,Zi(i,e,a)):(I&&s&&vg(e),e.flags|=1,Xi(i,e,o,a),e.child)}function $i(i,e,s,o,a){if(i===null){var c=s.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=c,bj(i,e,c,o,a)):(i=Rg(s.type,null,o,e,e.mode,a),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&a)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(d,o)&&i.ref===e.ref)return Zi(i,e,a)}return e.flags|=1,i=Pg(c,o),i.ref=e.ref,i.return=e,e.child=i}function bj(i,e,s,o,a){if(i!==null){var c=i.memoizedProps;if(Ie(c,o)&&i.ref===e.ref)if(dh=!1,e.pendingProps=o=c,(i.lanes&a)!==0)i.flags&131072&&(dh=!0);else return e.lanes=i.lanes,Zi(i,e,a)}return cj(i,e,s,o,a)}function dj(i,e,s){var o=e.pendingProps,a=o.children,c=i!==null?i.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return i=c!==null?c.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:s,G(ej,fj),fj|=o}else c!==null?(o=c.baseLanes|s,e.memoizedState=null):o=s,G(ej,fj),fj|=o;return Xi(i,e,a,s),e.child}function gj(i,e){var s=e.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(i,e,s,o,a){var c=Zf(s)?Xf:H.current;return c=Yf(e,c),ch(e,a),s=Nh(i,e,s,o,c,a),o=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,Zi(i,e,a)):(I&&o&&vg(e),e.flags|=1,Xi(i,e,s,a),e.child)}function hj(i,e,s,o,a){if(Zf(s)){var c=!0;cg(e)}else c=!1;if(ch(e,a),e.stateNode===null)ij(i,e),Gi(e,s,o),Ii(e,s,o,a),o=!0;else if(i===null){var d=e.stateNode,_=e.memoizedProps;d.props=_;var j=d.context,h=s.contextType;typeof h=="object"&&h!==null?h=eh(h):(h=Zf(s)?Xf:H.current,h=Yf(e,h));var g=s.getDerivedStateFromProps,b=typeof g=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==o||j!==h)&&Hi(e,d,o,h),jh=!1;var $=e.memoizedState;d.state=$,qh(e,o,d,a),j=e.memoizedState,_!==o||$!==j||Wf.current||jh?(typeof g=="function"&&(Di(e,s,g,o),j=e.memoizedState),(_=jh||Fi(e,s,_,o,$,j,h))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=j),d.props=o,d.state=j,d.context=h,o=_):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{d=e.stateNode,lh(i,e),_=e.memoizedProps,h=e.type===e.elementType?_:Ci(e.type,_),d.props=h,b=e.pendingProps,$=d.context,j=s.contextType,typeof j=="object"&&j!==null?j=eh(j):(j=Zf(s)?Xf:H.current,j=Yf(e,j));var et=s.getDerivedStateFromProps;(g=typeof et=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==b||$!==j)&&Hi(e,d,o,j),jh=!1,$=e.memoizedState,d.state=$,qh(e,o,d,a);var _e=e.memoizedState;_!==b||$!==_e||Wf.current||jh?(typeof et=="function"&&(Di(e,s,et,o),_e=e.memoizedState),(h=jh||Fi(e,s,h,o,$,_e,j)||!1)?(g||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,_e,j),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,_e,j)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=_e),d.props=o,d.state=_e,d.context=j,o=h):(typeof d.componentDidUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(e.flags|=1024),o=!1)}return jj(i,e,s,o,c,a)}function jj(i,e,s,o,a,c){gj(i,e);var d=(e.flags&128)!==0;if(!o&&!d)return a&&dg(e,s,!1),Zi(i,e,c);o=e.stateNode,Wi.current=e;var _=d&&typeof s.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,i!==null&&d?(e.child=Ug(e,i.child,null,c),e.child=Ug(e,null,_,c)):Xi(i,e,_,c),e.memoizedState=o.state,a&&dg(e,s,!0),e.child}function kj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),yh(i,e.containerInfo)}function lj(i,e,s,o,a){return Ig(),Jg(a),e.flags|=256,Xi(i,e,s,o),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(i){return{baseLanes:i,cachePool:null,transitions:null}}function oj(i,e,s){var o=e.pendingProps,a=L.current,c=!1,d=(e.flags&128)!==0,_;if((_=d)||(_=i!==null&&i.memoizedState===null?!1:(a&2)!==0),_?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(a|=1),G(L,a&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=o.children,i=o.fallback,c?(o=e.mode,c=e.child,d={mode:"hidden",children:d},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,o,0,null),i=Tg(i,o,s,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=nj(s),e.memoizedState=mj,i):qj(e,d));if(a=i.memoizedState,a!==null&&(_=a.dehydrated,_!==null))return rj(i,e,d,o,_,a,s);if(c){c=o.fallback,d=e.mode,a=i.child,_=a.sibling;var j={mode:"hidden",children:o.children};return!(d&1)&&e.child!==a?(o=e.child,o.childLanes=0,o.pendingProps=j,e.deletions=null):(o=Pg(a,j),o.subtreeFlags=a.subtreeFlags&14680064),_!==null?c=Pg(_,c):(c=Tg(c,d,s,null),c.flags|=2),c.return=e,o.return=e,o.sibling=c,e.child=o,o=c,c=e.child,d=i.child.memoizedState,d=d===null?nj(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=i.childLanes&~s,e.memoizedState=mj,o}return c=i.child,i=c.sibling,o=Pg(c,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=s),o.return=e,o.sibling=null,i!==null&&(s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)),e.child=o,e.memoizedState=null,o}function qj(i,e){return e=pj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function sj(i,e,s,o){return o!==null&&Jg(o),Ug(e,i.child,null,s),i=qj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function rj(i,e,s,o,a,c,d){if(s)return e.flags&256?(e.flags&=-257,o=Ki(Error(p(422))),sj(i,e,d,o)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=o.fallback,a=e.mode,o=pj({mode:"visible",children:o.children},a,0,null),c=Tg(c,a,d,null),c.flags|=2,o.return=e,c.return=e,o.sibling=c,e.child=o,e.mode&1&&Ug(e,i.child,null,d),e.child.memoizedState=nj(d),e.memoizedState=mj,c);if(!(e.mode&1))return sj(i,e,d,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var _=o.dgst;return o=_,c=Error(p(419)),o=Ki(c,o,void 0),sj(i,e,d,o)}if(_=(d&i.childLanes)!==0,dh||_){if(o=Q,o!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,ih(i,a),gi(o,i,a,-1))}return tj(),o=Ki(Error(p(421))),sj(i,e,d,o)}return a.data==="$?"?(e.flags|=128,e.child=i.child,e=uj.bind(null,i),a._reactRetry=e,null):(i=c.treeContext,yg=Lf(a.nextSibling),xg=e,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=qj(e,o.children),e.flags|=4096,e)}function vj(i,e,s){i.lanes|=e;var o=i.alternate;o!==null&&(o.lanes|=e),bh(i.return,e,s)}function wj(i,e,s,o,a){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=s,c.tailMode=a)}function xj(i,e,s){var o=e.pendingProps,a=o.revealOrder,c=o.tail;if(Xi(i,e,o.children,s),o=L.current,o&2)o=o&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vj(i,s,e);else if(i.tag===19)vj(i,s,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}o&=1}if(G(L,o),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(s=e.child,a=null;s!==null;)i=s.alternate,i!==null&&Ch(i)===null&&(a=s),s=s.sibling;s=a,s===null?(a=e.child,e.child=null):(a=s.sibling,s.sibling=null),wj(e,!1,a,s,c);break;case"backwards":for(s=null,a=e.child,e.child=null;a!==null;){if(i=a.alternate,i!==null&&Ch(i)===null){e.child=a;break}i=a.sibling,a.sibling=s,s=a,a=i}wj(e,!0,s,null,c);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Zi(i,e,s){if(i!==null&&(e.dependencies=i.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,s=Pg(i,i.pendingProps),e.child=s,s.return=e;i.sibling!==null;)i=i.sibling,s=s.sibling=Pg(i,i.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(i,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,a=e.memoizedProps.value;G(Wg,o._currentValue),o._currentValue=a;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):s&e.child.childLanes?oj(i,e,s):(G(L,L.current&1),i=Zi(i,e,s),i!==null?i.sibling:null);G(L,L.current&1);break;case 19:if(o=(s&e.childLanes)!==0,i.flags&128){if(o)return xj(i,e,s);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(L,L.current),o)break;return null;case 22:case 23:return e.lanes=0,dj(i,e,s)}return Zi(i,e,s)}var zj,Aj,Bj,Cj;zj=function(i,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(i,e,s,o){var a=i.memoizedProps;if(a!==o){i=e.stateNode,xh(uh.current);var c=null;switch(s){case"input":a=Ya(i,a),o=Ya(i,o),c=[];break;case"select":a=A({},a,{value:void 0}),o=A({},o,{value:void 0}),c=[];break;case"textarea":a=gb(i,a),o=gb(i,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(i.onclick=Bf)}ub(s,o);var d;s=null;for(h in a)if(!o.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var _=a[h];for(d in _)_.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea.hasOwnProperty(h)?c||(c=[]):(c=c||[]).push(h,null));for(h in o){var j=o[h];if(_=a?.[h],o.hasOwnProperty(h)&&j!==_&&(j!=null||_!=null))if(h==="style")if(_){for(d in _)!_.hasOwnProperty(d)||j&&j.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in j)j.hasOwnProperty(d)&&_[d]!==j[d]&&(s||(s={}),s[d]=j[d])}else s||(c||(c=[]),c.push(h,s)),s=j;else h==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,_=_?_.__html:void 0,j!=null&&_!==j&&(c=c||[]).push(h,j)):h==="children"?typeof j!="string"&&typeof j!="number"||(c=c||[]).push(h,""+j):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ea.hasOwnProperty(h)?(j!=null&&h==="onScroll"&&D("scroll",i),c||_===j||(c=[])):(c=c||[]).push(h,j))}s&&(c=c||[]).push("style",s);var h=c;(e.updateQueue=h)&&(e.flags|=4)}};Cj=function(i,e,s,o){s!==o&&(e.flags|=4)};function Dj(i,e){if(!I)switch(i.tailMode){case"hidden":e=i.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:o.sibling=null}}function S(i){var e=i.alternate!==null&&i.alternate.child===i.child,s=0,o=0;if(e)for(var a=i.child;a!==null;)s|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=i,a=a.sibling;else for(a=i.child;a!==null;)s|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=i,a=a.sibling;return i.subtreeFlags|=o,i.childLanes=s,e}function Ej(i,e,s){var o=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return o=e.stateNode,zh(),E(Wf),E(H),Eh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(i,e),S(e),null;case 5:Bh(e);var a=xh(wh.current);if(s=e.type,i!==null&&e.stateNode!=null)Bj(i,e,s,o,a),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(i=xh(uh.current),Gg(e)){o=e.stateNode,s=e.type;var c=e.memoizedProps;switch(o[Of]=e,o[Pf]=c,i=(e.mode&1)!==0,s){case"dialog":D("cancel",o),D("close",o);break;case"iframe":case"object":case"embed":D("load",o);break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],o);break;case"source":D("error",o);break;case"img":case"image":case"link":D("error",o),D("load",o);break;case"details":D("toggle",o);break;case"input":Za(o,c),D("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},D("invalid",o);break;case"textarea":hb(o,c),D("invalid",o)}ub(s,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var _=c[d];d==="children"?typeof _=="string"?o.textContent!==_&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,_,i),a=["children",_]):typeof _=="number"&&o.textContent!==""+_&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,_,i),a=["children",""+_]):ea.hasOwnProperty(d)&&_!=null&&d==="onScroll"&&D("scroll",o)}switch(s){case"input":Va(o),db(o,c,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}o=a,e.updateQueue=o,o!==null&&(e.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof o.is=="string"?i=d.createElement(s,{is:o.is}):(i=d.createElement(s),s==="select"&&(d=i,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):i=d.createElementNS(i,s),i[Of]=e,i[Pf]=o,zj(i,e,!1,!1),e.stateNode=i;e:{switch(d=vb(s,o),s){case"dialog":D("cancel",i),D("close",i),a=o;break;case"iframe":case"object":case"embed":D("load",i),a=o;break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],i);a=o;break;case"source":D("error",i),a=o;break;case"img":case"image":case"link":D("error",i),D("load",i),a=o;break;case"details":D("toggle",i),a=o;break;case"input":Za(i,o),a=Ya(i,o),D("invalid",i);break;case"option":a=o;break;case"select":i._wrapperState={wasMultiple:!!o.multiple},a=A({},o,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,o),a=gb(i,o),D("invalid",i);break;default:a=o}ub(s,a),_=a;for(c in _)if(_.hasOwnProperty(c)){var j=_[c];c==="style"?sb(i,j):c==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&nb(i,j)):c==="children"?typeof j=="string"?(s!=="textarea"||j!=="")&&ob(i,j):typeof j=="number"&&ob(i,""+j):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?j!=null&&c==="onScroll"&&D("scroll",i):j!=null&&ta(i,c,j,d))}switch(s){case"input":Va(i),db(i,o,!1);break;case"textarea":Va(i),jb(i);break;case"option":o.value!=null&&i.setAttribute("value",""+Sa(o.value));break;case"select":i.multiple=!!o.multiple,c=o.value,c!=null?fb(i,!!o.multiple,c,!1):o.defaultValue!=null&&fb(i,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(i&&e.stateNode!=null)Cj(i,e,i.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(o=e.stateNode,s=e.memoizedProps,o[Of]=e,(c=o.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(o.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,s,(i.mode&1)!==0)}c&&(e.flags|=4)}else o=(s.nodeType===9?s:s.ownerDocument).createTextNode(o),o[Of]=e,e.stateNode=o}return S(e),null;case 13:if(E(L),o=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),o!==null&&o.dehydrated!==null){if(i===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(o=o!==null,o!==(i!==null&&i.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(i===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(i,e),i===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),c=e.memoizedState,c===null)return S(e),null;if(o=(e.flags&128)!==0,d=c.rendering,d===null)if(o)Dj(c,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(d=Ch(i),d!==null){for(e.flags|=128,Dj(c,!1),o=d.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=s,s=e.child;s!==null;)c=s,i=o,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,i=d.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(L,L.current&1|2),e.child}i=i.sibling}c.tail!==null&&B()>Gj&&(e.flags|=128,o=!0,Dj(c,!1),e.lanes=4194304)}else{if(!o)if(i=Ch(d),i!==null){if(e.flags|=128,o=!0,s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(e),null}else 2*B()-c.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,o=!0,Dj(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(s=c.last,s!==null?s.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,s=L.current,G(L,o?s&1|2:s&1),e):(S(e),null);case 22:case 23:return Hj(),o=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(i,e){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(o){W(i,e,o)}else s.current=null}function Mj(i,e,s){try{s()}catch(o){W(i,e,o)}}var Nj=!1;function Oj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var a=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,_=-1,j=-1,h=0,g=0,b=i,$=null;t:for(;;){for(var et;b!==s||a!==0&&b.nodeType!==3||(_=d+a),b!==c||o!==0&&b.nodeType!==3||(j=d+o),b.nodeType===3&&(d+=b.nodeValue.length),(et=b.firstChild)!==null;)$=b,b=et;for(;;){if(b===i)break t;if($===s&&++h===a&&(_=d),$===c&&++g===o&&(j=d),(et=b.nextSibling)!==null)break;b=$,$=b.parentNode}b=et}s=_===-1||j===-1?null:{start:_,end:j}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=e;V!==null;)if(e=V,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V=i;else for(;V!==null;){e=V;try{var _e=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var nt=_e.memoizedProps,st=_e.memoizedState,tt=e.stateNode,it=tt.getSnapshotBeforeUpdate(e.elementType===e.type?nt:Ci(e.type,nt),st);tt.__reactInternalSnapshotBeforeUpdate=it}break;case 3:var at=e.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ct){W(e,e.return,ct)}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}return _e=Nj,Nj=!1,_e}function Pj(i,e,s){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&i)===i){var c=a.destroy;a.destroy=void 0,c!==void 0&&Mj(e,s,c)}a=a.next}while(a!==o)}}function Qj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&i)===i){var o=s.create;s.destroy=o()}s=s.next}while(s!==e)}}function Rj(i){var e=i.ref;if(e!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof e=="function"?e(i):e.current=i}}function Sj(i){var e=i.alternate;e!==null&&(i.alternate=null,Sj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tj(i){return i.tag===5||i.tag===3||i.tag===4}function Uj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vj(i,e,s){var o=i.tag;if(o===5||o===6)i=i.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(i,e):s.insertBefore(i,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(i,s)):(e=s,e.appendChild(i)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(o!==4&&(i=i.child,i!==null))for(Vj(i,e,s),i=i.sibling;i!==null;)Vj(i,e,s),i=i.sibling}function Wj(i,e,s){var o=i.tag;if(o===5||o===6)i=i.stateNode,e?s.insertBefore(i,e):s.appendChild(i);else if(o!==4&&(i=i.child,i!==null))for(Wj(i,e,s),i=i.sibling;i!==null;)Wj(i,e,s),i=i.sibling}var X$1=null,Xj=!1;function Yj(i,e,s){for(s=s.child;s!==null;)Zj(i,e,s),s=s.sibling}function Zj(i,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,e);case 6:var o=X$1,a=Xj;X$1=null,Yj(i,e,s),X$1=o,Xj=a,X$1!==null&&(Xj?(i=X$1,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X$1.removeChild(s.stateNode));break;case 18:X$1!==null&&(Xj?(i=X$1,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X$1,s.stateNode));break;case 4:o=X$1,a=Xj,X$1=s.stateNode.containerInfo,Xj=!0,Yj(i,e,s),X$1=o,Xj=a;break;case 0:case 11:case 14:case 15:if(!U&&(o=s.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(s,e,d),a=a.next}while(a!==o)}Yj(i,e,s);break;case 1:if(!U&&(Lj(s,e),o=s.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=s.memoizedProps,o.state=s.memoizedState,o.componentWillUnmount()}catch(_){W(s,e,_)}Yj(i,e,s);break;case 21:Yj(i,e,s);break;case 22:s.mode&1?(U=(o=U)||s.memoizedState!==null,Yj(i,e,s),U=o):Yj(i,e,s);break;default:Yj(i,e,s)}}function ak(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Kj),e.forEach(function(o){var a=bk.bind(null,i,o);s.has(o)||(s.add(o),o.then(a,a))})}}function ck(i,e){var s=e.deletions;if(s!==null)for(var o=0;o<s.length;o++){var a=s[o];try{var c=i,d=e,_=d;e:for(;_!==null;){switch(_.tag){case 5:X$1=_.stateNode,Xj=!1;break e;case 3:X$1=_.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=_.stateNode.containerInfo,Xj=!0;break e}_=_.return}if(X$1===null)throw Error(p(160));Zj(c,d,a),X$1=null,Xj=!1;var j=a.alternate;j!==null&&(j.return=null),a.return=null}catch(h){W(a,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,i),e=e.sibling}function dk(i,e){var s=i.alternate,o=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ck(e,i),ek(i),o&4){try{Pj(3,i,i.return),Qj(3,i)}catch(nt){W(i,i.return,nt)}try{Pj(5,i,i.return)}catch(nt){W(i,i.return,nt)}}break;case 1:ck(e,i),ek(i),o&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,i),ek(i),o&512&&s!==null&&Lj(s,s.return),i.flags&32){var a=i.stateNode;try{ob(a,"")}catch(nt){W(i,i.return,nt)}}if(o&4&&(a=i.stateNode,a!=null)){var c=i.memoizedProps,d=s!==null?s.memoizedProps:c,_=i.type,j=i.updateQueue;if(i.updateQueue=null,j!==null)try{_==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(_,d);var h=vb(_,c);for(d=0;d<j.length;d+=2){var g=j[d],b=j[d+1];g==="style"?sb(a,b):g==="dangerouslySetInnerHTML"?nb(a,b):g==="children"?ob(a,b):ta(a,g,b,h)}switch(_){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var $=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var et=c.value;et!=null?fb(a,!!c.multiple,et,!1):$!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(nt){W(i,i.return,nt)}}break;case 6:if(ck(e,i),ek(i),o&4){if(i.stateNode===null)throw Error(p(162));a=i.stateNode,c=i.memoizedProps;try{a.nodeValue=c}catch(nt){W(i,i.return,nt)}}break;case 3:if(ck(e,i),ek(i),o&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(nt){W(i,i.return,nt)}break;case 4:ck(e,i),ek(i);break;case 13:ck(e,i),ek(i),a=i.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(fk=B())),o&4&&ak(i);break;case 22:if(g=s!==null&&s.memoizedState!==null,i.mode&1?(U=(h=U)||g,ck(e,i),U=h):ck(e,i),ek(i),o&8192){if(h=i.memoizedState!==null,(i.stateNode.isHidden=h)&&!g&&i.mode&1)for(V=i,g=i.child;g!==null;){for(b=V=g;V!==null;){switch($=V,et=$.child,$.tag){case 0:case 11:case 14:case 15:Pj(4,$,$.return);break;case 1:Lj($,$.return);var _e=$.stateNode;if(typeof _e.componentWillUnmount=="function"){o=$,s=$.return;try{e=o,_e.props=e.memoizedProps,_e.state=e.memoizedState,_e.componentWillUnmount()}catch(nt){W(o,s,nt)}}break;case 5:Lj($,$.return);break;case 22:if($.memoizedState!==null){gk(b);continue}}et!==null?(et.return=$,V=et):gk(b)}g=g.sibling}e:for(g=null,b=i;;){if(b.tag===5){if(g===null){g=b;try{a=b.stateNode,h?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(_=b.stateNode,j=b.memoizedProps.style,d=j!=null&&j.hasOwnProperty("display")?j.display:null,_.style.display=rb("display",d))}catch(nt){W(i,i.return,nt)}}}else if(b.tag===6){if(g===null)try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(nt){W(i,i.return,nt)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===i)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;g===b&&(g=null),b=b.return}g===b&&(g=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:ck(e,i),ek(i),o&4&&ak(i);break;case 21:break;default:ck(e,i),ek(i)}}function ek(i){var e=i.flags;if(e&2){try{e:{for(var s=i.return;s!==null;){if(Tj(s)){var o=s;break e}s=s.return}throw Error(p(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(ob(a,""),o.flags&=-33);var c=Uj(i);Wj(i,c,a);break;case 3:case 4:var d=o.stateNode.containerInfo,_=Uj(i);Vj(i,_,d);break;default:throw Error(p(161))}}catch(j){W(i,i.return,j)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function hk(i,e,s){V=i,ik(i)}function ik(i,e,s){for(var o=(i.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&o){var d=a.memoizedState!==null||Jj;if(!d){var _=a.alternate,j=_!==null&&_.memoizedState!==null||U;_=Jj;var h=U;if(Jj=d,(U=j)&&!h)for(V=a;V!==null;)d=V,j=d.child,d.tag===22&&d.memoizedState!==null?jk(a):j!==null?(j.return=d,V=j):jk(a);for(;c!==null;)V=c,ik(c),c=c.sibling;V=a,Jj=_,U=h}kk(i)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):kk(i)}}function kk(i){for(;V!==null;){var e=V;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!U)if(s===null)o.componentDidMount();else{var a=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);o.componentDidUpdate(a,s.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&sh(e,c,o);break;case 3:var d=e.updateQueue;if(d!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,d,s)}break;case 5:var _=e.stateNode;if(s===null&&e.flags&4){s=_;var j=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&s.focus();break;case"img":j.src&&(s.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var b=g.dehydrated;b!==null&&bd(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch($){W(e,e.return,$)}}if(e===i){V=null;break}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}}function gk(i){for(;V!==null;){var e=V;if(e===i){V=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V=s;break}V=e.return}}function jk(i){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(j){W(e,s,j)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var a=e.return;try{o.componentDidMount()}catch(j){W(e,a,j)}}var c=e.return;try{Rj(e)}catch(j){W(e,c,j)}break;case 5:var d=e.return;try{Rj(e)}catch(j){W(e,d,j)}}}catch(j){W(e,e.return,j)}if(e===i){V=null;break}var _=e.sibling;if(_!==null){_.return=e.return,V=_;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function gi(i,e,s,o){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(i,s,o),(!(K&2)||i!==Q)&&(i===Q&&(!(K&2)&&(qk|=s),T===4&&Ck(i,Z)),Dk(i,o),s===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(i,e){var s=i.callbackNode;wc(i,e);var o=uc(i,i===Q?Z:0);if(o===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(e=o&-o,i.callbackPriority!==e){if(s!=null&&bc(s),e===1)i.tag===0?ig(Ek.bind(null,i)):hg(Ek.bind(null,i)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(o)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,i))}i.callbackPriority=e,i.callbackNode=s}}function Gk(i,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var s=i.callbackNode;if(Hk()&&i.callbackNode!==s)return null;var o=uc(i,i===Q?Z:0);if(o===0)return null;if(o&30||o&i.expiredLanes||e)e=Ik(i,o);else{e=o;var a=K;K|=2;var c=Jk();(Q!==i||Z!==e)&&(uk=null,Gj=B()+500,Kk(i,e));do try{Lk();break}catch(_){Mk(i,_)}while(!0);$g(),mk.current=c,K=a,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(a=xc(i),a!==0&&(o=a,e=Nk(i,a))),e===1)throw s=pk,Kk(i,0),Ck(i,o),Dk(i,B()),s;if(e===6)Ck(i,o);else{if(a=i.current.alternate,!(o&30)&&!Ok(a)&&(e=Ik(i,o),e===2&&(c=xc(i),c!==0&&(o=c,e=Nk(i,c))),e===1))throw s=pk,Kk(i,0),Ck(i,o),Dk(i,B()),s;switch(i.finishedWork=a,i.finishedLanes=o,e){case 0:case 1:throw Error(p(345));case 2:Pk(i,tk,uk);break;case 3:if(Ck(i,o),(o&130023424)===o&&(e=fk+500-B(),10<e)){if(uc(i,0)!==0)break;if(a=i.suspendedLanes,(a&o)!==o){R(),i.pingedLanes|=i.suspendedLanes&a;break}i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),e);break}Pk(i,tk,uk);break;case 4:if(Ck(i,o),(o&4194240)===o)break;for(e=i.eventTimes,a=-1;0<o;){var d=31-oc(o);c=1<<d,d=e[d],d>a&&(a=d),o&=~c}if(o=a,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*lk(o/1960))-o,10<o){i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),o);break}Pk(i,tk,uk);break;case 5:Pk(i,tk,uk);break;default:throw Error(p(329))}}}return Dk(i,B()),i.callbackNode===s?Gk.bind(null,i):null}function Nk(i,e){var s=sk;return i.current.memoizedState.isDehydrated&&(Kk(i,e).flags|=256),i=Ik(i,e),i!==2&&(e=tk,tk=s,e!==null&&Fj(e)),i}function Fj(i){tk===null?tk=i:tk.push.apply(tk,i)}function Ok(i){for(var e=i;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var o=0;o<s.length;o++){var a=s[o],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(i,e){for(e&=~rk,e&=~qk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var s=31-oc(e),o=1<<s;i[s]=-1,e&=~o}}function Ek(i){if(K&6)throw Error(p(327));Hk();var e=uc(i,0);if(!(e&1))return Dk(i,B()),null;var s=Ik(i,e);if(i.tag!==0&&s===2){var o=xc(i);o!==0&&(e=o,s=Nk(i,o))}if(s===1)throw s=pk,Kk(i,0),Ck(i,e),Dk(i,B()),s;if(s===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Pk(i,tk,uk),Dk(i,B()),null}function Qk(i,e){var s=K;K|=1;try{return i(e)}finally{K=s,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(i){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var s=ok.transition,o=C;try{if(ok.transition=null,C=1,i)return i()}finally{C=o,ok.transition=s,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(i,e){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var o=s;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=i,Y=i=Pg(i.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],o=s.interleaved,o!==null){s.interleaved=null;var a=o.next,c=s.pending;if(c!==null){var d=c.next;c.next=a,o.next=d}s.pending=o}fh=null}return i}function Mk(i,e){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var o=M.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=e,Y=null;break}e:{var c=i,d=s.return,_=s,j=e;if(e=Z,_.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var h=j,g=_,b=g.tag;if(!(g.mode&1)&&(b===0||b===11||b===15)){var $=g.alternate;$?(g.updateQueue=$.updateQueue,g.memoizedState=$.memoizedState,g.lanes=$.lanes):(g.updateQueue=null,g.memoizedState=null)}var et=Ui(d);if(et!==null){et.flags&=-257,Vi(et,d,_,c,e),et.mode&1&&Si(c,h,e),e=et,j=h;var _e=e.updateQueue;if(_e===null){var nt=new Set;nt.add(j),e.updateQueue=nt}else _e.add(j);break e}else{if(!(e&1)){Si(c,h,e),tj();break e}j=Error(p(426))}}else if(I&&_.mode&1){var st=Ui(d);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Vi(st,d,_,c,e),Jg(Ji(j,_));break e}}c=j=Ji(j,_),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var tt=Ni(c,j,e);ph(c,tt);break e;case 1:_=j;var it=c.type,at=c.stateNode;if(!(c.flags&128)&&(typeof it.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Ri===null||!Ri.has(at)))){c.flags|=65536,e&=-e,c.lanes|=e;var ct=Qi(c,_,e);ph(c,ct);break e}}c=c.return}while(c!==null)}Sk(s)}catch(rt){e=rt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var i=mk.current;return mk.current=Rh,i===null?Rh:i}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(i,e){var s=K;K|=2;var o=Jk();(Q!==i||Z!==e)&&(uk=null,Kk(i,e));do try{Tk();break}catch(a){Mk(i,a)}while(!0);if($g(),K=s,mk.current=o,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(i){var e=Vk(i.alternate,i,fj);i.memoizedProps=i.pendingProps,e===null?Sk(i):Y=e,nk.current=null}function Sk(i){var e=i;do{var s=e.alternate;if(i=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(s=Ej(s,e,fj),s!==null){Y=s;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=i}while(e!==null);T===0&&(T=5)}function Pk(i,e,s){var o=C,a=ok.transition;try{ok.transition=null,C=1,Wk(i,e,s,o)}finally{ok.transition=a,C=o}return null}function Wk(i,e,s,o){do Hk();while(wk!==null);if(K&6)throw Error(p(327));s=i.finishedWork;var a=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc(i,c),i===Q&&(Y=Q=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var _=K;K|=4,nk.current=null,Oj(i,s),dk(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,hk(s),dc(),K=_,C=d,ok.transition=c}else i.current=s;if(vk&&(vk=!1,wk=i,xk=a),c=i.pendingLanes,c===0&&(Ri=null),mc(s.stateNode),Dk(i,B()),e!==null)for(o=i.onRecoverableError,s=0;s<e.length;s++)a=e[s],o(a.value,{componentStack:a.stack,digest:a.digest});if(Oi)throw Oi=!1,i=Pi,Pi=null,i;return xk&1&&i.tag!==0&&Hk(),c=i.pendingLanes,c&1?i===zk?yk++:(yk=0,zk=i):yk=0,jg(),null}function Hk(){if(wk!==null){var i=Dc(xk),e=ok.transition,s=C;try{if(ok.transition=null,C=16>i?16:i,wk===null)var o=!1;else{if(i=wk,wk=null,xk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=i.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var _=c.deletions;if(_!==null){for(var j=0;j<_.length;j++){var h=_[j];for(V=h;V!==null;){var g=V;switch(g.tag){case 0:case 11:case 15:Pj(8,g,c)}var b=g.child;if(b!==null)b.return=g,V=b;else for(;V!==null;){g=V;var $=g.sibling,et=g.return;if(Sj(g),g===h){V=null;break}if($!==null){$.return=et,V=$;break}V=et}}}var _e=c.alternate;if(_e!==null){var nt=_e.child;if(nt!==null){_e.child=null;do{var st=nt.sibling;nt.sibling=null,nt=st}while(nt!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var tt=c.sibling;if(tt!==null){tt.return=c.return,V=tt;break e}V=c.return}}var it=i.current;for(V=it;V!==null;){d=V;var at=d.child;if(d.subtreeFlags&2064&&at!==null)at.return=d,V=at;else e:for(d=it;V!==null;){if(_=V,_.flags&2048)try{switch(_.tag){case 0:case 11:case 15:Qj(9,_)}}catch(rt){W(_,_.return,rt)}if(_===d){V=null;break e}var ct=_.sibling;if(ct!==null){ct.return=_.return,V=ct;break e}V=_.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}o=!0}return o}finally{C=s,ok.transition=e}}return!1}function Xk(i,e,s){e=Ji(s,e),e=Ni(i,e,1),i=nh(i,e,1),e=R(),i!==null&&(Ac(i,1,e),Dk(i,e))}function W(i,e,s){if(i.tag===3)Xk(i,i,s);else for(;e!==null;){if(e.tag===3){Xk(e,i,s);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){i=Ji(s,i),i=Qi(e,i,1),e=nh(e,i,1),i=R(),e!==null&&(Ac(e,1,i),Dk(e,i));break}}e=e.return}}function Ti(i,e,s){var o=i.pingCache;o!==null&&o.delete(e),e=R(),i.pingedLanes|=i.suspendedLanes&s,Q===i&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(i,0):rk|=s),Dk(i,e)}function Yk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R();i=ih(i,e),i!==null&&(Ac(i,e,s),Dk(i,s))}function uj(i){var e=i.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(i,s)}function bk(i,e){var s=0;switch(i.tag){case 13:var o=i.stateNode,a=i.memoizedState;a!==null&&(s=a.retryLane);break;case 19:o=i.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(e),Yk(i,s)}var Vk;Vk=function(i,e,s){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(i.lanes&s)&&!(e.flags&128))return dh=!1,yj(i,e,s);dh=!!(i.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;ij(i,e),i=e.pendingProps;var a=Yf(e,H.current);ch(e,s),a=Nh(null,e,o,i,a,s);var c=Sh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(o)?(c=!0,cg(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kh(e),a.updater=Ei,e.stateNode=a,a._reactInternals=e,Ii(e,o,i,s),e=jj(null,e,o,!0,c,s)):(e.tag=0,I&&c&&vg(e),Xi(null,e,a,s),e=e.child),e;case 16:o=e.elementType;e:{switch(ij(i,e),i=e.pendingProps,a=o._init,o=a(o._payload),e.type=o,a=e.tag=Zk(o),i=Ci(o,i),a){case 0:e=cj(null,e,o,i,s);break e;case 1:e=hj(null,e,o,i,s);break e;case 11:e=Yi(null,e,o,i,s);break e;case 14:e=$i(null,e,o,Ci(o.type,i),s);break e}throw Error(p(306,o,""))}return e;case 0:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),cj(i,e,o,a,s);case 1:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),hj(i,e,o,a,s);case 3:e:{if(kj(e),i===null)throw Error(p(387));o=e.pendingProps,c=e.memoizedState,a=c.element,lh(i,e),qh(e,o,null,s);var d=e.memoizedState;if(o=d.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Ji(Error(p(423)),e),e=lj(i,e,o,s,a);break e}else if(o!==a){a=Ji(Error(p(424)),e),e=lj(i,e,o,s,a);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,s=Vg(e,null,o,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),o===a){e=Zi(i,e,s);break e}Xi(i,e,o,s)}e=e.child}return e;case 5:return Ah(e),i===null&&Eg(e),o=e.type,a=e.pendingProps,c=i!==null?i.memoizedProps:null,d=a.children,Ef(o,a)?d=null:c!==null&&Ef(o,c)&&(e.flags|=32),gj(i,e),Xi(i,e,d,s),e.child;case 6:return i===null&&Eg(e),null;case 13:return oj(i,e,s);case 4:return yh(e,e.stateNode.containerInfo),o=e.pendingProps,i===null?e.child=Ug(e,null,o,s):Xi(i,e,o,s),e.child;case 11:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),Yi(i,e,o,a,s);case 7:return Xi(i,e,e.pendingProps,s),e.child;case 8:return Xi(i,e,e.pendingProps.children,s),e.child;case 12:return Xi(i,e,e.pendingProps.children,s),e.child;case 10:e:{if(o=e.type._context,a=e.pendingProps,c=e.memoizedProps,d=a.value,G(Wg,o._currentValue),o._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===a.children&&!Wf.current){e=Zi(i,e,s);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var _=c.dependencies;if(_!==null){d=c.child;for(var j=_.firstContext;j!==null;){if(j.context===o){if(c.tag===1){j=mh(-1,s&-s),j.tag=2;var h=c.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?j.next=j:(j.next=g.next,g.next=j),h.pending=j}}c.lanes|=s,j=c.alternate,j!==null&&(j.lanes|=s),bh(c.return,s,e),_.lanes|=s;break}j=j.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=s,_=d.alternate,_!==null&&(_.lanes|=s),bh(d,s,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(i,e,a.children,s),e=e.child}return e;case 9:return a=e.type,o=e.pendingProps.children,ch(e,s),a=eh(a),o=o(a),e.flags|=1,Xi(i,e,o,s),e.child;case 14:return o=e.type,a=Ci(o,e.pendingProps),a=Ci(o.type,a),$i(i,e,o,a,s);case 15:return bj(i,e,e.type,e.pendingProps,s);case 17:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),ij(i,e),e.tag=1,Zf(o)?(i=!0,cg(e)):i=!1,ch(e,s),Gi(e,o,a),Ii(e,o,a,s),jj(null,e,o,!0,i,s);case 19:return xj(i,e,s);case 22:return dj(i,e,s)}throw Error(p(156,e.tag))};function Fk(i,e){return ac(i,e)}function $k(i,e,s,o){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,s,o){return new $k(i,e,s,o)}function aj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zk(i){if(typeof i=="function")return aj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function Pg(i,e){var s=i.alternate;return s===null?(s=Bg(i.tag,e,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=e,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function Rg(i,e,s,o,a,c){var d=2;if(o=i,typeof i=="function")aj(i)&&(d=1);else if(typeof i=="string")d=5;else e:switch(i){case ya:return Tg(s.children,a,c,e);case za:d=8,a|=8;break;case Aa:return i=Bg(12,s,e,a|2),i.elementType=Aa,i.lanes=c,i;case Ea:return i=Bg(13,s,e,a),i.elementType=Ea,i.lanes=c,i;case Fa:return i=Bg(19,s,e,a),i.elementType=Fa,i.lanes=c,i;case Ia:return pj(s,a,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,o=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(d,s,e,a),e.elementType=i,e.type=o,e.lanes=c,e}function Tg(i,e,s,o){return i=Bg(7,i,o,e),i.lanes=s,i}function pj(i,e,s,o){return i=Bg(22,i,o,e),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function Qg(i,e,s){return i=Bg(6,i,null,e),i.lanes=s,i}function Sg(i,e,s){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=s,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function al(i,e,s,o,a){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function bl(i,e,s,o,a,c,d,_,j){return i=new al(i,e,s,_,j),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:o,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),i}function cl(i,e,s){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:i,containerInfo:e,implementation:s}}function dl(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,e)}return e}function el(i,e,s,o,a,c,d,_,j){return i=bl(s,o,!0,i,a,c,d,_,j),i.context=dl(null),s=i.current,o=R(),a=yi(s),c=mh(o,a),c.callback=e??null,nh(s,c,a),i.current.lanes=a,Ac(i,a,o),Dk(i,o),i}function fl(i,e,s,o){var a=e.current,c=R(),d=yi(a);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(c,d),e.payload={element:i},o=o===void 0?null:o,o!==null&&(e.callback=o),i=nh(a,e,d),i!==null&&(gi(i,a,d,c),oh(i,a,d)),d}function gl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function hl(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<e?s:e}}function il(i,e){hl(i,e),(i=i.alternate)&&hl(i,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(i){console.error(i)};function ll(i){this._internalRoot=i}ml.prototype.render=ll.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(i,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Rk(function(){fl(null,i,null,null)}),e[uf]=null}};function ml(i){this._internalRoot=i}ml.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function nl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(i,e,s,o,a){if(a){if(typeof o=="function"){var c=o;o=function(){var h=gl(d);c.call(h)}}var d=el(e,o,i,0,null,!1,!1,"",pl);return i._reactRootContainer=d,i[uf]=d.current,sf(i.nodeType===8?i.parentNode:i),Rk(),d}for(;a=i.lastChild;)i.removeChild(a);if(typeof o=="function"){var _=o;o=function(){var h=gl(j);_.call(h)}}var j=bl(i,0,!1,null,null,!1,!1,"",pl);return i._reactRootContainer=j,i[uf]=j.current,sf(i.nodeType===8?i.parentNode:i),Rk(function(){fl(e,j,s,o)}),j}function rl(i,e,s,o,a){var c=s._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var _=a;a=function(){var j=gl(d);_.call(j)}}fl(e,d,i,a)}else d=ql(s,e,i,a,o);return gl(d)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var o=ih(i,1);if(o!==null){var a=R();gi(o,i,1,a)}}),il(i,1)}};Fc=function(i){if(i.tag===13){var e=ih(i,134217728);if(e!==null){var s=R();gi(e,i,134217728,s)}il(i,134217728)}};Gc=function(i){if(i.tag===13){var e=yi(i),s=ih(i,e);if(s!==null){var o=R();gi(s,i,e,o)}il(i,e)}};Hc=function(){return C};Ic=function(i,e){var s=C;try{return C=i,e()}finally{C=s}};yb=function(i,e,s){switch(e){case"input":if(bb(i,s),e=s.name,s.type==="radio"&&e!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var o=s[e];if(o!==i&&o.form===i.form){var a=Db(o);if(!a)throw Error(p(90));Wa(o),bb(o,a)}}}break;case"textarea":ib(i,s);break;case"select":e=s.value,e!=null&&fb(i,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(i,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(i,e,null,s)};reactDom_production_min.createRoot=function(i,e){if(!nl(i))throw Error(p(299));var s=!1,o="",a=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=bl(i,1,!1,null,null,s,!1,o,a),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ll(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Rk(i)};reactDom_production_min.hydrate=function(i,e,s){if(!ol(e))throw Error(p(200));return rl(null,i,e,!0,s)};reactDom_production_min.hydrateRoot=function(i,e,s){if(!nl(i))throw Error(p(405));var o=s!=null&&s.hydratedSources||null,a=!1,c="",d=kl;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),e=el(e,null,i,1,s??null,a,!1,c,d),i[uf]=e.current,sf(i),o)for(i=0;i<o.length;i++)s=o[i],a=s._getVersion,a=a(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,a]:e.mutableSourceEagerHydrationData.push(s,a);return new ml(e)};reactDom_production_min.render=function(i,e,s){if(!ol(e))throw Error(p(200));return rl(null,i,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!ol(i))throw Error(p(40));return i._reactRootContainer?(Rk(function(){rl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,s,o){if(!ol(s))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return rl(i,e,s,!1,o)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const AssistantState={IDLE:"IDLE",CONNECTING:"CONNECTING",LISTENING:"LISTENING",THINKING:"THINKING",SPEAKING:"SPEAKING",ERROR:"ERROR"},AppTab={ASSISTANT:"assistant",DASHBOARD:"dashboard",RESUME:"resume",SETTINGS:"settings"},JobStatus={APPLIED:"Applied",INTERVIEWING:"Interviewing",REJECTED:"Rejected",OFFER:"Offer",GHOSTED:"Ghosted"},VoiceNames={ZEPHYR:"Zephyr",PUCK:"Puck",CHARON:"Charon",KORE:"Kore",FENRIR:"Fenrir"},ConcisenessLevels={CONCISE:"Concise",NORMAL:"Normal",DETAILED:"Detailed"},Timezones=[{label:"UTC",value:"UTC"},{label:"London (GMT)",value:"Europe/London"},{label:"New York (EST)",value:"America/New_York"},{label:"San Francisco (PST)",value:"America/Los_Angeles"},{label:"Tokyo (JST)",value:"Asia/Tokyo"},{label:"India (IST)",value:"Asia/Kolkata"},{label:"Singapore (SGT)",value:"Asia/Singapore"},{label:"Sydney (AEST)",value:"Australia/Sydney"}],OAUTH_CONFIG={SCOPES:"openid profile email https://www.googleapis.com/auth/gmail.readonly"},DEFAULT_SETTINGS={userName:"",userEmail:"",userPicture:"",targetRole:"",voiceName:VoiceNames.ZEPHYR,conciseness:ConcisenessLevels.NORMAL,timezone:"UTC",isGmailConnected:!1,gmailAccessToken:"",gmailRefreshToken:"",gmailClientId:"",gmailCode:"",gmailClientSecret:"",geminiApiKey:""},STORAGE_KEYS={JOBS:"astra-jobs",SETTINGS:"astra-settings"},AUDIO_CONFIG={INPUT_SAMPLE_RATE:16e3,OUTPUT_SAMPLE_RATE:24e3,BUFFER_SIZE:4096,FFT_SIZE:256};function decode(i){const e=atob(i),s=e.length,o=new Uint8Array(s);for(let a=0;a<s;a++)o[a]=e.charCodeAt(a);return o}function encode(i){let e="";const s=i.byteLength;for(let o=0;o<s;o++)e+=String.fromCharCode(i[o]);return btoa(e)}async function decodeAudioData(i,e,s,o){const a=new Int16Array(i.buffer),c=a.length/o,d=e.createBuffer(o,c,s);for(let _=0;_<o;_++){const j=d.getChannelData(_);for(let h=0;h<c;h++)j[h]=a[h*o+_]/32768}return d}function createAudioBlob(i){const e=i.length,s=new Int16Array(e);for(let o=0;o<e;o++){const a=Math.max(-1,Math.min(1,i[o]));s[o]=a<0?a*32768:a*32767}return{data:encode(new Uint8Array(s.buffer)),mimeType:"audio/pcm;rate=16000"}}var define_globalThis_process_env_default={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _defaultBaseGeminiUrl,_defaultBaseVertexUrl;function getDefaultBaseUrls(){return{geminiUrl:_defaultBaseGeminiUrl,vertexUrl:_defaultBaseVertexUrl}}function getBaseUrl(i,e,s,o){var a,c;if(!i?.baseUrl){const d=getDefaultBaseUrls();return e?(a=d.vertexUrl)!==null&&a!==void 0?a:s:(c=d.geminiUrl)!==null&&c!==void 0?c:o}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseModule{}function formatMap(i,e){const s=/\{([^}]+)\}/g;return i.replace(s,(o,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const c=e[a];return c!=null?String(c):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function setValueByPath(i,e,s){for(let c=0;c<e.length-1;c++){const d=e[c];if(d.endsWith("[]")){const _=d.slice(0,-2);if(!(_ in i))if(Array.isArray(s))i[_]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(i[_])){const j=i[_];if(Array.isArray(s))for(let h=0;h<j.length;h++){const g=j[h];setValueByPath(g,e.slice(c+1),s[h])}else for(const h of j)setValueByPath(h,e.slice(c+1),s)}return}else if(d.endsWith("[0]")){const _=d.slice(0,-3);_ in i||(i[_]=[{}]);const j=i[_];setValueByPath(j[0],e.slice(c+1),s);return}(!i[d]||typeof i[d]!="object")&&(i[d]={}),i=i[d]}const o=e[e.length-1],a=i[o];if(a!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===a)return;if(typeof a=="object"&&typeof s=="object"&&a!==null&&s!==null)Object.assign(a,s);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(i,s):i[o]=s}function getValueByPath(i,e,s=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let o=0;o<e.length;o++){if(typeof i!="object"||i===null)return s;const a=e[o];if(a.endsWith("[]")){const c=a.slice(0,-2);if(c in i){const d=i[c];return Array.isArray(d)?d.map(_=>getValueByPath(_,e.slice(o+1),s)):s}else return s}else i=i[a]}return i}catch(o){if(o instanceof TypeError)return s;throw o}}function moveValueByPath(i,e){for(const[s,o]of Object.entries(e)){const a=s.split("."),c=o.split("."),d=new Set;let _=-1;for(let j=0;j<a.length;j++)if(a[j]==="*"){_=j;break}if(_!==-1&&c.length>_)for(let j=_;j<c.length;j++){const h=c[j];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&d.add(h)}_moveValueRecursive(i,a,c,0,d)}}function _moveValueRecursive(i,e,s,o,a){if(o>=e.length||typeof i!="object"||i===null)return;const c=e[o];if(c.endsWith("[]")){const d=c.slice(0,-2),_=i;if(d in _&&Array.isArray(_[d]))for(const j of _[d])_moveValueRecursive(j,e,s,o+1,a)}else if(c==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const d=i,_=Object.keys(d).filter(h=>!h.startsWith("_")&&!a.has(h)),j={};for(const h of _)j[h]=d[h];for(const[h,g]of Object.entries(j)){const b=[];for(const $ of s.slice(o))$==="*"?b.push(h):b.push($);setValueByPath(d,b,g)}for(const h of _)delete d[h]}}else{const d=i;c in d&&_moveValueRecursive(d[c],e,s,o+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tBytes$1(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fetchPredictOperationParametersToVertex(i){const e={},s=getValueByPath(i,["operationName"]);s!=null&&setValueByPath(e,["operationName"],s);const o=getValueByPath(i,["resourceName"]);return o!=null&&setValueByPath(e,["_url","resourceName"],o),e}function generateVideosOperationFromMldev$1(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata"]);o!=null&&setValueByPath(e,["metadata"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["response","generateVideoResponse"]);return d!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev$1(d)),e}function generateVideosOperationFromVertex$1(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata"]);o!=null&&setValueByPath(e,["metadata"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["response"]);return d!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex$1(d)),e}function generateVideosResponseFromMldev$1(i){const e={},s=getValueByPath(i,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>generatedVideoFromMldev$1(d))),setValueByPath(e,["generatedVideos"],c)}const o=getValueByPath(i,["raiMediaFilteredCount"]);o!=null&&setValueByPath(e,["raiMediaFilteredCount"],o);const a=getValueByPath(i,["raiMediaFilteredReasons"]);return a!=null&&setValueByPath(e,["raiMediaFilteredReasons"],a),e}function generateVideosResponseFromVertex$1(i){const e={},s=getValueByPath(i,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>generatedVideoFromVertex$1(d))),setValueByPath(e,["generatedVideos"],c)}const o=getValueByPath(i,["raiMediaFilteredCount"]);o!=null&&setValueByPath(e,["raiMediaFilteredCount"],o);const a=getValueByPath(i,["raiMediaFilteredReasons"]);return a!=null&&setValueByPath(e,["raiMediaFilteredReasons"],a),e}function generatedVideoFromMldev$1(i){const e={},s=getValueByPath(i,["video"]);return s!=null&&setValueByPath(e,["video"],videoFromMldev$1(s)),e}function generatedVideoFromVertex$1(i){const e={},s=getValueByPath(i,["_self"]);return s!=null&&setValueByPath(e,["video"],videoFromVertex$1(s)),e}function getOperationParametersToMldev(i){const e={},s=getValueByPath(i,["operationName"]);return s!=null&&setValueByPath(e,["_url","operationName"],s),e}function getOperationParametersToVertex(i){const e={},s=getValueByPath(i,["operationName"]);return s!=null&&setValueByPath(e,["_url","operationName"],s),e}function importFileOperationFromMldev$1(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata"]);o!=null&&setValueByPath(e,["metadata"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["response"]);return d!=null&&setValueByPath(e,["response"],importFileResponseFromMldev$1(d)),e}function importFileResponseFromMldev$1(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["parent"]);o!=null&&setValueByPath(e,["parent"],o);const a=getValueByPath(i,["documentName"]);return a!=null&&setValueByPath(e,["documentName"],a),e}function uploadToFileSearchStoreOperationFromMldev(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata"]);o!=null&&setValueByPath(e,["metadata"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["response"]);return d!=null&&setValueByPath(e,["response"],uploadToFileSearchStoreResponseFromMldev(d)),e}function uploadToFileSearchStoreResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["parent"]);o!=null&&setValueByPath(e,["parent"],o);const a=getValueByPath(i,["documentName"]);return a!=null&&setValueByPath(e,["documentName"],a),e}function videoFromMldev$1(i){const e={},s=getValueByPath(i,["uri"]);s!=null&&setValueByPath(e,["uri"],s);const o=getValueByPath(i,["encodedVideo"]);o!=null&&setValueByPath(e,["videoBytes"],tBytes$1(o));const a=getValueByPath(i,["encoding"]);return a!=null&&setValueByPath(e,["mimeType"],a),e}function videoFromVertex$1(i){const e={},s=getValueByPath(i,["gcsUri"]);s!=null&&setValueByPath(e,["uri"],s);const o=getValueByPath(i,["bytesBase64Encoded"]);o!=null&&setValueByPath(e,["videoBytes"],tBytes$1(o));const a=getValueByPath(i,["mimeType"]);return a!=null&&setValueByPath(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Outcome;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Outcome||(Outcome={}));var Language;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Language||(Language={}));var FunctionResponseScheduling;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(FunctionResponseScheduling||(FunctionResponseScheduling={}));var Type;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Type||(Type={}));var Mode;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Mode||(Mode={}));var ApiSpec;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ApiSpec||(ApiSpec={}));var AuthType;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(AuthType||(AuthType={}));var HttpElementLocation;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(HttpElementLocation||(HttpElementLocation={}));var PhishBlockThreshold;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(PhishBlockThreshold||(PhishBlockThreshold={}));var ThinkingLevel;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(ThinkingLevel||(ThinkingLevel={}));var HarmCategory;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(HarmCategory||(HarmCategory={}));var HarmBlockMethod;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(HarmBlockMethod||(HarmBlockMethod={}));var HarmBlockThreshold;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(HarmBlockThreshold||(HarmBlockThreshold={}));var FinishReason;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(FinishReason||(FinishReason={}));var HarmProbability;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var HarmSeverity;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HarmSeverity||(HarmSeverity={}));var UrlRetrievalStatus;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(UrlRetrievalStatus||(UrlRetrievalStatus={}));var BlockedReason;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(BlockedReason||(BlockedReason={}));var TrafficType;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(TrafficType||(TrafficType={}));var Modality;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Modality||(Modality={}));var MediaResolution;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MediaResolution||(MediaResolution={}));var TuningMode;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TuningMode||(TuningMode={}));var AdapterSize;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AdapterSize||(AdapterSize={}));var JobState;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(JobState||(JobState={}));var TuningTask;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(TuningTask||(TuningTask={}));var PartMediaResolutionLevel;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(PartMediaResolutionLevel||(PartMediaResolutionLevel={}));var FeatureSelectionPreference;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(FeatureSelectionPreference||(FeatureSelectionPreference={}));var Behavior;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Behavior||(Behavior={}));var DynamicRetrievalConfigMode;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalConfigMode||(DynamicRetrievalConfigMode={}));var Environment;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Environment||(Environment={}));var FunctionCallingConfigMode;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(FunctionCallingConfigMode||(FunctionCallingConfigMode={}));var SafetyFilterLevel;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(SafetyFilterLevel||(SafetyFilterLevel={}));var PersonGeneration;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(PersonGeneration||(PersonGeneration={}));var ImagePromptLanguage;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(ImagePromptLanguage||(ImagePromptLanguage={}));var MaskReferenceMode;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MaskReferenceMode||(MaskReferenceMode={}));var ControlReferenceType;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ControlReferenceType||(ControlReferenceType={}));var SubjectReferenceType;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SubjectReferenceType||(SubjectReferenceType={}));var EditMode;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EditMode||(EditMode={}));var SegmentMode;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(SegmentMode||(SegmentMode={}));var VideoGenerationReferenceType;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(VideoGenerationReferenceType||(VideoGenerationReferenceType={}));var VideoGenerationMaskMode;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(VideoGenerationMaskMode||(VideoGenerationMaskMode={}));var VideoCompressionQuality;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(VideoCompressionQuality||(VideoCompressionQuality={}));var TuningMethod;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(TuningMethod||(TuningMethod={}));var DocumentState;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(DocumentState||(DocumentState={}));var FileState;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(FileState||(FileState={}));var FileSource;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(FileSource||(FileSource={}));var TurnCompleteReason;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(TurnCompleteReason||(TurnCompleteReason={}));var MediaModality;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(MediaModality||(MediaModality={}));var VadSignalType;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(VadSignalType||(VadSignalType={}));var StartSensitivity;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(StartSensitivity||(StartSensitivity={}));var EndSensitivity;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EndSensitivity||(EndSensitivity={}));var ActivityHandling;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(ActivityHandling||(ActivityHandling={}));var TurnCoverage;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(TurnCoverage||(TurnCoverage={}));var Scale;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Scale||(Scale={}));var MusicGenerationMode;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(MusicGenerationMode||(MusicGenerationMode={}));var LiveMusicPlaybackControl;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(LiveMusicPlaybackControl||(LiveMusicPlaybackControl={}));class HttpResponse{constructor(e){const s={};for(const o of e.headers.entries())s[o[0]]=o[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class GenerateContentResponse{get text(){var e,s,o,a,c,d,_,j;if(((a=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const b=[];for(const $ of(j=(_=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||_===void 0?void 0:_.parts)!==null&&j!==void 0?j:[]){for(const[et,_e]of Object.entries($))et!=="text"&&et!=="thought"&&et!=="thoughtSignature"&&(_e!==null||_e!==void 0)&&b.push(et);if(typeof $.text=="string"){if(typeof $.thought=="boolean"&&$.thought)continue;g=!0,h+=$.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,s,o,a,c,d,_,j;if(((a=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const b of(j=(_=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||_===void 0?void 0:_.parts)!==null&&j!==void 0?j:[]){for(const[$,et]of Object.entries(b))$!=="inlineData"&&(et!==null||et!==void 0)&&g.push($);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,s,o,a,c,d,_,j;if(((a=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(j=(_=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||_===void 0?void 0:_.parts)===null||j===void 0?void 0:j.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if(h?.length!==0)return h}get executableCode(){var e,s,o,a,c,d,_,j,h;if(((a=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(j=(_=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||_===void 0?void 0:_.parts)===null||j===void 0?void 0:j.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(g?.length!==0)return(h=g?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,s,o,a,c,d,_,j,h;if(((a=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(j=(_=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||_===void 0?void 0:_.parts)===null||j===void 0?void 0:j.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(g?.length!==0)return(h=g?.[0])===null||h===void 0?void 0:h.output}}class EmbedContentResponse{}class GenerateImagesResponse{}class EditImageResponse{}class UpscaleImageResponse{}class RecontextImageResponse{}class SegmentImageResponse{}class ListModelsResponse{}class DeleteModelResponse{}class CountTokensResponse{}class ComputeTokensResponse{}class GenerateVideosOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new GenerateVideosOperation;let a;const c=e;return s?a=generateVideosOperationFromVertex$1(c):a=generateVideosOperationFromMldev$1(c),Object.assign(o,a),o}}class ListTuningJobsResponse{}class CancelTuningJobResponse{}class DeleteCachedContentResponse{}class ListCachedContentsResponse{}class ListDocumentsResponse{}class ListFileSearchStoresResponse{}class UploadToFileSearchStoreResumableResponse{}class ImportFileOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new ImportFileOperation,c=importFileOperationFromMldev$1(e);return Object.assign(o,c),o}}class ListFilesResponse{}class CreateFileResponse{}class DeleteFileResponse{}class ListBatchJobsResponse{}class LiveServerMessage{get text(){var e,s,o;let a="",c=!1;const d=[];for(const _ of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[j,h]of Object.entries(_))j!=="text"&&j!=="thought"&&h!==null&&d.push(j);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;c=!0,a+=_.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?a:void 0}get data(){var e,s,o;let a="";const c=[];for(const d of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[_,j]of Object.entries(d))_!=="inlineData"&&j!==null&&c.push(_);d.inlineData&&typeof d.inlineData.data=="string"&&(a+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class LiveMusicServerMessage{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class UploadToFileSearchStoreOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new UploadToFileSearchStoreOperation,c=uploadToFileSearchStoreOperationFromMldev(e);return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tModel(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tCachesModel(i,e){const s=tModel(i,e);return s?s.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${s}`:s.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${s}`:s:""}function tBlobs(i){return Array.isArray(i)?i.map(e=>tBlob(e)):[tBlob(i)]}function tBlob(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function tImageBlob(i){const e=tBlob(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tAudioBlob(i){const e=tBlob(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tPart(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function tParts(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>tPart(e)):[tPart(i)]}function _isContent(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function _isFunctionCallPart(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function _isFunctionResponsePart(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function tContent(i){if(i==null)throw new Error("ContentUnion is required");return _isContent(i)?i:{role:"user",parts:tParts(i)}}function tContentsForEmbed(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const o=tContent(s);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(i.isVertexAI()){const s=tContent(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>tContent(s)):[tContent(e)]}function tContents(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(_isFunctionCallPart(i)||_isFunctionResponsePart(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tContent(i)]}const e=[],s=[],o=_isContent(i[0]);for(const a of i){const c=_isContent(a);if(c!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(a);else{if(_isFunctionCallPart(a)||_isFunctionResponsePart(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(a)}}return o||e.push({role:"user",parts:tParts(s)}),e}function flattenTypeArrayToAnyOf(i,e){i.includes("null")&&(e.nullable=!0);const s=i.filter(o=>o!=="null");if(s.length===1)e.type=Object.values(Type).includes(s[0].toUpperCase())?s[0].toUpperCase():Type.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of s)e.anyOf.push({type:Object.values(Type).includes(o.toUpperCase())?o.toUpperCase():Type.TYPE_UNSPECIFIED})}}function processJsonSchema(i){const e={},s=["items"],o=["anyOf"],a=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=i.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(e.nullable=!0,i=c[1]):c[1].type==="null"&&(e.nullable=!0,i=c[0])),i.type instanceof Array&&flattenTypeArrayToAnyOf(i.type,e);for(const[d,_]of Object.entries(i))if(_!=null)if(d=="type"){if(_==="null")throw new Error("type: null can not be the only possible type for the field.");if(_ instanceof Array)continue;e.type=Object.values(Type).includes(_.toUpperCase())?_.toUpperCase():Type.TYPE_UNSPECIFIED}else if(s.includes(d))e[d]=processJsonSchema(_);else if(o.includes(d)){const j=[];for(const h of _){if(h.type=="null"){e.nullable=!0;continue}j.push(processJsonSchema(h))}e[d]=j}else if(a.includes(d)){const j={};for(const[h,g]of Object.entries(_))j[h]=processJsonSchema(g);e[d]=j}else{if(d==="additionalProperties")continue;e[d]=_}return e}function tSchema(i){return processJsonSchema(i)}function tSpeechConfig(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function tLiveSpeechConfig(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function tTool(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=processJsonSchema(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=processJsonSchema(e.response));return i}function tTools(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of i)e.push(s);return e}function resourceName(i,e,s,o=1){const a=!e.startsWith(`${s}/`)&&e.split("/").length===o;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:a?`projects/${i.getProject()}/locations/${i.getLocation()}/${s}/${e}`:e:a?`${s}/${e}`:e}function tCachedContentName(i,e){if(typeof e!="string")throw new Error("name must be a string");return resourceName(i,e,"cachedContents")}function tTuningJobStatus(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function tBytes(i){return tBytes$1(i)}function _isFile(i){return i!=null&&typeof i=="object"&&"name"in i}function isGeneratedVideo(i){return i!=null&&typeof i=="object"&&"video"in i}function isVideo(i){return i!=null&&typeof i=="object"&&"uri"in i}function tFileName(i){var e;let s;if(_isFile(i)&&(s=i.name),!(isVideo(i)&&(s=i.uri,s===void 0))&&!(isGeneratedVideo(i)&&(s=(e=i.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof i=="string"&&(s=i),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const a=s.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${s}`);s=a[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function tModelsUrl(i,e){let s;return i.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function tExtractModels(i){for(const e of["models","tunedModels","publisherModels"])if(hasField(i,e))return i[e];return[]}function hasField(i,e){return i!==null&&typeof i=="object"&&e in i}function mcpToGeminiTool(i,e={}){const s=i,o={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(o.responseJsonSchema=s.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function mcpToolsToGeminiTool(i,e={}){const s=[],o=new Set;for(const a of i){const c=a.name;if(o.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);o.add(c);const d=mcpToGeminiTool(a,e);d.functionDeclarations&&s.push(...d.functionDeclarations)}return{functionDeclarations:s}}function tBatchJobSource(i,e){let s;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const o=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,a=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(i.isVertexAI()){if(a>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function tBatchJobDestination(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tRecvBatchJobDestination(i){if(typeof i!="object"||i===null)return{};const e=i,s=e.inlinedResponses;if(typeof s!="object"||s===null)return i;const a=s.inlinedResponses;if(!Array.isArray(a)||a.length===0)return i;let c=!1;for(const d of a){if(typeof d!="object"||d===null)continue;const j=d.response;if(typeof j!="object"||j===null)continue;if(j.embedding!==void 0){c=!0;break}}return c&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function tBatchJobName(i,e){const s=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function tJobState(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function batchJobDestinationFromMldev(i){const e={},s=getValueByPath(i,["responsesFile"]);s!=null&&setValueByPath(e,["fileName"],s);const o=getValueByPath(i,["inlinedResponses","inlinedResponses"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>inlinedResponseFromMldev(d))),setValueByPath(e,["inlinedResponses"],c)}const a=getValueByPath(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["inlinedEmbedContentResponses"],c)}return e}function batchJobDestinationFromVertex(i){const e={},s=getValueByPath(i,["predictionsFormat"]);s!=null&&setValueByPath(e,["format"],s);const o=getValueByPath(i,["gcsDestination","outputUriPrefix"]);o!=null&&setValueByPath(e,["gcsUri"],o);const a=getValueByPath(i,["bigqueryDestination","outputUri"]);return a!=null&&setValueByPath(e,["bigqueryUri"],a),e}function batchJobDestinationToVertex(i){const e={},s=getValueByPath(i,["format"]);s!=null&&setValueByPath(e,["predictionsFormat"],s);const o=getValueByPath(i,["gcsUri"]);o!=null&&setValueByPath(e,["gcsDestination","outputUriPrefix"],o);const a=getValueByPath(i,["bigqueryUri"]);if(a!=null&&setValueByPath(e,["bigqueryDestination","outputUri"],a),getValueByPath(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(getValueByPath(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function batchJobFromMldev(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata","displayName"]);o!=null&&setValueByPath(e,["displayName"],o);const a=getValueByPath(i,["metadata","state"]);a!=null&&setValueByPath(e,["state"],tJobState(a));const c=getValueByPath(i,["metadata","createTime"]);c!=null&&setValueByPath(e,["createTime"],c);const d=getValueByPath(i,["metadata","endTime"]);d!=null&&setValueByPath(e,["endTime"],d);const _=getValueByPath(i,["metadata","updateTime"]);_!=null&&setValueByPath(e,["updateTime"],_);const j=getValueByPath(i,["metadata","model"]);j!=null&&setValueByPath(e,["model"],j);const h=getValueByPath(i,["metadata","output"]);return h!=null&&setValueByPath(e,["dest"],batchJobDestinationFromMldev(tRecvBatchJobDestination(h))),e}function batchJobFromVertex(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["displayName"]);o!=null&&setValueByPath(e,["displayName"],o);const a=getValueByPath(i,["state"]);a!=null&&setValueByPath(e,["state"],tJobState(a));const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["createTime"]);d!=null&&setValueByPath(e,["createTime"],d);const _=getValueByPath(i,["startTime"]);_!=null&&setValueByPath(e,["startTime"],_);const j=getValueByPath(i,["endTime"]);j!=null&&setValueByPath(e,["endTime"],j);const h=getValueByPath(i,["updateTime"]);h!=null&&setValueByPath(e,["updateTime"],h);const g=getValueByPath(i,["model"]);g!=null&&setValueByPath(e,["model"],g);const b=getValueByPath(i,["inputConfig"]);b!=null&&setValueByPath(e,["src"],batchJobSourceFromVertex(b));const $=getValueByPath(i,["outputConfig"]);$!=null&&setValueByPath(e,["dest"],batchJobDestinationFromVertex(tRecvBatchJobDestination($)));const et=getValueByPath(i,["completionStats"]);return et!=null&&setValueByPath(e,["completionStats"],et),e}function batchJobSourceFromVertex(i){const e={},s=getValueByPath(i,["instancesFormat"]);s!=null&&setValueByPath(e,["format"],s);const o=getValueByPath(i,["gcsSource","uris"]);o!=null&&setValueByPath(e,["gcsUri"],o);const a=getValueByPath(i,["bigquerySource","inputUri"]);return a!=null&&setValueByPath(e,["bigqueryUri"],a),e}function batchJobSourceToMldev(i,e){const s={};if(getValueByPath(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(getValueByPath(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=getValueByPath(e,["fileName"]);o!=null&&setValueByPath(s,["fileName"],o);const a=getValueByPath(e,["inlinedRequests"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>inlinedRequestToMldev(i,d))),setValueByPath(s,["requests","requests"],c)}return s}function batchJobSourceToVertex(i){const e={},s=getValueByPath(i,["format"]);s!=null&&setValueByPath(e,["instancesFormat"],s);const o=getValueByPath(i,["gcsUri"]);o!=null&&setValueByPath(e,["gcsSource","uris"],o);const a=getValueByPath(i,["bigqueryUri"]);if(a!=null&&setValueByPath(e,["bigquerySource","inputUri"],a),getValueByPath(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function blobToMldev$4(i){const e={},s=getValueByPath(i,["data"]);if(s!=null&&setValueByPath(e,["data"],s),getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function cancelBatchJobParametersToMldev(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tBatchJobName(i,o)),s}function cancelBatchJobParametersToVertex(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tBatchJobName(i,o)),s}function candidateFromMldev$1(i){const e={},s=getValueByPath(i,["content"]);s!=null&&setValueByPath(e,["content"],s);const o=getValueByPath(i,["citationMetadata"]);o!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev$1(o));const a=getValueByPath(i,["tokenCount"]);a!=null&&setValueByPath(e,["tokenCount"],a);const c=getValueByPath(i,["finishReason"]);c!=null&&setValueByPath(e,["finishReason"],c);const d=getValueByPath(i,["avgLogprobs"]);d!=null&&setValueByPath(e,["avgLogprobs"],d);const _=getValueByPath(i,["groundingMetadata"]);_!=null&&setValueByPath(e,["groundingMetadata"],_);const j=getValueByPath(i,["index"]);j!=null&&setValueByPath(e,["index"],j);const h=getValueByPath(i,["logprobsResult"]);h!=null&&setValueByPath(e,["logprobsResult"],h);const g=getValueByPath(i,["safetyRatings"]);if(g!=null){let $=g;Array.isArray($)&&($=$.map(et=>et)),setValueByPath(e,["safetyRatings"],$)}const b=getValueByPath(i,["urlContextMetadata"]);return b!=null&&setValueByPath(e,["urlContextMetadata"],b),e}function citationMetadataFromMldev$1(i){const e={},s=getValueByPath(i,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),setValueByPath(e,["citations"],o)}return e}function contentToMldev$4(i){const e={},s=getValueByPath(i,["parts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>partToMldev$4(c))),setValueByPath(e,["parts"],a)}const o=getValueByPath(i,["role"]);return o!=null&&setValueByPath(e,["role"],o),e}function createBatchJobConfigToMldev(i,e){const s={},o=getValueByPath(i,["displayName"]);if(e!==void 0&&o!=null&&setValueByPath(e,["batch","displayName"],o),getValueByPath(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function createBatchJobConfigToVertex(i,e){const s={},o=getValueByPath(i,["displayName"]);e!==void 0&&o!=null&&setValueByPath(e,["displayName"],o);const a=getValueByPath(i,["dest"]);return e!==void 0&&a!=null&&setValueByPath(e,["outputConfig"],batchJobDestinationToVertex(tBatchJobDestination(a))),s}function createBatchJobParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["src"]);a!=null&&setValueByPath(s,["batch","inputConfig"],batchJobSourceToMldev(i,tBatchJobSource(i,a)));const c=getValueByPath(e,["config"]);return c!=null&&createBatchJobConfigToMldev(c,s),s}function createBatchJobParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["model"],tModel(i,o));const a=getValueByPath(e,["src"]);a!=null&&setValueByPath(s,["inputConfig"],batchJobSourceToVertex(tBatchJobSource(i,a)));const c=getValueByPath(e,["config"]);return c!=null&&createBatchJobConfigToVertex(c,s),s}function createEmbeddingsBatchJobConfigToMldev(i,e){const s={},o=getValueByPath(i,["displayName"]);return e!==void 0&&o!=null&&setValueByPath(e,["batch","displayName"],o),s}function createEmbeddingsBatchJobParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["src"]);a!=null&&setValueByPath(s,["batch","inputConfig"],embeddingsBatchJobSourceToMldev(i,a));const c=getValueByPath(e,["config"]);return c!=null&&createEmbeddingsBatchJobConfigToMldev(c,s),s}function deleteBatchJobParametersToMldev(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tBatchJobName(i,o)),s}function deleteBatchJobParametersToVertex(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tBatchJobName(i,o)),s}function deleteResourceJobFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["name"]);o!=null&&setValueByPath(e,["name"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);return c!=null&&setValueByPath(e,["error"],c),e}function deleteResourceJobFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["name"]);o!=null&&setValueByPath(e,["name"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);return c!=null&&setValueByPath(e,["error"],c),e}function embedContentBatchToMldev(i,e){const s={},o=getValueByPath(e,["contents"]);if(o!=null){let c=tContentsForEmbed(i,o);Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(s,["requests[]","request","content"],c)}const a=getValueByPath(e,["config"]);return a!=null&&(setValueByPath(s,["_self"],embedContentConfigToMldev$1(a,s)),moveValueByPath(s,{"requests[].*":"requests[].request.*"})),s}function embedContentConfigToMldev$1(i,e){const s={},o=getValueByPath(i,["taskType"]);e!==void 0&&o!=null&&setValueByPath(e,["requests[]","taskType"],o);const a=getValueByPath(i,["title"]);e!==void 0&&a!=null&&setValueByPath(e,["requests[]","title"],a);const c=getValueByPath(i,["outputDimensionality"]);if(e!==void 0&&c!=null&&setValueByPath(e,["requests[]","outputDimensionality"],c),getValueByPath(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function embeddingsBatchJobSourceToMldev(i,e){const s={},o=getValueByPath(e,["fileName"]);o!=null&&setValueByPath(s,["file_name"],o);const a=getValueByPath(e,["inlinedRequests"]);return a!=null&&setValueByPath(s,["requests"],embedContentBatchToMldev(i,a)),s}function fileDataToMldev$4(i){const e={};if(getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=getValueByPath(i,["fileUri"]);s!=null&&setValueByPath(e,["fileUri"],s);const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function functionCallToMldev$4(i){const e={},s=getValueByPath(i,["id"]);s!=null&&setValueByPath(e,["id"],s);const o=getValueByPath(i,["args"]);o!=null&&setValueByPath(e,["args"],o);const a=getValueByPath(i,["name"]);if(a!=null&&setValueByPath(e,["name"],a),getValueByPath(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev$2(i){const e={},s=getValueByPath(i,["mode"]);s!=null&&setValueByPath(e,["mode"],s);const o=getValueByPath(i,["allowedFunctionNames"]);if(o!=null&&setValueByPath(e,["allowedFunctionNames"],o),getValueByPath(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function generateContentConfigToMldev$1(i,e,s){const o={},a=getValueByPath(e,["systemInstruction"]);s!==void 0&&a!=null&&setValueByPath(s,["systemInstruction"],contentToMldev$4(tContent(a)));const c=getValueByPath(e,["temperature"]);c!=null&&setValueByPath(o,["temperature"],c);const d=getValueByPath(e,["topP"]);d!=null&&setValueByPath(o,["topP"],d);const _=getValueByPath(e,["topK"]);_!=null&&setValueByPath(o,["topK"],_);const j=getValueByPath(e,["candidateCount"]);j!=null&&setValueByPath(o,["candidateCount"],j);const h=getValueByPath(e,["maxOutputTokens"]);h!=null&&setValueByPath(o,["maxOutputTokens"],h);const g=getValueByPath(e,["stopSequences"]);g!=null&&setValueByPath(o,["stopSequences"],g);const b=getValueByPath(e,["responseLogprobs"]);b!=null&&setValueByPath(o,["responseLogprobs"],b);const $=getValueByPath(e,["logprobs"]);$!=null&&setValueByPath(o,["logprobs"],$);const et=getValueByPath(e,["presencePenalty"]);et!=null&&setValueByPath(o,["presencePenalty"],et);const _e=getValueByPath(e,["frequencyPenalty"]);_e!=null&&setValueByPath(o,["frequencyPenalty"],_e);const nt=getValueByPath(e,["seed"]);nt!=null&&setValueByPath(o,["seed"],nt);const st=getValueByPath(e,["responseMimeType"]);st!=null&&setValueByPath(o,["responseMimeType"],st);const tt=getValueByPath(e,["responseSchema"]);tt!=null&&setValueByPath(o,["responseSchema"],tSchema(tt));const it=getValueByPath(e,["responseJsonSchema"]);if(it!=null&&setValueByPath(o,["responseJsonSchema"],it),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const at=getValueByPath(e,["safetySettings"]);if(s!==void 0&&at!=null){let It=at;Array.isArray(It)&&(It=It.map(Lt=>safetySettingToMldev$1(Lt))),setValueByPath(s,["safetySettings"],It)}const ct=getValueByPath(e,["tools"]);if(s!==void 0&&ct!=null){let It=tTools(ct);Array.isArray(It)&&(It=It.map(Lt=>toolToMldev$4(tTool(Lt)))),setValueByPath(s,["tools"],It)}const rt=getValueByPath(e,["toolConfig"]);if(s!==void 0&&rt!=null&&setValueByPath(s,["toolConfig"],toolConfigToMldev$2(rt)),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const dt=getValueByPath(e,["cachedContent"]);s!==void 0&&dt!=null&&setValueByPath(s,["cachedContent"],tCachedContentName(i,dt));const yt=getValueByPath(e,["responseModalities"]);yt!=null&&setValueByPath(o,["responseModalities"],yt);const vt=getValueByPath(e,["mediaResolution"]);vt!=null&&setValueByPath(o,["mediaResolution"],vt);const gt=getValueByPath(e,["speechConfig"]);if(gt!=null&&setValueByPath(o,["speechConfig"],tSpeechConfig(gt)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const At=getValueByPath(e,["thinkingConfig"]);At!=null&&setValueByPath(o,["thinkingConfig"],At);const Vt=getValueByPath(e,["imageConfig"]);Vt!=null&&setValueByPath(o,["imageConfig"],imageConfigToMldev$1(Vt));const Nt=getValueByPath(e,["enableEnhancedCivicAnswers"]);return Nt!=null&&setValueByPath(o,["enableEnhancedCivicAnswers"],Nt),o}function generateContentResponseFromMldev$1(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["candidates"]);if(o!=null){let j=o;Array.isArray(j)&&(j=j.map(h=>candidateFromMldev$1(h))),setValueByPath(e,["candidates"],j)}const a=getValueByPath(i,["modelVersion"]);a!=null&&setValueByPath(e,["modelVersion"],a);const c=getValueByPath(i,["promptFeedback"]);c!=null&&setValueByPath(e,["promptFeedback"],c);const d=getValueByPath(i,["responseId"]);d!=null&&setValueByPath(e,["responseId"],d);const _=getValueByPath(i,["usageMetadata"]);return _!=null&&setValueByPath(e,["usageMetadata"],_),e}function getBatchJobParametersToMldev(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tBatchJobName(i,o)),s}function getBatchJobParametersToVertex(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tBatchJobName(i,o)),s}function googleMapsToMldev$4(i){const e={};if(getValueByPath(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=getValueByPath(i,["enableWidget"]);return s!=null&&setValueByPath(e,["enableWidget"],s),e}function googleSearchToMldev$4(i){const e={};if(getValueByPath(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=getValueByPath(i,["timeRangeFilter"]);return s!=null&&setValueByPath(e,["timeRangeFilter"],s),e}function imageConfigToMldev$1(i){const e={},s=getValueByPath(i,["aspectRatio"]);s!=null&&setValueByPath(e,["aspectRatio"],s);const o=getValueByPath(i,["imageSize"]);if(o!=null&&setValueByPath(e,["imageSize"],o),getValueByPath(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(getValueByPath(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function inlinedRequestToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["request","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let _=tContents(a);Array.isArray(_)&&(_=_.map(j=>contentToMldev$4(j))),setValueByPath(s,["request","contents"],_)}const c=getValueByPath(e,["metadata"]);c!=null&&setValueByPath(s,["metadata"],c);const d=getValueByPath(e,["config"]);return d!=null&&setValueByPath(s,["request","generationConfig"],generateContentConfigToMldev$1(i,d,getValueByPath(s,["request"],{}))),s}function inlinedResponseFromMldev(i){const e={},s=getValueByPath(i,["response"]);s!=null&&setValueByPath(e,["response"],generateContentResponseFromMldev$1(s));const o=getValueByPath(i,["error"]);return o!=null&&setValueByPath(e,["error"],o),e}function listBatchJobsConfigToMldev(i,e){const s={},o=getValueByPath(i,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const a=getValueByPath(i,["pageToken"]);if(e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a),getValueByPath(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function listBatchJobsConfigToVertex(i,e){const s={},o=getValueByPath(i,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const a=getValueByPath(i,["pageToken"]);e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a);const c=getValueByPath(i,["filter"]);return e!==void 0&&c!=null&&setValueByPath(e,["_query","filter"],c),s}function listBatchJobsParametersToMldev(i){const e={},s=getValueByPath(i,["config"]);return s!=null&&listBatchJobsConfigToMldev(s,e),e}function listBatchJobsParametersToVertex(i){const e={},s=getValueByPath(i,["config"]);return s!=null&&listBatchJobsConfigToVertex(s,e),e}function listBatchJobsResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["operations"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>batchJobFromMldev(d))),setValueByPath(e,["batchJobs"],c)}return e}function listBatchJobsResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["batchPredictionJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>batchJobFromVertex(d))),setValueByPath(e,["batchJobs"],c)}return e}function partToMldev$4(i){const e={},s=getValueByPath(i,["mediaResolution"]);s!=null&&setValueByPath(e,["mediaResolution"],s);const o=getValueByPath(i,["codeExecutionResult"]);o!=null&&setValueByPath(e,["codeExecutionResult"],o);const a=getValueByPath(i,["executableCode"]);a!=null&&setValueByPath(e,["executableCode"],a);const c=getValueByPath(i,["fileData"]);c!=null&&setValueByPath(e,["fileData"],fileDataToMldev$4(c));const d=getValueByPath(i,["functionCall"]);d!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$4(d));const _=getValueByPath(i,["functionResponse"]);_!=null&&setValueByPath(e,["functionResponse"],_);const j=getValueByPath(i,["inlineData"]);j!=null&&setValueByPath(e,["inlineData"],blobToMldev$4(j));const h=getValueByPath(i,["text"]);h!=null&&setValueByPath(e,["text"],h);const g=getValueByPath(i,["thought"]);g!=null&&setValueByPath(e,["thought"],g);const b=getValueByPath(i,["thoughtSignature"]);b!=null&&setValueByPath(e,["thoughtSignature"],b);const $=getValueByPath(i,["videoMetadata"]);return $!=null&&setValueByPath(e,["videoMetadata"],$),e}function safetySettingToMldev$1(i){const e={},s=getValueByPath(i,["category"]);if(s!=null&&setValueByPath(e,["category"],s),getValueByPath(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=getValueByPath(i,["threshold"]);return o!=null&&setValueByPath(e,["threshold"],o),e}function toolConfigToMldev$2(i){const e={},s=getValueByPath(i,["functionCallingConfig"]);s!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev$2(s));const o=getValueByPath(i,["retrievalConfig"]);return o!=null&&setValueByPath(e,["retrievalConfig"],o),e}function toolToMldev$4(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),setValueByPath(e,["functionDeclarations"],g)}if(getValueByPath(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=getValueByPath(i,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const a=getValueByPath(i,["computerUse"]);a!=null&&setValueByPath(e,["computerUse"],a);const c=getValueByPath(i,["fileSearch"]);c!=null&&setValueByPath(e,["fileSearch"],c);const d=getValueByPath(i,["codeExecution"]);if(d!=null&&setValueByPath(e,["codeExecution"],d),getValueByPath(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const _=getValueByPath(i,["googleMaps"]);_!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$4(_));const j=getValueByPath(i,["googleSearch"]);j!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$4(j));const h=getValueByPath(i,["urlContext"]);return h!=null&&setValueByPath(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PagedItem;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(PagedItem||(PagedItem={}));class Pager{constructor(e,s,o,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,o,a)}init(e,s,o){var a,c;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s?.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!o||Object.keys(o).length===0?d={config:{}}:typeof o=="object"?d=Object.assign({},o):d=o,d.config&&(d.config.pageToken=s.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(c=(a=d.config)===null||a===void 0?void 0:a.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Batches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Pager(PagedItem.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)}}createInlinedGenerateContentRequest(e){const s=createBatchJobParametersToMldev(this.apiClient,e),o=s._url,a=formatMap("{model}:batchGenerateContent",o),_=s.batch.inputConfig.requests,j=_.requests,h=[];for(const g of j){const b=Object.assign({},g);if(b.systemInstruction){const $=b.systemInstruction;delete b.systemInstruction;const et=b.request;et.systemInstruction=$,b.request=et}h.push(b)}return _.requests=h,delete s.config,delete s._url,delete s._query,{path:a,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const o=s?Object.assign({},s):{},a=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${a}`),o.dest===void 0){const c=this.getGcsUri(e),d=this.getBigqueryUri(e);if(c)c.endsWith(".jsonl")?o.dest=`${c.slice(0,-6)}/dest`:o.dest=`${c}_dest_${a}`;else if(d)o.dest=`${d}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=createBatchJobParametersToVertex(this.apiClient,e);return _=formatMap("batchPredictionJobs",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>batchJobFromVertex(g))}else{const h=createBatchJobParametersToMldev(this.apiClient,e);return _=formatMap("{model}:batchGenerateContent",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>batchJobFromMldev(g))}}async createEmbeddingsInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=createEmbeddingsBatchJobParametersToMldev(this.apiClient,e);return c=formatMap("{model}:asyncBatchEmbedContent",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>batchJobFromMldev(j))}}async get(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=getBatchJobParametersToVertex(this.apiClient,e);return _=formatMap("batchPredictionJobs/{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>batchJobFromVertex(g))}else{const h=getBatchJobParametersToMldev(this.apiClient,e);return _=formatMap("batches/{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>batchJobFromMldev(g))}}async cancel(e){var s,o,a,c;let d="",_={};if(this.apiClient.isVertexAI()){const j=cancelBatchJobParametersToVertex(this.apiClient,e);d=formatMap("batchPredictionJobs/{name}:cancel",j._url),_=j._query,delete j._url,delete j._query,await this.apiClient.request({path:d,queryParams:_,body:JSON.stringify(j),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const j=cancelBatchJobParametersToMldev(this.apiClient,e);d=formatMap("batches/{name}:cancel",j._url),_=j._query,delete j._url,delete j._query,await this.apiClient.request({path:d,queryParams:_,body:JSON.stringify(j),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=listBatchJobsParametersToVertex(e);return _=formatMap("batchPredictionJobs",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listBatchJobsResponseFromVertex(g),$=new ListBatchJobsResponse;return Object.assign($,b),$})}else{const h=listBatchJobsParametersToMldev(e);return _=formatMap("batches",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listBatchJobsResponseFromMldev(g),$=new ListBatchJobsResponse;return Object.assign($,b),$})}}async delete(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=deleteBatchJobParametersToVertex(this.apiClient,e);return _=formatMap("batchPredictionJobs/{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>deleteResourceJobFromVertex(g))}else{const h=deleteBatchJobParametersToMldev(this.apiClient,e);return _=formatMap("batches/{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>deleteResourceJobFromMldev(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$3(i){const e={},s=getValueByPath(i,["data"]);if(s!=null&&setValueByPath(e,["data"],s),getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function contentToMldev$3(i){const e={},s=getValueByPath(i,["parts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>partToMldev$3(c))),setValueByPath(e,["parts"],a)}const o=getValueByPath(i,["role"]);return o!=null&&setValueByPath(e,["role"],o),e}function createCachedContentConfigToMldev(i,e){const s={},o=getValueByPath(i,["ttl"]);e!==void 0&&o!=null&&setValueByPath(e,["ttl"],o);const a=getValueByPath(i,["expireTime"]);e!==void 0&&a!=null&&setValueByPath(e,["expireTime"],a);const c=getValueByPath(i,["displayName"]);e!==void 0&&c!=null&&setValueByPath(e,["displayName"],c);const d=getValueByPath(i,["contents"]);if(e!==void 0&&d!=null){let g=tContents(d);Array.isArray(g)&&(g=g.map(b=>contentToMldev$3(b))),setValueByPath(e,["contents"],g)}const _=getValueByPath(i,["systemInstruction"]);e!==void 0&&_!=null&&setValueByPath(e,["systemInstruction"],contentToMldev$3(tContent(_)));const j=getValueByPath(i,["tools"]);if(e!==void 0&&j!=null){let g=j;Array.isArray(g)&&(g=g.map(b=>toolToMldev$3(b))),setValueByPath(e,["tools"],g)}const h=getValueByPath(i,["toolConfig"]);if(e!==void 0&&h!=null&&setValueByPath(e,["toolConfig"],toolConfigToMldev$1(h)),getValueByPath(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function createCachedContentConfigToVertex(i,e){const s={},o=getValueByPath(i,["ttl"]);e!==void 0&&o!=null&&setValueByPath(e,["ttl"],o);const a=getValueByPath(i,["expireTime"]);e!==void 0&&a!=null&&setValueByPath(e,["expireTime"],a);const c=getValueByPath(i,["displayName"]);e!==void 0&&c!=null&&setValueByPath(e,["displayName"],c);const d=getValueByPath(i,["contents"]);if(e!==void 0&&d!=null){let b=tContents(d);Array.isArray(b)&&(b=b.map($=>$)),setValueByPath(e,["contents"],b)}const _=getValueByPath(i,["systemInstruction"]);e!==void 0&&_!=null&&setValueByPath(e,["systemInstruction"],tContent(_));const j=getValueByPath(i,["tools"]);if(e!==void 0&&j!=null){let b=j;Array.isArray(b)&&(b=b.map($=>toolToVertex$2($))),setValueByPath(e,["tools"],b)}const h=getValueByPath(i,["toolConfig"]);e!==void 0&&h!=null&&setValueByPath(e,["toolConfig"],h);const g=getValueByPath(i,["kmsKeyName"]);return e!==void 0&&g!=null&&setValueByPath(e,["encryption_spec","kmsKeyName"],g),s}function createCachedContentParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["model"],tCachesModel(i,o));const a=getValueByPath(e,["config"]);return a!=null&&createCachedContentConfigToMldev(a,s),s}function createCachedContentParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["model"],tCachesModel(i,o));const a=getValueByPath(e,["config"]);return a!=null&&createCachedContentConfigToVertex(a,s),s}function deleteCachedContentParametersToMldev(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tCachedContentName(i,o)),s}function deleteCachedContentParametersToVertex(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tCachedContentName(i,o)),s}function deleteCachedContentResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);return s!=null&&setValueByPath(e,["sdkHttpResponse"],s),e}function deleteCachedContentResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);return s!=null&&setValueByPath(e,["sdkHttpResponse"],s),e}function fileDataToMldev$3(i){const e={};if(getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=getValueByPath(i,["fileUri"]);s!=null&&setValueByPath(e,["fileUri"],s);const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function functionCallToMldev$3(i){const e={},s=getValueByPath(i,["id"]);s!=null&&setValueByPath(e,["id"],s);const o=getValueByPath(i,["args"]);o!=null&&setValueByPath(e,["args"],o);const a=getValueByPath(i,["name"]);if(a!=null&&setValueByPath(e,["name"],a),getValueByPath(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev$1(i){const e={},s=getValueByPath(i,["mode"]);s!=null&&setValueByPath(e,["mode"],s);const o=getValueByPath(i,["allowedFunctionNames"]);if(o!=null&&setValueByPath(e,["allowedFunctionNames"],o),getValueByPath(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex$2(i){const e={};if(getValueByPath(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=getValueByPath(i,["description"]);s!=null&&setValueByPath(e,["description"],s);const o=getValueByPath(i,["name"]);o!=null&&setValueByPath(e,["name"],o);const a=getValueByPath(i,["parameters"]);a!=null&&setValueByPath(e,["parameters"],a);const c=getValueByPath(i,["parametersJsonSchema"]);c!=null&&setValueByPath(e,["parametersJsonSchema"],c);const d=getValueByPath(i,["response"]);d!=null&&setValueByPath(e,["response"],d);const _=getValueByPath(i,["responseJsonSchema"]);return _!=null&&setValueByPath(e,["responseJsonSchema"],_),e}function getCachedContentParametersToMldev(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tCachedContentName(i,o)),s}function getCachedContentParametersToVertex(i,e){const s={},o=getValueByPath(e,["name"]);return o!=null&&setValueByPath(s,["_url","name"],tCachedContentName(i,o)),s}function googleMapsToMldev$3(i){const e={};if(getValueByPath(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=getValueByPath(i,["enableWidget"]);return s!=null&&setValueByPath(e,["enableWidget"],s),e}function googleSearchToMldev$3(i){const e={};if(getValueByPath(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=getValueByPath(i,["timeRangeFilter"]);return s!=null&&setValueByPath(e,["timeRangeFilter"],s),e}function listCachedContentsConfigToMldev(i,e){const s={},o=getValueByPath(i,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const a=getValueByPath(i,["pageToken"]);return e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a),s}function listCachedContentsConfigToVertex(i,e){const s={},o=getValueByPath(i,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const a=getValueByPath(i,["pageToken"]);return e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a),s}function listCachedContentsParametersToMldev(i){const e={},s=getValueByPath(i,["config"]);return s!=null&&listCachedContentsConfigToMldev(s,e),e}function listCachedContentsParametersToVertex(i){const e={},s=getValueByPath(i,["config"]);return s!=null&&listCachedContentsConfigToVertex(s,e),e}function listCachedContentsResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["cachedContents"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["cachedContents"],c)}return e}function listCachedContentsResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["cachedContents"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["cachedContents"],c)}return e}function partToMldev$3(i){const e={},s=getValueByPath(i,["mediaResolution"]);s!=null&&setValueByPath(e,["mediaResolution"],s);const o=getValueByPath(i,["codeExecutionResult"]);o!=null&&setValueByPath(e,["codeExecutionResult"],o);const a=getValueByPath(i,["executableCode"]);a!=null&&setValueByPath(e,["executableCode"],a);const c=getValueByPath(i,["fileData"]);c!=null&&setValueByPath(e,["fileData"],fileDataToMldev$3(c));const d=getValueByPath(i,["functionCall"]);d!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$3(d));const _=getValueByPath(i,["functionResponse"]);_!=null&&setValueByPath(e,["functionResponse"],_);const j=getValueByPath(i,["inlineData"]);j!=null&&setValueByPath(e,["inlineData"],blobToMldev$3(j));const h=getValueByPath(i,["text"]);h!=null&&setValueByPath(e,["text"],h);const g=getValueByPath(i,["thought"]);g!=null&&setValueByPath(e,["thought"],g);const b=getValueByPath(i,["thoughtSignature"]);b!=null&&setValueByPath(e,["thoughtSignature"],b);const $=getValueByPath(i,["videoMetadata"]);return $!=null&&setValueByPath(e,["videoMetadata"],$),e}function toolConfigToMldev$1(i){const e={},s=getValueByPath(i,["functionCallingConfig"]);s!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev$1(s));const o=getValueByPath(i,["retrievalConfig"]);return o!=null&&setValueByPath(e,["retrievalConfig"],o),e}function toolToMldev$3(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),setValueByPath(e,["functionDeclarations"],g)}if(getValueByPath(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=getValueByPath(i,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const a=getValueByPath(i,["computerUse"]);a!=null&&setValueByPath(e,["computerUse"],a);const c=getValueByPath(i,["fileSearch"]);c!=null&&setValueByPath(e,["fileSearch"],c);const d=getValueByPath(i,["codeExecution"]);if(d!=null&&setValueByPath(e,["codeExecution"],d),getValueByPath(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const _=getValueByPath(i,["googleMaps"]);_!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$3(_));const j=getValueByPath(i,["googleSearch"]);j!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$3(j));const h=getValueByPath(i,["urlContext"]);return h!=null&&setValueByPath(e,["urlContext"],h),e}function toolToVertex$2(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map($=>functionDeclarationToVertex$2($))),setValueByPath(e,["functionDeclarations"],b)}const o=getValueByPath(i,["retrieval"]);o!=null&&setValueByPath(e,["retrieval"],o);const a=getValueByPath(i,["googleSearchRetrieval"]);a!=null&&setValueByPath(e,["googleSearchRetrieval"],a);const c=getValueByPath(i,["computerUse"]);if(c!=null&&setValueByPath(e,["computerUse"],c),getValueByPath(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=getValueByPath(i,["codeExecution"]);d!=null&&setValueByPath(e,["codeExecution"],d);const _=getValueByPath(i,["enterpriseWebSearch"]);_!=null&&setValueByPath(e,["enterpriseWebSearch"],_);const j=getValueByPath(i,["googleMaps"]);j!=null&&setValueByPath(e,["googleMaps"],j);const h=getValueByPath(i,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],h);const g=getValueByPath(i,["urlContext"]);return g!=null&&setValueByPath(e,["urlContext"],g),e}function updateCachedContentConfigToMldev(i,e){const s={},o=getValueByPath(i,["ttl"]);e!==void 0&&o!=null&&setValueByPath(e,["ttl"],o);const a=getValueByPath(i,["expireTime"]);return e!==void 0&&a!=null&&setValueByPath(e,["expireTime"],a),s}function updateCachedContentConfigToVertex(i,e){const s={},o=getValueByPath(i,["ttl"]);e!==void 0&&o!=null&&setValueByPath(e,["ttl"],o);const a=getValueByPath(i,["expireTime"]);return e!==void 0&&a!=null&&setValueByPath(e,["expireTime"],a),s}function updateCachedContentParametersToMldev(i,e){const s={},o=getValueByPath(e,["name"]);o!=null&&setValueByPath(s,["_url","name"],tCachedContentName(i,o));const a=getValueByPath(e,["config"]);return a!=null&&updateCachedContentConfigToMldev(a,s),s}function updateCachedContentParametersToVertex(i,e){const s={},o=getValueByPath(e,["name"]);o!=null&&setValueByPath(s,["_url","name"],tCachedContentName(i,o));const a=getValueByPath(e,["config"]);return a!=null&&updateCachedContentConfigToVertex(a,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Caches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Pager(PagedItem.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(s),s)}async create(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=createCachedContentParametersToVertex(this.apiClient,e);return _=formatMap("cachedContents",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const h=createCachedContentParametersToMldev(this.apiClient,e);return _=formatMap("cachedContents",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async get(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=getCachedContentParametersToVertex(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const h=getCachedContentParametersToMldev(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async delete(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=deleteCachedContentParametersToVertex(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=deleteCachedContentResponseFromVertex(g),$=new DeleteCachedContentResponse;return Object.assign($,b),$})}else{const h=deleteCachedContentParametersToMldev(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=deleteCachedContentResponseFromMldev(g),$=new DeleteCachedContentResponse;return Object.assign($,b),$})}}async update(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=updateCachedContentParametersToVertex(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const h=updateCachedContentParametersToMldev(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async listInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=listCachedContentsParametersToVertex(e);return _=formatMap("cachedContents",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listCachedContentsResponseFromVertex(g),$=new ListCachedContentsResponse;return Object.assign($,b),$})}else{const h=listCachedContentsParametersToMldev(e);return _=formatMap("cachedContents",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listCachedContentsResponseFromMldev(g),$=new ListCachedContentsResponse;return Object.assign($,b),$})}}}function __rest(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(s[o[a]]=i[o[a]]);return s}function __values(i){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&i[e],o=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await(i){return this instanceof __await?(this.v=i,this):new __await(i)}function __asyncGenerator(i,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(i,e||[]),a,c=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),_("next"),_("throw"),_("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(et){return function(_e){return Promise.resolve(_e).then(et,b)}}function _(et,_e){o[et]&&(a[et]=function(nt){return new Promise(function(st,tt){c.push([et,nt,st,tt])>1||j(et,nt)})},_e&&(a[et]=_e(a[et])))}function j(et,_e){try{h(o[et](_e))}catch(nt){$(c[0][3],nt)}}function h(et){et.value instanceof __await?Promise.resolve(et.value.v).then(g,b):$(c[0][2],et)}function g(et){j("next",et)}function b(et){j("throw",et)}function $(et,_e){et(_e),c.shift(),c.length&&j(c[0][0],c[0][1])}}function __asyncValues(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],s;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(c){s[c]=i[c]&&function(d){return new Promise(function(_,j){d=i[c](d),a(_,j,d.done,d.value)})}}function a(c,d,_,j){Promise.resolve(j).then(function(h){c({value:h,done:_})},d)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isValidResponse(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const s=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:isValidContent(s)}function isValidContent(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function validateHistory(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function extractCuratedHistory(i){if(i===void 0||i.length===0)return[];const e=[],s=i.length;let o=0;for(;o<s;)if(i[o].role==="user")e.push(i[o]),o++;else{const a=[];let c=!0;for(;o<s&&i[o].role==="model";)a.push(i[o]),c&&!isValidContent(i[o])&&(c=!1),o++;c?e.push(...a):e.pop()}return e}class Chats{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new Chat(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Chat{constructor(e,s,o,a={},c=[]){this.apiClient=e,this.modelsModule=s,this.model=o,this.config=a,this.history=c,this.sendPromise=Promise.resolve(),validateHistory(c)}async sendMessage(e){var s;await this.sendPromise;const o=tContent(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var c,d,_;const j=await a,h=(d=(c=j.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content,g=j.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let $=[];g!=null&&($=(_=g.slice(b))!==null&&_!==void 0?_:[]);const et=h?[h]:[];this.recordHistory(o,et,$)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var s;await this.sendPromise;const o=tContent(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const c=await a;return this.processStreamResponse(c,o)}getHistory(e=!1){const s=e?extractCuratedHistory(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){return __asyncGenerator(this,arguments,function*(){var a,c,d,_,j,h;const g=[];try{for(var b=!0,$=__asyncValues(e),et;et=yield __await($.next()),a=et.done,!a;b=!0){_=et.value,b=!1;const _e=_;if(isValidResponse(_e)){const nt=(h=(j=_e.candidates)===null||j===void 0?void 0:j[0])===null||h===void 0?void 0:h.content;nt!==void 0&&g.push(nt)}yield yield __await(_e)}}catch(_e){c={error:_e}}finally{try{!b&&!a&&(d=$.return)&&(yield __await(d.call($)))}finally{if(c)throw c.error}}this.recordHistory(s,g)})}recordHistory(e,s,o){let a=[];s.length>0&&s.every(c=>c.role!==void 0)?a=s:a.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...extractCuratedHistory(o)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ApiError extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ApiError.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileParametersToMldev(i){const e={},s=getValueByPath(i,["file"]);return s!=null&&setValueByPath(e,["file"],s),e}function createFileResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);return s!=null&&setValueByPath(e,["sdkHttpResponse"],s),e}function deleteFileParametersToMldev(i){const e={},s=getValueByPath(i,["name"]);return s!=null&&setValueByPath(e,["_url","file"],tFileName(s)),e}function deleteFileResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);return s!=null&&setValueByPath(e,["sdkHttpResponse"],s),e}function getFileParametersToMldev(i){const e={},s=getValueByPath(i,["name"]);return s!=null&&setValueByPath(e,["_url","file"],tFileName(s)),e}function listFilesConfigToMldev(i,e){const s={},o=getValueByPath(i,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const a=getValueByPath(i,["pageToken"]);return e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a),s}function listFilesParametersToMldev(i){const e={},s=getValueByPath(i,["config"]);return s!=null&&listFilesConfigToMldev(s,e),e}function listFilesResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["files"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["files"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Files extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Pager(PagedItem.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>s)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=listFilesParametersToMldev(e);return c=formatMap("files",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:j.headers},g})),a.then(j=>{const h=listFilesResponseFromMldev(j),g=new ListFilesResponse;return Object.assign(g,h),g})}}async createInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=createFileParametersToMldev(e);return c=formatMap("upload/v1beta/files",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>{const h=createFileResponseFromMldev(j),g=new CreateFileResponse;return Object.assign(g,h),g})}}async get(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=getFileParametersToMldev(e);return c=formatMap("files/{file}",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>j)}}async delete(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=deleteFileParametersToMldev(e);return c=formatMap("files/{file}",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:j.headers},g})),a.then(j=>{const h=deleteFileResponseFromMldev(j),g=new DeleteFileResponse;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$2(i){const e={},s=getValueByPath(i,["data"]);if(s!=null&&setValueByPath(e,["data"],s),getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function contentToMldev$2(i){const e={},s=getValueByPath(i,["parts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>partToMldev$2(c))),setValueByPath(e,["parts"],a)}const o=getValueByPath(i,["role"]);return o!=null&&setValueByPath(e,["role"],o),e}function fileDataToMldev$2(i){const e={};if(getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=getValueByPath(i,["fileUri"]);s!=null&&setValueByPath(e,["fileUri"],s);const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function functionCallToMldev$2(i){const e={},s=getValueByPath(i,["id"]);s!=null&&setValueByPath(e,["id"],s);const o=getValueByPath(i,["args"]);o!=null&&setValueByPath(e,["args"],o);const a=getValueByPath(i,["name"]);if(a!=null&&setValueByPath(e,["name"],a),getValueByPath(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex$1(i){const e={};if(getValueByPath(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=getValueByPath(i,["description"]);s!=null&&setValueByPath(e,["description"],s);const o=getValueByPath(i,["name"]);o!=null&&setValueByPath(e,["name"],o);const a=getValueByPath(i,["parameters"]);a!=null&&setValueByPath(e,["parameters"],a);const c=getValueByPath(i,["parametersJsonSchema"]);c!=null&&setValueByPath(e,["parametersJsonSchema"],c);const d=getValueByPath(i,["response"]);d!=null&&setValueByPath(e,["response"],d);const _=getValueByPath(i,["responseJsonSchema"]);return _!=null&&setValueByPath(e,["responseJsonSchema"],_),e}function generationConfigToVertex$1(i){const e={},s=getValueByPath(i,["modelSelectionConfig"]);s!=null&&setValueByPath(e,["modelConfig"],s);const o=getValueByPath(i,["responseJsonSchema"]);o!=null&&setValueByPath(e,["responseJsonSchema"],o);const a=getValueByPath(i,["audioTimestamp"]);a!=null&&setValueByPath(e,["audioTimestamp"],a);const c=getValueByPath(i,["candidateCount"]);c!=null&&setValueByPath(e,["candidateCount"],c);const d=getValueByPath(i,["enableAffectiveDialog"]);d!=null&&setValueByPath(e,["enableAffectiveDialog"],d);const _=getValueByPath(i,["frequencyPenalty"]);_!=null&&setValueByPath(e,["frequencyPenalty"],_);const j=getValueByPath(i,["logprobs"]);j!=null&&setValueByPath(e,["logprobs"],j);const h=getValueByPath(i,["maxOutputTokens"]);h!=null&&setValueByPath(e,["maxOutputTokens"],h);const g=getValueByPath(i,["mediaResolution"]);g!=null&&setValueByPath(e,["mediaResolution"],g);const b=getValueByPath(i,["presencePenalty"]);b!=null&&setValueByPath(e,["presencePenalty"],b);const $=getValueByPath(i,["responseLogprobs"]);$!=null&&setValueByPath(e,["responseLogprobs"],$);const et=getValueByPath(i,["responseMimeType"]);et!=null&&setValueByPath(e,["responseMimeType"],et);const _e=getValueByPath(i,["responseModalities"]);_e!=null&&setValueByPath(e,["responseModalities"],_e);const nt=getValueByPath(i,["responseSchema"]);nt!=null&&setValueByPath(e,["responseSchema"],nt);const st=getValueByPath(i,["routingConfig"]);st!=null&&setValueByPath(e,["routingConfig"],st);const tt=getValueByPath(i,["seed"]);tt!=null&&setValueByPath(e,["seed"],tt);const it=getValueByPath(i,["speechConfig"]);it!=null&&setValueByPath(e,["speechConfig"],it);const at=getValueByPath(i,["stopSequences"]);at!=null&&setValueByPath(e,["stopSequences"],at);const ct=getValueByPath(i,["temperature"]);ct!=null&&setValueByPath(e,["temperature"],ct);const rt=getValueByPath(i,["thinkingConfig"]);rt!=null&&setValueByPath(e,["thinkingConfig"],rt);const dt=getValueByPath(i,["topK"]);dt!=null&&setValueByPath(e,["topK"],dt);const yt=getValueByPath(i,["topP"]);if(yt!=null&&setValueByPath(e,["topP"],yt),getValueByPath(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function googleMapsToMldev$2(i){const e={};if(getValueByPath(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=getValueByPath(i,["enableWidget"]);return s!=null&&setValueByPath(e,["enableWidget"],s),e}function googleSearchToMldev$2(i){const e={};if(getValueByPath(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=getValueByPath(i,["timeRangeFilter"]);return s!=null&&setValueByPath(e,["timeRangeFilter"],s),e}function liveConnectConfigToMldev$1(i,e){const s={},o=getValueByPath(i,["generationConfig"]);e!==void 0&&o!=null&&setValueByPath(e,["setup","generationConfig"],o);const a=getValueByPath(i,["responseModalities"]);e!==void 0&&a!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],a);const c=getValueByPath(i,["temperature"]);e!==void 0&&c!=null&&setValueByPath(e,["setup","generationConfig","temperature"],c);const d=getValueByPath(i,["topP"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","topP"],d);const _=getValueByPath(i,["topK"]);e!==void 0&&_!=null&&setValueByPath(e,["setup","generationConfig","topK"],_);const j=getValueByPath(i,["maxOutputTokens"]);e!==void 0&&j!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],j);const h=getValueByPath(i,["mediaResolution"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],h);const g=getValueByPath(i,["seed"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","seed"],g);const b=getValueByPath(i,["speechConfig"]);e!==void 0&&b!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(b));const $=getValueByPath(i,["thinkingConfig"]);e!==void 0&&$!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],$);const et=getValueByPath(i,["enableAffectiveDialog"]);e!==void 0&&et!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],et);const _e=getValueByPath(i,["systemInstruction"]);e!==void 0&&_e!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev$2(tContent(_e)));const nt=getValueByPath(i,["tools"]);if(e!==void 0&&nt!=null){let dt=tTools(nt);Array.isArray(dt)&&(dt=dt.map(yt=>toolToMldev$2(tTool(yt)))),setValueByPath(e,["setup","tools"],dt)}const st=getValueByPath(i,["sessionResumption"]);e!==void 0&&st!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev$1(st));const tt=getValueByPath(i,["inputAudioTranscription"]);e!==void 0&&tt!=null&&setValueByPath(e,["setup","inputAudioTranscription"],tt);const it=getValueByPath(i,["outputAudioTranscription"]);e!==void 0&&it!=null&&setValueByPath(e,["setup","outputAudioTranscription"],it);const at=getValueByPath(i,["realtimeInputConfig"]);e!==void 0&&at!=null&&setValueByPath(e,["setup","realtimeInputConfig"],at);const ct=getValueByPath(i,["contextWindowCompression"]);e!==void 0&&ct!=null&&setValueByPath(e,["setup","contextWindowCompression"],ct);const rt=getValueByPath(i,["proactivity"]);if(e!==void 0&&rt!=null&&setValueByPath(e,["setup","proactivity"],rt),getValueByPath(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function liveConnectConfigToVertex(i,e){const s={},o=getValueByPath(i,["generationConfig"]);e!==void 0&&o!=null&&setValueByPath(e,["setup","generationConfig"],generationConfigToVertex$1(o));const a=getValueByPath(i,["responseModalities"]);e!==void 0&&a!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],a);const c=getValueByPath(i,["temperature"]);e!==void 0&&c!=null&&setValueByPath(e,["setup","generationConfig","temperature"],c);const d=getValueByPath(i,["topP"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","topP"],d);const _=getValueByPath(i,["topK"]);e!==void 0&&_!=null&&setValueByPath(e,["setup","generationConfig","topK"],_);const j=getValueByPath(i,["maxOutputTokens"]);e!==void 0&&j!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],j);const h=getValueByPath(i,["mediaResolution"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],h);const g=getValueByPath(i,["seed"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","seed"],g);const b=getValueByPath(i,["speechConfig"]);e!==void 0&&b!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(b));const $=getValueByPath(i,["thinkingConfig"]);e!==void 0&&$!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],$);const et=getValueByPath(i,["enableAffectiveDialog"]);e!==void 0&&et!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],et);const _e=getValueByPath(i,["systemInstruction"]);e!==void 0&&_e!=null&&setValueByPath(e,["setup","systemInstruction"],tContent(_e));const nt=getValueByPath(i,["tools"]);if(e!==void 0&&nt!=null){let yt=tTools(nt);Array.isArray(yt)&&(yt=yt.map(vt=>toolToVertex$1(tTool(vt)))),setValueByPath(e,["setup","tools"],yt)}const st=getValueByPath(i,["sessionResumption"]);e!==void 0&&st!=null&&setValueByPath(e,["setup","sessionResumption"],st);const tt=getValueByPath(i,["inputAudioTranscription"]);e!==void 0&&tt!=null&&setValueByPath(e,["setup","inputAudioTranscription"],tt);const it=getValueByPath(i,["outputAudioTranscription"]);e!==void 0&&it!=null&&setValueByPath(e,["setup","outputAudioTranscription"],it);const at=getValueByPath(i,["realtimeInputConfig"]);e!==void 0&&at!=null&&setValueByPath(e,["setup","realtimeInputConfig"],at);const ct=getValueByPath(i,["contextWindowCompression"]);e!==void 0&&ct!=null&&setValueByPath(e,["setup","contextWindowCompression"],ct);const rt=getValueByPath(i,["proactivity"]);e!==void 0&&rt!=null&&setValueByPath(e,["setup","proactivity"],rt);const dt=getValueByPath(i,["explicitVadSignal"]);return e!==void 0&&dt!=null&&setValueByPath(e,["setup","explicitVadSignal"],dt),s}function liveConnectParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["setup","model"],tModel(i,o));const a=getValueByPath(e,["config"]);return a!=null&&setValueByPath(s,["config"],liveConnectConfigToMldev$1(a,s)),s}function liveConnectParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["setup","model"],tModel(i,o));const a=getValueByPath(e,["config"]);return a!=null&&setValueByPath(s,["config"],liveConnectConfigToVertex(a,s)),s}function liveMusicSetConfigParametersToMldev(i){const e={},s=getValueByPath(i,["musicGenerationConfig"]);return s!=null&&setValueByPath(e,["musicGenerationConfig"],s),e}function liveMusicSetWeightedPromptsParametersToMldev(i){const e={},s=getValueByPath(i,["weightedPrompts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),setValueByPath(e,["weightedPrompts"],o)}return e}function liveSendRealtimeInputParametersToMldev(i){const e={},s=getValueByPath(i,["media"]);if(s!=null){let h=tBlobs(s);Array.isArray(h)&&(h=h.map(g=>blobToMldev$2(g))),setValueByPath(e,["mediaChunks"],h)}const o=getValueByPath(i,["audio"]);o!=null&&setValueByPath(e,["audio"],blobToMldev$2(tAudioBlob(o)));const a=getValueByPath(i,["audioStreamEnd"]);a!=null&&setValueByPath(e,["audioStreamEnd"],a);const c=getValueByPath(i,["video"]);c!=null&&setValueByPath(e,["video"],blobToMldev$2(tImageBlob(c)));const d=getValueByPath(i,["text"]);d!=null&&setValueByPath(e,["text"],d);const _=getValueByPath(i,["activityStart"]);_!=null&&setValueByPath(e,["activityStart"],_);const j=getValueByPath(i,["activityEnd"]);return j!=null&&setValueByPath(e,["activityEnd"],j),e}function liveSendRealtimeInputParametersToVertex(i){const e={},s=getValueByPath(i,["media"]);if(s!=null){let h=tBlobs(s);Array.isArray(h)&&(h=h.map(g=>g)),setValueByPath(e,["mediaChunks"],h)}const o=getValueByPath(i,["audio"]);o!=null&&setValueByPath(e,["audio"],tAudioBlob(o));const a=getValueByPath(i,["audioStreamEnd"]);a!=null&&setValueByPath(e,["audioStreamEnd"],a);const c=getValueByPath(i,["video"]);c!=null&&setValueByPath(e,["video"],tImageBlob(c));const d=getValueByPath(i,["text"]);d!=null&&setValueByPath(e,["text"],d);const _=getValueByPath(i,["activityStart"]);_!=null&&setValueByPath(e,["activityStart"],_);const j=getValueByPath(i,["activityEnd"]);return j!=null&&setValueByPath(e,["activityEnd"],j),e}function liveServerMessageFromVertex(i){const e={},s=getValueByPath(i,["setupComplete"]);s!=null&&setValueByPath(e,["setupComplete"],s);const o=getValueByPath(i,["serverContent"]);o!=null&&setValueByPath(e,["serverContent"],o);const a=getValueByPath(i,["toolCall"]);a!=null&&setValueByPath(e,["toolCall"],a);const c=getValueByPath(i,["toolCallCancellation"]);c!=null&&setValueByPath(e,["toolCallCancellation"],c);const d=getValueByPath(i,["usageMetadata"]);d!=null&&setValueByPath(e,["usageMetadata"],usageMetadataFromVertex(d));const _=getValueByPath(i,["goAway"]);_!=null&&setValueByPath(e,["goAway"],_);const j=getValueByPath(i,["sessionResumptionUpdate"]);j!=null&&setValueByPath(e,["sessionResumptionUpdate"],j);const h=getValueByPath(i,["voiceActivityDetectionSignal"]);return h!=null&&setValueByPath(e,["voiceActivityDetectionSignal"],h),e}function partToMldev$2(i){const e={},s=getValueByPath(i,["mediaResolution"]);s!=null&&setValueByPath(e,["mediaResolution"],s);const o=getValueByPath(i,["codeExecutionResult"]);o!=null&&setValueByPath(e,["codeExecutionResult"],o);const a=getValueByPath(i,["executableCode"]);a!=null&&setValueByPath(e,["executableCode"],a);const c=getValueByPath(i,["fileData"]);c!=null&&setValueByPath(e,["fileData"],fileDataToMldev$2(c));const d=getValueByPath(i,["functionCall"]);d!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$2(d));const _=getValueByPath(i,["functionResponse"]);_!=null&&setValueByPath(e,["functionResponse"],_);const j=getValueByPath(i,["inlineData"]);j!=null&&setValueByPath(e,["inlineData"],blobToMldev$2(j));const h=getValueByPath(i,["text"]);h!=null&&setValueByPath(e,["text"],h);const g=getValueByPath(i,["thought"]);g!=null&&setValueByPath(e,["thought"],g);const b=getValueByPath(i,["thoughtSignature"]);b!=null&&setValueByPath(e,["thoughtSignature"],b);const $=getValueByPath(i,["videoMetadata"]);return $!=null&&setValueByPath(e,["videoMetadata"],$),e}function sessionResumptionConfigToMldev$1(i){const e={},s=getValueByPath(i,["handle"]);if(s!=null&&setValueByPath(e,["handle"],s),getValueByPath(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function toolToMldev$2(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),setValueByPath(e,["functionDeclarations"],g)}if(getValueByPath(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=getValueByPath(i,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const a=getValueByPath(i,["computerUse"]);a!=null&&setValueByPath(e,["computerUse"],a);const c=getValueByPath(i,["fileSearch"]);c!=null&&setValueByPath(e,["fileSearch"],c);const d=getValueByPath(i,["codeExecution"]);if(d!=null&&setValueByPath(e,["codeExecution"],d),getValueByPath(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const _=getValueByPath(i,["googleMaps"]);_!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$2(_));const j=getValueByPath(i,["googleSearch"]);j!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$2(j));const h=getValueByPath(i,["urlContext"]);return h!=null&&setValueByPath(e,["urlContext"],h),e}function toolToVertex$1(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map($=>functionDeclarationToVertex$1($))),setValueByPath(e,["functionDeclarations"],b)}const o=getValueByPath(i,["retrieval"]);o!=null&&setValueByPath(e,["retrieval"],o);const a=getValueByPath(i,["googleSearchRetrieval"]);a!=null&&setValueByPath(e,["googleSearchRetrieval"],a);const c=getValueByPath(i,["computerUse"]);if(c!=null&&setValueByPath(e,["computerUse"],c),getValueByPath(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=getValueByPath(i,["codeExecution"]);d!=null&&setValueByPath(e,["codeExecution"],d);const _=getValueByPath(i,["enterpriseWebSearch"]);_!=null&&setValueByPath(e,["enterpriseWebSearch"],_);const j=getValueByPath(i,["googleMaps"]);j!=null&&setValueByPath(e,["googleMaps"],j);const h=getValueByPath(i,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],h);const g=getValueByPath(i,["urlContext"]);return g!=null&&setValueByPath(e,["urlContext"],g),e}function usageMetadataFromVertex(i){const e={},s=getValueByPath(i,["promptTokenCount"]);s!=null&&setValueByPath(e,["promptTokenCount"],s);const o=getValueByPath(i,["cachedContentTokenCount"]);o!=null&&setValueByPath(e,["cachedContentTokenCount"],o);const a=getValueByPath(i,["candidatesTokenCount"]);a!=null&&setValueByPath(e,["responseTokenCount"],a);const c=getValueByPath(i,["toolUsePromptTokenCount"]);c!=null&&setValueByPath(e,["toolUsePromptTokenCount"],c);const d=getValueByPath(i,["thoughtsTokenCount"]);d!=null&&setValueByPath(e,["thoughtsTokenCount"],d);const _=getValueByPath(i,["totalTokenCount"]);_!=null&&setValueByPath(e,["totalTokenCount"],_);const j=getValueByPath(i,["promptTokensDetails"]);if(j!=null){let et=j;Array.isArray(et)&&(et=et.map(_e=>_e)),setValueByPath(e,["promptTokensDetails"],et)}const h=getValueByPath(i,["cacheTokensDetails"]);if(h!=null){let et=h;Array.isArray(et)&&(et=et.map(_e=>_e)),setValueByPath(e,["cacheTokensDetails"],et)}const g=getValueByPath(i,["candidatesTokensDetails"]);if(g!=null){let et=g;Array.isArray(et)&&(et=et.map(_e=>_e)),setValueByPath(e,["responseTokensDetails"],et)}const b=getValueByPath(i,["toolUsePromptTokensDetails"]);if(b!=null){let et=b;Array.isArray(et)&&(et=et.map(_e=>_e)),setValueByPath(e,["toolUsePromptTokensDetails"],et)}const $=getValueByPath(i,["trafficType"]);return $!=null&&setValueByPath(e,["trafficType"],$),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$1(i){const e={},s=getValueByPath(i,["data"]);if(s!=null&&setValueByPath(e,["data"],s),getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function candidateFromMldev(i){const e={},s=getValueByPath(i,["content"]);s!=null&&setValueByPath(e,["content"],s);const o=getValueByPath(i,["citationMetadata"]);o!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev(o));const a=getValueByPath(i,["tokenCount"]);a!=null&&setValueByPath(e,["tokenCount"],a);const c=getValueByPath(i,["finishReason"]);c!=null&&setValueByPath(e,["finishReason"],c);const d=getValueByPath(i,["avgLogprobs"]);d!=null&&setValueByPath(e,["avgLogprobs"],d);const _=getValueByPath(i,["groundingMetadata"]);_!=null&&setValueByPath(e,["groundingMetadata"],_);const j=getValueByPath(i,["index"]);j!=null&&setValueByPath(e,["index"],j);const h=getValueByPath(i,["logprobsResult"]);h!=null&&setValueByPath(e,["logprobsResult"],h);const g=getValueByPath(i,["safetyRatings"]);if(g!=null){let $=g;Array.isArray($)&&($=$.map(et=>et)),setValueByPath(e,["safetyRatings"],$)}const b=getValueByPath(i,["urlContextMetadata"]);return b!=null&&setValueByPath(e,["urlContextMetadata"],b),e}function citationMetadataFromMldev(i){const e={},s=getValueByPath(i,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),setValueByPath(e,["citations"],o)}return e}function computeTokensParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let c=tContents(a);Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(s,["contents"],c)}return s}function computeTokensResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["tokensInfo"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),setValueByPath(e,["tokensInfo"],a)}return e}function contentEmbeddingFromVertex(i){const e={},s=getValueByPath(i,["values"]);s!=null&&setValueByPath(e,["values"],s);const o=getValueByPath(i,["statistics"]);return o!=null&&setValueByPath(e,["statistics"],contentEmbeddingStatisticsFromVertex(o)),e}function contentEmbeddingStatisticsFromVertex(i){const e={},s=getValueByPath(i,["truncated"]);s!=null&&setValueByPath(e,["truncated"],s);const o=getValueByPath(i,["token_count"]);return o!=null&&setValueByPath(e,["tokenCount"],o),e}function contentToMldev$1(i){const e={},s=getValueByPath(i,["parts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>partToMldev$1(c))),setValueByPath(e,["parts"],a)}const o=getValueByPath(i,["role"]);return o!=null&&setValueByPath(e,["role"],o),e}function controlReferenceConfigToVertex(i){const e={},s=getValueByPath(i,["controlType"]);s!=null&&setValueByPath(e,["controlType"],s);const o=getValueByPath(i,["enableControlImageComputation"]);return o!=null&&setValueByPath(e,["computeControl"],o),e}function countTokensConfigToMldev(i){const e={};if(getValueByPath(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(getValueByPath(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(getValueByPath(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function countTokensConfigToVertex(i,e){const s={},o=getValueByPath(i,["systemInstruction"]);e!==void 0&&o!=null&&setValueByPath(e,["systemInstruction"],tContent(o));const a=getValueByPath(i,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(_=>toolToVertex(_))),setValueByPath(e,["tools"],d)}const c=getValueByPath(i,["generationConfig"]);return e!==void 0&&c!=null&&setValueByPath(e,["generationConfig"],generationConfigToVertex(c)),s}function countTokensParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let d=tContents(a);Array.isArray(d)&&(d=d.map(_=>contentToMldev$1(_))),setValueByPath(s,["contents"],d)}const c=getValueByPath(e,["config"]);return c!=null&&countTokensConfigToMldev(c),s}function countTokensParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let d=tContents(a);Array.isArray(d)&&(d=d.map(_=>_)),setValueByPath(s,["contents"],d)}const c=getValueByPath(e,["config"]);return c!=null&&countTokensConfigToVertex(c,s),s}function countTokensResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["totalTokens"]);o!=null&&setValueByPath(e,["totalTokens"],o);const a=getValueByPath(i,["cachedContentTokenCount"]);return a!=null&&setValueByPath(e,["cachedContentTokenCount"],a),e}function countTokensResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["totalTokens"]);return o!=null&&setValueByPath(e,["totalTokens"],o),e}function deleteModelParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);return o!=null&&setValueByPath(s,["_url","name"],tModel(i,o)),s}function deleteModelParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);return o!=null&&setValueByPath(s,["_url","name"],tModel(i,o)),s}function deleteModelResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);return s!=null&&setValueByPath(e,["sdkHttpResponse"],s),e}function deleteModelResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);return s!=null&&setValueByPath(e,["sdkHttpResponse"],s),e}function editImageConfigToVertex(i,e){const s={},o=getValueByPath(i,["outputGcsUri"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","storageUri"],o);const a=getValueByPath(i,["negativePrompt"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","negativePrompt"],a);const c=getValueByPath(i,["numberOfImages"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","sampleCount"],c);const d=getValueByPath(i,["aspectRatio"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","aspectRatio"],d);const _=getValueByPath(i,["guidanceScale"]);e!==void 0&&_!=null&&setValueByPath(e,["parameters","guidanceScale"],_);const j=getValueByPath(i,["seed"]);e!==void 0&&j!=null&&setValueByPath(e,["parameters","seed"],j);const h=getValueByPath(i,["safetyFilterLevel"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","safetySetting"],h);const g=getValueByPath(i,["personGeneration"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","personGeneration"],g);const b=getValueByPath(i,["includeSafetyAttributes"]);e!==void 0&&b!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],b);const $=getValueByPath(i,["includeRaiReason"]);e!==void 0&&$!=null&&setValueByPath(e,["parameters","includeRaiReason"],$);const et=getValueByPath(i,["language"]);e!==void 0&&et!=null&&setValueByPath(e,["parameters","language"],et);const _e=getValueByPath(i,["outputMimeType"]);e!==void 0&&_e!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],_e);const nt=getValueByPath(i,["outputCompressionQuality"]);e!==void 0&&nt!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],nt);const st=getValueByPath(i,["addWatermark"]);e!==void 0&&st!=null&&setValueByPath(e,["parameters","addWatermark"],st);const tt=getValueByPath(i,["labels"]);e!==void 0&&tt!=null&&setValueByPath(e,["labels"],tt);const it=getValueByPath(i,["editMode"]);e!==void 0&&it!=null&&setValueByPath(e,["parameters","editMode"],it);const at=getValueByPath(i,["baseSteps"]);return e!==void 0&&at!=null&&setValueByPath(e,["parameters","editConfig","baseSteps"],at),s}function editImageParametersInternalToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["prompt"]);a!=null&&setValueByPath(s,["instances[0]","prompt"],a);const c=getValueByPath(e,["referenceImages"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(j=>referenceImageAPIInternalToVertex(j))),setValueByPath(s,["instances[0]","referenceImages"],_)}const d=getValueByPath(e,["config"]);return d!=null&&editImageConfigToVertex(d,s),s}function editImageResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>generatedImageFromVertex(c))),setValueByPath(e,["generatedImages"],a)}return e}function embedContentConfigToMldev(i,e){const s={},o=getValueByPath(i,["taskType"]);e!==void 0&&o!=null&&setValueByPath(e,["requests[]","taskType"],o);const a=getValueByPath(i,["title"]);e!==void 0&&a!=null&&setValueByPath(e,["requests[]","title"],a);const c=getValueByPath(i,["outputDimensionality"]);if(e!==void 0&&c!=null&&setValueByPath(e,["requests[]","outputDimensionality"],c),getValueByPath(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function embedContentConfigToVertex(i,e){const s={},o=getValueByPath(i,["taskType"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[]","task_type"],o);const a=getValueByPath(i,["title"]);e!==void 0&&a!=null&&setValueByPath(e,["instances[]","title"],a);const c=getValueByPath(i,["outputDimensionality"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","outputDimensionality"],c);const d=getValueByPath(i,["mimeType"]);e!==void 0&&d!=null&&setValueByPath(e,["instances[]","mimeType"],d);const _=getValueByPath(i,["autoTruncate"]);return e!==void 0&&_!=null&&setValueByPath(e,["parameters","autoTruncate"],_),s}function embedContentParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let _=tContentsForEmbed(i,a);Array.isArray(_)&&(_=_.map(j=>j)),setValueByPath(s,["requests[]","content"],_)}const c=getValueByPath(e,["config"]);c!=null&&embedContentConfigToMldev(c,s);const d=getValueByPath(e,["model"]);return d!==void 0&&setValueByPath(s,["requests[]","model"],tModel(i,d)),s}function embedContentParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let d=tContentsForEmbed(i,a);Array.isArray(d)&&(d=d.map(_=>_)),setValueByPath(s,["instances[]","content"],d)}const c=getValueByPath(e,["config"]);return c!=null&&embedContentConfigToVertex(c,s),s}function embedContentResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["embeddings"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["embeddings"],c)}const a=getValueByPath(i,["metadata"]);return a!=null&&setValueByPath(e,["metadata"],a),e}function embedContentResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["predictions[]","embeddings"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>contentEmbeddingFromVertex(d))),setValueByPath(e,["embeddings"],c)}const a=getValueByPath(i,["metadata"]);return a!=null&&setValueByPath(e,["metadata"],a),e}function endpointFromVertex(i){const e={},s=getValueByPath(i,["endpoint"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["deployedModelId"]);return o!=null&&setValueByPath(e,["deployedModelId"],o),e}function fileDataToMldev$1(i){const e={};if(getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=getValueByPath(i,["fileUri"]);s!=null&&setValueByPath(e,["fileUri"],s);const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function functionCallToMldev$1(i){const e={},s=getValueByPath(i,["id"]);s!=null&&setValueByPath(e,["id"],s);const o=getValueByPath(i,["args"]);o!=null&&setValueByPath(e,["args"],o);const a=getValueByPath(i,["name"]);if(a!=null&&setValueByPath(e,["name"],a),getValueByPath(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev(i){const e={},s=getValueByPath(i,["mode"]);s!=null&&setValueByPath(e,["mode"],s);const o=getValueByPath(i,["allowedFunctionNames"]);if(o!=null&&setValueByPath(e,["allowedFunctionNames"],o),getValueByPath(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex(i){const e={};if(getValueByPath(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=getValueByPath(i,["description"]);s!=null&&setValueByPath(e,["description"],s);const o=getValueByPath(i,["name"]);o!=null&&setValueByPath(e,["name"],o);const a=getValueByPath(i,["parameters"]);a!=null&&setValueByPath(e,["parameters"],a);const c=getValueByPath(i,["parametersJsonSchema"]);c!=null&&setValueByPath(e,["parametersJsonSchema"],c);const d=getValueByPath(i,["response"]);d!=null&&setValueByPath(e,["response"],d);const _=getValueByPath(i,["responseJsonSchema"]);return _!=null&&setValueByPath(e,["responseJsonSchema"],_),e}function generateContentConfigToMldev(i,e,s){const o={},a=getValueByPath(e,["systemInstruction"]);s!==void 0&&a!=null&&setValueByPath(s,["systemInstruction"],contentToMldev$1(tContent(a)));const c=getValueByPath(e,["temperature"]);c!=null&&setValueByPath(o,["temperature"],c);const d=getValueByPath(e,["topP"]);d!=null&&setValueByPath(o,["topP"],d);const _=getValueByPath(e,["topK"]);_!=null&&setValueByPath(o,["topK"],_);const j=getValueByPath(e,["candidateCount"]);j!=null&&setValueByPath(o,["candidateCount"],j);const h=getValueByPath(e,["maxOutputTokens"]);h!=null&&setValueByPath(o,["maxOutputTokens"],h);const g=getValueByPath(e,["stopSequences"]);g!=null&&setValueByPath(o,["stopSequences"],g);const b=getValueByPath(e,["responseLogprobs"]);b!=null&&setValueByPath(o,["responseLogprobs"],b);const $=getValueByPath(e,["logprobs"]);$!=null&&setValueByPath(o,["logprobs"],$);const et=getValueByPath(e,["presencePenalty"]);et!=null&&setValueByPath(o,["presencePenalty"],et);const _e=getValueByPath(e,["frequencyPenalty"]);_e!=null&&setValueByPath(o,["frequencyPenalty"],_e);const nt=getValueByPath(e,["seed"]);nt!=null&&setValueByPath(o,["seed"],nt);const st=getValueByPath(e,["responseMimeType"]);st!=null&&setValueByPath(o,["responseMimeType"],st);const tt=getValueByPath(e,["responseSchema"]);tt!=null&&setValueByPath(o,["responseSchema"],tSchema(tt));const it=getValueByPath(e,["responseJsonSchema"]);if(it!=null&&setValueByPath(o,["responseJsonSchema"],it),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const at=getValueByPath(e,["safetySettings"]);if(s!==void 0&&at!=null){let It=at;Array.isArray(It)&&(It=It.map(Lt=>safetySettingToMldev(Lt))),setValueByPath(s,["safetySettings"],It)}const ct=getValueByPath(e,["tools"]);if(s!==void 0&&ct!=null){let It=tTools(ct);Array.isArray(It)&&(It=It.map(Lt=>toolToMldev$1(tTool(Lt)))),setValueByPath(s,["tools"],It)}const rt=getValueByPath(e,["toolConfig"]);if(s!==void 0&&rt!=null&&setValueByPath(s,["toolConfig"],toolConfigToMldev(rt)),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const dt=getValueByPath(e,["cachedContent"]);s!==void 0&&dt!=null&&setValueByPath(s,["cachedContent"],tCachedContentName(i,dt));const yt=getValueByPath(e,["responseModalities"]);yt!=null&&setValueByPath(o,["responseModalities"],yt);const vt=getValueByPath(e,["mediaResolution"]);vt!=null&&setValueByPath(o,["mediaResolution"],vt);const gt=getValueByPath(e,["speechConfig"]);if(gt!=null&&setValueByPath(o,["speechConfig"],tSpeechConfig(gt)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const At=getValueByPath(e,["thinkingConfig"]);At!=null&&setValueByPath(o,["thinkingConfig"],At);const Vt=getValueByPath(e,["imageConfig"]);Vt!=null&&setValueByPath(o,["imageConfig"],imageConfigToMldev(Vt));const Nt=getValueByPath(e,["enableEnhancedCivicAnswers"]);return Nt!=null&&setValueByPath(o,["enableEnhancedCivicAnswers"],Nt),o}function generateContentConfigToVertex(i,e,s){const o={},a=getValueByPath(e,["systemInstruction"]);s!==void 0&&a!=null&&setValueByPath(s,["systemInstruction"],tContent(a));const c=getValueByPath(e,["temperature"]);c!=null&&setValueByPath(o,["temperature"],c);const d=getValueByPath(e,["topP"]);d!=null&&setValueByPath(o,["topP"],d);const _=getValueByPath(e,["topK"]);_!=null&&setValueByPath(o,["topK"],_);const j=getValueByPath(e,["candidateCount"]);j!=null&&setValueByPath(o,["candidateCount"],j);const h=getValueByPath(e,["maxOutputTokens"]);h!=null&&setValueByPath(o,["maxOutputTokens"],h);const g=getValueByPath(e,["stopSequences"]);g!=null&&setValueByPath(o,["stopSequences"],g);const b=getValueByPath(e,["responseLogprobs"]);b!=null&&setValueByPath(o,["responseLogprobs"],b);const $=getValueByPath(e,["logprobs"]);$!=null&&setValueByPath(o,["logprobs"],$);const et=getValueByPath(e,["presencePenalty"]);et!=null&&setValueByPath(o,["presencePenalty"],et);const _e=getValueByPath(e,["frequencyPenalty"]);_e!=null&&setValueByPath(o,["frequencyPenalty"],_e);const nt=getValueByPath(e,["seed"]);nt!=null&&setValueByPath(o,["seed"],nt);const st=getValueByPath(e,["responseMimeType"]);st!=null&&setValueByPath(o,["responseMimeType"],st);const tt=getValueByPath(e,["responseSchema"]);tt!=null&&setValueByPath(o,["responseSchema"],tSchema(tt));const it=getValueByPath(e,["responseJsonSchema"]);it!=null&&setValueByPath(o,["responseJsonSchema"],it);const at=getValueByPath(e,["routingConfig"]);at!=null&&setValueByPath(o,["routingConfig"],at);const ct=getValueByPath(e,["modelSelectionConfig"]);ct!=null&&setValueByPath(o,["modelConfig"],ct);const rt=getValueByPath(e,["safetySettings"]);if(s!==void 0&&rt!=null){let Ft=rt;Array.isArray(Ft)&&(Ft=Ft.map(Tt=>Tt)),setValueByPath(s,["safetySettings"],Ft)}const dt=getValueByPath(e,["tools"]);if(s!==void 0&&dt!=null){let Ft=tTools(dt);Array.isArray(Ft)&&(Ft=Ft.map(Tt=>toolToVertex(tTool(Tt)))),setValueByPath(s,["tools"],Ft)}const yt=getValueByPath(e,["toolConfig"]);s!==void 0&&yt!=null&&setValueByPath(s,["toolConfig"],yt);const vt=getValueByPath(e,["labels"]);s!==void 0&&vt!=null&&setValueByPath(s,["labels"],vt);const gt=getValueByPath(e,["cachedContent"]);s!==void 0&&gt!=null&&setValueByPath(s,["cachedContent"],tCachedContentName(i,gt));const At=getValueByPath(e,["responseModalities"]);At!=null&&setValueByPath(o,["responseModalities"],At);const Vt=getValueByPath(e,["mediaResolution"]);Vt!=null&&setValueByPath(o,["mediaResolution"],Vt);const Nt=getValueByPath(e,["speechConfig"]);Nt!=null&&setValueByPath(o,["speechConfig"],tSpeechConfig(Nt));const It=getValueByPath(e,["audioTimestamp"]);It!=null&&setValueByPath(o,["audioTimestamp"],It);const Lt=getValueByPath(e,["thinkingConfig"]);Lt!=null&&setValueByPath(o,["thinkingConfig"],Lt);const zt=getValueByPath(e,["imageConfig"]);if(zt!=null&&setValueByPath(o,["imageConfig"],imageConfigToVertex(zt)),getValueByPath(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function generateContentParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let d=tContents(a);Array.isArray(d)&&(d=d.map(_=>contentToMldev$1(_))),setValueByPath(s,["contents"],d)}const c=getValueByPath(e,["config"]);return c!=null&&setValueByPath(s,["generationConfig"],generateContentConfigToMldev(i,c,s)),s}function generateContentParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["contents"]);if(a!=null){let d=tContents(a);Array.isArray(d)&&(d=d.map(_=>_)),setValueByPath(s,["contents"],d)}const c=getValueByPath(e,["config"]);return c!=null&&setValueByPath(s,["generationConfig"],generateContentConfigToVertex(i,c,s)),s}function generateContentResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["candidates"]);if(o!=null){let j=o;Array.isArray(j)&&(j=j.map(h=>candidateFromMldev(h))),setValueByPath(e,["candidates"],j)}const a=getValueByPath(i,["modelVersion"]);a!=null&&setValueByPath(e,["modelVersion"],a);const c=getValueByPath(i,["promptFeedback"]);c!=null&&setValueByPath(e,["promptFeedback"],c);const d=getValueByPath(i,["responseId"]);d!=null&&setValueByPath(e,["responseId"],d);const _=getValueByPath(i,["usageMetadata"]);return _!=null&&setValueByPath(e,["usageMetadata"],_),e}function generateContentResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(g=>g)),setValueByPath(e,["candidates"],h)}const a=getValueByPath(i,["createTime"]);a!=null&&setValueByPath(e,["createTime"],a);const c=getValueByPath(i,["modelVersion"]);c!=null&&setValueByPath(e,["modelVersion"],c);const d=getValueByPath(i,["promptFeedback"]);d!=null&&setValueByPath(e,["promptFeedback"],d);const _=getValueByPath(i,["responseId"]);_!=null&&setValueByPath(e,["responseId"],_);const j=getValueByPath(i,["usageMetadata"]);return j!=null&&setValueByPath(e,["usageMetadata"],j),e}function generateImagesConfigToMldev(i,e){const s={};if(getValueByPath(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=getValueByPath(i,["numberOfImages"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","sampleCount"],o);const a=getValueByPath(i,["aspectRatio"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","aspectRatio"],a);const c=getValueByPath(i,["guidanceScale"]);if(e!==void 0&&c!=null&&setValueByPath(e,["parameters","guidanceScale"],c),getValueByPath(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=getValueByPath(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","safetySetting"],d);const _=getValueByPath(i,["personGeneration"]);e!==void 0&&_!=null&&setValueByPath(e,["parameters","personGeneration"],_);const j=getValueByPath(i,["includeSafetyAttributes"]);e!==void 0&&j!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],j);const h=getValueByPath(i,["includeRaiReason"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","includeRaiReason"],h);const g=getValueByPath(i,["language"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","language"],g);const b=getValueByPath(i,["outputMimeType"]);e!==void 0&&b!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],b);const $=getValueByPath(i,["outputCompressionQuality"]);if(e!==void 0&&$!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],$),getValueByPath(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(getValueByPath(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const et=getValueByPath(i,["imageSize"]);if(e!==void 0&&et!=null&&setValueByPath(e,["parameters","sampleImageSize"],et),getValueByPath(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function generateImagesConfigToVertex(i,e){const s={},o=getValueByPath(i,["outputGcsUri"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","storageUri"],o);const a=getValueByPath(i,["negativePrompt"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","negativePrompt"],a);const c=getValueByPath(i,["numberOfImages"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","sampleCount"],c);const d=getValueByPath(i,["aspectRatio"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","aspectRatio"],d);const _=getValueByPath(i,["guidanceScale"]);e!==void 0&&_!=null&&setValueByPath(e,["parameters","guidanceScale"],_);const j=getValueByPath(i,["seed"]);e!==void 0&&j!=null&&setValueByPath(e,["parameters","seed"],j);const h=getValueByPath(i,["safetyFilterLevel"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","safetySetting"],h);const g=getValueByPath(i,["personGeneration"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","personGeneration"],g);const b=getValueByPath(i,["includeSafetyAttributes"]);e!==void 0&&b!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],b);const $=getValueByPath(i,["includeRaiReason"]);e!==void 0&&$!=null&&setValueByPath(e,["parameters","includeRaiReason"],$);const et=getValueByPath(i,["language"]);e!==void 0&&et!=null&&setValueByPath(e,["parameters","language"],et);const _e=getValueByPath(i,["outputMimeType"]);e!==void 0&&_e!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],_e);const nt=getValueByPath(i,["outputCompressionQuality"]);e!==void 0&&nt!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],nt);const st=getValueByPath(i,["addWatermark"]);e!==void 0&&st!=null&&setValueByPath(e,["parameters","addWatermark"],st);const tt=getValueByPath(i,["labels"]);e!==void 0&&tt!=null&&setValueByPath(e,["labels"],tt);const it=getValueByPath(i,["imageSize"]);e!==void 0&&it!=null&&setValueByPath(e,["parameters","sampleImageSize"],it);const at=getValueByPath(i,["enhancePrompt"]);return e!==void 0&&at!=null&&setValueByPath(e,["parameters","enhancePrompt"],at),s}function generateImagesParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["prompt"]);a!=null&&setValueByPath(s,["instances[0]","prompt"],a);const c=getValueByPath(e,["config"]);return c!=null&&generateImagesConfigToMldev(c,s),s}function generateImagesParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["prompt"]);a!=null&&setValueByPath(s,["instances[0]","prompt"],a);const c=getValueByPath(e,["config"]);return c!=null&&generateImagesConfigToVertex(c,s),s}function generateImagesResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["predictions"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>generatedImageFromMldev(d))),setValueByPath(e,["generatedImages"],c)}const a=getValueByPath(i,["positivePromptSafetyAttributes"]);return a!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromMldev(a)),e}function generateImagesResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["predictions"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>generatedImageFromVertex(d))),setValueByPath(e,["generatedImages"],c)}const a=getValueByPath(i,["positivePromptSafetyAttributes"]);return a!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromVertex(a)),e}function generateVideosConfigToMldev(i,e){const s={},o=getValueByPath(i,["numberOfVideos"]);if(e!==void 0&&o!=null&&setValueByPath(e,["parameters","sampleCount"],o),getValueByPath(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=getValueByPath(i,["durationSeconds"]);if(e!==void 0&&a!=null&&setValueByPath(e,["parameters","durationSeconds"],a),getValueByPath(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=getValueByPath(i,["aspectRatio"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","aspectRatio"],c);const d=getValueByPath(i,["resolution"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","resolution"],d);const _=getValueByPath(i,["personGeneration"]);if(e!==void 0&&_!=null&&setValueByPath(e,["parameters","personGeneration"],_),getValueByPath(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const j=getValueByPath(i,["negativePrompt"]);e!==void 0&&j!=null&&setValueByPath(e,["parameters","negativePrompt"],j);const h=getValueByPath(i,["enhancePrompt"]);if(e!==void 0&&h!=null&&setValueByPath(e,["parameters","enhancePrompt"],h),getValueByPath(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=getValueByPath(i,["lastFrame"]);e!==void 0&&g!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToMldev(g));const b=getValueByPath(i,["referenceImages"]);if(e!==void 0&&b!=null){let $=b;Array.isArray($)&&($=$.map(et=>videoGenerationReferenceImageToMldev(et))),setValueByPath(e,["instances[0]","referenceImages"],$)}if(getValueByPath(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(getValueByPath(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function generateVideosConfigToVertex(i,e){const s={},o=getValueByPath(i,["numberOfVideos"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","sampleCount"],o);const a=getValueByPath(i,["outputGcsUri"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","storageUri"],a);const c=getValueByPath(i,["fps"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","fps"],c);const d=getValueByPath(i,["durationSeconds"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","durationSeconds"],d);const _=getValueByPath(i,["seed"]);e!==void 0&&_!=null&&setValueByPath(e,["parameters","seed"],_);const j=getValueByPath(i,["aspectRatio"]);e!==void 0&&j!=null&&setValueByPath(e,["parameters","aspectRatio"],j);const h=getValueByPath(i,["resolution"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","resolution"],h);const g=getValueByPath(i,["personGeneration"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","personGeneration"],g);const b=getValueByPath(i,["pubsubTopic"]);e!==void 0&&b!=null&&setValueByPath(e,["parameters","pubsubTopic"],b);const $=getValueByPath(i,["negativePrompt"]);e!==void 0&&$!=null&&setValueByPath(e,["parameters","negativePrompt"],$);const et=getValueByPath(i,["enhancePrompt"]);e!==void 0&&et!=null&&setValueByPath(e,["parameters","enhancePrompt"],et);const _e=getValueByPath(i,["generateAudio"]);e!==void 0&&_e!=null&&setValueByPath(e,["parameters","generateAudio"],_e);const nt=getValueByPath(i,["lastFrame"]);e!==void 0&&nt!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToVertex(nt));const st=getValueByPath(i,["referenceImages"]);if(e!==void 0&&st!=null){let at=st;Array.isArray(at)&&(at=at.map(ct=>videoGenerationReferenceImageToVertex(ct))),setValueByPath(e,["instances[0]","referenceImages"],at)}const tt=getValueByPath(i,["mask"]);e!==void 0&&tt!=null&&setValueByPath(e,["instances[0]","mask"],videoGenerationMaskToVertex(tt));const it=getValueByPath(i,["compressionQuality"]);return e!==void 0&&it!=null&&setValueByPath(e,["parameters","compressionQuality"],it),s}function generateVideosOperationFromMldev(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata"]);o!=null&&setValueByPath(e,["metadata"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["response","generateVideoResponse"]);return d!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev(d)),e}function generateVideosOperationFromVertex(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata"]);o!=null&&setValueByPath(e,["metadata"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["response"]);return d!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex(d)),e}function generateVideosParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["prompt"]);a!=null&&setValueByPath(s,["instances[0]","prompt"],a);const c=getValueByPath(e,["image"]);c!=null&&setValueByPath(s,["instances[0]","image"],imageToMldev(c));const d=getValueByPath(e,["video"]);d!=null&&setValueByPath(s,["instances[0]","video"],videoToMldev(d));const _=getValueByPath(e,["source"]);_!=null&&generateVideosSourceToMldev(_,s);const j=getValueByPath(e,["config"]);return j!=null&&generateVideosConfigToMldev(j,s),s}function generateVideosParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["prompt"]);a!=null&&setValueByPath(s,["instances[0]","prompt"],a);const c=getValueByPath(e,["image"]);c!=null&&setValueByPath(s,["instances[0]","image"],imageToVertex(c));const d=getValueByPath(e,["video"]);d!=null&&setValueByPath(s,["instances[0]","video"],videoToVertex(d));const _=getValueByPath(e,["source"]);_!=null&&generateVideosSourceToVertex(_,s);const j=getValueByPath(e,["config"]);return j!=null&&generateVideosConfigToVertex(j,s),s}function generateVideosResponseFromMldev(i){const e={},s=getValueByPath(i,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>generatedVideoFromMldev(d))),setValueByPath(e,["generatedVideos"],c)}const o=getValueByPath(i,["raiMediaFilteredCount"]);o!=null&&setValueByPath(e,["raiMediaFilteredCount"],o);const a=getValueByPath(i,["raiMediaFilteredReasons"]);return a!=null&&setValueByPath(e,["raiMediaFilteredReasons"],a),e}function generateVideosResponseFromVertex(i){const e={},s=getValueByPath(i,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>generatedVideoFromVertex(d))),setValueByPath(e,["generatedVideos"],c)}const o=getValueByPath(i,["raiMediaFilteredCount"]);o!=null&&setValueByPath(e,["raiMediaFilteredCount"],o);const a=getValueByPath(i,["raiMediaFilteredReasons"]);return a!=null&&setValueByPath(e,["raiMediaFilteredReasons"],a),e}function generateVideosSourceToMldev(i,e){const s={},o=getValueByPath(i,["prompt"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","prompt"],o);const a=getValueByPath(i,["image"]);e!==void 0&&a!=null&&setValueByPath(e,["instances[0]","image"],imageToMldev(a));const c=getValueByPath(i,["video"]);return e!==void 0&&c!=null&&setValueByPath(e,["instances[0]","video"],videoToMldev(c)),s}function generateVideosSourceToVertex(i,e){const s={},o=getValueByPath(i,["prompt"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","prompt"],o);const a=getValueByPath(i,["image"]);e!==void 0&&a!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(a));const c=getValueByPath(i,["video"]);return e!==void 0&&c!=null&&setValueByPath(e,["instances[0]","video"],videoToVertex(c)),s}function generatedImageFromMldev(i){const e={},s=getValueByPath(i,["_self"]);s!=null&&setValueByPath(e,["image"],imageFromMldev(s));const o=getValueByPath(i,["raiFilteredReason"]);o!=null&&setValueByPath(e,["raiFilteredReason"],o);const a=getValueByPath(i,["_self"]);return a!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromMldev(a)),e}function generatedImageFromVertex(i){const e={},s=getValueByPath(i,["_self"]);s!=null&&setValueByPath(e,["image"],imageFromVertex(s));const o=getValueByPath(i,["raiFilteredReason"]);o!=null&&setValueByPath(e,["raiFilteredReason"],o);const a=getValueByPath(i,["_self"]);a!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromVertex(a));const c=getValueByPath(i,["prompt"]);return c!=null&&setValueByPath(e,["enhancedPrompt"],c),e}function generatedImageMaskFromVertex(i){const e={},s=getValueByPath(i,["_self"]);s!=null&&setValueByPath(e,["mask"],imageFromVertex(s));const o=getValueByPath(i,["labels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),setValueByPath(e,["labels"],a)}return e}function generatedVideoFromMldev(i){const e={},s=getValueByPath(i,["video"]);return s!=null&&setValueByPath(e,["video"],videoFromMldev(s)),e}function generatedVideoFromVertex(i){const e={},s=getValueByPath(i,["_self"]);return s!=null&&setValueByPath(e,["video"],videoFromVertex(s)),e}function generationConfigToVertex(i){const e={},s=getValueByPath(i,["modelSelectionConfig"]);s!=null&&setValueByPath(e,["modelConfig"],s);const o=getValueByPath(i,["responseJsonSchema"]);o!=null&&setValueByPath(e,["responseJsonSchema"],o);const a=getValueByPath(i,["audioTimestamp"]);a!=null&&setValueByPath(e,["audioTimestamp"],a);const c=getValueByPath(i,["candidateCount"]);c!=null&&setValueByPath(e,["candidateCount"],c);const d=getValueByPath(i,["enableAffectiveDialog"]);d!=null&&setValueByPath(e,["enableAffectiveDialog"],d);const _=getValueByPath(i,["frequencyPenalty"]);_!=null&&setValueByPath(e,["frequencyPenalty"],_);const j=getValueByPath(i,["logprobs"]);j!=null&&setValueByPath(e,["logprobs"],j);const h=getValueByPath(i,["maxOutputTokens"]);h!=null&&setValueByPath(e,["maxOutputTokens"],h);const g=getValueByPath(i,["mediaResolution"]);g!=null&&setValueByPath(e,["mediaResolution"],g);const b=getValueByPath(i,["presencePenalty"]);b!=null&&setValueByPath(e,["presencePenalty"],b);const $=getValueByPath(i,["responseLogprobs"]);$!=null&&setValueByPath(e,["responseLogprobs"],$);const et=getValueByPath(i,["responseMimeType"]);et!=null&&setValueByPath(e,["responseMimeType"],et);const _e=getValueByPath(i,["responseModalities"]);_e!=null&&setValueByPath(e,["responseModalities"],_e);const nt=getValueByPath(i,["responseSchema"]);nt!=null&&setValueByPath(e,["responseSchema"],nt);const st=getValueByPath(i,["routingConfig"]);st!=null&&setValueByPath(e,["routingConfig"],st);const tt=getValueByPath(i,["seed"]);tt!=null&&setValueByPath(e,["seed"],tt);const it=getValueByPath(i,["speechConfig"]);it!=null&&setValueByPath(e,["speechConfig"],it);const at=getValueByPath(i,["stopSequences"]);at!=null&&setValueByPath(e,["stopSequences"],at);const ct=getValueByPath(i,["temperature"]);ct!=null&&setValueByPath(e,["temperature"],ct);const rt=getValueByPath(i,["thinkingConfig"]);rt!=null&&setValueByPath(e,["thinkingConfig"],rt);const dt=getValueByPath(i,["topK"]);dt!=null&&setValueByPath(e,["topK"],dt);const yt=getValueByPath(i,["topP"]);if(yt!=null&&setValueByPath(e,["topP"],yt),getValueByPath(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function getModelParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);return o!=null&&setValueByPath(s,["_url","name"],tModel(i,o)),s}function getModelParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);return o!=null&&setValueByPath(s,["_url","name"],tModel(i,o)),s}function googleMapsToMldev$1(i){const e={};if(getValueByPath(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=getValueByPath(i,["enableWidget"]);return s!=null&&setValueByPath(e,["enableWidget"],s),e}function googleSearchToMldev$1(i){const e={};if(getValueByPath(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=getValueByPath(i,["timeRangeFilter"]);return s!=null&&setValueByPath(e,["timeRangeFilter"],s),e}function imageConfigToMldev(i){const e={},s=getValueByPath(i,["aspectRatio"]);s!=null&&setValueByPath(e,["aspectRatio"],s);const o=getValueByPath(i,["imageSize"]);if(o!=null&&setValueByPath(e,["imageSize"],o),getValueByPath(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(getValueByPath(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function imageConfigToVertex(i){const e={},s=getValueByPath(i,["aspectRatio"]);s!=null&&setValueByPath(e,["aspectRatio"],s);const o=getValueByPath(i,["imageSize"]);o!=null&&setValueByPath(e,["imageSize"],o);const a=getValueByPath(i,["outputMimeType"]);a!=null&&setValueByPath(e,["imageOutputOptions","mimeType"],a);const c=getValueByPath(i,["outputCompressionQuality"]);return c!=null&&setValueByPath(e,["imageOutputOptions","compressionQuality"],c),e}function imageFromMldev(i){const e={},s=getValueByPath(i,["bytesBase64Encoded"]);s!=null&&setValueByPath(e,["imageBytes"],tBytes(s));const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function imageFromVertex(i){const e={},s=getValueByPath(i,["gcsUri"]);s!=null&&setValueByPath(e,["gcsUri"],s);const o=getValueByPath(i,["bytesBase64Encoded"]);o!=null&&setValueByPath(e,["imageBytes"],tBytes(o));const a=getValueByPath(i,["mimeType"]);return a!=null&&setValueByPath(e,["mimeType"],a),e}function imageToMldev(i){const e={};if(getValueByPath(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=getValueByPath(i,["imageBytes"]);s!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(s));const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function imageToVertex(i){const e={},s=getValueByPath(i,["gcsUri"]);s!=null&&setValueByPath(e,["gcsUri"],s);const o=getValueByPath(i,["imageBytes"]);o!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(o));const a=getValueByPath(i,["mimeType"]);return a!=null&&setValueByPath(e,["mimeType"],a),e}function listModelsConfigToMldev(i,e,s){const o={},a=getValueByPath(e,["pageSize"]);s!==void 0&&a!=null&&setValueByPath(s,["_query","pageSize"],a);const c=getValueByPath(e,["pageToken"]);s!==void 0&&c!=null&&setValueByPath(s,["_query","pageToken"],c);const d=getValueByPath(e,["filter"]);s!==void 0&&d!=null&&setValueByPath(s,["_query","filter"],d);const _=getValueByPath(e,["queryBase"]);return s!==void 0&&_!=null&&setValueByPath(s,["_url","models_url"],tModelsUrl(i,_)),o}function listModelsConfigToVertex(i,e,s){const o={},a=getValueByPath(e,["pageSize"]);s!==void 0&&a!=null&&setValueByPath(s,["_query","pageSize"],a);const c=getValueByPath(e,["pageToken"]);s!==void 0&&c!=null&&setValueByPath(s,["_query","pageToken"],c);const d=getValueByPath(e,["filter"]);s!==void 0&&d!=null&&setValueByPath(s,["_query","filter"],d);const _=getValueByPath(e,["queryBase"]);return s!==void 0&&_!=null&&setValueByPath(s,["_url","models_url"],tModelsUrl(i,_)),o}function listModelsParametersToMldev(i,e){const s={},o=getValueByPath(e,["config"]);return o!=null&&listModelsConfigToMldev(i,o,s),s}function listModelsParametersToVertex(i,e){const s={},o=getValueByPath(e,["config"]);return o!=null&&listModelsConfigToVertex(i,o,s),s}function listModelsResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["_self"]);if(a!=null){let c=tExtractModels(a);Array.isArray(c)&&(c=c.map(d=>modelFromMldev(d))),setValueByPath(e,["models"],c)}return e}function listModelsResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["_self"]);if(a!=null){let c=tExtractModels(a);Array.isArray(c)&&(c=c.map(d=>modelFromVertex(d))),setValueByPath(e,["models"],c)}return e}function maskReferenceConfigToVertex(i){const e={},s=getValueByPath(i,["maskMode"]);s!=null&&setValueByPath(e,["maskMode"],s);const o=getValueByPath(i,["segmentationClasses"]);o!=null&&setValueByPath(e,["maskClasses"],o);const a=getValueByPath(i,["maskDilation"]);return a!=null&&setValueByPath(e,["dilation"],a),e}function modelFromMldev(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["displayName"]);o!=null&&setValueByPath(e,["displayName"],o);const a=getValueByPath(i,["description"]);a!=null&&setValueByPath(e,["description"],a);const c=getValueByPath(i,["version"]);c!=null&&setValueByPath(e,["version"],c);const d=getValueByPath(i,["_self"]);d!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromMldev(d));const _=getValueByPath(i,["inputTokenLimit"]);_!=null&&setValueByPath(e,["inputTokenLimit"],_);const j=getValueByPath(i,["outputTokenLimit"]);j!=null&&setValueByPath(e,["outputTokenLimit"],j);const h=getValueByPath(i,["supportedGenerationMethods"]);h!=null&&setValueByPath(e,["supportedActions"],h);const g=getValueByPath(i,["temperature"]);g!=null&&setValueByPath(e,["temperature"],g);const b=getValueByPath(i,["maxTemperature"]);b!=null&&setValueByPath(e,["maxTemperature"],b);const $=getValueByPath(i,["topP"]);$!=null&&setValueByPath(e,["topP"],$);const et=getValueByPath(i,["topK"]);et!=null&&setValueByPath(e,["topK"],et);const _e=getValueByPath(i,["thinking"]);return _e!=null&&setValueByPath(e,["thinking"],_e),e}function modelFromVertex(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["displayName"]);o!=null&&setValueByPath(e,["displayName"],o);const a=getValueByPath(i,["description"]);a!=null&&setValueByPath(e,["description"],a);const c=getValueByPath(i,["versionId"]);c!=null&&setValueByPath(e,["version"],c);const d=getValueByPath(i,["deployedModels"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map($=>endpointFromVertex($))),setValueByPath(e,["endpoints"],b)}const _=getValueByPath(i,["labels"]);_!=null&&setValueByPath(e,["labels"],_);const j=getValueByPath(i,["_self"]);j!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromVertex(j));const h=getValueByPath(i,["defaultCheckpointId"]);h!=null&&setValueByPath(e,["defaultCheckpointId"],h);const g=getValueByPath(i,["checkpoints"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map($=>$)),setValueByPath(e,["checkpoints"],b)}return e}function partToMldev$1(i){const e={},s=getValueByPath(i,["mediaResolution"]);s!=null&&setValueByPath(e,["mediaResolution"],s);const o=getValueByPath(i,["codeExecutionResult"]);o!=null&&setValueByPath(e,["codeExecutionResult"],o);const a=getValueByPath(i,["executableCode"]);a!=null&&setValueByPath(e,["executableCode"],a);const c=getValueByPath(i,["fileData"]);c!=null&&setValueByPath(e,["fileData"],fileDataToMldev$1(c));const d=getValueByPath(i,["functionCall"]);d!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$1(d));const _=getValueByPath(i,["functionResponse"]);_!=null&&setValueByPath(e,["functionResponse"],_);const j=getValueByPath(i,["inlineData"]);j!=null&&setValueByPath(e,["inlineData"],blobToMldev$1(j));const h=getValueByPath(i,["text"]);h!=null&&setValueByPath(e,["text"],h);const g=getValueByPath(i,["thought"]);g!=null&&setValueByPath(e,["thought"],g);const b=getValueByPath(i,["thoughtSignature"]);b!=null&&setValueByPath(e,["thoughtSignature"],b);const $=getValueByPath(i,["videoMetadata"]);return $!=null&&setValueByPath(e,["videoMetadata"],$),e}function productImageToVertex(i){const e={},s=getValueByPath(i,["productImage"]);return s!=null&&setValueByPath(e,["image"],imageToVertex(s)),e}function recontextImageConfigToVertex(i,e){const s={},o=getValueByPath(i,["numberOfImages"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","sampleCount"],o);const a=getValueByPath(i,["baseSteps"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","baseSteps"],a);const c=getValueByPath(i,["outputGcsUri"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","storageUri"],c);const d=getValueByPath(i,["seed"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","seed"],d);const _=getValueByPath(i,["safetyFilterLevel"]);e!==void 0&&_!=null&&setValueByPath(e,["parameters","safetySetting"],_);const j=getValueByPath(i,["personGeneration"]);e!==void 0&&j!=null&&setValueByPath(e,["parameters","personGeneration"],j);const h=getValueByPath(i,["addWatermark"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","addWatermark"],h);const g=getValueByPath(i,["outputMimeType"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],g);const b=getValueByPath(i,["outputCompressionQuality"]);e!==void 0&&b!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],b);const $=getValueByPath(i,["enhancePrompt"]);e!==void 0&&$!=null&&setValueByPath(e,["parameters","enhancePrompt"],$);const et=getValueByPath(i,["labels"]);return e!==void 0&&et!=null&&setValueByPath(e,["labels"],et),s}function recontextImageParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["source"]);a!=null&&recontextImageSourceToVertex(a,s);const c=getValueByPath(e,["config"]);return c!=null&&recontextImageConfigToVertex(c,s),s}function recontextImageResponseFromVertex(i){const e={},s=getValueByPath(i,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>generatedImageFromVertex(a))),setValueByPath(e,["generatedImages"],o)}return e}function recontextImageSourceToVertex(i,e){const s={},o=getValueByPath(i,["prompt"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","prompt"],o);const a=getValueByPath(i,["personImage"]);e!==void 0&&a!=null&&setValueByPath(e,["instances[0]","personImage","image"],imageToVertex(a));const c=getValueByPath(i,["productImages"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(_=>productImageToVertex(_))),setValueByPath(e,["instances[0]","productImages"],d)}return s}function referenceImageAPIInternalToVertex(i){const e={},s=getValueByPath(i,["referenceImage"]);s!=null&&setValueByPath(e,["referenceImage"],imageToVertex(s));const o=getValueByPath(i,["referenceId"]);o!=null&&setValueByPath(e,["referenceId"],o);const a=getValueByPath(i,["referenceType"]);a!=null&&setValueByPath(e,["referenceType"],a);const c=getValueByPath(i,["maskImageConfig"]);c!=null&&setValueByPath(e,["maskImageConfig"],maskReferenceConfigToVertex(c));const d=getValueByPath(i,["controlImageConfig"]);d!=null&&setValueByPath(e,["controlImageConfig"],controlReferenceConfigToVertex(d));const _=getValueByPath(i,["styleImageConfig"]);_!=null&&setValueByPath(e,["styleImageConfig"],_);const j=getValueByPath(i,["subjectImageConfig"]);return j!=null&&setValueByPath(e,["subjectImageConfig"],j),e}function safetyAttributesFromMldev(i){const e={},s=getValueByPath(i,["safetyAttributes","categories"]);s!=null&&setValueByPath(e,["categories"],s);const o=getValueByPath(i,["safetyAttributes","scores"]);o!=null&&setValueByPath(e,["scores"],o);const a=getValueByPath(i,["contentType"]);return a!=null&&setValueByPath(e,["contentType"],a),e}function safetyAttributesFromVertex(i){const e={},s=getValueByPath(i,["safetyAttributes","categories"]);s!=null&&setValueByPath(e,["categories"],s);const o=getValueByPath(i,["safetyAttributes","scores"]);o!=null&&setValueByPath(e,["scores"],o);const a=getValueByPath(i,["contentType"]);return a!=null&&setValueByPath(e,["contentType"],a),e}function safetySettingToMldev(i){const e={},s=getValueByPath(i,["category"]);if(s!=null&&setValueByPath(e,["category"],s),getValueByPath(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=getValueByPath(i,["threshold"]);return o!=null&&setValueByPath(e,["threshold"],o),e}function scribbleImageToVertex(i){const e={},s=getValueByPath(i,["image"]);return s!=null&&setValueByPath(e,["image"],imageToVertex(s)),e}function segmentImageConfigToVertex(i,e){const s={},o=getValueByPath(i,["mode"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","mode"],o);const a=getValueByPath(i,["maxPredictions"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","maxPredictions"],a);const c=getValueByPath(i,["confidenceThreshold"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","confidenceThreshold"],c);const d=getValueByPath(i,["maskDilation"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","maskDilation"],d);const _=getValueByPath(i,["binaryColorThreshold"]);e!==void 0&&_!=null&&setValueByPath(e,["parameters","binaryColorThreshold"],_);const j=getValueByPath(i,["labels"]);return e!==void 0&&j!=null&&setValueByPath(e,["labels"],j),s}function segmentImageParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["source"]);a!=null&&segmentImageSourceToVertex(a,s);const c=getValueByPath(e,["config"]);return c!=null&&segmentImageConfigToVertex(c,s),s}function segmentImageResponseFromVertex(i){const e={},s=getValueByPath(i,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>generatedImageMaskFromVertex(a))),setValueByPath(e,["generatedMasks"],o)}return e}function segmentImageSourceToVertex(i,e){const s={},o=getValueByPath(i,["prompt"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","prompt"],o);const a=getValueByPath(i,["image"]);e!==void 0&&a!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(a));const c=getValueByPath(i,["scribbleImage"]);return e!==void 0&&c!=null&&setValueByPath(e,["instances[0]","scribble"],scribbleImageToVertex(c)),s}function toolConfigToMldev(i){const e={},s=getValueByPath(i,["functionCallingConfig"]);s!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev(s));const o=getValueByPath(i,["retrievalConfig"]);return o!=null&&setValueByPath(e,["retrievalConfig"],o),e}function toolToMldev$1(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),setValueByPath(e,["functionDeclarations"],g)}if(getValueByPath(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=getValueByPath(i,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const a=getValueByPath(i,["computerUse"]);a!=null&&setValueByPath(e,["computerUse"],a);const c=getValueByPath(i,["fileSearch"]);c!=null&&setValueByPath(e,["fileSearch"],c);const d=getValueByPath(i,["codeExecution"]);if(d!=null&&setValueByPath(e,["codeExecution"],d),getValueByPath(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const _=getValueByPath(i,["googleMaps"]);_!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$1(_));const j=getValueByPath(i,["googleSearch"]);j!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$1(j));const h=getValueByPath(i,["urlContext"]);return h!=null&&setValueByPath(e,["urlContext"],h),e}function toolToVertex(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map($=>functionDeclarationToVertex($))),setValueByPath(e,["functionDeclarations"],b)}const o=getValueByPath(i,["retrieval"]);o!=null&&setValueByPath(e,["retrieval"],o);const a=getValueByPath(i,["googleSearchRetrieval"]);a!=null&&setValueByPath(e,["googleSearchRetrieval"],a);const c=getValueByPath(i,["computerUse"]);if(c!=null&&setValueByPath(e,["computerUse"],c),getValueByPath(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=getValueByPath(i,["codeExecution"]);d!=null&&setValueByPath(e,["codeExecution"],d);const _=getValueByPath(i,["enterpriseWebSearch"]);_!=null&&setValueByPath(e,["enterpriseWebSearch"],_);const j=getValueByPath(i,["googleMaps"]);j!=null&&setValueByPath(e,["googleMaps"],j);const h=getValueByPath(i,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],h);const g=getValueByPath(i,["urlContext"]);return g!=null&&setValueByPath(e,["urlContext"],g),e}function tunedModelInfoFromMldev(i){const e={},s=getValueByPath(i,["baseModel"]);s!=null&&setValueByPath(e,["baseModel"],s);const o=getValueByPath(i,["createTime"]);o!=null&&setValueByPath(e,["createTime"],o);const a=getValueByPath(i,["updateTime"]);return a!=null&&setValueByPath(e,["updateTime"],a),e}function tunedModelInfoFromVertex(i){const e={},s=getValueByPath(i,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&setValueByPath(e,["baseModel"],s);const o=getValueByPath(i,["createTime"]);o!=null&&setValueByPath(e,["createTime"],o);const a=getValueByPath(i,["updateTime"]);return a!=null&&setValueByPath(e,["updateTime"],a),e}function updateModelConfigToMldev(i,e){const s={},o=getValueByPath(i,["displayName"]);e!==void 0&&o!=null&&setValueByPath(e,["displayName"],o);const a=getValueByPath(i,["description"]);e!==void 0&&a!=null&&setValueByPath(e,["description"],a);const c=getValueByPath(i,["defaultCheckpointId"]);return e!==void 0&&c!=null&&setValueByPath(e,["defaultCheckpointId"],c),s}function updateModelConfigToVertex(i,e){const s={},o=getValueByPath(i,["displayName"]);e!==void 0&&o!=null&&setValueByPath(e,["displayName"],o);const a=getValueByPath(i,["description"]);e!==void 0&&a!=null&&setValueByPath(e,["description"],a);const c=getValueByPath(i,["defaultCheckpointId"]);return e!==void 0&&c!=null&&setValueByPath(e,["defaultCheckpointId"],c),s}function updateModelParametersToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","name"],tModel(i,o));const a=getValueByPath(e,["config"]);return a!=null&&updateModelConfigToMldev(a,s),s}function updateModelParametersToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["config"]);return a!=null&&updateModelConfigToVertex(a,s),s}function upscaleImageAPIConfigInternalToVertex(i,e){const s={},o=getValueByPath(i,["outputGcsUri"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","storageUri"],o);const a=getValueByPath(i,["safetyFilterLevel"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","safetySetting"],a);const c=getValueByPath(i,["personGeneration"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","personGeneration"],c);const d=getValueByPath(i,["includeRaiReason"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","includeRaiReason"],d);const _=getValueByPath(i,["outputMimeType"]);e!==void 0&&_!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],_);const j=getValueByPath(i,["outputCompressionQuality"]);e!==void 0&&j!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],j);const h=getValueByPath(i,["enhanceInputImage"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=getValueByPath(i,["imagePreservationFactor"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const b=getValueByPath(i,["labels"]);e!==void 0&&b!=null&&setValueByPath(e,["labels"],b);const $=getValueByPath(i,["numberOfImages"]);e!==void 0&&$!=null&&setValueByPath(e,["parameters","sampleCount"],$);const et=getValueByPath(i,["mode"]);return e!==void 0&&et!=null&&setValueByPath(e,["parameters","mode"],et),s}function upscaleImageAPIParametersInternalToVertex(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["_url","model"],tModel(i,o));const a=getValueByPath(e,["image"]);a!=null&&setValueByPath(s,["instances[0]","image"],imageToVertex(a));const c=getValueByPath(e,["upscaleFactor"]);c!=null&&setValueByPath(s,["parameters","upscaleConfig","upscaleFactor"],c);const d=getValueByPath(e,["config"]);return d!=null&&upscaleImageAPIConfigInternalToVertex(d,s),s}function upscaleImageResponseFromVertex(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>generatedImageFromVertex(c))),setValueByPath(e,["generatedImages"],a)}return e}function videoFromMldev(i){const e={},s=getValueByPath(i,["uri"]);s!=null&&setValueByPath(e,["uri"],s);const o=getValueByPath(i,["encodedVideo"]);o!=null&&setValueByPath(e,["videoBytes"],tBytes(o));const a=getValueByPath(i,["encoding"]);return a!=null&&setValueByPath(e,["mimeType"],a),e}function videoFromVertex(i){const e={},s=getValueByPath(i,["gcsUri"]);s!=null&&setValueByPath(e,["uri"],s);const o=getValueByPath(i,["bytesBase64Encoded"]);o!=null&&setValueByPath(e,["videoBytes"],tBytes(o));const a=getValueByPath(i,["mimeType"]);return a!=null&&setValueByPath(e,["mimeType"],a),e}function videoGenerationMaskToVertex(i){const e={},s=getValueByPath(i,["image"]);s!=null&&setValueByPath(e,["_self"],imageToVertex(s));const o=getValueByPath(i,["maskMode"]);return o!=null&&setValueByPath(e,["maskMode"],o),e}function videoGenerationReferenceImageToMldev(i){const e={},s=getValueByPath(i,["image"]);s!=null&&setValueByPath(e,["image"],imageToMldev(s));const o=getValueByPath(i,["referenceType"]);return o!=null&&setValueByPath(e,["referenceType"],o),e}function videoGenerationReferenceImageToVertex(i){const e={},s=getValueByPath(i,["image"]);s!=null&&setValueByPath(e,["image"],imageToVertex(s));const o=getValueByPath(i,["referenceType"]);return o!=null&&setValueByPath(e,["referenceType"],o),e}function videoToMldev(i){const e={},s=getValueByPath(i,["uri"]);s!=null&&setValueByPath(e,["uri"],s);const o=getValueByPath(i,["videoBytes"]);o!=null&&setValueByPath(e,["encodedVideo"],tBytes(o));const a=getValueByPath(i,["mimeType"]);return a!=null&&setValueByPath(e,["encoding"],a),e}function videoToVertex(i){const e={},s=getValueByPath(i,["uri"]);s!=null&&setValueByPath(e,["gcsUri"],s);const o=getValueByPath(i,["videoBytes"]);o!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(o));const a=getValueByPath(i,["mimeType"]);return a!=null&&setValueByPath(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileSearchStoreConfigToMldev(i,e){const s={},o=getValueByPath(i,["displayName"]);return e!==void 0&&o!=null&&setValueByPath(e,["displayName"],o),s}function createFileSearchStoreParametersToMldev(i){const e={},s=getValueByPath(i,["config"]);return s!=null&&createFileSearchStoreConfigToMldev(s,e),e}function deleteFileSearchStoreConfigToMldev(i,e){const s={},o=getValueByPath(i,["force"]);return e!==void 0&&o!=null&&setValueByPath(e,["_query","force"],o),s}function deleteFileSearchStoreParametersToMldev(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["_url","name"],s);const o=getValueByPath(i,["config"]);return o!=null&&deleteFileSearchStoreConfigToMldev(o,e),e}function getFileSearchStoreParametersToMldev(i){const e={},s=getValueByPath(i,["name"]);return s!=null&&setValueByPath(e,["_url","name"],s),e}function importFileConfigToMldev(i,e){const s={},o=getValueByPath(i,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["customMetadata"],c)}const a=getValueByPath(i,["chunkingConfig"]);return e!==void 0&&a!=null&&setValueByPath(e,["chunkingConfig"],a),s}function importFileOperationFromMldev(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["name"],s);const o=getValueByPath(i,["metadata"]);o!=null&&setValueByPath(e,["metadata"],o);const a=getValueByPath(i,["done"]);a!=null&&setValueByPath(e,["done"],a);const c=getValueByPath(i,["error"]);c!=null&&setValueByPath(e,["error"],c);const d=getValueByPath(i,["response"]);return d!=null&&setValueByPath(e,["response"],importFileResponseFromMldev(d)),e}function importFileParametersToMldev(i){const e={},s=getValueByPath(i,["fileSearchStoreName"]);s!=null&&setValueByPath(e,["_url","file_search_store_name"],s);const o=getValueByPath(i,["fileName"]);o!=null&&setValueByPath(e,["fileName"],o);const a=getValueByPath(i,["config"]);return a!=null&&importFileConfigToMldev(a,e),e}function importFileResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["parent"]);o!=null&&setValueByPath(e,["parent"],o);const a=getValueByPath(i,["documentName"]);return a!=null&&setValueByPath(e,["documentName"],a),e}function listFileSearchStoresConfigToMldev(i,e){const s={},o=getValueByPath(i,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const a=getValueByPath(i,["pageToken"]);return e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a),s}function listFileSearchStoresParametersToMldev(i){const e={},s=getValueByPath(i,["config"]);return s!=null&&listFileSearchStoresConfigToMldev(s,e),e}function listFileSearchStoresResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["fileSearchStores"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["fileSearchStores"],c)}return e}function uploadToFileSearchStoreConfigToMldev(i,e){const s={},o=getValueByPath(i,["mimeType"]);e!==void 0&&o!=null&&setValueByPath(e,["mimeType"],o);const a=getValueByPath(i,["displayName"]);e!==void 0&&a!=null&&setValueByPath(e,["displayName"],a);const c=getValueByPath(i,["customMetadata"]);if(e!==void 0&&c!=null){let _=c;Array.isArray(_)&&(_=_.map(j=>j)),setValueByPath(e,["customMetadata"],_)}const d=getValueByPath(i,["chunkingConfig"]);return e!==void 0&&d!=null&&setValueByPath(e,["chunkingConfig"],d),s}function uploadToFileSearchStoreParametersToMldev(i){const e={},s=getValueByPath(i,["fileSearchStoreName"]);s!=null&&setValueByPath(e,["_url","file_search_store_name"],s);const o=getValueByPath(i,["config"]);return o!=null&&uploadToFileSearchStoreConfigToMldev(o,e),e}function uploadToFileSearchStoreResumableResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);return s!=null&&setValueByPath(e,["sdkHttpResponse"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CONTENT_TYPE_HEADER="Content-Type",SERVER_TIMEOUT_HEADER="X-Server-Timeout",USER_AGENT_HEADER="User-Agent",GOOGLE_API_CLIENT_HEADER="x-goog-api-client",SDK_VERSION="1.34.0",LIBRARY_LABEL=`google-genai-sdk/${SDK_VERSION}`,VERTEX_AI_API_DEFAULT_VERSION="v1beta1",GOOGLE_AI_API_DEFAULT_VERSION="v1beta";class ApiClient{constructor(e){var s,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:VERTEX_AI_API_DEFAULT_VERSION,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:GOOGLE_AI_API_DEFAULT_VERSION,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,o){const a=[this.getRequestUrlInternal(s)];return o&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,s,o);if(e.queryParams)for(const[d,_]of Object.entries(e.queryParams))a.searchParams.append(d,String(_));let c={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=e.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,s,a.toString(),e.abortSignal),this.unaryApiCall(a,c,e.httpMethod)}patchHttpOptions(e,s){const o=JSON.parse(JSON.stringify(e));for(const[a,c]of Object.entries(s))typeof c=="object"?o[a]=Object.assign(Object.assign({},o[a]),c):c!==void 0&&(o[a]=c);return o}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,s,o);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let c={};return c.body=e.body,c=await this.includeExtraHttpOptionsToRequestInit(c,s,a.toString(),e.abortSignal),this.streamApiCall(a,c,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,o,a){if(s&&s.timeout||a){const c=new AbortController,d=c.signal;if(s.timeout&&s?.timeout>0){const _=setTimeout(()=>c.abort(),s.timeout);_&&typeof _.unref=="function"&&_.unref()}a&&a.addEventListener("abort",()=>{c.abort()}),e.signal=d}return s&&s.extraBody!==null&&includeExtraBodyToRequestInit(e,s.extraBody),e.headers=await this.getHeadersInternal(s,o),e}async unaryApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async a=>(await throwErrorIfNotOK(a),new HttpResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async a=>(await throwErrorIfNotOK(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return __asyncGenerator(this,arguments,function*(){var o;const a=(o=e?.body)===null||o===void 0?void 0:o.getReader(),c=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let d="";const _="data:",j=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:g}=yield __await(a.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=c.decode(g,{stream:!0});try{const _e=JSON.parse(b);if("error"in _e){const nt=JSON.parse(JSON.stringify(_e.error)),st=nt.status,tt=nt.code,it=`got status: ${st}. ${JSON.stringify(_e)}`;if(tt>=400&&tt<600)throw new ApiError({message:it,status:tt})}}catch(_e){if(_e.name==="ApiError")throw _e}d+=b;let $=-1,et=0;for(;;){$=-1,et=0;for(const st of j){const tt=d.indexOf(st);tt!==-1&&($===-1||tt<$)&&($=tt,et=st.length)}if($===-1)break;const _e=d.substring(0,$);d=d.substring($+et);const nt=_e.trim();if(nt.startsWith(_)){const st=nt.substring(_.length).trim();try{const tt=new Response(st,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield __await(new HttpResponse(tt))}catch(tt){throw new Error(`exception parsing stream chunk ${st}. ${tt}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},s=LIBRARY_LABEL+" "+this.clientOptions.userAgentExtra;return e[USER_AGENT_HEADER]=s,e[GOOGLE_API_CLIENT_HEADER]=s,e[CONTENT_TYPE_HEADER]="application/json",e}async getHeadersInternal(e,s){const o=new Headers;if(e&&e.headers){for(const[a,c]of Object.entries(e.headers))o.append(a,c);e.timeout&&e.timeout>0&&o.append(SERVER_TIMEOUT_HEADER,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,s),o}getFileName(e){var s;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(s=o.split(/[/\\]/).pop())!==null&&s!==void 0?s:""),o}async uploadFile(e,s){var o;const a={};s!=null&&(a.mimeType=s.mimeType,a.name=s.name,a.displayName=s.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const c=this.clientOptions.uploader,d=await c.stat(e);a.sizeBytes=String(d.size);const _=(o=s?.mimeType)!==null&&o!==void 0?o:d.type;if(_===void 0||_==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=_;const j={file:a},h=this.getFileName(e),g=formatMap("upload/v1beta/files",j._url),b=await this.fetchUploadUrl(g,a.sizeBytes,a.mimeType,h,j,s?.httpOptions);return c.upload(e,b,this)}async uploadFileToFileSearchStore(e,s,o){var a;const c=this.clientOptions.uploader,d=await c.stat(s),_=String(d.size),j=(a=o?.mimeType)!==null&&a!==void 0?a:d.type;if(j===void 0||j==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(s),b={};o!=null&&uploadToFileSearchStoreConfigToMldev(o,b);const $=await this.fetchUploadUrl(h,_,j,g,b,o?.httpOptions);return c.uploadToFileSearchStore(s,$,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s,o,a,c,d){var _;let j={};d?j=d:j={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s}`,"X-Goog-Upload-Header-Content-Type":`${o}`},a?{"X-Goog-Upload-File-Name":a}:{})};const h=await this.request({path:e,body:JSON.stringify(c),httpMethod:"POST",httpOptions:j});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(_=h?.headers)===null||_===void 0?void 0:_["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function throwErrorIfNotOK(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const s=i.status;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=JSON.stringify(o);throw s>=400&&s<600?new ApiError({message:a,status:s}):new Error(a)}}function includeExtraBodyToRequestInit(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof i.body=="string"&&i.body.length>0)try{const c=JSON.parse(i.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))s=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(c,d){const _=Object.assign({},c);for(const j in d)if(Object.prototype.hasOwnProperty.call(d,j)){const h=d[j],g=_[j];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?_[j]=o(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${j}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),_[j]=h)}return _}const a=o(s,e);i.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MCP_LABEL="mcp_used/unknown";let hasMcpToolUsageFromMcpToTool=!1;function hasMcpToolUsage(i){for(const e of i)if(isMcpCallableTool(e)||typeof e=="object"&&"inputSchema"in e)return!0;return hasMcpToolUsageFromMcpToTool}function setMcpUsageHeader(i){var e;const s=(e=i[GOOGLE_API_CLIENT_HEADER])!==null&&e!==void 0?e:"";i[GOOGLE_API_CLIENT_HEADER]=(s+` ${MCP_LABEL}`).trimStart()}function isMcpCallableTool(i){return i!==null&&typeof i=="object"&&i instanceof McpCallableTool}function listAllTools(i){return __asyncGenerator(this,arguments,function*(s,o=100){let a,c=0;for(;c<o;){const d=yield __await(s.listTools({cursor:a}));for(const _ of d.tools)yield yield __await(_),c++;if(!d.nextCursor)break;a=d.nextCursor}})}class McpCallableTool{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new McpCallableTool(e,s)}async initialize(){var e,s,o,a;if(this.mcpTools.length>0)return;const c={},d=[];for(const g of this.mcpClients)try{for(var _=!0,j=(s=void 0,__asyncValues(listAllTools(g))),h;h=await j.next(),e=h.done,!e;_=!0){a=h.value,_=!1;const b=a;d.push(b);const $=b.name;if(c[$])throw new Error(`Duplicate function name ${$} found in MCP tools. Please ensure function names are unique.`);c[$]=g}}catch(b){s={error:b}}finally{try{!_&&!e&&(o=j.return)&&await o.call(j)}finally{if(s)throw s.error}}this.mcpTools=d,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),mcpToolsToGeminiTool(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[o.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const d=await a.callTool({name:o.name,arguments:o.args},void 0,c);s.push({functionResponse:{name:o.name,response:d.isError?{error:d}:d}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function handleWebSocketMessage$1(i,e,s){const o=new LiveMusicServerMessage;let a;s.data instanceof Blob?a=JSON.parse(await s.data.text()):a=JSON.parse(s.data),Object.assign(o,a),e(o)}class LiveMusic{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o}async connect(e){var s,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d=mapToHeaders$1(this.apiClient.getDefaultHeaders()),_=this.apiClient.getApiKey(),j=`${a}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${_}`;let h=()=>{};const g=new Promise(at=>{h=at}),b=e.callbacks,$=function(){h({})},et=this.apiClient,_e={onopen:$,onmessage:at=>{handleWebSocketMessage$1(et,b.onmessage,at)},onerror:(s=b?.onerror)!==null&&s!==void 0?s:function(at){},onclose:(o=b?.onclose)!==null&&o!==void 0?o:function(at){}},nt=this.webSocketFactory.create(j,headersToMap$1(d),_e);nt.connect(),await g;const it={setup:{model:tModel(this.apiClient,e.model)}};return nt.send(JSON.stringify(it)),new LiveMusicSession(nt,this.apiClient)}}class LiveMusicSession{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=liveMusicSetWeightedPromptsParametersToMldev(e);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=liveMusicSetConfigParametersToMldev(e);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const s={playbackControl:e};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(LiveMusicPlaybackControl.PLAY)}pause(){this.sendPlaybackControl(LiveMusicPlaybackControl.PAUSE)}stop(){this.sendPlaybackControl(LiveMusicPlaybackControl.STOP)}resetContext(){this.sendPlaybackControl(LiveMusicPlaybackControl.RESET_CONTEXT)}close(){this.conn.close()}}function headersToMap$1(i){const e={};return i.forEach((s,o)=>{e[o]=s}),e}function mapToHeaders$1(i){const e=new Headers;for(const[s,o]of Object.entries(i))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FUNCTION_RESPONSE_REQUIRES_ID="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function handleWebSocketMessage(i,e,s){const o=new LiveServerMessage;let a;s.data instanceof Blob?a=await s.data.text():s.data instanceof ArrayBuffer?a=new TextDecoder().decode(s.data):a=s.data;const c=JSON.parse(a);if(i.isVertexAI()){const d=liveServerMessageFromVertex(c);Object.assign(o,d)}else Object.assign(o,c);e(o)}class Live{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o,this.music=new LiveMusic(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,o,a,c,d,_;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const j=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)&&setMcpUsageHeader(b);const $=mapToHeaders(b);if(this.apiClient.isVertexAI())g=`${j}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders($,g);else{const gt=this.apiClient.getApiKey();let At="BidiGenerateContent",Vt="key";gt?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),At="BidiGenerateContentConstrained",Vt="access_token"),g=`${j}/ws/google.ai.generativelanguage.${h}.GenerativeService.${At}?${Vt}=${gt}`}let et=()=>{};const _e=new Promise(gt=>{et=gt}),nt=e.callbacks,st=function(){var gt;(gt=nt?.onopen)===null||gt===void 0||gt.call(nt),et({})},tt=this.apiClient,it={onopen:st,onmessage:gt=>{handleWebSocketMessage(tt,nt.onmessage,gt)},onerror:(s=nt?.onerror)!==null&&s!==void 0?s:function(gt){},onclose:(o=nt?.onclose)!==null&&o!==void 0?o:function(gt){}},at=this.webSocketFactory.create(g,headersToMap($),it);at.connect(),await _e;let ct=tModel(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ct.startsWith("publishers/")){const gt=this.apiClient.getProject(),At=this.apiClient.getLocation();ct=`projects/${gt}/locations/${At}/`+ct}let rt={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Modality.AUDIO]}:e.config.responseModalities=[Modality.AUDIO]),!((c=e.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const dt=(_=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&_!==void 0?_:[],yt=[];for(const gt of dt)if(this.isCallableTool(gt)){const At=gt;yt.push(await At.tool())}else yt.push(gt);yt.length>0&&(e.config.tools=yt);const vt={model:ct,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?rt=liveConnectParametersToVertex(this.apiClient,vt):rt=liveConnectParametersToMldev(this.apiClient,vt),delete rt.config,at.send(JSON.stringify(rt)),new Session(at,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const defaultLiveSendClientContentParamerters={turnComplete:!0};class Session{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let o=[];try{o=tContents(s.turns),e.isVertexAI()||(o=o.map(a=>contentToMldev$1(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:o,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let o=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?o=s.functionResponses:o=[s.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const c of o){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!e.isVertexAI()&&!("id"in c))throw new Error(FUNCTION_RESPONSE_REQUIRES_ID)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},defaultLiveSendClientContentParamerters),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:liveSendRealtimeInputParametersToVertex(e)}:s={realtimeInput:liveSendRealtimeInputParametersToMldev(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function headersToMap(i){const e={};return i.forEach((s,o)=>{e[o]=s}),e}function mapToHeaders(i){const e=new Headers;for(const[s,o]of Object.entries(i))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DEFAULT_MAX_REMOTE_CALLS=10;function shouldDisableAfc(i){var e,s,o;if(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const d of(s=i?.tools)!==null&&s!==void 0?s:[])if(isCallableTool(d)){a=!0;break}if(!a)return!0;const c=(o=i?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function isCallableTool(i){return"callTool"in i&&typeof i.callTool=="function"}function hasCallableTools(i){var e,s,o;return(o=(s=(e=i.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(a=>isCallableTool(a)))!==null&&o!==void 0?o:!1}function findAfcIncompatibleToolIndexes(i){var e;const s=[];return!((e=i?.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((o,a)=>{if(isCallableTool(o))return;const c=o;c.functionDeclarations&&c.functionDeclarations.length>0&&s.push(a)}),s}function shouldAppendAfcHistory(i){var e;return!(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Models extends BaseModule{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var o,a,c,d,_;const j=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!hasCallableTools(s)||shouldDisableAfc(s.config))return await this.generateContentInternal(j);const h=findAfcIncompatibleToolIndexes(s);if(h.length>0){const nt=h.map(st=>`tools[${st}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${nt}.`)}let g,b;const $=tContents(j.contents),et=(c=(a=(o=j.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&c!==void 0?c:DEFAULT_MAX_REMOTE_CALLS;let _e=0;for(;_e<et&&(g=await this.generateContentInternal(j),!(!g.functionCalls||g.functionCalls.length===0));){const nt=g.candidates[0].content,st=[];for(const tt of(_=(d=s.config)===null||d===void 0?void 0:d.tools)!==null&&_!==void 0?_:[])if(isCallableTool(tt)){const at=await tt.callTool(g.functionCalls);st.push(...at)}_e++,b={role:"user",parts:st},j.contents=tContents(j.contents),j.contents.push(nt),j.contents.push(b),shouldAppendAfcHistory(j.config)&&($.push(nt),$.push(b))}return shouldAppendAfcHistory(j.config)&&(g.automaticFunctionCallingHistory=$),g},this.generateContentStream=async s=>{var o,a,c,d,_;if(this.maybeMoveToResponseJsonSchem(s),shouldDisableAfc(s.config)){const b=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(b)}const j=findAfcIncompatibleToolIndexes(s);if(j.length>0){const b=j.map($=>`tools[${$}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(c=(a=(o=s?.config)===null||o===void 0?void 0:o.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,g=(_=(d=s?.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||_===void 0?void 0:_.disable;if(h&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(o=>{var a;let c;const d=[];if(o?.generatedImages)for(const j of o.generatedImages)j&&j?.safetyAttributes&&((a=j?.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?c=j?.safetyAttributes:d.push(j);let _;return c?_={generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:o.sdkHttpResponse}:_={generatedImages:d,sdkHttpResponse:o.sdkHttpResponse},_}),this.list=async s=>{var o;const d={config:Object.assign(Object.assign({},{queryBase:!0}),s?.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((o=d.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Pager(PagedItem.PAGED_ITEM_MODELS,_=>this.listInternal(_),await this.listInternal(d),d)},this.editImage=async s=>{const o={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(o.referenceImages=s.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async s=>{let o={numberOfImages:1,mode:"upscale"};s.config&&(o=Object.assign(Object.assign({},o),s.config));const a={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:o};return await this.upscaleImageInternal(a)},this.generateVideos=async s=>{var o,a,c,d,_,j;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=s.video)===null||o===void 0)&&o.uri&&(!((a=s.video)===null||a===void 0)&&a.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((d=(c=s.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.uri&&(!((j=(_=s.source)===null||_===void 0?void 0:_.video)===null||j===void 0)&&j.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,o,a;const c=(s=e.config)===null||s===void 0?void 0:s.tools;if(!c)return e;const d=await Promise.all(c.map(async j=>isCallableTool(j)?await j.tool():j)),_={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(_.config.tools=d,e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)){const j=(a=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{};let h=Object.assign({},j);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),setMcpUsageHeader(h),_.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return _}async initAfcToolsMap(e){var s,o,a;const c=new Map;for(const d of(o=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(isCallableTool(d)){const _=d,j=await _.tool();for(const h of(a=j.functionDeclarations)!==null&&a!==void 0?a:[]){if(!h.name)throw new Error("Function declaration name is required.");if(c.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);c.set(h.name,_)}}return c}async processAfcStream(e){var s,o,a;const c=(a=(o=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:DEFAULT_MAX_REMOTE_CALLS;let d=!1,_=0;const j=await this.initAfcToolsMap(e);return function(h,g,b){return __asyncGenerator(this,arguments,function*(){for(var $,et,_e,nt,st,tt;_<c;){d&&(_++,d=!1);const rt=yield __await(h.processParamsMaybeAddMcpUsage(b)),dt=yield __await(h.generateContentStreamInternal(rt)),yt=[],vt=[];try{for(var it=!0,at=(et=void 0,__asyncValues(dt)),ct;ct=yield __await(at.next()),$=ct.done,!$;it=!0){nt=ct.value,it=!1;const gt=nt;if(yield yield __await(gt),gt.candidates&&(!((st=gt.candidates[0])===null||st===void 0)&&st.content)){vt.push(gt.candidates[0].content);for(const At of(tt=gt.candidates[0].content.parts)!==null&&tt!==void 0?tt:[])if(_<c&&At.functionCall){if(!At.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(At.functionCall.name)){const Vt=yield __await(g.get(At.functionCall.name).callTool([At.functionCall]));yt.push(...Vt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${At.functionCall.name}`)}}}}catch(gt){et={error:gt}}finally{try{!it&&!$&&(_e=at.return)&&(yield __await(_e.call(at)))}finally{if(et)throw et.error}}if(yt.length>0){d=!0;const gt=new GenerateContentResponse;gt.candidates=[{content:{role:"user",parts:yt}}],yield yield __await(gt);const At=[];At.push(...vt),At.push({role:"user",parts:yt});const Vt=tContents(b.contents).concat(At);b.contents=Vt}else break}})}(this,j,e)}async generateContentInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=generateContentParametersToVertex(this.apiClient,e);return _=formatMap("{model}:generateContent",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=generateContentResponseFromVertex(g),$=new GenerateContentResponse;return Object.assign($,b),$})}else{const h=generateContentParametersToMldev(this.apiClient,e);return _=formatMap("{model}:generateContent",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=generateContentResponseFromMldev(g),$=new GenerateContentResponse;return Object.assign($,b),$})}}async generateContentStreamInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=generateContentParametersToVertex(this.apiClient,e);return _=formatMap("{model}:streamGenerateContent?alt=sse",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),d.then(function(b){return __asyncGenerator(this,arguments,function*(){var $,et,_e,nt;try{for(var st=!0,tt=__asyncValues(b),it;it=yield __await(tt.next()),$=it.done,!$;st=!0){nt=it.value,st=!1;const at=nt,ct=generateContentResponseFromVertex(yield __await(at.json()));ct.sdkHttpResponse={headers:at.headers};const rt=new GenerateContentResponse;Object.assign(rt,ct),yield yield __await(rt)}}catch(at){et={error:at}}finally{try{!st&&!$&&(_e=tt.return)&&(yield __await(_e.call(tt)))}finally{if(et)throw et.error}}})})}else{const h=generateContentParametersToMldev(this.apiClient,e);return _=formatMap("{model}:streamGenerateContent?alt=sse",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}),d.then(function(b){return __asyncGenerator(this,arguments,function*(){var $,et,_e,nt;try{for(var st=!0,tt=__asyncValues(b),it;it=yield __await(tt.next()),$=it.done,!$;st=!0){nt=it.value,st=!1;const at=nt,ct=generateContentResponseFromMldev(yield __await(at.json()));ct.sdkHttpResponse={headers:at.headers};const rt=new GenerateContentResponse;Object.assign(rt,ct),yield yield __await(rt)}}catch(at){et={error:at}}finally{try{!st&&!$&&(_e=tt.return)&&(yield __await(_e.call(tt)))}finally{if(et)throw et.error}}})})}}async embedContent(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=embedContentParametersToVertex(this.apiClient,e);return _=formatMap("{model}:predict",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=embedContentResponseFromVertex(g),$=new EmbedContentResponse;return Object.assign($,b),$})}else{const h=embedContentParametersToMldev(this.apiClient,e);return _=formatMap("{model}:batchEmbedContents",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=embedContentResponseFromMldev(g),$=new EmbedContentResponse;return Object.assign($,b),$})}}async generateImagesInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=generateImagesParametersToVertex(this.apiClient,e);return _=formatMap("{model}:predict",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=generateImagesResponseFromVertex(g),$=new GenerateImagesResponse;return Object.assign($,b),$})}else{const h=generateImagesParametersToMldev(this.apiClient,e);return _=formatMap("{model}:predict",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=generateImagesResponseFromMldev(g),$=new GenerateImagesResponse;return Object.assign($,b),$})}}async editImageInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI()){const _=editImageParametersInternalToVertex(this.apiClient,e);return c=formatMap("{model}:predict",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:j.headers},g})),a.then(j=>{const h=editImageResponseFromVertex(j),g=new EditImageResponse;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI()){const _=upscaleImageAPIParametersInternalToVertex(this.apiClient,e);return c=formatMap("{model}:predict",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:j.headers},g})),a.then(j=>{const h=upscaleImageResponseFromVertex(j),g=new UpscaleImageResponse;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI()){const _=recontextImageParametersToVertex(this.apiClient,e);return c=formatMap("{model}:predict",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>{const h=recontextImageResponseFromVertex(j),g=new RecontextImageResponse;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI()){const _=segmentImageParametersToVertex(this.apiClient,e);return c=formatMap("{model}:predict",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>{const h=segmentImageResponseFromVertex(j),g=new SegmentImageResponse;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=getModelParametersToVertex(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>modelFromVertex(g))}else{const h=getModelParametersToMldev(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>modelFromMldev(g))}}async listInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=listModelsParametersToVertex(this.apiClient,e);return _=formatMap("{models_url}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listModelsResponseFromVertex(g),$=new ListModelsResponse;return Object.assign($,b),$})}else{const h=listModelsParametersToMldev(this.apiClient,e);return _=formatMap("{models_url}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listModelsResponseFromMldev(g),$=new ListModelsResponse;return Object.assign($,b),$})}}async update(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=updateModelParametersToVertex(this.apiClient,e);return _=formatMap("{model}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>modelFromVertex(g))}else{const h=updateModelParametersToMldev(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>modelFromMldev(g))}}async delete(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=deleteModelParametersToVertex(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=deleteModelResponseFromVertex(g),$=new DeleteModelResponse;return Object.assign($,b),$})}else{const h=deleteModelParametersToMldev(this.apiClient,e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=deleteModelResponseFromMldev(g),$=new DeleteModelResponse;return Object.assign($,b),$})}}async countTokens(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=countTokensParametersToVertex(this.apiClient,e);return _=formatMap("{model}:countTokens",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=countTokensResponseFromVertex(g),$=new CountTokensResponse;return Object.assign($,b),$})}else{const h=countTokensParametersToMldev(this.apiClient,e);return _=formatMap("{model}:countTokens",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=countTokensResponseFromMldev(g),$=new CountTokensResponse;return Object.assign($,b),$})}}async computeTokens(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI()){const _=computeTokensParametersToVertex(this.apiClient,e);return c=formatMap("{model}:computeTokens",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:j.headers},g})),a.then(j=>{const h=computeTokensResponseFromVertex(j),g=new ComputeTokensResponse;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=generateVideosParametersToVertex(this.apiClient,e);return _=formatMap("{model}:predictLongRunning",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d.then(g=>{const b=generateVideosOperationFromVertex(g),$=new GenerateVideosOperation;return Object.assign($,b),$})}else{const h=generateVideosParametersToMldev(this.apiClient,e);return _=formatMap("{model}:predictLongRunning",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>{const b=generateVideosOperationFromMldev(g),$=new GenerateVideosOperation;return Object.assign($,b),$})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Operations extends BaseModule{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=s.name.split("/operations/")[0];let c;o&&"httpOptions"in o&&(c=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:a,config:{httpOptions:c}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=s.name.split("/operations/")[0];let c;o&&"httpOptions"in o&&(c=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:a,config:{httpOptions:c}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=getOperationParametersToVertex(e);return _=formatMap("{operationName}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),d}else{const h=getOperationParametersToMldev(e);return _=formatMap("{operationName}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d}}async fetchPredictVideosOperationInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI()){const _=fetchPredictOperationParametersToVertex(e);return c=formatMap("{resourceName}:fetchPredictOperation",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev(i){const e={},s=getValueByPath(i,["data"]);if(s!=null&&setValueByPath(e,["data"],s),getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function contentToMldev(i){const e={},s=getValueByPath(i,["parts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>partToMldev(c))),setValueByPath(e,["parts"],a)}const o=getValueByPath(i,["role"]);return o!=null&&setValueByPath(e,["role"],o),e}function createAuthTokenConfigToMldev(i,e,s){const o={},a=getValueByPath(e,["expireTime"]);s!==void 0&&a!=null&&setValueByPath(s,["expireTime"],a);const c=getValueByPath(e,["newSessionExpireTime"]);s!==void 0&&c!=null&&setValueByPath(s,["newSessionExpireTime"],c);const d=getValueByPath(e,["uses"]);s!==void 0&&d!=null&&setValueByPath(s,["uses"],d);const _=getValueByPath(e,["liveConnectConstraints"]);s!==void 0&&_!=null&&setValueByPath(s,["bidiGenerateContentSetup"],liveConnectConstraintsToMldev(i,_));const j=getValueByPath(e,["lockAdditionalFields"]);return s!==void 0&&j!=null&&setValueByPath(s,["fieldMask"],j),o}function createAuthTokenParametersToMldev(i,e){const s={},o=getValueByPath(e,["config"]);return o!=null&&setValueByPath(s,["config"],createAuthTokenConfigToMldev(i,o,s)),s}function fileDataToMldev(i){const e={};if(getValueByPath(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=getValueByPath(i,["fileUri"]);s!=null&&setValueByPath(e,["fileUri"],s);const o=getValueByPath(i,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function functionCallToMldev(i){const e={},s=getValueByPath(i,["id"]);s!=null&&setValueByPath(e,["id"],s);const o=getValueByPath(i,["args"]);o!=null&&setValueByPath(e,["args"],o);const a=getValueByPath(i,["name"]);if(a!=null&&setValueByPath(e,["name"],a),getValueByPath(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function googleMapsToMldev(i){const e={};if(getValueByPath(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=getValueByPath(i,["enableWidget"]);return s!=null&&setValueByPath(e,["enableWidget"],s),e}function googleSearchToMldev(i){const e={};if(getValueByPath(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=getValueByPath(i,["timeRangeFilter"]);return s!=null&&setValueByPath(e,["timeRangeFilter"],s),e}function liveConnectConfigToMldev(i,e){const s={},o=getValueByPath(i,["generationConfig"]);e!==void 0&&o!=null&&setValueByPath(e,["setup","generationConfig"],o);const a=getValueByPath(i,["responseModalities"]);e!==void 0&&a!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],a);const c=getValueByPath(i,["temperature"]);e!==void 0&&c!=null&&setValueByPath(e,["setup","generationConfig","temperature"],c);const d=getValueByPath(i,["topP"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","topP"],d);const _=getValueByPath(i,["topK"]);e!==void 0&&_!=null&&setValueByPath(e,["setup","generationConfig","topK"],_);const j=getValueByPath(i,["maxOutputTokens"]);e!==void 0&&j!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],j);const h=getValueByPath(i,["mediaResolution"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],h);const g=getValueByPath(i,["seed"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","seed"],g);const b=getValueByPath(i,["speechConfig"]);e!==void 0&&b!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(b));const $=getValueByPath(i,["thinkingConfig"]);e!==void 0&&$!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],$);const et=getValueByPath(i,["enableAffectiveDialog"]);e!==void 0&&et!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],et);const _e=getValueByPath(i,["systemInstruction"]);e!==void 0&&_e!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev(tContent(_e)));const nt=getValueByPath(i,["tools"]);if(e!==void 0&&nt!=null){let dt=tTools(nt);Array.isArray(dt)&&(dt=dt.map(yt=>toolToMldev(tTool(yt)))),setValueByPath(e,["setup","tools"],dt)}const st=getValueByPath(i,["sessionResumption"]);e!==void 0&&st!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev(st));const tt=getValueByPath(i,["inputAudioTranscription"]);e!==void 0&&tt!=null&&setValueByPath(e,["setup","inputAudioTranscription"],tt);const it=getValueByPath(i,["outputAudioTranscription"]);e!==void 0&&it!=null&&setValueByPath(e,["setup","outputAudioTranscription"],it);const at=getValueByPath(i,["realtimeInputConfig"]);e!==void 0&&at!=null&&setValueByPath(e,["setup","realtimeInputConfig"],at);const ct=getValueByPath(i,["contextWindowCompression"]);e!==void 0&&ct!=null&&setValueByPath(e,["setup","contextWindowCompression"],ct);const rt=getValueByPath(i,["proactivity"]);if(e!==void 0&&rt!=null&&setValueByPath(e,["setup","proactivity"],rt),getValueByPath(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function liveConnectConstraintsToMldev(i,e){const s={},o=getValueByPath(e,["model"]);o!=null&&setValueByPath(s,["setup","model"],tModel(i,o));const a=getValueByPath(e,["config"]);return a!=null&&setValueByPath(s,["config"],liveConnectConfigToMldev(a,s)),s}function partToMldev(i){const e={},s=getValueByPath(i,["mediaResolution"]);s!=null&&setValueByPath(e,["mediaResolution"],s);const o=getValueByPath(i,["codeExecutionResult"]);o!=null&&setValueByPath(e,["codeExecutionResult"],o);const a=getValueByPath(i,["executableCode"]);a!=null&&setValueByPath(e,["executableCode"],a);const c=getValueByPath(i,["fileData"]);c!=null&&setValueByPath(e,["fileData"],fileDataToMldev(c));const d=getValueByPath(i,["functionCall"]);d!=null&&setValueByPath(e,["functionCall"],functionCallToMldev(d));const _=getValueByPath(i,["functionResponse"]);_!=null&&setValueByPath(e,["functionResponse"],_);const j=getValueByPath(i,["inlineData"]);j!=null&&setValueByPath(e,["inlineData"],blobToMldev(j));const h=getValueByPath(i,["text"]);h!=null&&setValueByPath(e,["text"],h);const g=getValueByPath(i,["thought"]);g!=null&&setValueByPath(e,["thought"],g);const b=getValueByPath(i,["thoughtSignature"]);b!=null&&setValueByPath(e,["thoughtSignature"],b);const $=getValueByPath(i,["videoMetadata"]);return $!=null&&setValueByPath(e,["videoMetadata"],$),e}function sessionResumptionConfigToMldev(i){const e={},s=getValueByPath(i,["handle"]);if(s!=null&&setValueByPath(e,["handle"],s),getValueByPath(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function toolToMldev(i){const e={},s=getValueByPath(i,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),setValueByPath(e,["functionDeclarations"],g)}if(getValueByPath(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=getValueByPath(i,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const a=getValueByPath(i,["computerUse"]);a!=null&&setValueByPath(e,["computerUse"],a);const c=getValueByPath(i,["fileSearch"]);c!=null&&setValueByPath(e,["fileSearch"],c);const d=getValueByPath(i,["codeExecution"]);if(d!=null&&setValueByPath(e,["codeExecution"],d),getValueByPath(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const _=getValueByPath(i,["googleMaps"]);_!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev(_));const j=getValueByPath(i,["googleSearch"]);j!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev(j));const h=getValueByPath(i,["urlContext"]);return h!=null&&setValueByPath(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getFieldMasks(i){const e=[];for(const s in i)if(Object.prototype.hasOwnProperty.call(i,s)){const o=i[s];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const a=Object.keys(o).map(c=>`${s}.${c}`);e.push(...a)}else e.push(s)}return e.join(",")}function convertBidiSetupToTokenSetup(i,e){let s=null;const o=i.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const c=o.setup;typeof c=="object"&&c!==null?(i.bidiGenerateContentSetup=c,s=c):delete i.bidiGenerateContentSetup}else o!==void 0&&delete i.bidiGenerateContentSetup;const a=i.fieldMask;if(s){const c=getFieldMasks(s);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)c?i.fieldMask=c:delete i.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let _=[];a.length>0&&(_=a.map(h=>d.includes(h)?`generationConfig.${h}`:h));const j=[];c&&j.push(c),_.length>0&&j.push(..._),j.length>0?i.fieldMask=j.join(","):delete i.fieldMask}else delete i.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?i.fieldMask=a.join(","):delete i.fieldMask;return i}class Tokens extends BaseModule{constructor(e){super(),this.apiClient=e}async create(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const _=createAuthTokenParametersToMldev(this.apiClient,e);c=formatMap("auth_tokens",_._url),d=_._query,delete _.config,delete _._url,delete _._query;const j=convertBidiSetupToTokenSetup(_,e.config);return a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(j),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),a.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function deleteDocumentConfigToMldev(i,e){const s={},o=getValueByPath(i,["force"]);return e!==void 0&&o!=null&&setValueByPath(e,["_query","force"],o),s}function deleteDocumentParametersToMldev(i){const e={},s=getValueByPath(i,["name"]);s!=null&&setValueByPath(e,["_url","name"],s);const o=getValueByPath(i,["config"]);return o!=null&&deleteDocumentConfigToMldev(o,e),e}function getDocumentParametersToMldev(i){const e={},s=getValueByPath(i,["name"]);return s!=null&&setValueByPath(e,["_url","name"],s),e}function listDocumentsConfigToMldev(i,e){const s={},o=getValueByPath(i,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const a=getValueByPath(i,["pageToken"]);return e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a),s}function listDocumentsParametersToMldev(i){const e={},s=getValueByPath(i,["parent"]);s!=null&&setValueByPath(e,["_url","parent"],s);const o=getValueByPath(i,["config"]);return o!=null&&listDocumentsConfigToMldev(o,e),e}function listDocumentsResponseFromMldev(i){const e={},s=getValueByPath(i,["sdkHttpResponse"]);s!=null&&setValueByPath(e,["sdkHttpResponse"],s);const o=getValueByPath(i,["nextPageToken"]);o!=null&&setValueByPath(e,["nextPageToken"],o);const a=getValueByPath(i,["documents"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),setValueByPath(e,["documents"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Documents extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async s=>new Pager(PagedItem.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:s.parent,config:o.config}),await this.listInternal(s),s)}async get(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=getDocumentParametersToMldev(e);return c=formatMap("{name}",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>j)}}async delete(e){var s,o;let a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=deleteDocumentParametersToMldev(e);a=formatMap("{name}",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=listDocumentsParametersToMldev(e);return c=formatMap("{parent}/documents",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>{const h=listDocumentsResponseFromMldev(j),g=new ListDocumentsResponse;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FileSearchStores extends BaseModule{constructor(e,s=new Documents(e)){super(),this.apiClient=e,this.documents=s,this.list=async(o={})=>new Pager(PagedItem.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=createFileSearchStoreParametersToMldev(e);return c=formatMap("fileSearchStores",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>j)}}async get(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=getFileSearchStoreParametersToMldev(e);return c=formatMap("{name}",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>j)}}async delete(e){var s,o;let a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=deleteFileSearchStoreParametersToMldev(e);a=formatMap("{name}",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=listFileSearchStoresParametersToMldev(e);return c=formatMap("fileSearchStores",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>{const h=listFileSearchStoresResponseFromMldev(j),g=new ListFileSearchStoresResponse;return Object.assign(g,h),g})}}async uploadToFileSearchStoreInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=uploadToFileSearchStoreParametersToMldev(e);return c=formatMap("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>{const h=uploadToFileSearchStoreResumableResponseFromMldev(j),g=new UploadToFileSearchStoreResumableResponse;return Object.assign(g,h),g})}}async importFile(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=importFileParametersToMldev(e);return c=formatMap("{file_search_store_name}:importFile",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json()),a.then(j=>{const h=importFileOperationFromMldev(j),g=new ImportFileOperation;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uuid4Internal=function(){const{crypto:i}=globalThis;if(i?.randomUUID)return uuid4Internal=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),s=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^s()&15>>+o/4).toString(16))};const uuid4=()=>uuid4Internal();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isAbortError(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const castToError=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GeminiNextGenAPIClientError extends Error{}class APIError extends GeminiNextGenAPIClientError{constructor(e,s,o,a){super(`${APIError.makeMessage(e,s,o)}`),this.status=e,this.headers=a,this.error=s}static makeMessage(e,s,o){const a=s?.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,s,o,a){if(!e||!a)return new APIConnectionError({message:o,cause:castToError(s)});const c=s;return e===400?new BadRequestError(e,c,o,a):e===401?new AuthenticationError(e,c,o,a):e===403?new PermissionDeniedError(e,c,o,a):e===404?new NotFoundError(e,c,o,a):e===409?new ConflictError(e,c,o,a):e===422?new UnprocessableEntityError(e,c,o,a):e===429?new RateLimitError(e,c,o,a):e>=500?new InternalServerError(e,c,o,a):new APIError(e,c,o,a)}}class APIUserAbortError extends APIError{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=i=>startsWithSchemeRegexp.test(i);let isArrayInternal=i=>(isArrayInternal=Array.isArray,isArrayInternal(i));const isArray=isArrayInternal;let isReadonlyArrayInternal=isArray;const isReadonlyArray=isReadonlyArrayInternal;function isEmptyObj(i){if(!i)return!0;for(const e in i)return!1;return!0}function hasOwn(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const validatePositiveInteger=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new GeminiNextGenAPIClientError(`${i} must be an integer`);if(e<0)throw new GeminiNextGenAPIClientError(`${i} must be a positive integer`);return e},safeJSON=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sleep$1=i=>new Promise(e=>setTimeout(e,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VERSION="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getDetectedPlatform(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const getPlatformProperties=()=>{var i,e,s,o,a;const c=getDetectedPlatform();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":normalizeArch((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const d=getBrowserInfo();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of i){const o=s.exec(navigator.userAgent);if(o){const a=o[1]||0,c=o[2]||0,d=o[3]||0;return{browser:e,version:`${a}.${c}.${d}`}}}return null}const normalizeArch=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",normalizePlatform=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getDefaultFetch(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function makeReadableStream(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function ReadableStreamFrom(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return makeReadableStream({start(){},async pull(s){const{done:o,value:a}=await e.next();o?s.close():s.enqueue(a)},async cancel(){var s;await((s=e.return)===null||s===void 0?void 0:s.call(e))}})}function ReadableStreamToAsyncIterable(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const s=await e.read();return s?.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function CancelReadableStream(i){var e,s;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((s=(e=i[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(e));return}const o=i.getReader(),a=o.cancel();o.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FallbackEncoder=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const checkFileSupport=()=>{var i;if(typeof File>"u"){const{process:e}=globalThis,s=typeof((i=e?.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function makeFile(i,e,s){return checkFileSupport(),new File(i,e??"unknown_file",s)}function getName(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const isAsyncIterable=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const isBlobLike=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",isFileLike=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&isBlobLike(i),isResponseLike=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function toFile(i,e,s){if(checkFileSupport(),i=await i,isFileLike(i))return i instanceof File?i:makeFile([await i.arrayBuffer()],i.name);if(isResponseLike(i)){const a=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),makeFile(await getBytes(a),e,s)}const o=await getBytes(i);if(e||(e=getName(i)),!s?.type){const a=o.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof a=="string"&&(s=Object.assign(Object.assign({},s),{type:a}))}return makeFile(o,e,s)}async function getBytes(i){var e,s,o,a,c;let d=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)d.push(i);else if(isBlobLike(i))d.push(i instanceof Blob?i:await i.arrayBuffer());else if(isAsyncIterable(i))try{for(var _=!0,j=__asyncValues(i),h;h=await j.next(),e=h.done,!e;_=!0){a=h.value,_=!1;const g=a;d.push(...await getBytes(g))}}catch(g){s={error:g}}finally{try{!_&&!e&&(o=j.return)&&await o.call(j)}finally{if(s)throw s.error}}else{const g=(c=i?.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof i}${g?`; constructor: ${g}`:""}${propsForError(i)}`)}return d}function propsForError(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class APIResource{constructor(e){this._client=e}}APIResource._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function encodeURIPath(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const EMPTY=Object.freeze(Object.create(null)),createPathTagFunction=(i=encodeURIPath)=>function(s,...o){if(s.length===1)return s[0];let a=!1;const c=[],d=s.reduce((g,b,$)=>{var et,_e,nt;/[?#]/.test(b)&&(a=!0);const st=o[$];let tt=(a?encodeURIComponent:i)(""+st);return $!==o.length&&(st==null||typeof st=="object"&&st.toString===((nt=Object.getPrototypeOf((_e=Object.getPrototypeOf((et=st.hasOwnProperty)!==null&&et!==void 0?et:EMPTY))!==null&&_e!==void 0?_e:EMPTY))===null||nt===void 0?void 0:nt.toString))&&(tt=st+"",c.push({start:g.length+b.length,length:tt.length,error:`Value of type ${Object.prototype.toString.call(st).slice(8,-1)} is not a valid path parameter`})),g+b+($===o.length?"":tt)},""),_=d.split(/[?#]/,1)[0],j=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let h;for(;(h=j.exec(_))!==null;)c.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(c.sort((g,b)=>g.start-b.start),c.length>0){let g=0;const b=c.reduce(($,et)=>{const _e=" ".repeat(et.start-g),nt="^".repeat(et.length);return g=et.start+et.length,$+_e+nt},"");throw new GeminiNextGenAPIClientError(`Path parameters result in path with invalid segments:
${c.map($=>$.error).join(`
`)}
${d}
${b}`)}return d},path=createPathTagFunction(encodeURIPath);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseInteractions extends APIResource{create(e,s){var o;const{api_version:a=this._client.apiVersion}=e,c=__rest(e,["api_version"]);if("model"in c&&"agent_config"in c)throw new GeminiNextGenAPIClientError("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new GeminiNextGenAPIClientError("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(path`/${a}/interactions`,Object.assign(Object.assign({body:c},s),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,s={},o){const{api_version:a=this._client.apiVersion}=s??{};return this._client.delete(path`/${a}/interactions/${e}`,o)}cancel(e,s={},o){const{api_version:a=this._client.apiVersion}=s??{};return this._client.post(path`/${a}/interactions/${e}/cancel`,o)}get(e,s={},o){var a;const c=s??{},{api_version:d=this._client.apiVersion}=c,_=__rest(c,["api_version"]);return this._client.get(path`/${d}/interactions/${e}`,Object.assign(Object.assign({query:_},o),{stream:(a=s?.stream)!==null&&a!==void 0?a:!1}))}}BaseInteractions._key=Object.freeze(["interactions"]);class Interactions extends BaseInteractions{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function concatBytes(i){let e=0;for(const a of i)e+=a.length;const s=new Uint8Array(e);let o=0;for(const a of i)s.set(a,o),o+=a.length;return s}let encodeUTF8_;function encodeUTF8(i){let e;return(encodeUTF8_??(e=new globalThis.TextEncoder,encodeUTF8_=e.encode.bind(e)))(i)}let decodeUTF8_;function decodeUTF8(i){let e;return(decodeUTF8_??(e=new globalThis.TextDecoder,decodeUTF8_=e.decode.bind(e)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LineDecoder{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?encodeUTF8(e):e;this.buffer=concatBytes([this.buffer,s]);const o=[];let a;for(;(a=findNewlineIndex(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){o.push(decodeUTF8(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,d=decodeUTF8(this.buffer.subarray(0,c));o.push(d),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(i,e){for(let a=e??0;a<i.length;a++){if(i[a]===10)return{preceding:a,index:a+1,carriage:!1};if(i[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function findDoubleNewlineIndex(i){for(let o=0;o<i.length-1;o++){if(i[o]===10&&i[o+1]===10||i[o]===13&&i[o+1]===13)return o+2;if(i[o]===13&&i[o+1]===10&&o+3<i.length&&i[o+2]===13&&i[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const levelNumbers={off:0,error:200,warn:300,info:400,debug:500},parseLogLevel=(i,e,s)=>{if(i){if(hasOwn(levelNumbers,i))return i;loggerFor(s).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(levelNumbers))}`)}};function noop(){}function makeLogFn(i,e,s){return!e||levelNumbers[i]>levelNumbers[s]?noop:e[i].bind(e)}const noopLogger={error:noop,warn:noop,info:noop,debug:noop};let cachedLoggers=new WeakMap;function loggerFor(i){var e;const s=i.logger,o=(e=i.logLevel)!==null&&e!==void 0?e:"off";if(!s)return noopLogger;const a=cachedLoggers.get(s);if(a&&a[0]===o)return a[1];const c={error:makeLogFn("error",s,o),warn:makeLogFn("warn",s,o),info:makeLogFn("info",s,o),debug:makeLogFn("debug",s,o)};return cachedLoggers.set(s,[o,c]),c}const formatRequestDetails=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,s])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Stream{constructor(e,s,o){this.iterator=e,this.controller=s,this.client=o}static fromSSEResponse(e,s,o){let a=!1;const c=o?loggerFor(o):console;function d(){return __asyncGenerator(this,arguments,function*(){var j,h,g,b;if(a)throw new GeminiNextGenAPIClientError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let $=!1;try{try{for(var et=!0,_e=__asyncValues(_iterSSEMessages(e,s)),nt;nt=yield __await(_e.next()),j=nt.done,!j;et=!0){b=nt.value,et=!1;const st=b;if(!$)if(st.data.startsWith("[DONE]")){$=!0;continue}else try{yield yield __await(JSON.parse(st.data))}catch(tt){throw c.error("Could not parse message into JSON:",st.data),c.error("From chunk:",st.raw),tt}}}catch(st){h={error:st}}finally{try{!et&&!j&&(g=_e.return)&&(yield __await(g.call(_e)))}finally{if(h)throw h.error}}$=!0}catch(st){if(isAbortError(st))return yield __await(void 0);throw st}finally{$||s.abort()}})}return new Stream(d,s,o)}static fromReadableStream(e,s,o){let a=!1;function c(){return __asyncGenerator(this,arguments,function*(){var j,h,g,b;const $=new LineDecoder,et=ReadableStreamToAsyncIterable(e);try{for(var _e=!0,nt=__asyncValues(et),st;st=yield __await(nt.next()),j=st.done,!j;_e=!0){b=st.value,_e=!1;const tt=b;for(const it of $.decode(tt))yield yield __await(it)}}catch(tt){h={error:tt}}finally{try{!_e&&!j&&(g=nt.return)&&(yield __await(g.call(nt)))}finally{if(h)throw h.error}}for(const tt of $.flush())yield yield __await(tt)})}function d(){return __asyncGenerator(this,arguments,function*(){var j,h,g,b;if(a)throw new GeminiNextGenAPIClientError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let $=!1;try{try{for(var et=!0,_e=__asyncValues(c()),nt;nt=yield __await(_e.next()),j=nt.done,!j;et=!0){b=nt.value,et=!1;const st=b;$||st&&(yield yield __await(JSON.parse(st)))}}catch(st){h={error:st}}finally{try{!et&&!j&&(g=_e.return)&&(yield __await(g.call(_e)))}finally{if(h)throw h.error}}$=!0}catch(st){if(isAbortError(st))return yield __await(void 0);throw st}finally{$||s.abort()}})}return new Stream(d,s,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],o=this.iterator(),a=c=>({next:()=>{if(c.length===0){const d=o.next();e.push(d),s.push(d)}return c.shift()}});return[new Stream(()=>a(e),this.controller,this.client),new Stream(()=>a(s),this.controller,this.client)]}toReadableStream(){const e=this;let s;return makeReadableStream({async start(){s=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:c}=await s.next();if(c)return o.close();const d=encodeUTF8(JSON.stringify(a)+`
`);o.enqueue(d)}catch(a){o.error(a)}},async cancel(){var o;await((o=s.return)===null||o===void 0?void 0:o.call(s))}})}}function _iterSSEMessages(i,e){return __asyncGenerator(this,arguments,function*(){var o,a,c,d;if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new GeminiNextGenAPIClientError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new GeminiNextGenAPIClientError("Attempted to iterate over a response with no body");const _=new SSEDecoder,j=new LineDecoder,h=ReadableStreamToAsyncIterable(i.body);try{for(var g=!0,b=__asyncValues(iterSSEChunks(h)),$;$=yield __await(b.next()),o=$.done,!o;g=!0){d=$.value,g=!1;const et=d;for(const _e of j.decode(et)){const nt=_.decode(_e);nt&&(yield yield __await(nt))}}}catch(et){a={error:et}}finally{try{!g&&!o&&(c=b.return)&&(yield __await(c.call(b)))}finally{if(a)throw a.error}}for(const et of j.flush()){const _e=_.decode(et);_e&&(yield yield __await(_e))}})}function iterSSEChunks(i){return __asyncGenerator(this,arguments,function*(){var s,o,a,c;let d=new Uint8Array;try{for(var _=!0,j=__asyncValues(i),h;h=yield __await(j.next()),s=h.done,!s;_=!0){c=h.value,_=!1;const g=c;if(g==null)continue;const b=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?encodeUTF8(g):g;let $=new Uint8Array(d.length+b.length);$.set(d),$.set(b,d.length),d=$;let et;for(;(et=findDoubleNewlineIndex(d))!==-1;)yield yield __await(d.slice(0,et)),d=d.slice(et)}}catch(g){o={error:g}}finally{try{!_&&!s&&(a=j.return)&&(yield __await(a.call(j)))}finally{if(o)throw o.error}}d.length>0&&(yield yield __await(d))})}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,o,a]=partition(e,":");return a.startsWith(" ")&&(a=a.substring(1)),s==="event"?this.event=a:s==="data"&&this.data.push(a),null}}function partition(i,e){const s=i.indexOf(e);return s!==-1?[i.substring(0,s),e,i.substring(s+e.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function defaultParseResponse(i,e){const{response:s,requestLogID:o,retryOfRequestLogID:a,startTime:c}=e,d=await(async()=>{var _;if(e.options.stream)return loggerFor(i).debug("response",s.status,s.url,s.headers,s.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(s,e.controller,i):Stream.fromSSEResponse(s,e.controller,i);if(s.status===204)return null;if(e.options.__binaryResponse)return s;const j=s.headers.get("content-type"),h=(_=j?.split(";")[0])===null||_===void 0?void 0:_.trim();return h?.includes("application/json")||h?.endsWith("+json")?await s.json():await s.text()})();return loggerFor(i).debug(`[${o}] response parsed`,formatRequestDetails({retryOfRequestLogID:a,url:s.url,status:s.status,body:d,durationMs:Date.now()-c})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class APIPromise extends Promise{constructor(e,s,o=defaultParseResponse){super(a=>{a(null)}),this.responsePromise=s,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new APIPromise(this.client,this.responsePromise,async(s,o)=>e(await this.parseResponse(s,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const brand_privateNullableHeaders=Symbol("brand.privateNullableHeaders");function*iterateHeaders(i){if(!i)return;if(brand_privateNullableHeaders in i){const{values:o,nulls:a}=i;yield*o.entries();for(const c of a)yield[c,null];return}let e=!1,s;i instanceof Headers?s=i.entries():isReadonlyArray(i)?s=i:(e=!0,s=Object.entries(i??{}));for(let o of s){const a=o[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const c=isReadonlyArray(o[1])?o[1]:[o[1]];let d=!1;for(const _ of c)_!==void 0&&(e&&!d&&(d=!0,yield[a,null]),yield[a,_])}}const buildHeaders=i=>{const e=new Headers,s=new Set;for(const o of i){const a=new Set;for(const[c,d]of iterateHeaders(o)){const _=c.toLowerCase();a.has(_)||(e.delete(c),a.add(_)),d===null?(e.delete(c),s.add(_)):(e.append(c,d),s.delete(_))}}return{[brand_privateNullableHeaders]:!0,values:e,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const readEnv=i=>{var e,s,o,a,c,d;if(typeof globalThis.process<"u")return(o=(s=(e=define_globalThis_process_env_default)===null||e===void 0?void 0:e[i])===null||s===void 0?void 0:s.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(d=(c=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||c===void 0?void 0:c.call(a,i))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _a;class BaseGeminiNextGenAPIClient{constructor(e){var s,o,a,c,d,_,j,{baseURL:h=readEnv("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(s=readEnv("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:b="v1beta"}=e,$=__rest(e,["baseURL","apiKey","apiVersion"]);const et=Object.assign(Object.assign({apiKey:g,apiVersion:b},$),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=et.baseURL,this.timeout=(o=et.timeout)!==null&&o!==void 0?o:BaseGeminiNextGenAPIClient.DEFAULT_TIMEOUT,this.logger=(a=et.logger)!==null&&a!==void 0?a:console;const _e="warn";this.logLevel=_e,this.logLevel=(d=(c=parseLogLevel(et.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:parseLogLevel(readEnv("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:_e,this.fetchOptions=et.fetchOptions,this.maxRetries=(_=et.maxRetries)!==null&&_!==void 0?_:2,this.fetch=(j=et.fetch)!==null&&j!==void 0?j:getDefaultFetch(),this.encoder=FallbackEncoder,this._options=et,this.apiKey=g,this.apiVersion=b,this.clientAdapter=et.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:s}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const s=buildHeaders([e.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return buildHeaders([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return buildHeaders([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([s,o])=>typeof o<"u").map(([s,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(s)}=`;throw new GeminiNextGenAPIClientError(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}makeStatusError(e,s,o,a){return APIError.generate(e,s,o,a)}buildURL(e,s,o){const a=!this.baseURLOverridden()&&o||this.baseURL,c=isAbsoluteURL(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return isEmptyObj(d)||(s=Object.assign(Object.assign({},d),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(c.search=this.stringifyQuery(s)),c.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const s=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(e,{url:s,options:o}){}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,o){return this.request(Promise.resolve(o).then(a=>Object.assign({method:e,path:s},a)))}request(e,s=null){return new APIPromise(this,this.makeRequest(e,s,void 0))}async makeRequest(e,s,o){var a,c,d;const _=await e,j=(a=_.maxRetries)!==null&&a!==void 0?a:this.maxRetries;s==null&&(s=j),await this.prepareOptions(_);const{req:h,url:g,timeout:b}=await this.buildRequest(_,{retryCount:j-s});await this.prepareRequest(h,{url:g,options:_});const $="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),et=o===void 0?"":`, retryOf: ${o}`,_e=Date.now();if(loggerFor(this).debug(`[${$}] sending request`,formatRequestDetails({retryOfRequestLogID:o,method:_.method,url:g,options:_,headers:h.headers})),!((c=_.signal)===null||c===void 0)&&c.aborted)throw new APIUserAbortError;const nt=new AbortController,st=await this.fetchWithTimeout(g,h,b,nt).catch(castToError),tt=Date.now();if(st instanceof globalThis.Error){const at=`retrying, ${s} attempts remaining`;if(!((d=_.signal)===null||d===void 0)&&d.aborted)throw new APIUserAbortError;const ct=isAbortError(st)||/timed? ?out/i.test(String(st)+("cause"in st?String(st.cause):""));if(s)return loggerFor(this).info(`[${$}] connection ${ct?"timed out":"failed"} - ${at}`),loggerFor(this).debug(`[${$}] connection ${ct?"timed out":"failed"} (${at})`,formatRequestDetails({retryOfRequestLogID:o,url:g,durationMs:tt-_e,message:st.message})),this.retryRequest(_,s,o??$);throw loggerFor(this).info(`[${$}] connection ${ct?"timed out":"failed"} - error; no more retries left`),loggerFor(this).debug(`[${$}] connection ${ct?"timed out":"failed"} (error; no more retries left)`,formatRequestDetails({retryOfRequestLogID:o,url:g,durationMs:tt-_e,message:st.message})),ct?new APIConnectionTimeoutError:new APIConnectionError({cause:st})}const it=`[${$}${et}] ${h.method} ${g} ${st.ok?"succeeded":"failed"} with status ${st.status} in ${tt-_e}ms`;if(!st.ok){const at=await this.shouldRetry(st);if(s&&at){const gt=`retrying, ${s} attempts remaining`;return await CancelReadableStream(st.body),loggerFor(this).info(`${it} - ${gt}`),loggerFor(this).debug(`[${$}] response error (${gt})`,formatRequestDetails({retryOfRequestLogID:o,url:st.url,status:st.status,headers:st.headers,durationMs:tt-_e})),this.retryRequest(_,s,o??$,st.headers)}const ct=at?"error; no more retries left":"error; not retryable";loggerFor(this).info(`${it} - ${ct}`);const rt=await st.text().catch(gt=>castToError(gt).message),dt=safeJSON(rt),yt=dt?void 0:rt;throw loggerFor(this).debug(`[${$}] response error (${ct})`,formatRequestDetails({retryOfRequestLogID:o,url:st.url,status:st.status,headers:st.headers,message:yt,durationMs:Date.now()-_e})),this.makeStatusError(st.status,dt,yt,st.headers)}return loggerFor(this).info(it),loggerFor(this).debug(`[${$}] response start`,formatRequestDetails({retryOfRequestLogID:o,url:st.url,status:st.status,headers:st.headers,durationMs:tt-_e})),{response:st,options:_,controller:nt,requestLogID:$,retryOfRequestLogID:o,startTime:_e}}async fetchWithTimeout(e,s,o,a){const c=s||{},{signal:d,method:_}=c,j=__rest(c,["signal","method"]);d&&d.addEventListener("abort",()=>a.abort());const h=setTimeout(()=>a.abort(),o),g=globalThis.ReadableStream&&j.body instanceof globalThis.ReadableStream||typeof j.body=="object"&&j.body!==null&&Symbol.asyncIterator in j.body,b=Object.assign(Object.assign(Object.assign({signal:a.signal},g?{duplex:"half"}:{}),{method:"GET"}),j);_&&(b.method=_.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(h)}}async shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,o,a){var c;let d;const _=a?.get("retry-after-ms");if(_){const h=parseFloat(_);Number.isNaN(h)||(d=h)}const j=a?.get("retry-after");if(j&&!d){const h=parseFloat(j);Number.isNaN(h)?d=Date.parse(j)-Date.now():d=h*1e3}if(!(d&&0<=d&&d<60*1e3)){const h=(c=e.maxRetries)!==null&&c!==void 0?c:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(s,h)}return await sleep$1(d),this.makeRequest(e,s-1,o)}calculateDefaultRetryTimeoutMillis(e,s){const c=s-e,d=Math.min(.5*Math.pow(2,c),8),_=1-Math.random()*.25;return d*_*1e3}async buildRequest(e,{retryCount:s=0}={}){var o,a,c;const d=Object.assign({},e),{method:_,path:j,query:h,defaultBaseURL:g}=d,b=this.buildURL(j,h,g);"timeout"in d&&validatePositiveInteger("timeout",d.timeout),d.timeout=(o=d.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:$,body:et}=this.buildBody({options:d}),_e=await this.buildHeaders({options:e,method:_,bodyHeaders:$,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:_,headers:_e},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&et instanceof globalThis.ReadableStream&&{duplex:"half"}),et&&{body:et}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(c=d.fetchOptions)!==null&&c!==void 0?c:{}),url:b,timeout:d.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:o,retryCount:a}){let c={};this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let _=buildHeaders([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),getPlatformHeaders()),this._options.defaultHeaders,o,e.headers,d]);return this.validateHeaders(_),_.values}buildBody({options:{body:e,headers:s}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=buildHeaders([s]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:ReadableStreamFrom(e)}:this.encoder({body:e,headers:o})}}BaseGeminiNextGenAPIClient.DEFAULT_TIMEOUT=6e4;class GeminiNextGenAPIClient extends BaseGeminiNextGenAPIClient{constructor(){super(...arguments),this.interactions=new Interactions(this)}}_a=GeminiNextGenAPIClient;GeminiNextGenAPIClient.GeminiNextGenAPIClient=_a;GeminiNextGenAPIClient.GeminiNextGenAPIClientError=GeminiNextGenAPIClientError;GeminiNextGenAPIClient.APIError=APIError;GeminiNextGenAPIClient.APIConnectionError=APIConnectionError;GeminiNextGenAPIClient.APIConnectionTimeoutError=APIConnectionTimeoutError;GeminiNextGenAPIClient.APIUserAbortError=APIUserAbortError;GeminiNextGenAPIClient.NotFoundError=NotFoundError;GeminiNextGenAPIClient.ConflictError=ConflictError;GeminiNextGenAPIClient.RateLimitError=RateLimitError;GeminiNextGenAPIClient.BadRequestError=BadRequestError;GeminiNextGenAPIClient.AuthenticationError=AuthenticationError;GeminiNextGenAPIClient.InternalServerError=InternalServerError;GeminiNextGenAPIClient.PermissionDeniedError=PermissionDeniedError;GeminiNextGenAPIClient.UnprocessableEntityError=UnprocessableEntityError;GeminiNextGenAPIClient.toFile=toFile;GeminiNextGenAPIClient.Interactions=Interactions;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cancelTuningJobParametersToMldev(i,e){const s={},o=getValueByPath(i,["name"]);return o!=null&&setValueByPath(s,["_url","name"],o),s}function cancelTuningJobParametersToVertex(i,e){const s={},o=getValueByPath(i,["name"]);return o!=null&&setValueByPath(s,["_url","name"],o),s}function cancelTuningJobResponseFromMldev(i,e){const s={},o=getValueByPath(i,["sdkHttpResponse"]);return o!=null&&setValueByPath(s,["sdkHttpResponse"],o),s}function cancelTuningJobResponseFromVertex(i,e){const s={},o=getValueByPath(i,["sdkHttpResponse"]);return o!=null&&setValueByPath(s,["sdkHttpResponse"],o),s}function createTuningJobConfigToMldev(i,e,s){const o={};if(getValueByPath(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=getValueByPath(i,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&setValueByPath(e,["displayName"],a),getValueByPath(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=getValueByPath(i,["epochCount"]);e!==void 0&&c!=null&&setValueByPath(e,["tuningTask","hyperparameters","epochCount"],c);const d=getValueByPath(i,["learningRateMultiplier"]);if(d!=null&&setValueByPath(o,["tuningTask","hyperparameters","learningRateMultiplier"],d),getValueByPath(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(getValueByPath(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(getValueByPath(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const _=getValueByPath(i,["batchSize"]);e!==void 0&&_!=null&&setValueByPath(e,["tuningTask","hyperparameters","batchSize"],_);const j=getValueByPath(i,["learningRate"]);if(e!==void 0&&j!=null&&setValueByPath(e,["tuningTask","hyperparameters","learningRate"],j),getValueByPath(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(getValueByPath(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function createTuningJobConfigToVertex(i,e,s){const o={};let a=getValueByPath(s,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const et=getValueByPath(i,["validationDataset"]);e!==void 0&&et!=null&&setValueByPath(e,["supervisedTuningSpec"],tuningValidationDatasetToVertex(et))}else if(a==="PREFERENCE_TUNING"){const et=getValueByPath(i,["validationDataset"]);e!==void 0&&et!=null&&setValueByPath(e,["preferenceOptimizationSpec"],tuningValidationDatasetToVertex(et))}const c=getValueByPath(i,["tunedModelDisplayName"]);e!==void 0&&c!=null&&setValueByPath(e,["tunedModelDisplayName"],c);const d=getValueByPath(i,["description"]);e!==void 0&&d!=null&&setValueByPath(e,["description"],d);let _=getValueByPath(s,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const et=getValueByPath(i,["epochCount"]);e!==void 0&&et!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","epochCount"],et)}else if(_==="PREFERENCE_TUNING"){const et=getValueByPath(i,["epochCount"]);e!==void 0&&et!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],et)}let j=getValueByPath(s,["config","method"]);if(j===void 0&&(j="SUPERVISED_FINE_TUNING"),j==="SUPERVISED_FINE_TUNING"){const et=getValueByPath(i,["learningRateMultiplier"]);e!==void 0&&et!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],et)}else if(j==="PREFERENCE_TUNING"){const et=getValueByPath(i,["learningRateMultiplier"]);e!==void 0&&et!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],et)}let h=getValueByPath(s,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const et=getValueByPath(i,["exportLastCheckpointOnly"]);e!==void 0&&et!=null&&setValueByPath(e,["supervisedTuningSpec","exportLastCheckpointOnly"],et)}else if(h==="PREFERENCE_TUNING"){const et=getValueByPath(i,["exportLastCheckpointOnly"]);e!==void 0&&et!=null&&setValueByPath(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],et)}let g=getValueByPath(s,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const et=getValueByPath(i,["adapterSize"]);e!==void 0&&et!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","adapterSize"],et)}else if(g==="PREFERENCE_TUNING"){const et=getValueByPath(i,["adapterSize"]);e!==void 0&&et!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],et)}if(getValueByPath(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(getValueByPath(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=getValueByPath(i,["labels"]);e!==void 0&&b!=null&&setValueByPath(e,["labels"],b);const $=getValueByPath(i,["beta"]);return e!==void 0&&$!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","beta"],$),o}function createTuningJobParametersPrivateToMldev(i,e){const s={},o=getValueByPath(i,["baseModel"]);o!=null&&setValueByPath(s,["baseModel"],o);const a=getValueByPath(i,["preTunedModel"]);a!=null&&setValueByPath(s,["preTunedModel"],a);const c=getValueByPath(i,["trainingDataset"]);c!=null&&tuningDatasetToMldev(c);const d=getValueByPath(i,["config"]);return d!=null&&createTuningJobConfigToMldev(d,s),s}function createTuningJobParametersPrivateToVertex(i,e){const s={},o=getValueByPath(i,["baseModel"]);o!=null&&setValueByPath(s,["baseModel"],o);const a=getValueByPath(i,["preTunedModel"]);a!=null&&setValueByPath(s,["preTunedModel"],a);const c=getValueByPath(i,["trainingDataset"]);c!=null&&tuningDatasetToVertex(c,s,e);const d=getValueByPath(i,["config"]);return d!=null&&createTuningJobConfigToVertex(d,s,e),s}function getTuningJobParametersToMldev(i,e){const s={},o=getValueByPath(i,["name"]);return o!=null&&setValueByPath(s,["_url","name"],o),s}function getTuningJobParametersToVertex(i,e){const s={},o=getValueByPath(i,["name"]);return o!=null&&setValueByPath(s,["_url","name"],o),s}function listTuningJobsConfigToMldev(i,e,s){const o={},a=getValueByPath(i,["pageSize"]);e!==void 0&&a!=null&&setValueByPath(e,["_query","pageSize"],a);const c=getValueByPath(i,["pageToken"]);e!==void 0&&c!=null&&setValueByPath(e,["_query","pageToken"],c);const d=getValueByPath(i,["filter"]);return e!==void 0&&d!=null&&setValueByPath(e,["_query","filter"],d),o}function listTuningJobsConfigToVertex(i,e,s){const o={},a=getValueByPath(i,["pageSize"]);e!==void 0&&a!=null&&setValueByPath(e,["_query","pageSize"],a);const c=getValueByPath(i,["pageToken"]);e!==void 0&&c!=null&&setValueByPath(e,["_query","pageToken"],c);const d=getValueByPath(i,["filter"]);return e!==void 0&&d!=null&&setValueByPath(e,["_query","filter"],d),o}function listTuningJobsParametersToMldev(i,e){const s={},o=getValueByPath(i,["config"]);return o!=null&&listTuningJobsConfigToMldev(o,s),s}function listTuningJobsParametersToVertex(i,e){const s={},o=getValueByPath(i,["config"]);return o!=null&&listTuningJobsConfigToVertex(o,s),s}function listTuningJobsResponseFromMldev(i,e){const s={},o=getValueByPath(i,["sdkHttpResponse"]);o!=null&&setValueByPath(s,["sdkHttpResponse"],o);const a=getValueByPath(i,["nextPageToken"]);a!=null&&setValueByPath(s,["nextPageToken"],a);const c=getValueByPath(i,["tunedModels"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(_=>tuningJobFromMldev(_))),setValueByPath(s,["tuningJobs"],d)}return s}function listTuningJobsResponseFromVertex(i,e){const s={},o=getValueByPath(i,["sdkHttpResponse"]);o!=null&&setValueByPath(s,["sdkHttpResponse"],o);const a=getValueByPath(i,["nextPageToken"]);a!=null&&setValueByPath(s,["nextPageToken"],a);const c=getValueByPath(i,["tuningJobs"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(_=>tuningJobFromVertex(_))),setValueByPath(s,["tuningJobs"],d)}return s}function tunedModelFromMldev(i,e){const s={},o=getValueByPath(i,["name"]);o!=null&&setValueByPath(s,["model"],o);const a=getValueByPath(i,["name"]);return a!=null&&setValueByPath(s,["endpoint"],a),s}function tuningDatasetToMldev(i,e){const s={};if(getValueByPath(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=getValueByPath(i,["examples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),setValueByPath(s,["examples","examples"],a)}return s}function tuningDatasetToVertex(i,e,s){const o={};let a=getValueByPath(s,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const d=getValueByPath(i,["gcsUri"]);e!==void 0&&d!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(a==="PREFERENCE_TUNING"){const d=getValueByPath(i,["gcsUri"]);e!==void 0&&d!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}let c=getValueByPath(s,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const d=getValueByPath(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(c==="PREFERENCE_TUNING"){const d=getValueByPath(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}if(getValueByPath(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function tuningJobFromMldev(i,e){const s={},o=getValueByPath(i,["sdkHttpResponse"]);o!=null&&setValueByPath(s,["sdkHttpResponse"],o);const a=getValueByPath(i,["name"]);a!=null&&setValueByPath(s,["name"],a);const c=getValueByPath(i,["state"]);c!=null&&setValueByPath(s,["state"],tTuningJobStatus(c));const d=getValueByPath(i,["createTime"]);d!=null&&setValueByPath(s,["createTime"],d);const _=getValueByPath(i,["tuningTask","startTime"]);_!=null&&setValueByPath(s,["startTime"],_);const j=getValueByPath(i,["tuningTask","completeTime"]);j!=null&&setValueByPath(s,["endTime"],j);const h=getValueByPath(i,["updateTime"]);h!=null&&setValueByPath(s,["updateTime"],h);const g=getValueByPath(i,["description"]);g!=null&&setValueByPath(s,["description"],g);const b=getValueByPath(i,["baseModel"]);b!=null&&setValueByPath(s,["baseModel"],b);const $=getValueByPath(i,["_self"]);return $!=null&&setValueByPath(s,["tunedModel"],tunedModelFromMldev($)),s}function tuningJobFromVertex(i,e){const s={},o=getValueByPath(i,["sdkHttpResponse"]);o!=null&&setValueByPath(s,["sdkHttpResponse"],o);const a=getValueByPath(i,["name"]);a!=null&&setValueByPath(s,["name"],a);const c=getValueByPath(i,["state"]);c!=null&&setValueByPath(s,["state"],tTuningJobStatus(c));const d=getValueByPath(i,["createTime"]);d!=null&&setValueByPath(s,["createTime"],d);const _=getValueByPath(i,["startTime"]);_!=null&&setValueByPath(s,["startTime"],_);const j=getValueByPath(i,["endTime"]);j!=null&&setValueByPath(s,["endTime"],j);const h=getValueByPath(i,["updateTime"]);h!=null&&setValueByPath(s,["updateTime"],h);const g=getValueByPath(i,["error"]);g!=null&&setValueByPath(s,["error"],g);const b=getValueByPath(i,["description"]);b!=null&&setValueByPath(s,["description"],b);const $=getValueByPath(i,["baseModel"]);$!=null&&setValueByPath(s,["baseModel"],$);const et=getValueByPath(i,["tunedModel"]);et!=null&&setValueByPath(s,["tunedModel"],et);const _e=getValueByPath(i,["preTunedModel"]);_e!=null&&setValueByPath(s,["preTunedModel"],_e);const nt=getValueByPath(i,["supervisedTuningSpec"]);nt!=null&&setValueByPath(s,["supervisedTuningSpec"],nt);const st=getValueByPath(i,["preferenceOptimizationSpec"]);st!=null&&setValueByPath(s,["preferenceOptimizationSpec"],st);const tt=getValueByPath(i,["tuningDataStats"]);tt!=null&&setValueByPath(s,["tuningDataStats"],tt);const it=getValueByPath(i,["encryptionSpec"]);it!=null&&setValueByPath(s,["encryptionSpec"],it);const at=getValueByPath(i,["partnerModelTuningSpec"]);at!=null&&setValueByPath(s,["partnerModelTuningSpec"],at);const ct=getValueByPath(i,["customBaseModel"]);ct!=null&&setValueByPath(s,["customBaseModel"],ct);const rt=getValueByPath(i,["experiment"]);rt!=null&&setValueByPath(s,["experiment"],rt);const dt=getValueByPath(i,["labels"]);dt!=null&&setValueByPath(s,["labels"],dt);const yt=getValueByPath(i,["outputUri"]);yt!=null&&setValueByPath(s,["outputUri"],yt);const vt=getValueByPath(i,["pipelineJob"]);vt!=null&&setValueByPath(s,["pipelineJob"],vt);const gt=getValueByPath(i,["serviceAccount"]);gt!=null&&setValueByPath(s,["serviceAccount"],gt);const At=getValueByPath(i,["tunedModelDisplayName"]);At!=null&&setValueByPath(s,["tunedModelDisplayName"],At);const Vt=getValueByPath(i,["veoTuningSpec"]);return Vt!=null&&setValueByPath(s,["veoTuningSpec"],Vt),s}function tuningOperationFromMldev(i,e){const s={},o=getValueByPath(i,["sdkHttpResponse"]);o!=null&&setValueByPath(s,["sdkHttpResponse"],o);const a=getValueByPath(i,["name"]);a!=null&&setValueByPath(s,["name"],a);const c=getValueByPath(i,["metadata"]);c!=null&&setValueByPath(s,["metadata"],c);const d=getValueByPath(i,["done"]);d!=null&&setValueByPath(s,["done"],d);const _=getValueByPath(i,["error"]);return _!=null&&setValueByPath(s,["error"],_),s}function tuningValidationDatasetToVertex(i,e){const s={},o=getValueByPath(i,["gcsUri"]);o!=null&&setValueByPath(s,["validationDatasetUri"],o);const a=getValueByPath(i,["vertexDatasetResource"]);return a!=null&&setValueByPath(s,["validationDatasetUri"],a),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tunings extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Pager(PagedItem.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.get=async s=>await this.getInternal(s),this.tune=async s=>{var o;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const a={tunedModelName:s.baseModel};!((o=s.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(a.checkpointId=s.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},s),{preTunedModel:a});return c.baseModel=void 0,await this.tuneInternal(c)}else{const a=Object.assign({},s);return await this.tuneInternal(a)}else{const a=Object.assign({},s),c=await this.tuneMldevInternal(a);let d="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?d=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:JobState.JOB_STATE_QUEUED}}}}async getInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=getTuningJobParametersToVertex(e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>tuningJobFromVertex(g))}else{const h=getTuningJobParametersToMldev(e);return _=formatMap("{name}",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>tuningJobFromMldev(g))}}async listInternal(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=listTuningJobsParametersToVertex(e);return _=formatMap("tuningJobs",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listTuningJobsResponseFromVertex(g),$=new ListTuningJobsResponse;return Object.assign($,b),$})}else{const h=listTuningJobsParametersToMldev(e);return _=formatMap("tunedModels",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=listTuningJobsResponseFromMldev(g),$=new ListTuningJobsResponse;return Object.assign($,b),$})}}async cancel(e){var s,o,a,c;let d,_="",j={};if(this.apiClient.isVertexAI()){const h=cancelTuningJobParametersToVertex(e);return _=formatMap("{name}:cancel",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=cancelTuningJobResponseFromVertex(g),$=new CancelTuningJobResponse;return Object.assign($,b),$})}else{const h=cancelTuningJobParametersToMldev(e);return _=formatMap("{name}:cancel",h._url),j=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:_,queryParams:j,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(b=>{const $=b;return $.sdkHttpResponse={headers:g.headers},$})),d.then(g=>{const b=cancelTuningJobResponseFromMldev(g),$=new CancelTuningJobResponse;return Object.assign($,b),$})}}async tuneInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI()){const _=createTuningJobParametersPrivateToVertex(e,e);return c=formatMap("tuningJobs",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:j.headers},g})),a.then(j=>tuningJobFromVertex(j))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,o;let a,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const _=createTuningJobParametersPrivateToMldev(e);return c=formatMap("tunedModels",_._url),d=_._query,delete _._url,delete _._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(j=>j.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:j.headers},g})),a.then(j=>tuningOperationFromMldev(j))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserDownloader{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const MAX_CHUNK_SIZE=1024*1024*8,MAX_RETRY_COUNT=3,INITIAL_RETRY_DELAY_MS=1e3,DELAY_MULTIPLIER=2,X_GOOG_UPLOAD_STATUS_HEADER_FIELD="x-goog-upload-status";async function uploadBlob(i,e,s){var o;const a=await uploadBlobInternal(i,e,s),c=await a?.json();if(((o=a?.headers)===null||o===void 0?void 0:o[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function uploadBlobToFileSearchStore(i,e,s){var o;const a=await uploadBlobInternal(i,e,s),c=await a?.json();if(((o=a?.headers)===null||o===void 0?void 0:o[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=uploadToFileSearchStoreOperationFromMldev(c),_=new UploadToFileSearchStoreOperation;return Object.assign(_,d),_}async function uploadBlobInternal(i,e,s){var o,a;let c=0,d=0,_=new HttpResponse(new Response),j="upload";for(c=i.size;d<c;){const h=Math.min(MAX_CHUNK_SIZE,c-d),g=i.slice(d,d+h);d+h>=c&&(j+=", finalize");let b=0,$=INITIAL_RETRY_DELAY_MS;for(;b<MAX_RETRY_COUNT&&(_=await s.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":String(d),"Content-Length":String(h)}}}),!(!((o=_?.headers)===null||o===void 0)&&o[X_GOOG_UPLOAD_STATUS_HEADER_FIELD]));)b++,await sleep($),$=$*DELAY_MULTIPLIER;if(d+=h,((a=_?.headers)===null||a===void 0?void 0:a[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return _}async function getBlobStat(i){return{size:i.size,type:i.type}}function sleep(i){return new Promise(e=>setTimeout(e,i))}class BrowserUploader{async upload(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlob(e,s,o)}async uploadToFileSearchStore(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlobToFileSearchStore(e,s,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await getBlobStat(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserWebSocketFactory{create(e,s,o){return new BrowserWebSocket(e,s,o)}}class BrowserWebSocket{constructor(e,s,o){this.url=e,this.headers=s,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GOOGLE_API_KEY_HEADER="x-goog-api-key";class WebAuth{constructor(e){this.apiKey=e}async addAuthHeaders(e,s){if(e.get(GOOGLE_API_KEY_HEADER)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GOOGLE_API_KEY_HEADER,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LANGUAGE_LABEL_PREFIX="gl-node/";class GoogleGenAI{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const s=new GeminiNextGenAPIClient({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=s.interactions,this._interactions}constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const o=getBaseUrl(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new WebAuth(this.apiKey);this.apiClient=new ApiClient({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:LANGUAGE_LABEL_PREFIX+"web",uploader:new BrowserUploader,downloader:new BrowserDownloader}),this.models=new Models(this.apiClient),this.live=new Live(this.apiClient,a,new BrowserWebSocketFactory),this.batches=new Batches(this.apiClient),this.chats=new Chats(this.models,this.apiClient),this.caches=new Caches(this.apiClient),this.files=new Files(this.apiClient),this.operations=new Operations(this.apiClient),this.authTokens=new Tokens(this.apiClient),this.tunings=new Tunings(this.apiClient),this.fileSearchStores=new FileSearchStores(this.apiClient)}}function getApiKey(i={}){return i.geminiApiKey||void 0||void 0||""}function createAIClient(i={}){const e=getApiKey(i);if(!e)throw new Error("Gemini API key is required. Please add your API key in Settings.");return new GoogleGenAI({apiKey:e})}const jobTrackingTools=[{name:"save_job_application",parameters:{type:Type.OBJECT,description:"Saves a new job application or updates an existing one in the tracker.",properties:{company:{type:Type.STRING,description:"Name of the company"},role:{type:Type.STRING,description:"Job title or role"},source:{type:Type.STRING,description:"Source (e.g., LinkedIn, Referral, Gmail)"},dateApplied:{type:Type.STRING,description:"Date applied (YYYY-MM-DD)"},timeApplied:{type:Type.STRING,description:"Time applied (HH:MM) in 24-hour format (note: the time must be in UTC, but the time coming from the email can be in PST format thus we need to convert it to UTC)"},status:{type:Type.STRING,description:"Status",enum:["Applied","Interviewing","Rejected","Offer","Ghosted"]}},required:["company","role","source","dateApplied","timeApplied","status"]}},{name:"list_job_applications",description:"Provides a summary of all job applications currently in the user tracker.",parameters:{type:Type.OBJECT,properties:{}}},{name:"update_job_status",parameters:{type:Type.OBJECT,description:"Updates the status of a specific job application by company name.",properties:{company:{type:Type.STRING,description:"The company name"},status:{type:Type.STRING,description:"The new status",enum:["Applied","Interviewing","Rejected","Offer","Ghosted"]}},required:["company","status"]}},{name:"delete_job_application",parameters:{type:Type.OBJECT,description:"Removes a job application from the tracker.",properties:{company:{type:Type.STRING,description:"The company name to remove"}},required:["company"]}},{name:"sync_gmail_emails",description:"Triggers a synchronization with Gmail to check for new job application emails.",parameters:{type:Type.OBJECT,properties:{}}}];function getSystemInstruction(i){return`You are Astra, a personal career assistant.
USER CONTEXT:
- Name: ${i.userName||"User"}
- Target Career Role: ${i.targetRole||"Professional"}

CORE RESPONSIBILITIES:
1. Track job applications using the provided tools.
2. ALWAYS use 'list_job_applications' if the user asks "how many", "what jobs", "status of my search", or any question regarding their existing tracker data.
3. Use 'save_job_application' when a user mentions applying to a new role OR when processing emails for new apps.
4. Use 'update_job_status' when a user shares an update OR when emails indicate an interview invitation or rejection.
5. Use 'delete_job_application' only if specifically asked to remove an entry.
6. Use 'sync_gmail_emails' when the user asks to "sync", "check emails", "refresh inbox", or "update from gmail" or "sync emails" or "sync gmail".

TONE: Professional, encouraging, and highly efficient. 
CONCISENESS: ${i.conciseness}. If 'Concise', be extremely brief. If 'Detailed', provide more career advice alongside tool actions.`}async function sendTextMessage(i,e){const o=await createAIClient(e).models.generateContent({model:"gemini-3-flash-preview",contents:i,config:{systemInstruction:getSystemInstruction(e),tools:[{functionDeclarations:jobTrackingTools}]}});return{text:o.text||"",functionCalls:o.candidates?.[0]?.content?.parts?.filter(a=>a.functionCall)||[]}}async function createVoiceSession(i){const{settings:e,callbacks:s}=i;return createAIClient(e).live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",callbacks:s,config:{responseModalities:[Modality.AUDIO],tools:[{functionDeclarations:jobTrackingTools}],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:e.voiceName}}},systemInstruction:getSystemInstruction(e),inputAudioTranscription:{},outputAudioTranscription:{}}})}async function analyzeResume(i,e,s={}){const o=createAIClient(s),a=`
    Act as an expert HR Manager and Resume Tailor.
    
    RESUME:
    ${i}

    JOB DESCRIPTION:
    ${e}

    1. Rate this resume out of 10 for this specific job role.
    2. Provide 3 specific strengths of the candidate for this role.
    3. Identify 3 critical gaps or missing keywords/skills.
    4. Provide specific suggestions for the "Experience" and "Skills" sections to better align with the JD.

    Format the response in JSON:
    {
      "rating": number,
      "strengths": string[],
      "gaps": string[],
      "suggestions": {
        "experience": string,
        "skills": string
      }
    }
  `,c=await o.models.generateContent({model:"gemini-2.0-flash",contents:a,config:{responseMimeType:"application/json"}});return JSON.parse(c.text||"{}")}function decodeBase64Url(i){if(!i)return"";let e=i.replace(/-/g,"+").replace(/_/g,"/");for(;e.length%4;)e+="=";try{return decodeURIComponent(atob(e).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(s){return console.warn("Failed to decode email body part",s),""}}function extractEmailBody(i){if(!i)return"";if(i.body?.data)return decodeBase64Url(i.body.data);if(i.parts)for(const e of i.parts){if(e.body?.data&&(e.mimeType==="text/plain"||e.mimeType==="text/html"))return decodeBase64Url(e.body.data);if(e.parts){const s=extractEmailBody(e);if(s)return s}}return""}async function exchangeCodeForTokens(i,e,s,o){const a=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:i,client_id:e,client_secret:s,redirect_uri:o,grant_type:"authorization_code"})});if(!a.ok){const c=await a.json();throw new Error(c.error_description||"Failed to exchange code")}return await a.json()}async function refreshGmailAccessToken(i,e,s){try{const o=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({refresh_token:i,client_id:e,client_secret:s,grant_type:"refresh_token"})});return o.ok?await o.json():null}catch(o){return console.error("Refresh token error:",o),null}}async function fetchUserInfo(i){try{const e=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${i}`}});return e.ok?await e.json():null}catch(e){return console.error("Fetch user info error:",e),null}}async function fetchGmailEmails(i){let e=i.gmailAccessToken,s=null;const o=async a=>{const d=`https://www.googleapis.com/gmail/v1/users/me/messages?q=${encodeURIComponent("subject:(application OR interview OR offer OR position OR job OR career OR hiring)")}&maxResults=50`,_=await fetch(d,{headers:{Authorization:`Bearer ${a}`}});if(_.status===401)throw new Error("GMAIL_UNAUTHORIZED");if(!_.ok)throw new Error("Failed to fetch emails");const h=(await _.json()).messages||[],g=5,b=[];for(let $=0;$<h.length;$+=g){const et=h.slice($,$+g),_e=await Promise.all(et.map(async nt=>{const st=`https://www.googleapis.com/gmail/v1/users/me/messages/${nt.id}?format=full`,tt=await fetch(st,{headers:{Authorization:`Bearer ${a}`}});if(!tt.ok)return null;const it=await tt.json(),at=it.payload||{},ct=at.headers||[],rt=extractEmailBody(at);return{from:ct.find(dt=>dt.name==="From")?.value||"Unknown",subject:ct.find(dt=>dt.name==="Subject")?.value||"No Subject",dateApplied:ct.find(dt=>dt.name==="Received")?.value||"Unknown",timeApplied:ct.find(dt=>dt.name==="Received")?.value||"Unknown",snippet:it.snippet||"",body:rt||it.snippet||"",dateTime:ct.find(dt=>dt.name==="Received")?.value||"Unknown"}}));b.push(..._e),$+g<h.length&&await new Promise(nt=>setTimeout(nt,100))}return b.filter(Boolean)};try{try{return{emails:await o(e),newAccessToken:s}}catch(a){if(a.message==="GMAIL_UNAUTHORIZED"&&i.gmailRefreshToken){console.log("Access token expired, attempting refresh...");const c=await refreshGmailAccessToken(i.gmailRefreshToken,i.gmailClientId||"992887115158-b77iu6co1laj7nj3jo34vajhori2a3dl.apps.googleusercontent.com",i.gmailClientSecret||"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");if(c&&c.access_token)return console.log("Refresh successful!"),s=c.access_token,{emails:await o(s),newAccessToken:s}}throw a}}catch(a){if(a.message==="GMAIL_UNAUTHORIZED")throw a;return console.error("Gmail fetch error:",a),{emails:[],newAccessToken:s}}}async function syncGmailEmails(i,e){let s=[],o=null;if(i.isGmailConnected&&(i.gmailAccessToken||i.gmailRefreshToken))try{const d=await fetchGmailEmails(i);s=d.emails,o=d.newAccessToken}catch(d){if(d.message==="GMAIL_UNAUTHORIZED")throw new Error("Gmail session expired. Please reconnect in Settings.");console.warn("Gmail fetch failed, using fallback mock data:",d)}return{functionCalls:(await createAIClient(i).models.generateContent({model:"gemini-2.5-pro",contents:`Process these emails for job application updates. Use your tools to save or update the tracker.
    Current Job Applications: ${JSON.stringify(e)}
    
    Then process the emails.
    EMAILS: ${JSON.stringify(s)}
    
    note - dateTime will be in this format - by 2002:a05:6520:50c7:b0:325:7f39:3094 with SMTP id y7csp11383lka;        Thu, 18 Dec 2025 21:32:14 -0800 (PST)
    The time coming from the email can be in PST format thus we need to convert it to UTC.
    If there is duplicate email discard the older one.

    Also make sure its an applied job that we are considering not any suggestions or other emails.
    check the subject line and body of the email to make sure its an applied job.

    Sometime LinkedIn will send a suggestion email for a job that we have already applied for.
    Make sure to not consider those emails.

    Example of suggestion email - 
    Subject: [Company Name] is hiring a [Job Title]
    
    `,config:{systemInstruction:getSystemInstruction(i),tools:[{functionDeclarations:jobTrackingTools}]}})).candidates?.[0]?.content?.parts?.filter(d=>d.functionCall)||[],newAccessToken:o}}function useJobApplications(){const[i,e]=reactExports.useState(()=>{const h=localStorage.getItem(STORAGE_KEYS.JOBS);return h?JSON.parse(h):[]}),s=reactExports.useRef(i);reactExports.useEffect(()=>{s.current=i,localStorage.setItem(STORAGE_KEYS.JOBS,JSON.stringify(i))},[i]);const o=reactExports.useCallback(h=>{const g=s.current;if(h.id){const _e=g.map(nt=>nt.id===h.id?h:nt);return s.current=_e,e(_e),`Job application for ${h.company} updated successfully.`}const b=g.findIndex(_e=>_e.company.toLowerCase()===h.company.toLowerCase()&&_e.role.toLowerCase()===h.role.toLowerCase()&&_e.dateApplied===h.dateApplied&&_e.timeApplied===h.timeApplied&&_e.status===h.status&&_e.timeApplied===h.timeApplied);if(b>=0){const _e=g[b],nt={..._e,...h,id:_e.id},st=[...g];return st[b]=nt,s.current=st,e(st),`Updated existing application for ${h.role} at ${h.company}.`}const $={...h,id:Date.now().toString()+Math.random().toString(36).substr(2,9)},et=[$,...g];return s.current=et,e(et),`Successfully added ${$.role} at ${$.company} to your tracker.`},[]),a=reactExports.useCallback(h=>{const g=s.current.find(b=>b.id===h);return g?(e(b=>b.filter($=>$.id!==h)),`Removed the application for ${g.company} from your list.`):"I couldn't find that job application in your tracker."},[]),c=reactExports.useCallback((h,g)=>{const b=s.current.find($=>$.company.toLowerCase().includes(h.toLowerCase()));return b?(e($=>$.map(et=>et.id===b.id?{...et,status:g}:et)),`I've updated your status for ${b.company} to ${g}.`):`I couldn't find an application for "${h}" in your tracker.`},[]),d=reactExports.useCallback(()=>{const h=s.current;if(h.length===0)return"You haven't added any job applications yet.";const g=h.map((b,$)=>`${$+1}. ${b.company} - ${b.role} (${b.status})`).join(`
`);return`You have ${h.length} applications in your tracker:
${g}`},[]),_=reactExports.useCallback(h=>s.current.find(g=>g.company.toLowerCase().includes(h.toLowerCase())),[]),j=reactExports.useCallback(()=>{e([]),localStorage.removeItem(STORAGE_KEYS.JOBS)},[]);return{applications:i,applicationsRef:s,saveJobApplication:o,deleteJobApplication:a,updateJobStatus:c,listJobs:d,findJobByCompany:_,clearAllJobs:j}}function useSettings(){const[i,e]=reactExports.useState(()=>{const a=localStorage.getItem(STORAGE_KEYS.SETTINGS);return a?JSON.parse(a):DEFAULT_SETTINGS}),s=reactExports.useRef(i);reactExports.useEffect(()=>{s.current=i,localStorage.setItem(STORAGE_KEYS.SETTINGS,JSON.stringify(i))},[i]);const o=reactExports.useCallback(a=>{e(a)},[]);return{settings:i,settingsRef:s,updateSettings:o}}function useVoiceSession(i){const{settingsRef:e,onMessage:s,onToolCall:o,onError:a}=i,[c,d]=reactExports.useState(AssistantState.IDLE),_=reactExports.useRef(null),j=reactExports.useRef(null),h=reactExports.useRef(null),g=reactExports.useRef(null),b=reactExports.useRef(new Set),$=reactExports.useRef(0),et=reactExports.useRef(null),_e=reactExports.useRef(null),nt=reactExports.useRef(""),st=reactExports.useRef(""),tt=reactExports.useCallback(()=>{b.current.forEach(ct=>{try{ct.stop()}catch{}}),b.current.clear(),$.current=0},[]),it=reactExports.useCallback(async()=>{if(!(c!==AssistantState.IDLE&&c!==AssistantState.ERROR))try{d(AssistantState.CONNECTING),$.current=0,_.current||(_.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:AUDIO_CONFIG.INPUT_SAMPLE_RATE})),j.current||(j.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:AUDIO_CONFIG.OUTPUT_SAMPLE_RATE}));const ct=_.current,rt=j.current;ct.state==="suspended"&&await ct.resume(),rt.state==="suspended"&&await rt.resume();const dt=rt.createAnalyser();dt.fftSize=AUDIO_CONFIG.FFT_SIZE,g.current=dt;const yt=await navigator.mediaDevices.getUserMedia({audio:!0});_e.current=yt;const vt=createVoiceSession({settings:e.current,callbacks:{onopen:()=>{d(AssistantState.LISTENING);const gt=ct.createMediaStreamSource(yt),At=ct.createScriptProcessor(AUDIO_CONFIG.BUFFER_SIZE,1,1);h.current=At,At.onaudioprocess=Vt=>{const Nt=Vt.inputBuffer.getChannelData(0),It=createAudioBlob(Nt);vt.then(Lt=>{Lt&&Lt.sendRealtimeInput({media:It})})},gt.connect(At),At.connect(ct.destination)},onmessage:async gt=>{if(gt.toolCall)for(const Vt of gt.toolCall.functionCalls){const Nt=o(Vt);Nt&&vt.then(It=>{It.sendToolResponse({functionResponses:{id:Vt.id,name:Vt.name,response:{result:Nt}}})})}if(gt.serverContent?.outputTranscription?st.current+=gt.serverContent.outputTranscription.text:gt.serverContent?.inputTranscription&&(nt.current+=gt.serverContent.inputTranscription.text),gt.serverContent?.turnComplete){const Vt=nt.current.trim(),Nt=st.current.trim();(Vt||Nt)&&s(Vt,Nt),nt.current="",st.current=""}const At=gt.serverContent?.modelTurn?.parts[0]?.inlineData?.data;if(At){d(AssistantState.SPEAKING),$.current=Math.max($.current,rt.currentTime);const Vt=await decodeAudioData(decode(At),rt,AUDIO_CONFIG.OUTPUT_SAMPLE_RATE,1),Nt=rt.createBufferSource();Nt.buffer=Vt,Nt.connect(dt),dt.connect(rt.destination),Nt.addEventListener("ended",()=>{b.current.delete(Nt),b.current.size===0&&d(AssistantState.LISTENING)}),Nt.start($.current),$.current=$.current+Vt.duration,b.current.add(Nt)}gt.serverContent?.interrupted&&(tt(),d(AssistantState.LISTENING))},onerror:gt=>{console.error("Live Error:",gt),a("Connection interrupted. Please refresh or check your API key."),d(AssistantState.ERROR)},onclose:()=>{c!==AssistantState.ERROR&&d(AssistantState.IDLE)}}});et.current=await vt}catch(ct){a(ct.message||"Microphone access denied or session failed to start."),d(AssistantState.ERROR)}},[e,s,o,a,tt,c]),at=reactExports.useCallback(()=>{if(et.current){try{et.current.close()}catch{}et.current=null}h.current&&(h.current.onaudioprocess=null,h.current=null),_e.current&&(_e.current.getTracks().forEach(ct=>ct.stop()),_e.current=null),tt(),d(AssistantState.IDLE)},[tt]);return reactExports.useEffect(()=>()=>{at()},[at]),{state:c,setState:d,analyser:g.current,startSession:it,stopSession:at}}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,o)=>o?o.toUpperCase():s.toLowerCase()),toPascalCase=i=>{const e=toCamelCase(i);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...i)=>i.filter((e,s,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===s).join(" ").trim(),hasA11yProp=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:c,iconNode:d,..._},j)=>reactExports.createElement("svg",{ref:j,...defaultAttributes,width:e,height:e,stroke:i,strokeWidth:o?Number(s)*24/Number(e):s,className:mergeClasses("lucide",a),...!c&&!hasA11yProp(_)&&{"aria-hidden":"true"},..._},[...d.map(([h,g])=>reactExports.createElement(h,g)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(i,e)=>{const s=reactExports.forwardRef(({className:o,...a},c)=>reactExports.createElement(Icon,{ref:c,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(i))}`,`lucide-${i}`,o),...a}));return s.displayName=toPascalCase(i),s};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Briefcase=createLucideIcon("briefcase",__iconNode$G);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$F);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$E);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CircleCheck=createLucideIcon("circle-check",__iconNode$B);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$A);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$z);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$y);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$x);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$w);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$v);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],FileCheck=createLucideIcon("file-check",__iconNode$u);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$t);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],FileUp=createLucideIcon("file-up",__iconNode$s);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Funnel=createLucideIcon("funnel",__iconNode$r);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],Ghost=createLucideIcon("ghost",__iconNode$q);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$p);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Key=createLucideIcon("key",__iconNode$o);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$n);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Link2=createLucideIcon("link-2",__iconNode$m);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$l);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$k);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$j);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MessageSquare=createLucideIcon("message-square",__iconNode$i);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],MicOff=createLucideIcon("mic-off",__iconNode$h);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Mic=createLucideIcon("mic",__iconNode$g);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],PenLine=createLucideIcon("pen-line",__iconNode$f);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pen=createLucideIcon("pen",__iconNode$e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$d);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],RefreshCcw=createLucideIcon("refresh-ccw",__iconNode$c);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],RefreshCw=createLucideIcon("refresh-cw",__iconNode$b);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$a);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Star=createLucideIcon("star",__iconNode$6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Trophy=createLucideIcon("trophy",__iconNode$4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode);function Sidebar({activeTab:i,onTabChange:e}){const s=[{id:AppTab.ASSISTANT,icon:MessageSquare,label:"Assistant"},{id:AppTab.DASHBOARD,icon:LayoutDashboard,label:"Tracker"},{id:AppTab.RESUME,icon:FileCheck,label:"Resume Lab"}];return jsxRuntimeExports.jsxs("nav",{className:"w-20 md:w-64 border-r border-white/5 glass flex flex-col items-center md:items-stretch py-6 z-20",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 mb-12 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-violet-600 rounded-xl shadow-lg shadow-violet-600/20",children:jsxRuntimeExports.jsx(Sparkles,{className:"text-white",size:24})}),jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold tracking-tight hidden md:block",children:["Astra ",jsxRuntimeExports.jsx("span",{className:"text-violet-400 font-light",children:"AI"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 px-3 space-y-2",children:s.map(({id:o,icon:a,label:c})=>jsxRuntimeExports.jsxs("button",{onClick:()=>e(o),className:`w-full flex items-center gap-4 px-4 py-3 rounded-2xl transition-all ${i===o?"bg-violet-600 text-white glow":"text-gray-400 hover:bg-white/5"}`,children:[jsxRuntimeExports.jsx(a,{size:20}),jsxRuntimeExports.jsx("span",{className:"font-medium hidden md:block",children:c})]},o))}),jsxRuntimeExports.jsx("div",{className:"px-3",children:jsxRuntimeExports.jsxs("button",{onClick:()=>e(AppTab.SETTINGS),className:`w-full flex items-center gap-4 px-4 py-3 rounded-2xl transition-all ${i===AppTab.SETTINGS?"bg-violet-600 text-white glow":"text-gray-400 hover:bg-white/5"}`,children:[jsxRuntimeExports.jsx(Settings,{size:20}),jsxRuntimeExports.jsx("span",{className:"font-medium hidden md:block",children:"Settings"})]})})]})}function Waveform({state:i,analyser:e}){const s=reactExports.useRef(null),o=reactExports.useRef();return reactExports.useEffect(()=>{const a=s.current;if(!a)return;const c=a.getContext("2d");if(!c)return;const d=e?e.frequencyBinCount:64,_=new Uint8Array(d),j=()=>{o.current=requestAnimationFrame(j);const h=a.width,g=a.height;if(c.clearRect(0,0,h,g),e&&(i===AssistantState.LISTENING||i===AssistantState.SPEAKING))e.getByteFrequencyData(_);else for(let et=0;et<d;et++)_[et]=10+Math.sin(Date.now()/200+et)*5;const b=h/d*2.5;let $=0;for(let et=0;et<d;et++){const _e=_[et]/255*g*.8;let nt;i===AssistantState.LISTENING?(nt=c.createLinearGradient(0,g,0,0),nt.addColorStop(0,"#8b5cf6"),nt.addColorStop(1,"#d8b4fe")):i===AssistantState.SPEAKING?(nt=c.createLinearGradient(0,g,0,0),nt.addColorStop(0,"#3b82f6"),nt.addColorStop(1,"#93c5fd")):(nt=c.createLinearGradient(0,g,0,0),nt.addColorStop(0,"#4b5563"),nt.addColorStop(1,"#9ca3af")),c.fillStyle=nt,c.beginPath(),c.roundRect($,(g-_e)/2,b-2,_e,4),c.fill(),$+=b}};return j(),()=>{o.current&&cancelAnimationFrame(o.current)}},[i,e]),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full h-32 mt-8",children:jsxRuntimeExports.jsx("canvas",{ref:s,width:400,height:128,className:"max-w-full"})})}function parseMarkdown(i){return i?i.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/__(.*?)__/g,"<strong>$1</strong>").replace(/\*(?!\*)(.*?)\*(?!\*)/g,"<em>$1</em>").replace(/_(?!_)(.*?)_(?!_)/g,"<em>$1</em>").replace(/\n/g,"<br />"):""}function TranscriptionLog({messages:i}){const e=reactExports.useRef(null);return reactExports.useEffect(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[i]),i.length===0?jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500 italic",children:"Conversation transcript will appear here..."}):jsxRuntimeExports.jsx("div",{ref:e,className:"flex-1 overflow-y-auto space-y-4 pr-4 custom-scrollbar",children:i.map(s=>jsxRuntimeExports.jsxs("div",{className:`flex items-start gap-3 ${s.role==="user"?"justify-end":"justify-start"}`,children:[s.role==="assistant"&&jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-600 flex items-center justify-center flex-shrink-0 mt-1",children:jsxRuntimeExports.jsx(Sparkles,{size:16,className:"text-white"})}),jsxRuntimeExports.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 text-sm ${s.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-white/10 text-gray-100 border border-white/5 rounded-tl-none"}`,children:jsxRuntimeExports.jsx("p",{className:"leading-relaxed",dangerouslySetInnerHTML:{__html:parseMarkdown(s.text)}})}),s.role==="user"&&jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center flex-shrink-0 mt-1",children:jsxRuntimeExports.jsx(User,{size:16,className:"text-white"})})]},s.id))})}function AssistantView({settingsRef:i,jobActions:e}){const[s,o]=reactExports.useState([]),[a,c]=reactExports.useState(""),[d,_]=reactExports.useState(!1),[j,h]=reactExports.useState(null),{saveJobApplication:g,deleteJobApplication:b,updateJobStatus:$,listJobs:et,findJobByCompany:_e,onSyncGmail:nt}=e,st=reactExports.useCallback(gt=>{let At="";if(gt.name==="save_job_application")At=g(gt.args);else if(gt.name==="list_job_applications")At=et();else if(gt.name==="update_job_status")At=$(gt.args.company,gt.args.status);else if(gt.name==="delete_job_application"){const Vt=_e(gt.args.company);At=Vt?b(Vt.id):`Could not find a job for ${gt.args.company}.`}else gt.name==="sync_gmail_emails"&&(nt(),At="Syncing your Gmail for job updates...");return At},[g,b,$,et,_e,nt]),tt=reactExports.useCallback((gt,At)=>{gt&&o(Vt=>[...Vt,{id:Date.now().toString()+"-user",role:"user",text:gt,timestamp:Date.now()}]),At&&o(Vt=>[...Vt,{id:Date.now().toString()+"-assistant",role:"assistant",text:At,timestamp:Date.now()}])},[]),it=reactExports.useCallback(gt=>{h(gt)},[]),{state:at,analyser:ct,startSession:rt,stopSession:dt}=useVoiceSession({settingsRef:i,onMessage:tt,onToolCall:st,onError:it});React.useEffect(()=>()=>{dt()},[dt]);const yt=async gt=>{if(gt&&gt.preventDefault(),!a.trim()||d)return;const At=a.trim();c(""),_(!0);const Vt={id:Date.now().toString()+"-user",role:"user",text:At,timestamp:Date.now()};o(Nt=>[...Nt,Vt]);try{const Nt=await sendTextMessage(At,i.current);let It=Nt.text||"";for(const Lt of Nt.functionCalls)if(Lt.functionCall){const zt=st(Lt.functionCall);It?It+=`

[Action: ${zt}]`:It=zt}o(Lt=>[...Lt,{id:Date.now().toString()+"-assistant",role:"assistant",text:It,timestamp:Date.now()}])}catch{h("Text service unavailable. Check your connection.")}finally{_(!1)}},vt=i.current;return jsxRuntimeExports.jsxs("section",{className:"flex-1 flex flex-col md:flex-row h-full overflow-hidden animate-in fade-in duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 relative",children:[jsxRuntimeExports.jsxs("div",{className:"z-10 text-center max-w-md w-full flex-1 flex flex-col justify-center",children:[jsxRuntimeExports.jsxs("div",{className:`w-40 h-40 mx-auto rounded-full flex items-center justify-center transition-all duration-700 relative ${at===AssistantState.SPEAKING?"bg-blue-500/10 scale-105":at===AssistantState.LISTENING?"bg-violet-500/10 scale-105":"bg-gray-800/20"}`,children:[(at===AssistantState.LISTENING||at===AssistantState.SPEAKING)&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full animate-ping opacity-20 bg-violet-500"}),jsxRuntimeExports.jsx("div",{className:`p-8 rounded-full transition-all duration-500 ${at===AssistantState.SPEAKING?"bg-blue-600 shadow-lg shadow-blue-500/20":at===AssistantState.LISTENING?"bg-violet-600 shadow-lg shadow-violet-500/20":"bg-gray-800"}`,children:at===AssistantState.ERROR?jsxRuntimeExports.jsx(CircleAlert,{size:48,className:"text-red-400"}):jsxRuntimeExports.jsx(Sparkles,{size:48,className:"text-white"})})]}),jsxRuntimeExports.jsxs("h2",{className:"mt-6 text-2xl font-semibold text-white",children:[at===AssistantState.IDLE&&(vt.userName?`Hello, ${vt.userName}`:"Ready to track your career"),at===AssistantState.CONNECTING&&"Establishing connection...",at===AssistantState.LISTENING&&"I'm listening...",at===AssistantState.SPEAKING&&"Astra is speaking...",at===AssistantState.ERROR&&"Connection Issue"]}),jsxRuntimeExports.jsxs("p",{className:"mt-2 text-gray-400 text-sm h-4",children:[!j&&at===AssistantState.IDLE&&"Talk or type to manage your job applications",j&&jsxRuntimeExports.jsx("span",{className:"text-red-400/80",children:j})]}),jsxRuntimeExports.jsx(Waveform,{state:at,analyser:ct})]}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-2xl space-y-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("div",{className:"glass rounded-full p-1.5 flex items-center gap-2",children:at===AssistantState.IDLE||at===AssistantState.ERROR?jsxRuntimeExports.jsx("button",{onClick:rt,className:"w-14 h-14 rounded-full bg-violet-600 hover:bg-violet-500 flex items-center justify-center transition-all active:scale-95 glow shadow-xl",children:jsxRuntimeExports.jsx(Mic,{size:24,className:"text-white"})}):jsxRuntimeExports.jsx("button",{onClick:dt,className:"w-14 h-14 rounded-full bg-red-600 hover:bg-red-500 flex items-center justify-center transition-all active:scale-95",children:jsxRuntimeExports.jsx(MicOff,{size:24,className:"text-white"})})})}),jsxRuntimeExports.jsxs("form",{onSubmit:yt,className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-violet-500/5 rounded-2xl blur-xl group-focus-within:bg-violet-500/10 transition-all pointer-events-none"}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-2 flex items-center gap-2 border border-white/10 group-focus-within:border-violet-500/50 transition-all shadow-2xl relative",children:[jsxRuntimeExports.jsx("textarea",{value:a,onChange:gt=>c(gt.target.value),onKeyDown:gt=>{gt.key==="Enter"&&!gt.shiftKey&&(gt.preventDefault(),yt(gt))},placeholder:"Ask me anything or track a job...",className:"flex-1 bg-transparent border-none outline-none px-4 py-2 text-sm text-white placeholder-gray-500 resize-none min-h-[44px] max-h-32",rows:1}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:!a.trim()||d,className:"p-3 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-800 disabled:text-gray-600 rounded-xl transition-all active:scale-90 text-white",children:d?jsxRuntimeExports.jsx(LoaderCircle,{size:18,className:"animate-spin"}):jsxRuntimeExports.jsx(Send,{size:18})})]})]})]})]}),jsxRuntimeExports.jsxs("aside",{className:"w-full md:w-96 glass border-l border-white/5 flex flex-col h-1/2 md:h-full",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-300",children:"Activity Log"}),jsxRuntimeExports.jsx("button",{onClick:()=>o([]),className:"p-1.5 hover:bg-white/5 rounded text-gray-500",children:jsxRuntimeExports.jsx(X,{size:16})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-4 overflow-hidden flex flex-col",children:jsxRuntimeExports.jsx(TranscriptionLog,{messages:s})})]})]})}function StatusIcon({status:i}){switch(i){case JobStatus.APPLIED:return jsxRuntimeExports.jsx(Clock,{size:16,className:"text-blue-400"});case JobStatus.INTERVIEWING:return jsxRuntimeExports.jsx(Calendar,{size:16,className:"text-yellow-400"});case JobStatus.OFFER:return jsxRuntimeExports.jsx(Trophy,{size:16,className:"text-green-400"});case JobStatus.REJECTED:return jsxRuntimeExports.jsx(CircleX,{size:16,className:"text-red-400"});case JobStatus.GHOSTED:return jsxRuntimeExports.jsx(Ghost,{size:16,className:"text-gray-400"});default:return jsxRuntimeExports.jsx(CircleCheck,{size:16,className:"text-gray-400"})}}function JobCard({job:i,onEdit:e,onDelete:s,timezone:o}){const a=d=>{switch(d){case"Offer":return"bg-green-500/20 text-green-400";case"Interviewing":return"bg-yellow-500/20 text-yellow-400";case"Rejected":return"bg-red-500/20 text-red-400";default:return"bg-blue-500/20 text-blue-400"}},c=d=>{if(!d)return"Unknown date";try{const _=new Date(d);return isNaN(_.getTime())?d:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:o||void 0}).format(_)}catch{return d}};return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-5 border border-white/5 hover:border-violet-500/30 transition-all group animate-in fade-in zoom-in-95 duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-violet-400 transition-colors truncate leading-tight",title:i.role,children:i.role}),jsxRuntimeExports.jsx("p",{className:"text-violet-300/80 font-medium truncate leading-tight",title:i.company,children:i.company})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 ml-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>e(i),className:"p-2 text-gray-500 hover:text-blue-400 hover:bg-blue-400/10 rounded-lg transition-all md:opacity-0 md:group-hover:opacity-100",children:jsxRuntimeExports.jsx(Pen,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>s(i.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all md:opacity-0 md:group-hover:opacity-100",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[jsxRuntimeExports.jsx(StatusIcon,{status:i.status}),jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${a(i.status)}`,children:i.status})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[jsxRuntimeExports.jsx(Calendar,{size:16}),jsxRuntimeExports.jsxs("span",{children:["Applied on ",c(i.dateApplied)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[jsxRuntimeExports.jsx(Link2,{size:16}),jsxRuntimeExports.jsxs("span",{className:"truncate",children:["via ",i.source]})]})]})]})}function JobModal({isOpen:i,onClose:e,onSave:s,editingJob:o}){const[a,c]=reactExports.useState({company:"",role:"",source:"",dateApplied:new Date().toISOString().split("T")[0],timeApplied:new Date().toISOString().split("T")[1],status:JobStatus.APPLIED});reactExports.useEffect(()=>{c(o?{company:o.company,role:o.role,source:o.source,dateApplied:o.dateApplied,timeApplied:o.timeApplied,status:o.status}:{company:"",role:"",source:"",dateApplied:new Date().toISOString().split("T")[0],timeApplied:new Date().toISOString().split("T")[1],status:JobStatus.APPLIED})},[o,i]);const d=j=>{j.preventDefault(),s(o?{...a,id:o.id}:a),e()},_=j=>{const{name:h,value:g}=j.target;c(b=>({...b,[h]:g}))};return i?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:jsxRuntimeExports.jsxs("div",{className:"glass w-full max-w-lg rounded-3xl p-8 border border-white/10 shadow-2xl animate-in zoom-in-95 duration-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white",children:o?"Edit Application":"New Application"}),jsxRuntimeExports.jsx("button",{onClick:e,className:"p-2 hover:bg-white/5 rounded-full text-gray-400",children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:d,className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 ml-1",children:"Company Name"}),jsxRuntimeExports.jsx("input",{required:!0,type:"text",name:"company",value:a.company,onChange:_,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white",placeholder:"e.g. Google, Stripe, etc."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 ml-1",children:"Job Role / Title"}),jsxRuntimeExports.jsx("input",{required:!0,type:"text",name:"role",value:a.role,onChange:_,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white",placeholder:"e.g. Software Engineer"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 ml-1",children:"Source"}),jsxRuntimeExports.jsx("input",{required:!0,type:"text",name:"source",value:a.source,onChange:_,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white",placeholder:"e.g. LinkedIn"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 ml-1",children:"Date Applied"}),jsxRuntimeExports.jsx("input",{required:!0,type:"date",name:"dateApplied",value:a.dateApplied,onChange:_,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 ml-1",children:"Status"}),jsxRuntimeExports.jsxs("select",{name:"status",value:a.status,onChange:_,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white appearance-none",children:[jsxRuntimeExports.jsx("option",{value:JobStatus.APPLIED,className:"bg-gray-900",children:"Applied"}),jsxRuntimeExports.jsx("option",{value:JobStatus.INTERVIEWING,className:"bg-gray-900",children:"Interviewing"}),jsxRuntimeExports.jsx("option",{value:JobStatus.OFFER,className:"bg-gray-900",children:"Offer"}),jsxRuntimeExports.jsx("option",{value:JobStatus.REJECTED,className:"bg-gray-900",children:"Rejected"}),jsxRuntimeExports.jsx("option",{value:JobStatus.GHOSTED,className:"bg-gray-900",children:"Ghosted"})]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 flex gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 bg-white/5 hover:bg-white/10 text-white rounded-xl font-semibold transition-all",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-violet-600 hover:bg-violet-500 text-white rounded-xl font-semibold transition-all shadow-lg shadow-violet-600/20 active:scale-[0.98]",children:o?"Update Application":"Save Application"})]})]})]})}):null}function JobDashboard({applications:i,onDelete:e,onSave:s,isGmailConnected:o,onSyncGmail:a,isSyncing:c,timezone:d}){const[_,j]=reactExports.useState(!1),[h,g]=reactExports.useState(null),[b,$]=reactExports.useState(""),[et,_e]=reactExports.useState("all"),nt=i.filter(ct=>{const rt=(ct.company?.toLowerCase()||"").includes(b.toLowerCase())||(ct.role?.toLowerCase()||"").includes(b.toLowerCase());let dt=!0;const yt=new Date;yt.setHours(0,0,0,0);const vt=ct.dateApplied?new Date(ct.dateApplied):null;switch(vt&&vt.setHours(0,0,0,0),et){case"today":dt=vt&&vt.getTime()===yt.getTime();break;case"week":if(!vt)dt=!1;else{const gt=new Date(yt);gt.setDate(yt.getDate()-7),dt=vt>=gt}break;case"month":if(!vt)dt=!1;else{const gt=new Date(yt);gt.setMonth(yt.getMonth()-1),dt=vt>=gt}break;case"Interviewing":case"Offer":case"Rejected":case"Ghosted":case"Applied":dt=ct.status===et;break;case"all":default:dt=!0}return rt&&dt}),st=()=>{g(null),j(!0)},tt=ct=>{g(ct),j(!0)},it=()=>{j(!1),g(null)},at=()=>{window.confirm("Are you sure you want to remove all rejected applications?")&&i.filter(rt=>rt.status==="Rejected").forEach(rt=>e(rt.id))};return jsxRuntimeExports.jsxs("div",{className:"flex-1 p-6 overflow-y-auto custom-scrollbar",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Job Applications"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Manage and track your career opportunities in one place."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[o&&jsxRuntimeExports.jsxs("button",{onClick:a,disabled:c,className:"flex items-center gap-2 px-5 py-2.5 bg-white/5 hover:bg-white/10 text-white rounded-xl font-semibold border border-white/10 transition-all active:scale-95 disabled:opacity-50",children:[c?jsxRuntimeExports.jsx(LoaderCircle,{size:18,className:"animate-spin"}):jsxRuntimeExports.jsx(RefreshCcw,{size:18}),c?"Syncing...":"Sync Gmail"]}),jsxRuntimeExports.jsxs("button",{onClick:st,className:"flex items-center gap-2 px-5 py-2.5 bg-violet-600 hover:bg-violet-500 text-white rounded-xl font-semibold transition-all shadow-lg shadow-violet-600/20 active:scale-95",children:[jsxRuntimeExports.jsx(Plus,{size:20}),"Add Application"]})]})]}),jsxRuntimeExports.jsx("div",{className:"mb-8 space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-[2] relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search by company or role...",value:b,onChange:ct=>$(ct.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-white placeholder:text-gray-500 focus:outline-none focus:border-violet-500/50 transition-colors"}),b&&jsxRuntimeExports.jsx("button",{onClick:()=>$(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:jsxRuntimeExports.jsx(X,{size:16})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-1 items-center gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:jsxRuntimeExports.jsx(Funnel,{size:18})}),jsxRuntimeExports.jsxs("select",{value:et,onChange:ct=>_e(ct.target.value),className:"w-full appearance-none bg-white/5 border border-white/10 rounded-xl py-2.5 pl-10 pr-10 text-white focus:outline-none focus:border-violet-500/50 transition-colors cursor-pointer",children:[jsxRuntimeExports.jsx("option",{value:"all",className:"bg-gray-900 text-white",children:"All Applications"}),jsxRuntimeExports.jsxs("optgroup",{label:"Date Filters",className:"bg-gray-900 text-gray-400 font-normal",children:[jsxRuntimeExports.jsx("option",{value:"today",className:"bg-gray-900 text-white",children:"Applied Today"}),jsxRuntimeExports.jsx("option",{value:"week",className:"bg-gray-900 text-white",children:"Applied This Week"}),jsxRuntimeExports.jsx("option",{value:"month",className:"bg-gray-900 text-white",children:"Applied This Month"})]}),jsxRuntimeExports.jsxs("optgroup",{label:"Status Filters",className:"bg-gray-900 text-gray-400 font-normal",children:[jsxRuntimeExports.jsx("option",{value:"Applied",className:"bg-gray-900 text-white",children:"Status: Applied"}),jsxRuntimeExports.jsx("option",{value:"Interviewing",className:"bg-gray-900 text-white",children:"Status: Interviewing"}),jsxRuntimeExports.jsx("option",{value:"Offer",className:"bg-gray-900 text-white",children:"Status: Offer"}),jsxRuntimeExports.jsx("option",{value:"Rejected",className:"bg-gray-900 text-white",children:"Status: Rejected"}),jsxRuntimeExports.jsx("option",{value:"Ghosted",className:"bg-gray-900 text-white",children:"Status: Ghosted"})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:jsxRuntimeExports.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),i.some(ct=>ct.status==="Rejected")&&jsxRuntimeExports.jsxs("button",{onClick:at,className:"flex items-center gap-2 px-4 py-2.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-xl font-medium border border-red-500/20 transition-all whitespace-nowrap",title:"Remove all rejected applications",children:[jsxRuntimeExports.jsx(Trash2,{size:18}),jsxRuntimeExports.jsx("span",{className:"hidden lg:inline",children:"Clear Rejected"})]})]})]})}),i.length===0?jsxRuntimeExports.jsxs("div",{className:"glass rounded-3xl p-12 text-center border-dashed border-2 border-white/10",children:[jsxRuntimeExports.jsx(Briefcase,{size:48,className:"mx-auto text-gray-600 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium text-gray-300",children:"No applications tracked yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mt-2",children:o?"Try syncing with Gmail to automatically find your applications.":'Ask Astra to add a job for you, or click "Add Application" above.'})]}):nt.length===0?jsxRuntimeExports.jsxs("div",{className:"glass rounded-3xl p-12 text-center border-dashed border-2 border-white/10",children:[jsxRuntimeExports.jsx(Search,{size:48,className:"mx-auto text-gray-600 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium text-gray-300",children:"No matching applications found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search or filters to find what you're looking for."})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:nt.map(ct=>jsxRuntimeExports.jsx(JobCard,{job:ct,onEdit:tt,onDelete:e,timezone:d},ct.id))})]}),jsxRuntimeExports.jsx(JobModal,{isOpen:_,onClose:it,onSave:s,editingJob:h})]})}const GMAIL_CLIENT_ID$1="992887115158-b77iu6co1laj7nj3jo34vajhori2a3dl.apps.googleusercontent.com",GMAIL_CLIENT_SECRET$1="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",GMAIL_SCOPES$1=OAUTH_CONFIG.SCOPES;function LoginView({onLoginSuccess:i}){const[e,s]=reactExports.useState(!1),o=async()=>{s(!0);try{const a=window.location.href.split("?")[0].split("#")[0],c=new URL("https://accounts.google.com/o/oauth2/v2/auth");c.searchParams.set("client_id",GMAIL_CLIENT_ID$1),c.searchParams.set("redirect_uri",a),c.searchParams.set("response_type","code"),c.searchParams.set("access_type","offline"),c.searchParams.set("scope",GMAIL_SCOPES$1),c.searchParams.set("prompt","consent"),window.open(c.toString(),"gmail-oauth","width=500,height=600,scrollbars=yes");const d=async _=>{if(_.origin===window.location.origin&&(_.data.type==="gmail-oauth-success"||_.data.type==="gmail-oauth-error"))if(window.removeEventListener("message",d),_.data.type==="gmail-oauth-success")try{const{code:j}=_.data;if(j){const h=await exchangeCodeForTokens(j,GMAIL_CLIENT_ID$1,GMAIL_CLIENT_SECRET$1,a),g=await fetchUserInfo(h.access_token);i({tokens:h,userInfo:{name:g?.name||"",email:g?.email||"",picture:g?.picture||""}})}}catch(j){console.error("Token exchange failed:",j),alert("Login failed during token exchange."),s(!1)}else console.error("Login OAuth error:",_.data.error),s(!1)};window.addEventListener("message",d),setTimeout(()=>{s(!1)},12e4)}catch(a){console.error("Login error:",a),s(!1)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-violet-600/20 rounded-full blur-[120px] animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/20 rounded-full blur-[120px] animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-violet-600/10 rounded-2xl mb-6 border border-violet-500/20 animate-in",children:jsxRuntimeExports.jsx(Sparkles,{className:"text-violet-400",size:32})}),jsxRuntimeExports.jsxs("h1",{className:"text-5xl font-extrabold text-white mb-4 tracking-tight",children:["Astra ",jsxRuntimeExports.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-blue-400",children:"AI"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-lg",children:"Your intelligent career companion. Track applications, scan emails, and land your dream job."})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-[32px] p-8 space-y-8 animate-in border border-white/10 shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(FeatureItem,{icon:jsxRuntimeExports.jsx(Search,{size:20,className:"text-blue-400"}),title:"Smart Email Scanning",description:"Automatically find and track job emails from your Gmail inbox."}),jsxRuntimeExports.jsx(FeatureItem,{icon:jsxRuntimeExports.jsx(ChartColumn,{size:20,className:"text-violet-400"}),title:"Application Tracking",description:"Keep all your opportunities organized in one beautiful dashboard."}),jsxRuntimeExports.jsx(FeatureItem,{icon:jsxRuntimeExports.jsx(Briefcase,{size:20,className:"text-emerald-400"}),title:"Career Insights",description:"Get AI-powered feedback on your resume and interview status."})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4",children:[jsxRuntimeExports.jsxs("button",{onClick:o,disabled:e,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-950 hover:bg-gray-100 py-4 rounded-2xl font-bold text-lg transition-all active:scale-95 shadow-lg disabled:opacity-50",children:[e?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:24}):jsxRuntimeExports.jsx(Mail,{size:24}),e?"Signing in...":"Continue with Gmail"]}),jsxRuntimeExports.jsx("p",{className:"text-center text-xs text-gray-500 mt-4 px-4",children:"By continuing, you allow Astra AI to access your Gmail (readonly) to find job-related emails."})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"Secure, private, and local-first."})})]})]})}function FeatureItem({icon:i,title:e,description:s}){return jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-white/5 rounded-2xl transition-colors group",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-white/5 rounded-xl group-hover:bg-white/10 transition-colors",children:i}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-white",children:e}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:s})]})]})}function commonjsRequire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports$1){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=lt,e.bytesToString=wt,e.createValidAbsoluteUrl=pt,e.getModificationDate=nn,e.getUuid=An,e.getVerbosityLevel=zt,e.info=Ft,e.isArrayBuffer=Qt,e.isArrayEqual=on,e.isNodeJS=void 0,e.normalizeUnicode=_n,e.objectFromMap=Mt,e.objectSize=jt,e.setVerbosityLevel=Lt,e.shadow=Et,e.string32=kt,e.stringToBytes=Bt,e.stringToPDFString=Jt,e.stringToUTF8String=Kt,e.unreachable=ht,e.utf8StringToString=Yt,e.warn=Tt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const o=[1,0,0,1,0,0];e.IDENTITY_MATRIX=o;const a=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=a;const c=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=c;const d=1.35;e.LINE_FACTOR=d;const _=.35;e.LINE_DESCENT_FACTOR=_;const j=_/d;e.BASELINE_FACTOR=j;const h={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=h;const g={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=g;const b="pdfjs_internal_editor_";e.AnnotationEditorPrefix=b;const $={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=$;const et={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=et;const _e={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=_e;const nt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=nt;const st={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=st;const tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=tt;const it={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=it;const at={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=at;const ct={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=ct;const rt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=rt;const dt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=dt;const yt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=yt;const vt={O:"PageOpen",C:"PageClose"};e.PageActionEventType=vt;const gt={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=gt;const At={NONE:0,BINARY:1};e.CMapCompressionType=At;const Vt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Vt;const Nt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Nt;let It=gt.WARNINGS;function Lt(Ht){Number.isInteger(Ht)&&(It=Ht)}function zt(){return It}function Ft(Ht){It>=gt.INFOS&&console.log(`Info: ${Ht}`)}function Tt(Ht){It>=gt.WARNINGS&&console.log(`Warning: ${Ht}`)}function ht(Ht){throw new Error(Ht)}function lt(Ht,bt){Ht||ht(bt)}function ut(Ht){switch(Ht?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pt(Ht,bt=null,Rt=null){if(!Ht)return null;try{if(Rt&&typeof Ht=="string"&&(Rt.addDefaultProtocol&&Ht.startsWith("www.")&&Ht.match(/\./g)?.length>=2&&(Ht=`http://${Ht}`),Rt.tryConvertEncoding))try{Ht=Kt(Ht)}catch{}const $t=bt?new URL(Ht,bt):new URL(Ht);if(ut($t))return $t}catch{}return null}function Et(Ht,bt,Rt,$t=!1){return Object.defineProperty(Ht,bt,{value:Rt,enumerable:!$t,configurable:!0,writable:!1}),Rt}const St=function(){function bt(Rt,$t){this.constructor===bt&&ht("Cannot initialize BaseException."),this.message=Rt,this.name=$t}return bt.prototype=new Error,bt.constructor=bt,bt}();e.BaseException=St;class Ct extends St{constructor(bt,Rt){super(bt,"PasswordException"),this.code=Rt}}e.PasswordException=Ct;class Pt extends St{constructor(bt,Rt){super(bt,"UnknownErrorException"),this.details=Rt}}e.UnknownErrorException=Pt;class ot extends St{constructor(bt){super(bt,"InvalidPDFException")}}e.InvalidPDFException=ot;class ft extends St{constructor(bt){super(bt,"MissingPDFException")}}e.MissingPDFException=ft;class mt extends St{constructor(bt,Rt){super(bt,"UnexpectedResponseException"),this.status=Rt}}e.UnexpectedResponseException=mt;class _t extends St{constructor(bt){super(bt,"FormatError")}}e.FormatError=_t;class xt extends St{constructor(bt){super(bt,"AbortException")}}e.AbortException=xt;function wt(Ht){(typeof Ht!="object"||Ht?.length===void 0)&&ht("Invalid argument for bytesToString");const bt=Ht.length,Rt=8192;if(bt<Rt)return String.fromCharCode.apply(null,Ht);const $t=[];for(let Xt=0;Xt<bt;Xt+=Rt){const en=Math.min(Xt+Rt,bt),tn=Ht.subarray(Xt,en);$t.push(String.fromCharCode.apply(null,tn))}return $t.join("")}function Bt(Ht){typeof Ht!="string"&&ht("Invalid argument for stringToBytes");const bt=Ht.length,Rt=new Uint8Array(bt);for(let $t=0;$t<bt;++$t)Rt[$t]=Ht.charCodeAt($t)&255;return Rt}function kt(Ht){return String.fromCharCode(Ht>>24&255,Ht>>16&255,Ht>>8&255,Ht&255)}function jt(Ht){return Object.keys(Ht).length}function Mt(Ht){const bt=Object.create(null);for(const[Rt,$t]of Ht)bt[Rt]=$t;return bt}function Dt(){const Ht=new Uint8Array(4);return Ht[0]=1,new Uint32Array(Ht.buffer,0,1)[0]===1}function Ut(){try{return new Function(""),!0}catch{return!1}}class Ot{static get isLittleEndian(){return Et(this,"isLittleEndian",Dt())}static get isEvalSupported(){return Et(this,"isEvalSupported",Ut())}static get isOffscreenCanvasSupported(){return Et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Et(this,"platform",{isWin:!1,isMac:!1}):Et(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return Et(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}e.FeatureTest=Ot;const Gt=[...Array(256).keys()].map(Ht=>Ht.toString(16).padStart(2,"0"));class qt{static makeHexColor(bt,Rt,$t){return`#${Gt[bt]}${Gt[Rt]}${Gt[$t]}`}static scaleMinMax(bt,Rt){let $t;bt[0]?(bt[0]<0&&($t=Rt[0],Rt[0]=Rt[1],Rt[1]=$t),Rt[0]*=bt[0],Rt[1]*=bt[0],bt[3]<0&&($t=Rt[2],Rt[2]=Rt[3],Rt[3]=$t),Rt[2]*=bt[3],Rt[3]*=bt[3]):($t=Rt[0],Rt[0]=Rt[2],Rt[2]=$t,$t=Rt[1],Rt[1]=Rt[3],Rt[3]=$t,bt[1]<0&&($t=Rt[2],Rt[2]=Rt[3],Rt[3]=$t),Rt[2]*=bt[1],Rt[3]*=bt[1],bt[2]<0&&($t=Rt[0],Rt[0]=Rt[1],Rt[1]=$t),Rt[0]*=bt[2],Rt[1]*=bt[2]),Rt[0]+=bt[4],Rt[1]+=bt[4],Rt[2]+=bt[5],Rt[3]+=bt[5]}static transform(bt,Rt){return[bt[0]*Rt[0]+bt[2]*Rt[1],bt[1]*Rt[0]+bt[3]*Rt[1],bt[0]*Rt[2]+bt[2]*Rt[3],bt[1]*Rt[2]+bt[3]*Rt[3],bt[0]*Rt[4]+bt[2]*Rt[5]+bt[4],bt[1]*Rt[4]+bt[3]*Rt[5]+bt[5]]}static applyTransform(bt,Rt){const $t=bt[0]*Rt[0]+bt[1]*Rt[2]+Rt[4],Xt=bt[0]*Rt[1]+bt[1]*Rt[3]+Rt[5];return[$t,Xt]}static applyInverseTransform(bt,Rt){const $t=Rt[0]*Rt[3]-Rt[1]*Rt[2],Xt=(bt[0]*Rt[3]-bt[1]*Rt[2]+Rt[2]*Rt[5]-Rt[4]*Rt[3])/$t,en=(-bt[0]*Rt[1]+bt[1]*Rt[0]+Rt[4]*Rt[1]-Rt[5]*Rt[0])/$t;return[Xt,en]}static getAxialAlignedBoundingBox(bt,Rt){const $t=this.applyTransform(bt,Rt),Xt=this.applyTransform(bt.slice(2,4),Rt),en=this.applyTransform([bt[0],bt[3]],Rt),tn=this.applyTransform([bt[2],bt[1]],Rt);return[Math.min($t[0],Xt[0],en[0],tn[0]),Math.min($t[1],Xt[1],en[1],tn[1]),Math.max($t[0],Xt[0],en[0],tn[0]),Math.max($t[1],Xt[1],en[1],tn[1])]}static inverseTransform(bt){const Rt=bt[0]*bt[3]-bt[1]*bt[2];return[bt[3]/Rt,-bt[1]/Rt,-bt[2]/Rt,bt[0]/Rt,(bt[2]*bt[5]-bt[4]*bt[3])/Rt,(bt[4]*bt[1]-bt[5]*bt[0])/Rt]}static singularValueDecompose2dScale(bt){const Rt=[bt[0],bt[2],bt[1],bt[3]],$t=bt[0]*Rt[0]+bt[1]*Rt[2],Xt=bt[0]*Rt[1]+bt[1]*Rt[3],en=bt[2]*Rt[0]+bt[3]*Rt[2],tn=bt[2]*Rt[1]+bt[3]*Rt[3],hn=($t+tn)/2,fn=Math.sqrt(($t+tn)**2-4*($t*tn-en*Xt))/2,cn=hn+fn||1,rn=hn-fn||1;return[Math.sqrt(cn),Math.sqrt(rn)]}static normalizeRect(bt){const Rt=bt.slice(0);return bt[0]>bt[2]&&(Rt[0]=bt[2],Rt[2]=bt[0]),bt[1]>bt[3]&&(Rt[1]=bt[3],Rt[3]=bt[1]),Rt}static intersect(bt,Rt){const $t=Math.max(Math.min(bt[0],bt[2]),Math.min(Rt[0],Rt[2])),Xt=Math.min(Math.max(bt[0],bt[2]),Math.max(Rt[0],Rt[2]));if($t>Xt)return null;const en=Math.max(Math.min(bt[1],bt[3]),Math.min(Rt[1],Rt[3])),tn=Math.min(Math.max(bt[1],bt[3]),Math.max(Rt[1],Rt[3]));return en>tn?null:[$t,en,Xt,tn]}static bezierBoundingBox(bt,Rt,$t,Xt,en,tn,hn,fn){const cn=[],rn=[[],[]];let pn,un,yn,Zt,vn,Pn,En,xn;for(let Sn=0;Sn<2;++Sn){if(Sn===0?(un=6*bt-12*$t+6*en,pn=-3*bt+9*$t-9*en+3*hn,yn=3*$t-3*bt):(un=6*Rt-12*Xt+6*tn,pn=-3*Rt+9*Xt-9*tn+3*fn,yn=3*Xt-3*Rt),Math.abs(pn)<1e-12){if(Math.abs(un)<1e-12)continue;Zt=-yn/un,0<Zt&&Zt<1&&cn.push(Zt);continue}En=un*un-4*yn*pn,xn=Math.sqrt(En),!(En<0)&&(vn=(-un+xn)/(2*pn),0<vn&&vn<1&&cn.push(vn),Pn=(-un-xn)/(2*pn),0<Pn&&Pn<1&&cn.push(Pn))}let gn=cn.length,an;const mn=gn;for(;gn--;)Zt=cn[gn],an=1-Zt,rn[0][gn]=an*an*an*bt+3*an*an*Zt*$t+3*an*Zt*Zt*en+Zt*Zt*Zt*hn,rn[1][gn]=an*an*an*Rt+3*an*an*Zt*Xt+3*an*Zt*Zt*tn+Zt*Zt*Zt*fn;return rn[0][mn]=bt,rn[1][mn]=Rt,rn[0][mn+1]=hn,rn[1][mn+1]=fn,rn[0].length=rn[1].length=mn+2,[Math.min(...rn[0]),Math.min(...rn[1]),Math.max(...rn[0]),Math.max(...rn[1])]}}e.Util=qt;const Wt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Jt(Ht){if(Ht[0]>=""){let Rt;if(Ht[0]===""&&Ht[1]===""?Rt="utf-16be":Ht[0]===""&&Ht[1]===""?Rt="utf-16le":Ht[0]===""&&Ht[1]===""&&Ht[2]===""&&(Rt="utf-8"),Rt)try{const $t=new TextDecoder(Rt,{fatal:!0}),Xt=Bt(Ht);return $t.decode(Xt)}catch($t){Tt(`stringToPDFString: "${$t}".`)}}const bt=[];for(let Rt=0,$t=Ht.length;Rt<$t;Rt++){const Xt=Wt[Ht.charCodeAt(Rt)];bt.push(Xt?String.fromCharCode(Xt):Ht.charAt(Rt))}return bt.join("")}function Kt(Ht){return decodeURIComponent(escape(Ht))}function Yt(Ht){return unescape(encodeURIComponent(Ht))}function Qt(Ht){return typeof Ht=="object"&&Ht?.byteLength!==void 0}function on(Ht,bt){if(Ht.length!==bt.length)return!1;for(let Rt=0,$t=Ht.length;Rt<$t;Rt++)if(Ht[Rt]!==bt[Rt])return!1;return!0}function nn(Ht=new Date){return[Ht.getUTCFullYear().toString(),(Ht.getUTCMonth()+1).toString().padStart(2,"0"),Ht.getUTCDate().toString().padStart(2,"0"),Ht.getUTCHours().toString().padStart(2,"0"),Ht.getUTCMinutes().toString().padStart(2,"0"),Ht.getUTCSeconds().toString().padStart(2,"0")].join("")}class dn{#e=!1;constructor(){this.promise=new Promise((bt,Rt)=>{this.resolve=$t=>{this.#e=!0,bt($t)},this.reject=$t=>{this.#e=!0,Rt($t)}})}get settled(){return this.#e}}e.PromiseCapability=dn;let sn=null,ln=null;function _n(Ht){return sn||(sn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ln=new Map([["","t"]])),Ht.replaceAll(sn,(bt,Rt,$t)=>Rt?Rt.normalize("NFKC"):ln.get($t))}function An(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Ht=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Ht);else for(let bt=0;bt<32;bt++)Ht[bt]=Math.floor(Math.random()*255);return wt(Ht)}const Tn="pdfjs_internal_id_";e.AnnotationPrefix=Tn},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(i){if(typeof i=="string"||i instanceof URL?i={url:i}:(0,_util.isArrayBuffer)(i)&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:s}=e,o=i.url?getUrlProp(i.url):null,a=i.data?getDataProp(i.data):null,c=i.httpHeaders||null,d=i.withCredentials===!0,_=i.password??null,j=i.range instanceof PDFDataRangeTransport?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let g=i.worker instanceof PDFWorker?i.worker:null;const b=i.verbosity,$=typeof i.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(i.docBaseUrl)?i.docBaseUrl:null,et=typeof i.cMapUrl=="string"?i.cMapUrl:null,_e=i.cMapPacked!==!1,nt=i.CMapReaderFactory||DefaultCMapReaderFactory,st=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,tt=i.StandardFontDataFactory||DefaultStandardFontDataFactory,it=i.stopAtErrors!==!0,at=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,ct=i.isEvalSupported!==!1,rt=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!_util.isNodeJS,dt=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,yt=typeof i.disableFontFace=="boolean"?i.disableFontFace:_util.isNodeJS,vt=i.fontExtraProperties===!0,gt=i.enableXfa===!0,At=i.ownerDocument||globalThis.document,Vt=i.disableRange===!0,Nt=i.disableStream===!0,It=i.disableAutoFetch===!0,Lt=i.pdfBug===!0,zt=j?j.length:i.length??NaN,Ft=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!_util.isNodeJS&&!yt,Tt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:nt===_display_utils.DOMCMapReaderFactory&&tt===_display_utils.DOMStandardFontDataFactory&&et&&st&&(0,_display_utils.isValidFetchUrl)(et,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(st,document.baseURI),ht=i.canvasFactory||new DefaultCanvasFactory({ownerDocument:At}),lt=i.filterFactory||new DefaultFilterFactory({docId:s,ownerDocument:At}),ut=null;(0,_util.setVerbosityLevel)(b);const pt={canvasFactory:ht,filterFactory:lt};if(Tt||(pt.cMapReaderFactory=new nt({baseUrl:et,isCompressed:_e}),pt.standardFontDataFactory=new tt({baseUrl:st})),!g){const Ct={verbosity:b,port:_worker_options.GlobalWorkerOptions.workerPort};g=Ct.port?PDFWorker.fromPort(Ct):new PDFWorker(Ct),e._worker=g}const Et={docId:s,apiVersion:"3.11.174",data:a,password:_,disableAutoFetch:It,rangeChunkSize:h,length:zt,docBaseUrl:$,enableXfa:gt,evaluatorOptions:{maxImageSize:at,disableFontFace:yt,ignoreErrors:it,isEvalSupported:ct,isOffscreenCanvasSupported:rt,canvasMaxAreaInBytes:dt,fontExtraProperties:vt,useSystemFonts:Ft,cMapUrl:Tt?et:null,standardFontDataUrl:Tt?st:null}},St={ignoreErrors:it,isEvalSupported:ct,disableFontFace:yt,fontExtraProperties:vt,enableXfa:gt,ownerDocument:At,disableAutoFetch:It,pdfBug:Lt,styleElement:ut};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const Ct=_fetchDocument(g,Et),Pt=new Promise(function(ot){let ft;j?ft=new _transport_stream.PDFDataTransportStream({length:zt,initialData:j.initialData,progressiveDone:j.progressiveDone,contentDispositionFilename:j.contentDispositionFilename,disableRange:Vt,disableStream:Nt},j):a||(ft=(_t=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(_t):(0,_display_utils.isValidFetchUrl)(_t.url)?new _displayFetch_stream.PDFFetchStream(_t):new _displayNetwork.PDFNetworkStream(_t))({url:o,length:zt,httpHeaders:c,withCredentials:d,rangeChunkSize:h,disableRange:Vt,disableStream:Nt})),ot(ft)});return Promise.all([Ct,Pt]).then(function([ot,ft]){if(e.destroyed)throw new Error("Loading aborted");const mt=new _message_handler.MessageHandler(s,ot,g.port),_t=new WorkerTransport(mt,e,ft,St,pt);e._transport=_t,mt.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(i,e){if(i.destroyed)throw new Error("Worker was destroyed");const s=await i.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(i.destroyed)throw new Error("Worker was destroyed");return s}function getUrlProp(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(_util.isNodeJS&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(i){if(_util.isNodeJS&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return(0,_util.stringToBytes)(i);if(typeof i=="object"&&!isNaN(i?.length)||(0,_util.isArrayBuffer)(i))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,s,o=!1,a=null){this.length=e,this.initialData=s,this.progressiveDone=o,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,s){for(const o of this._rangeListeners)o(e,s)}onDataProgress(e,s){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(e,s)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,s){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,s){this._pdfInfo=e,this._transport=s,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(o=>{if(!o)return o;const a=[];for(const c in o)a.push(...o[c]);return a}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(e,s,o,a=!1){this._pageIndex=e,this._pageInfo=s,this._transport=o,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:s=this.rotate,offsetX:o=0,offsetY:a=0,dontFlip:c=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:s,offsetX:o,offsetY:a,dontFlip:c})}getAnnotations({intent:e="display"}={}){const s=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,s.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:s,intent:o="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:c=null,background:d=null,optionalContentConfigPromise:_=null,annotationCanvasMap:j=null,pageColors:h=null,printAnnotationStorage:g=null}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(o,a,g);this.#t=!1,this.#i(),_||(_=this._transport.getOptionalContentConfig());let $=this._intentStates.get(b.cacheKey);$||($=Object.create(null),this._intentStates.set(b.cacheKey,$)),$.streamReaderCancelTimeout&&(clearTimeout($.streamReaderCancelTimeout),$.streamReaderCancelTimeout=null);const et=!!(b.renderingIntent&_util.RenderingIntentFlag.PRINT);$.displayReadyCapability||($.displayReadyCapability=new _util.PromiseCapability,$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const _e=tt=>{$.renderTasks.delete(nt),(this._maybeCleanupAfterRender||et)&&(this.#t=!0),this.#n(!et),tt?(nt.capability.reject(tt),this._abortOperatorList({intentState:$,reason:tt instanceof Error?tt:new Error(tt)})):nt.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},nt=new InternalRenderTask({callback:_e,params:{canvasContext:e,viewport:s,transform:c,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:j,operatorList:$.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!et,pdfBug:this._pdfBug,pageColors:h});($.renderTasks||=new Set).add(nt);const st=nt.task;return Promise.all([$.displayReadyCapability.promise,_]).then(([tt,it])=>{if(this.destroyed){_e();return}this._stats?.time("Rendering"),nt.initializeGraphics({transparency:tt,optionalContentConfig:it}),nt.operatorListChanged()}).catch(_e),st}getOperatorList({intent:e="display",annotationMode:s=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function a(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(_))}const c=this._transport.getRenderingIntent(e,s,o,!0);let d=this._intentStates.get(c.cacheKey);d||(d=Object.create(null),this._intentStates.set(c.cacheKey,d));let _;return d.opListReadCapability||(_=Object.create(null),_.operatorListChanged=a,d.opListReadCapability=new _util.PromiseCapability,(d.renderTasks||=new Set).add(_),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:s===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const s=this.streamTextContent(e);return new Promise(function(o,a){function c(){d.read().then(function({value:j,done:h}){if(h){o(_);return}Object.assign(_.styles,j.styles),_.items.push(...j.items),c()},a)}const d=s.getReader(),_={items:[],styles:Object.create(null)};c()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const o of s.renderTasks)e.push(o.completed),o.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const s=this.#n(!1);return e&&s&&(this._stats&&=new _display_utils.StatTimer),s}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:s,operatorList:o}of this._intentStates.values())if(s.size>0||!o.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,s){const o=this._intentStates.get(s);o&&(this._stats?.timeEnd("Page Request"),o.displayReadyCapability?.resolve(e))}_renderPageChunk(e,s){for(let o=0,a=e.length;o<a;o++)s.operatorList.fnArray.push(e.fnArray[o]),s.operatorList.argsArray.push(e.argsArray[o]);s.operatorList.lastChunk=e.lastChunk,s.operatorList.separateAnnots=e.separateAnnots;for(const o of s.renderTasks)o.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:s,annotationStorageSerializable:o}){const{map:a,transfers:c}=o,_=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:s,annotationStorage:a},c).getReader(),j=this._intentStates.get(s);j.streamReader=_;const h=()=>{_.read().then(({value:g,done:b})=>{if(b){j.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,j),h())},g=>{if(j.streamReader=null,!this._transport.destroyed){if(j.operatorList){j.operatorList.lastChunk=!0;for(const b of j.renderTasks)b.operatorListChanged();this.#n(!0)}if(j.displayReadyCapability)j.displayReadyCapability.reject(g);else if(j.opListReadCapability)j.opListReadCapability.reject(g);else throw g}})};h()}_abortOperatorList({intentState:e,reason:s,force:o=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!o){if(e.renderTasks.size>0)return;if(s instanceof _display_utils.RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;s.extraDelay>0&&s.extraDelay<1e3&&(a+=s.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:s,force:!0})},a);return}}if(e.streamReader.cancel(new _util.AbortException(s.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[a,c]of this._intentStates)if(c===e){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(e,s){const o={data:structuredClone(e,s?{transfer:s}:null)};this.#t.then(()=>{for(const a of this.#e)a.call(this,o)})}addEventListener(e,s){this.#e.add(s)}removeEventListener(e,s){this.#e.delete(s)}terminate(){this.#e.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const i=document?.currentScript?.src;i&&(PDFWorkerUtil.fallbackWorkerSrc=i.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(i,e){let s;try{if(s=new URL(i),!s.origin||s.origin==="null")return!1}catch{return!1}const o=new URL(e,s);return s.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(i){const e=`importScripts("${i}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts;constructor({name:i=null,port:e=null,verbosity:s=(0,_util.getVerbosityLevel)()}={}){if(this.name=i,this.destroyed=!1,this.verbosity=s,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#workerPorts?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(i){this._port=i,this._messageHandler=new _message_handler.MessageHandler("main","worker",i),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:i}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,i)||(i=PDFWorkerUtil.createCDNWrapper(new URL(i,window.location).href));const e=new Worker(i),s=new _message_handler.MessageHandler("main","worker",e),o=()=>{e.removeEventListener("error",a),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||o()};e.addEventListener("error",a),s.on("test",d=>{if(e.removeEventListener("error",a),this.destroyed){o();return}d?(this._messageHandler=s,this._port=e,this._webWorker=e,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),e.terminate())}),s.on("ready",d=>{if(e.removeEventListener("error",a),this.destroyed){o();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const d=new Uint8Array;s.send("test",d,[d.buffer])};c();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(i=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const s=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(s+"_worker",s,e);i.setup(o,e);const a=new _message_handler.MessageHandler(s,s+"_worker",e);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(i=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${i.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(i){if(!i?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#workerPorts?.get(i.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(i)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#i=null;constructor(e,s,o,a,c){this.messageHandler=e,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,this.canvasFactory=c.canvasFactory,this.filterFactory=c.filterFactory,this.cMapReaderFactory=c.cMapReaderFactory,this.standardFontDataFactory=c.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(e,s=null){const o=this.#e.get(e);if(o)return o;const a=this.messageHandler.sendWithPromise(e,s);return this.#e.set(e,a),a}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,s=_util.AnnotationMode.ENABLE,o=null,a=!1){let c=_util.RenderingIntentFlag.DISPLAY,d=_annotation_storage.SerializableEmpty;switch(e){case"any":c=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":c=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(s){case _util.AnnotationMode.DISABLE:c+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:c+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:c+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,d=(c&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${s}`)}return a&&(c+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:c,cacheKey:`${c}_${d.hash}`,annotationStorageSerializable:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const o of this.#t.values())e.push(o._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return e.push(s),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:s}=this;e.on("GetReader",(o,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=c=>{this._lastProgress={loaded:c.loaded,total:c.total}},a.onPull=()=>{this._fullReader.read().then(function({value:c,done:d}){if(d){a.close();return}(0,_util.assert)(c instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{this._fullReader.cancel(c),a.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("ReaderHeadersReady",o=>{const a=new _util.PromiseCapability,c=this._fullReader;return c.headersReady.then(()=>{(!c.isStreamingSupported||!c.isRangeSupported)&&(this._lastProgress&&s.onProgress?.(this._lastProgress),c.onProgress=d=>{s.onProgress?.({loaded:d.loaded,total:d.total})}),a.resolve({isStreamingSupported:c.isStreamingSupported,isRangeSupported:c.isRangeSupported,contentLength:c.contentLength})},a.reject),a.promise}),e.on("GetRangeReader",(o,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const c=this._networkStream.getRangeReader(o.begin,o.end);if(!c){a.close();return}a.onPull=()=>{c.read().then(function({value:d,done:_}){if(_){a.close();return}(0,_util.assert)(d instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{a.error(d)})},a.onCancel=d=>{c.cancel(d),a.ready.catch(_=>{if(!this.destroyed)throw _})}}),e.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(o,this))}),e.on("DocException",function(o){let a;switch(o.name){case"PasswordException":a=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":a=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}s._capability.reject(a)}),e.on("PasswordRequest",o=>{if(this.#i=new _util.PromiseCapability,s.onPassword){const a=c=>{c instanceof Error?this.#i.reject(c):this.#i.resolve({password:c})};try{s.onPassword(a,o.code)}catch(c){this.#i.reject(c)}}else this.#i.reject(new _util.PasswordException(o.message,o.code));return this.#i.promise}),e.on("DataLoaded",o=>{s.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),e.on("StartRenderPage",o=>{if(this.destroyed)return;this.#t.get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),e.on("commonobj",([o,a,c])=>{if(!this.destroyed&&!this.commonObjs.has(o))switch(a){case"Font":const d=this._params;if("error"in c){const h=c.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(o,h);break}const _=d.pdfBug&&globalThis.FontInspector?.enabled?(h,g)=>globalThis.FontInspector.fontAdded(h,g):null,j=new _font_loader.FontFaceObject(c,{isEvalSupported:d.isEvalSupported,disableFontFace:d.disableFontFace,ignoreErrors:d.ignoreErrors,inspectFont:_});this.fontLoader.bind(j).catch(h=>e.sendWithPromise("FontFallback",{id:o})).finally(()=>{!d.fontExtraProperties&&j.data&&(j.data=null),this.commonObjs.resolve(o,j)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(o,c);break;default:throw new Error(`Got unknown common object type ${a}`)}}),e.on("obj",([o,a,c,d])=>{if(this.destroyed)return;const _=this.#t.get(a);if(!_.objs.has(o))switch(c){case"Image":if(_.objs.resolve(o,d),d){let j;if(d.bitmap){const{width:h,height:g}=d;j=h*g*4}else j=d.data?.length||0;j>_util.MAX_IMAGE_SIZE_TO_CACHE&&(_._maybeCleanupAfterRender=!0)}break;case"Pattern":_.objs.resolve(o,d);break;default:throw new Error(`Got unknown object type ${c}`)}}),e.on("DocProgress",o=>{this.destroyed||s.onProgress?.({loaded:o.loaded,total:o.total})}),e.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=e-1,o=this.#n.get(s);if(o)return o;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");const d=new PDFPageProxy(s,c,this,this._params.pdfBug);return this.#t.set(s,d),d});return this.#n.set(s,a),a}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:s})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",s=this.#e.get(e);if(s)return s;const o=this.messageHandler.sendWithPromise(e,null).then(a=>({info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,o),o}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of this.#t.values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:s}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:s})}}class PDFObjects{#e=Object.create(null);#t(e){return this.#e[e]||={capability:new _util.PromiseCapability,data:null}}get(e,s=null){if(s){const a=this.#t(e);return a.capability.promise.then(()=>s(a.data)),null}const o=this.#e[e];if(!o?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return o.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,s=null){const o=this.#t(e);o.data=s,o.capability.resolve()}clear(){for(const e in this.#e){const{data:s}=this.#e[e];s?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:s}=this.#e;return e.form||e.canvas&&s?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:s,objs:o,commonObjs:a,annotationCanvasMap:c,operatorList:d,pageIndex:_,canvasFactory:j,filterFactory:h,useRequestAnimationFrame:g=!1,pdfBug:b=!1,pageColors:$=null}){this.callback=e,this.params=s,this.objs=o,this.commonObjs=a,this.annotationCanvasMap=c,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=_,this.canvasFactory=j,this.filterFactory=h,this._pdfBug=b,this.pageColors=$,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:s}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:a,transform:c,background:d}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:a,transparency:e,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,s=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,s))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var o=s(1),a=s(4),c=s(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=d;class _{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,b){const $=this.#t.get(g);return $===void 0?b:Object.assign(b,$)}getRawValue(g){return this.#t.get(g)}remove(g){if(this.#t.delete(g),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of this.#t.values())if(b instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,b){const $=this.#t.get(g);let et=!1;if($!==void 0)for(const[_e,nt]of Object.entries(b))$[_e]!==nt&&(et=!0,$[_e]=nt);else et=!0,this.#t.set(g,b);et&&this.#n(),b instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(g){return this.#t.has(g)}getAll(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}setAll(g){for(const[b,$]of Object.entries(g))this.setValue(b,$)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new j(this)}get serializable(){if(this.#t.size===0)return d;const g=new Map,b=new c.MurmurHash3_64,$=[],et=Object.create(null);let _e=!1;for(const[nt,st]of this.#t){const tt=st instanceof a.AnnotationEditor?st.serialize(!1,et):st;tt&&(g.set(nt,tt),b.update(`${nt}:${JSON.stringify(tt)}`),_e||=!!tt.bitmap)}if(_e)for(const nt of g.values())nt.bitmap&&$.push(nt.bitmap);return g.size>0?{map:g,hash:b.hexdigest(),transfers:$}:d}}e.AnnotationStorage=_;class j extends _{#e;constructor(g){super();const{map:b,hash:$,transfers:et}=g.serializable,_e=structuredClone(b,et?{transfer:et}:null);this.#e={map:_e,hash:$,transfers:et}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var o=s(5),a=s(1),c=s(6);class d{#e="";#t=!1;#n=null;#i=null;#a=null;#o=!1;#r=null;#l=this.focusin.bind(this);#u=this.focusout.bind(this);#s=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=d._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(h){this.constructor===d&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null,this._uiManager=h.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=h.isCentered,this._structTreeParentId=null;const{rotation:g,rawDims:{pageWidth:b,pageHeight:$,pageX:et,pageY:_e}}=this.parent.viewport;this.rotation=g,this.pageRotation=(360+g-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[b,$],this.pageTranslation=[et,_e];const[nt,st]=this.parentDimensions;this.x=h.x/nt,this.y=h.y/st,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(h){const g=new _({id:h.parent.getNextId(),parent:h.parent,uiManager:h._uiManager});g.annotationElementId=h.annotationElementId,g.deleted=!0,g._uiManager.addToAnnotationStorage(g)}static initialize(h,g=null){if(d._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map($=>[$,h.get($)])),g?.strings)for(const $ of g.strings)d._l10nPromise.set($,h.get($));if(d._borderLineWidth!==-1)return;const b=getComputedStyle(document.documentElement);d._borderLineWidth=parseFloat(b.getPropertyValue("--outline-width"))||0}static updateDefaultParams(h,g){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(h){return!1}static paste(h,g){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(h){this.#h=h,this.div?.classList.toggle("draggable",h)}center(){const[h,g]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*g/(h*2),this.y+=this.width*h/(g*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*g/(h*2),this.y-=this.width*h/(g*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(h){this._uiManager.addCommands(h)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(h){h!==null&&(this.pageIndex=h.pageIndex,this.pageDimensions=h.pageDimensions),this.parent=h}focusin(h){this._focusEventsAllowed&&(this.#s?this.#s=!1:this.parent.setSelected(this))}focusout(h){!this._focusEventsAllowed||!this.isAttachedToDOM||h.relatedTarget?.closest(`#${this.id}`)||(h.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(h,g,b,$){const[et,_e]=this.parentDimensions;[b,$]=this.screenToPageTranslation(b,$),this.x=(h+b)/et,this.y=(g+$)/_e,this.fixAndSetPosition()}#y([h,g],b,$){[b,$]=this.screenToPageTranslation(b,$),this.x+=b/h,this.y+=$/g,this.fixAndSetPosition()}translate(h,g){this.#y(this.parentDimensions,h,g)}translateInPage(h,g){this.#y(this.pageDimensions,h,g),this.div.scrollIntoView({block:"nearest"})}drag(h,g){const[b,$]=this.parentDimensions;if(this.x+=h/b,this.y+=g/$,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:tt,y:it}=this.div.getBoundingClientRect();this.parent.findNewParent(this,tt,it)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:et,y:_e}=this;const[nt,st]=this.#m();et+=nt,_e+=st,this.div.style.left=`${(100*et).toFixed(2)}%`,this.div.style.top=`${(100*_e).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[h,g]=this.parentDimensions,{_borderLineWidth:b}=d,$=b/h,et=b/g;switch(this.rotation){case 90:return[-$,et];case 180:return[$,et];case 270:return[$,-et];default:return[-$,-et]}}fixAndSetPosition(){const[h,g]=this.pageDimensions;let{x:b,y:$,width:et,height:_e}=this;switch(et*=h,_e*=g,b*=h,$*=g,this.rotation){case 0:b=Math.max(0,Math.min(h-et,b)),$=Math.max(0,Math.min(g-_e,$));break;case 90:b=Math.max(0,Math.min(h-_e,b)),$=Math.min(g,Math.max(et,$));break;case 180:b=Math.min(h,Math.max(et,b)),$=Math.min(g,Math.max(_e,$));break;case 270:b=Math.min(h,Math.max(_e,b)),$=Math.max(0,Math.min(g-et,$));break}this.x=b/=h,this.y=$/=g;const[nt,st]=this.#m();b+=nt,$+=st;const{style:tt}=this.div;tt.left=`${(100*b).toFixed(2)}%`,tt.top=`${(100*$).toFixed(2)}%`,this.moveInDOM()}static#g(h,g,b){switch(b){case 90:return[g,-h];case 180:return[-h,-g];case 270:return[-g,h];default:return[h,g]}}screenToPageTranslation(h,g){return d.#g(h,g,this.parentRotation)}pageTranslationToScreen(h,g){return d.#g(h,g,360-this.parentRotation)}#c(h){switch(h){case 90:{const[g,b]=this.pageDimensions;return[0,-g/b,b/g,0]}case 180:return[-1,0,0,-1];case 270:{const[g,b]=this.pageDimensions;return[0,g/b,-b/g,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:h,pageDimensions:[g,b]}=this,$=g*h,et=b*h;return a.FeatureTest.isCSSRoundSupported?[Math.round($),Math.round(et)]:[$,et]}setDims(h,g){const[b,$]=this.parentDimensions;this.div.style.width=`${(100*h/b).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*g/$).toFixed(2)}%`),this.#n?.classList.toggle("small",h<d.SMALL_EDITOR_SIZE||g<d.SMALL_EDITOR_SIZE)}fixDims(){const{style:h}=this.div,{height:g,width:b}=h,$=b.endsWith("%"),et=!this.#o&&g.endsWith("%");if($&&et)return;const[_e,nt]=this.parentDimensions;$||(h.width=`${(100*parseFloat(b)/_e).toFixed(2)}%`),!this.#o&&!et&&(h.height=`${(100*parseFloat(g)/nt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#v(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const h=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||h.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const g of h){const b=document.createElement("div");this.#r.append(b),b.classList.add("resizer",g),b.addEventListener("pointerdown",this.#S.bind(this,g)),b.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(this.#r)}#S(h,g){g.preventDefault();const{isMac:b}=a.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&b)return;const $=this.#x.bind(this,h),et=this._isDraggable;this._isDraggable=!1;const _e={passive:!0,capture:!0};window.addEventListener("pointermove",$,_e);const nt=this.x,st=this.y,tt=this.width,it=this.height,at=this.parent.div.style.cursor,ct=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(g.target).cursor;const rt=()=>{this._isDraggable=et,window.removeEventListener("pointerup",rt),window.removeEventListener("blur",rt),window.removeEventListener("pointermove",$,_e),this.parent.div.style.cursor=at,this.div.style.cursor=ct;const dt=this.x,yt=this.y,vt=this.width,gt=this.height;dt===nt&&yt===st&&vt===tt&&gt===it||this.addCommands({cmd:()=>{this.width=vt,this.height=gt,this.x=dt,this.y=yt;const[At,Vt]=this.parentDimensions;this.setDims(At*vt,Vt*gt),this.fixAndSetPosition()},undo:()=>{this.width=tt,this.height=it,this.x=nt,this.y=st;const[At,Vt]=this.parentDimensions;this.setDims(At*tt,Vt*it),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",rt),window.addEventListener("blur",rt)}#x(h,g){const[b,$]=this.parentDimensions,et=this.x,_e=this.y,nt=this.width,st=this.height,tt=d.MIN_SIZE/b,it=d.MIN_SIZE/$,at=Pt=>Math.round(Pt*1e4)/1e4,ct=this.#c(this.rotation),rt=(Pt,ot)=>[ct[0]*Pt+ct[2]*ot,ct[1]*Pt+ct[3]*ot],dt=this.#c(360-this.rotation),yt=(Pt,ot)=>[dt[0]*Pt+dt[2]*ot,dt[1]*Pt+dt[3]*ot];let vt,gt,At=!1,Vt=!1;switch(h){case"topLeft":At=!0,vt=(Pt,ot)=>[0,0],gt=(Pt,ot)=>[Pt,ot];break;case"topMiddle":vt=(Pt,ot)=>[Pt/2,0],gt=(Pt,ot)=>[Pt/2,ot];break;case"topRight":At=!0,vt=(Pt,ot)=>[Pt,0],gt=(Pt,ot)=>[0,ot];break;case"middleRight":Vt=!0,vt=(Pt,ot)=>[Pt,ot/2],gt=(Pt,ot)=>[0,ot/2];break;case"bottomRight":At=!0,vt=(Pt,ot)=>[Pt,ot],gt=(Pt,ot)=>[0,0];break;case"bottomMiddle":vt=(Pt,ot)=>[Pt/2,ot],gt=(Pt,ot)=>[Pt/2,0];break;case"bottomLeft":At=!0,vt=(Pt,ot)=>[0,ot],gt=(Pt,ot)=>[Pt,0];break;case"middleLeft":Vt=!0,vt=(Pt,ot)=>[0,ot/2],gt=(Pt,ot)=>[Pt,ot/2];break}const Nt=vt(nt,st),It=gt(nt,st);let Lt=rt(...It);const zt=at(et+Lt[0]),Ft=at(_e+Lt[1]);let Tt=1,ht=1,[lt,ut]=this.screenToPageTranslation(g.movementX,g.movementY);if([lt,ut]=yt(lt/b,ut/$),At){const Pt=Math.hypot(nt,st);Tt=ht=Math.max(Math.min(Math.hypot(It[0]-Nt[0]-lt,It[1]-Nt[1]-ut)/Pt,1/nt,1/st),tt/nt,it/st)}else Vt?Tt=Math.max(tt,Math.min(1,Math.abs(It[0]-Nt[0]-lt)))/nt:ht=Math.max(it,Math.min(1,Math.abs(It[1]-Nt[1]-ut)))/st;const pt=at(nt*Tt),Et=at(st*ht);Lt=rt(...gt(pt,Et));const St=zt-Lt[0],Ct=Ft-Lt[1];this.width=pt,this.height=Et,this.x=St,this.y=Ct,this.setDims(b*pt,$*Et),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const h=this.#n=document.createElement("button");h.className="altText";const g=await d._l10nPromise.get("editor_alt_text_button_label");h.textContent=g,h.setAttribute("aria-label",g),h.tabIndex="0",h.addEventListener("contextmenu",c.noContextMenu),h.addEventListener("pointerdown",b=>b.stopPropagation()),h.addEventListener("click",b=>{b.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),h.addEventListener("keydown",b=>{b.target===h&&b.key==="Enter"&&(b.preventDefault(),this._uiManager.editAltText(this))}),this.#C(),this.div.append(h),d.SMALL_EDITOR_SIZE||(d.SMALL_EDITOR_SIZE=Math.min(128,Math.round(h.getBoundingClientRect().width*1.4)))}async#C(){const h=this.#n;if(!h)return;if(!this.#e&&!this.#t){h.classList.remove("done"),this.#i?.remove();return}d._l10nPromise.get("editor_alt_text_edit_button_label").then(b=>{h.setAttribute("aria-label",b)});let g=this.#i;if(!g){this.#i=g=document.createElement("span"),g.className="tooltip",g.setAttribute("role","tooltip");const b=g.id=`alt-text-tooltip-${this.id}`;h.setAttribute("aria-describedby",b);const $=100;h.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},$)}),h.addEventListener("mouseleave",()=>{clearTimeout(this.#a),this.#a=null,this.#i?.classList.remove("show")})}h.classList.add("done"),g.innerText=this.#t?await d._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,g.parentNode||h.append(g)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:h,decorative:g}){this.#e===h&&this.#t===g||(this.#e=h,this.#t=g,this.#C())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#u);const[h,g]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*g/h).toFixed(2)}%`,this.div.style.maxHeight=`${(100*h/g).toFixed(2)}%`);const[b,$]=this.getInitialTranslation();return this.translate(b,$),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(h){const{isMac:g}=a.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&g){h.preventDefault();return}this.#s=!0,this.#V(h)}#V(h){if(!this._isDraggable)return;const g=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let b,$;g&&(b={passive:!0,capture:!0},$=_e=>{const[nt,st]=this.screenToPageTranslation(_e.movementX,_e.movementY);this._uiManager.dragSelectedEditors(nt,st)},window.addEventListener("pointermove",$,b));const et=()=>{if(window.removeEventListener("pointerup",et),window.removeEventListener("blur",et),g&&window.removeEventListener("pointermove",$,b),this.#s=!1,!this._uiManager.endDragSession()){const{isMac:_e}=a.FeatureTest.platform;h.ctrlKey&&!_e||h.shiftKey||h.metaKey&&_e?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",et),window.addEventListener("blur",et)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(h,g,b){h.changeParent(this),this.x=g,this.y=b,this.fixAndSetPosition()}getRect(h,g){const b=this.parentScale,[$,et]=this.pageDimensions,[_e,nt]=this.pageTranslation,st=h/b,tt=g/b,it=this.x*$,at=this.y*et,ct=this.width*$,rt=this.height*et;switch(this.rotation){case 0:return[it+st+_e,et-at-tt-rt+nt,it+st+ct+_e,et-at-tt+nt];case 90:return[it+tt+_e,et-at+st+nt,it+tt+rt+_e,et-at+st+ct+nt];case 180:return[it-st-ct+_e,et-at+tt+nt,it-st+_e,et-at+tt+rt+nt];case 270:return[it-tt-rt+_e,et-at-st-ct+nt,it-tt+_e,et-at-st+nt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,g){const[b,$,et,_e]=h,nt=et-b,st=_e-$;switch(this.rotation){case 0:return[b,g-_e,nt,st];case 90:return[b,g-$,st,nt];case 180:return[et,g-$,nt,st];case 270:return[et,g-_e,st,nt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#u)}serialize(h=!1,g=null){(0,a.unreachable)("An editor must be serializable")}static deserialize(h,g,b){const $=new this.prototype.constructor({parent:g,id:g.getNextId(),uiManager:b});$.rotation=h.rotation;const[et,_e]=$.pageDimensions,[nt,st,tt,it]=$.getRectInCurrentCoords(h.rect,_e);return $.x=nt/et,$.y=st/_e,$.width=tt/et,$.height=it/_e,$}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#u),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#v(),this.#r.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(h,g){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(h){this.#f=h,this.parent&&(h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(h,g){this.#o=!0;const b=h/g,{style:$}=this.div;$.aspectRatio=b,$.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=d;class _ extends d{constructor(h){super(h),this.annotationElementId=h.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=c,e.opacityToHex=d;var o=s(1),a=s(6);function c(et,_e,nt){for(const st of nt)_e.addEventListener(st,et[st].bind(et))}function d(et){return Math.round(Math.min(255,Math.max(1,255*et))).toString(16).padStart(2,"0")}class _{#e=0;getId(){return`${o.AnnotationEditorPrefix}${this.#e++}`}}class j{#e=(0,o.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const _e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',st=new OffscreenCanvas(1,3).getContext("2d"),tt=new Image;tt.src=_e;const it=tt.decode().then(()=>(st.drawImage(tt,0,0,1,1,0,0,1,3),new Uint32Array(st.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",it)}async#i(_e,nt){this.#n||=new Map;let st=this.#n.get(_e);if(st===null)return null;if(st?.bitmap)return st.refCounter+=1,st;try{st||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let tt;if(typeof nt=="string"){st.url=nt;const it=await fetch(nt);if(!it.ok)throw new Error(it.statusText);tt=await it.blob()}else tt=st.file=nt;if(tt.type==="image/svg+xml"){const it=j._isSVGFittingCanvas,at=new FileReader,ct=new Image,rt=new Promise((dt,yt)=>{ct.onload=()=>{st.bitmap=ct,st.isSvg=!0,dt()},at.onload=async()=>{const vt=st.svgUrl=at.result;ct.src=await it?`${vt}#svgView(preserveAspectRatio(none))`:vt},ct.onerror=at.onerror=yt});at.readAsDataURL(tt),await rt}else st.bitmap=await createImageBitmap(tt);st.refCounter=1}catch(tt){console.error(tt),st=null}return this.#n.set(_e,st),st&&this.#n.set(st.id,st),st}async getFromFile(_e){const{lastModified:nt,name:st,size:tt,type:it}=_e;return this.#i(`${nt}_${st}_${tt}_${it}`,_e)}async getFromUrl(_e){return this.#i(_e,_e)}async getFromId(_e){this.#n||=new Map;const nt=this.#n.get(_e);return nt?nt.bitmap?(nt.refCounter+=1,nt):nt.file?this.getFromFile(nt.file):this.getFromUrl(nt.url):null}getSvgUrl(_e){const nt=this.#n.get(_e);return nt?.isSvg?nt.svgUrl:null}deleteId(_e){this.#n||=new Map;const nt=this.#n.get(_e);nt&&(nt.refCounter-=1,nt.refCounter===0&&(nt.bitmap=null))}isValidId(_e){return _e.startsWith(`image_${this.#e}_`)}}class h{#e=[];#t=!1;#n;#i=-1;constructor(_e=128){this.#n=_e}add({cmd:_e,undo:nt,mustExec:st,type:tt=NaN,overwriteIfSameType:it=!1,keepUndo:at=!1}){if(st&&_e(),this.#t)return;const ct={cmd:_e,undo:nt,type:tt};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(ct);return}if(it&&this.#e[this.#i].type===tt){at&&(ct.undo=this.#e[this.#i].undo),this.#e[this.#i]=ct;return}const rt=this.#i+1;rt===this.#n?this.#e.splice(0,1):(this.#i=rt,rt<this.#e.length&&this.#e.splice(rt)),this.#e.push(ct)}undo(){this.#i!==-1&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=h;class g{constructor(_e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:nt}=o.FeatureTest.platform;for(const[st,tt,it={}]of _e)for(const at of st){const ct=at.startsWith("mac+");nt&&ct?(this.callbacks.set(at.slice(4),{callback:tt,options:it}),this.allKeys.add(at.split("+").at(-1))):!nt&&!ct&&(this.callbacks.set(at,{callback:tt,options:it}),this.allKeys.add(at.split("+").at(-1)))}}#e(_e){_e.altKey&&this.buffer.push("alt"),_e.ctrlKey&&this.buffer.push("ctrl"),_e.metaKey&&this.buffer.push("meta"),_e.shiftKey&&this.buffer.push("shift"),this.buffer.push(_e.key);const nt=this.buffer.join("+");return this.buffer.length=0,nt}exec(_e,nt){if(!this.allKeys.has(nt.key))return;const st=this.callbacks.get(this.#e(nt));if(!st)return;const{callback:tt,options:{bubbles:it=!1,args:at=[],checker:ct=null}}=st;ct&&!ct(_e,nt)||(tt.bind(_e,...at)(),it||(nt.stopPropagation(),nt.preventDefault()))}}e.KeyboardManager=g;class b{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const _e=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(_e),(0,o.shadow)(this,"_colors",_e)}convert(_e){const nt=(0,a.getRGB)(_e);if(!window.matchMedia("(forced-colors: active)").matches)return nt;for(const[st,tt]of this._colors)if(tt.every((it,at)=>it===nt[at]))return b._colorsMapping.get(st);return nt}getHexCode(_e){const nt=this._colors.get(_e);return nt?o.Util.makeHexColor(...nt):_e}}e.ColorManager=b;class ${#e=null;#t=new Map;#n=new Map;#i=null;#a=null;#o=new h;#r=0;#l=new Set;#u=null;#s=null;#f=new Set;#d=null;#h=new _;#p=!1;#y=!1;#m=null;#g=o.AnnotationEditorType.NONE;#c=new Set;#v=null;#S=this.blur.bind(this);#x=this.focus.bind(this);#C=this.copy.bind(this);#V=this.cut.bind(this);#M=this.paste.bind(this);#N=this.keydown.bind(this);#F=this.onEditingAction.bind(this);#P=this.onPageChanging.bind(this);#k=this.onScaleChanging.bind(this);#B=this.onRotationChanging.bind(this);#R={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#_=[0,0];#w=null;#A=null;#D=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const _e=$.prototype,nt=it=>{const{activeElement:at}=document;return at&&it.#A.contains(at)&&it.hasSomethingToControl()},st=this.TRANSLATE_SMALL,tt=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],_e.selectAll],[["ctrl+z","mac+meta+z"],_e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],_e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],_e.delete],[["Escape","mac+Escape"],_e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],_e.translateSelectedEditors,{args:[-st,0],checker:nt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],_e.translateSelectedEditors,{args:[-tt,0],checker:nt}],[["ArrowRight","mac+ArrowRight"],_e.translateSelectedEditors,{args:[st,0],checker:nt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],_e.translateSelectedEditors,{args:[tt,0],checker:nt}],[["ArrowUp","mac+ArrowUp"],_e.translateSelectedEditors,{args:[0,-st],checker:nt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],_e.translateSelectedEditors,{args:[0,-tt],checker:nt}],[["ArrowDown","mac+ArrowDown"],_e.translateSelectedEditors,{args:[0,st],checker:nt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],_e.translateSelectedEditors,{args:[0,tt],checker:nt}]]))}constructor(_e,nt,st,tt,it,at){this.#A=_e,this.#D=nt,this.#i=st,this._eventBus=tt,this._eventBus._on("editingaction",this.#F),this._eventBus._on("pagechanging",this.#P),this._eventBus._on("scalechanging",this.#k),this._eventBus._on("rotationchanging",this.#B),this.#a=it.annotationStorage,this.#d=it.filterFactory,this.#v=at,this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#b(),this.#U(),this._eventBus._off("editingaction",this.#F),this._eventBus._off("pagechanging",this.#P),this._eventBus._off("scalechanging",this.#k),this._eventBus._off("rotationchanging",this.#B);for(const _e of this.#n.values())_e.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#c.clear(),this.#o.destroy(),this.#i.destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#v?this.#d.addHCMFilter(this.#v.foreground,this.#v.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#A).direction)}editAltText(_e){this.#i?.editAltText(this,_e)}onPageChanging({pageNumber:_e}){this.#r=_e-1}focusMainContainer(){this.#A.focus()}findParent(_e,nt){for(const st of this.#n.values()){const{x:tt,y:it,width:at,height:ct}=st.div.getBoundingClientRect();if(_e>=tt&&_e<=tt+at&&nt>=it&&nt<=it+ct)return st}return null}disableUserSelect(_e=!1){this.#D.classList.toggle("noUserSelect",_e)}addShouldRescale(_e){this.#f.add(_e)}removeShouldRescale(_e){this.#f.delete(_e)}onScaleChanging({scale:_e}){this.commitOrRemove(),this.viewParameters.realScale=_e*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const nt of this.#f)nt.onScaleChanging()}onRotationChanging({pagesRotation:_e}){this.commitOrRemove(),this.viewParameters.rotation=_e}addToAnnotationStorage(_e){!_e.isEmpty()&&this.#a&&!this.#a.has(_e.id)&&this.#a.setValue(_e.id,_e)}#L(){window.addEventListener("focus",this.#x),window.addEventListener("blur",this.#S)}#U(){window.removeEventListener("focus",this.#x),window.removeEventListener("blur",this.#S)}blur(){if(!this.hasSelection)return;const{activeElement:_e}=document;for(const nt of this.#c)if(nt.div.contains(_e)){this.#m=[nt,_e],nt._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[_e,nt]=this.#m;this.#m=null,nt.addEventListener("focusin",()=>{_e._focusEventsAllowed=!0},{once:!0}),nt.focus()}#O(){window.addEventListener("keydown",this.#N,{capture:!0})}#b(){window.removeEventListener("keydown",this.#N,{capture:!0})}#I(){document.addEventListener("copy",this.#C),document.addEventListener("cut",this.#V),document.addEventListener("paste",this.#M)}#T(){document.removeEventListener("copy",this.#C),document.removeEventListener("cut",this.#V),document.removeEventListener("paste",this.#M)}addEditListeners(){this.#O(),this.#I()}removeEditListeners(){this.#b(),this.#T()}copy(_e){if(_e.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const nt=[];for(const st of this.#c){const tt=st.serialize(!0);tt&&nt.push(tt)}nt.length!==0&&_e.clipboardData.setData("application/pdfjs",JSON.stringify(nt))}cut(_e){this.copy(_e),this.delete()}paste(_e){_e.preventDefault();const{clipboardData:nt}=_e;for(const it of nt.items)for(const at of this.#s)if(at.isHandlingMimeForPasting(it.type)){at.paste(it,this.currentLayer);return}let st=nt.getData("application/pdfjs");if(!st)return;try{st=JSON.parse(st)}catch(it){(0,o.warn)(`paste: "${it.message}".`);return}if(!Array.isArray(st))return;this.unselectAll();const tt=this.currentLayer;try{const it=[];for(const rt of st){const dt=tt.deserialize(rt);if(!dt)return;it.push(dt)}const at=()=>{for(const rt of it)this.#z(rt);this.#j(it)},ct=()=>{for(const rt of it)rt.remove()};this.addCommands({cmd:at,undo:ct,mustExec:!0})}catch(it){(0,o.warn)(`paste: "${it.message}".`)}}keydown(_e){this.getActive()?.shouldGetKeyboardEvents()||$._keyboardManager.exec(this,_e)}onEditingAction(_e){["undo","redo","delete","selectAll"].includes(_e.name)&&this[_e.name]()}#E(_e){Object.entries(_e).some(([st,tt])=>this.#R[st]!==tt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#R,_e)})}#G(_e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:_e})}setEditingState(_e){_e?(this.#L(),this.#O(),this.#I(),this.#E({isEditing:this.#g!==o.AnnotationEditorType.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#U(),this.#b(),this.#T(),this.#E({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(_e){if(!this.#s){this.#s=_e;for(const nt of this.#s)this.#G(nt.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#r)}getLayer(_e){return this.#n.get(_e)}get currentPageIndex(){return this.#r}addLayer(_e){this.#n.set(_e.pageIndex,_e),this.#p?_e.enable():_e.disable()}removeLayer(_e){this.#n.delete(_e.pageIndex)}updateMode(_e,nt=null){if(this.#g!==_e){if(this.#g=_e,_e===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#$();return}this.setEditingState(!0),this.#q(),this.unselectAll();for(const st of this.#n.values())st.updateMode(_e);if(nt){for(const st of this.#t.values())if(st.annotationElementId===nt){this.setSelected(st),st.enterInEditMode();break}}}}updateToolbar(_e){_e!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:_e})}updateParams(_e,nt){if(this.#s){if(_e===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(_e);return}for(const st of this.#c)st.updateParams(_e,nt);for(const st of this.#s)st.updateDefaultParams(_e,nt)}}enableWaiting(_e=!1){if(this.#y!==_e){this.#y=_e;for(const nt of this.#n.values())_e?nt.disableClick():nt.enableClick(),nt.div.classList.toggle("waiting",_e)}}#q(){if(!this.#p){this.#p=!0;for(const _e of this.#n.values())_e.enable()}}#$(){if(this.unselectAll(),this.#p){this.#p=!1;for(const _e of this.#n.values())_e.disable()}}getEditors(_e){const nt=[];for(const st of this.#t.values())st.pageIndex===_e&&nt.push(st);return nt}getEditor(_e){return this.#t.get(_e)}addEditor(_e){this.#t.set(_e.id,_e)}removeEditor(_e){this.#t.delete(_e.id),this.unselect(_e),(!_e.annotationElementId||!this.#l.has(_e.annotationElementId))&&this.#a?.remove(_e.id)}addDeletedAnnotationElement(_e){this.#l.add(_e.annotationElementId),_e.deleted=!0}isDeletedAnnotationElement(_e){return this.#l.has(_e)}removeDeletedAnnotationElement(_e){this.#l.delete(_e.annotationElementId),_e.deleted=!1}#z(_e){const nt=this.#n.get(_e.pageIndex);nt?nt.addOrRebuild(_e):this.addEditor(_e)}setActiveEditor(_e){this.#e!==_e&&(this.#e=_e,_e&&this.#G(_e.propertiesToUpdate))}toggleSelected(_e){if(this.#c.has(_e)){this.#c.delete(_e),_e.unselect(),this.#E({hasSelectedEditor:this.hasSelection});return}this.#c.add(_e),_e.select(),this.#G(_e.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}setSelected(_e){for(const nt of this.#c)nt!==_e&&nt.unselect();this.#c.clear(),this.#c.add(_e),_e.select(),this.#G(_e.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}isSelected(_e){return this.#c.has(_e)}unselect(_e){_e.unselect(),this.#c.delete(_e),this.#E({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#c.size!==0}undo(){this.#o.undo(),this.#E({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()})}redo(){this.#o.redo(),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(_e){this.#o.add(_e),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}#H(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const _e of this.#t.values())return _e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const _e=[...this.#c],nt=()=>{for(const tt of _e)tt.remove()},st=()=>{for(const tt of _e)this.#z(tt)};this.addCommands({cmd:nt,undo:st,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#j(_e){this.#c.clear();for(const nt of _e)nt.isEmpty()||(this.#c.add(nt),nt.select());this.#E({hasSelectedEditor:!0})}selectAll(){for(const _e of this.#c)_e.commit();this.#j(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const _e of this.#c)_e.unselect();this.#c.clear(),this.#E({hasSelectedEditor:!1})}}translateSelectedEditors(_e,nt,st=!1){if(st||this.commitOrRemove(),!this.hasSelection)return;this.#_[0]+=_e,this.#_[1]+=nt;const[tt,it]=this.#_,at=[...this.#c],ct=1e3;this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.#w=null,this.#_[0]=this.#_[1]=0,this.addCommands({cmd:()=>{for(const rt of at)this.#t.has(rt.id)&&rt.translateInPage(tt,it)},undo:()=>{for(const rt of at)this.#t.has(rt.id)&&rt.translateInPage(-tt,-it)},mustExec:!1})},ct);for(const rt of at)rt.translateInPage(_e,nt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#u=new Map;for(const _e of this.#c)this.#u.set(_e,{savedX:_e.x,savedY:_e.y,savedPageIndex:_e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#u)return!1;this.disableUserSelect(!1);const _e=this.#u;this.#u=null;let nt=!1;for(const[{x:tt,y:it,pageIndex:at},ct]of _e)ct.newX=tt,ct.newY=it,ct.newPageIndex=at,nt||=tt!==ct.savedX||it!==ct.savedY||at!==ct.savedPageIndex;if(!nt)return!1;const st=(tt,it,at,ct)=>{if(this.#t.has(tt.id)){const rt=this.#n.get(ct);rt?tt._setParentAndPosition(rt,it,at):(tt.pageIndex=ct,tt.x=it,tt.y=at)}};return this.addCommands({cmd:()=>{for(const[tt,{newX:it,newY:at,newPageIndex:ct}]of _e)st(tt,it,at,ct)},undo:()=>{for(const[tt,{savedX:it,savedY:at,savedPageIndex:ct}]of _e)st(tt,it,at,ct)},mustExec:!0}),!0}dragSelectedEditors(_e,nt){if(this.#u)for(const st of this.#u.keys())st.drag(_e,nt)}rebuild(_e){if(_e.parent===null){const nt=this.getLayer(_e.pageIndex);nt?(nt.changeParent(_e),nt.addOrRebuild(_e)):(this.addEditor(_e),this.addToAnnotationStorage(_e),_e.rebuild())}else _e.parent.addOrRebuild(_e)}isActive(_e){return this.#e===_e}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,o.shadow)(this,"imageManager",new j)}}e.AnnotationEditorUIManager=$},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=yt,e.getColorValues=Nt,e.getCurrentTransform=It,e.getCurrentTransformInverse=Lt,e.getFilenameFromUrl=tt,e.getPdfFilenameFromUrl=it,e.getRGB=Vt,e.getXfaPageViewport=At,e.isDataScheme=nt,e.isPdfFile=st,e.isValidFetchUrl=ct,e.loadScript=dt,e.noContextMenu=rt,e.setLayerDimensions=zt;var o=s(7),a=s(1);const c="http://www.w3.org/2000/svg";class d{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=d;class _ extends o.BaseFilterFactory{#e;#t;#n;#i;#a;#o;#r;#l;#u;#s;#f=0;constructor({docId:Tt,ownerDocument:ht=globalThis.document}={}){super(),this.#n=Tt,this.#i=ht}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){const Tt=this.#i.createElement("div"),{style:ht}=Tt;ht.visibility="hidden",ht.contain="strict",ht.width=ht.height=0,ht.position="absolute",ht.top=ht.left=0,ht.zIndex=-1;const lt=this.#i.createElementNS(c,"svg");lt.setAttribute("width",0),lt.setAttribute("height",0),this.#t=this.#i.createElementNS(c,"defs"),Tt.append(lt),lt.append(this.#t),this.#i.body.append(Tt)}return this.#t}addFilter(Tt){if(!Tt)return"none";let ht=this.#d.get(Tt);if(ht)return ht;let lt,ut,pt,Et;if(Tt.length===1){const ot=Tt[0],ft=new Array(256);for(let mt=0;mt<256;mt++)ft[mt]=ot[mt]/255;Et=lt=ut=pt=ft.join(",")}else{const[ot,ft,mt]=Tt,_t=new Array(256),xt=new Array(256),wt=new Array(256);for(let Bt=0;Bt<256;Bt++)_t[Bt]=ot[Bt]/255,xt[Bt]=ft[Bt]/255,wt[Bt]=mt[Bt]/255;lt=_t.join(","),ut=xt.join(","),pt=wt.join(","),Et=`${lt}${ut}${pt}`}if(ht=this.#d.get(Et),ht)return this.#d.set(Tt,ht),ht;const St=`g_${this.#n}_transfer_map_${this.#f++}`,Ct=`url(#${St})`;this.#d.set(Tt,Ct),this.#d.set(Et,Ct);const Pt=this.#y(St);return this.#g(lt,ut,pt,Pt),Ct}addHCMFilter(Tt,ht){const lt=`${Tt}-${ht}`;if(this.#o===lt)return this.#r;if(this.#o=lt,this.#r="none",this.#a?.remove(),!Tt||!ht)return this.#r;const ut=this.#c(Tt);Tt=a.Util.makeHexColor(...ut);const pt=this.#c(ht);if(ht=a.Util.makeHexColor(...pt),this.#h.style.color="",Tt==="#000000"&&ht==="#ffffff"||Tt===ht)return this.#r;const Et=new Array(256);for(let ft=0;ft<=255;ft++){const mt=ft/255;Et[ft]=mt<=.03928?mt/12.92:((mt+.055)/1.055)**2.4}const St=Et.join(","),Ct=`g_${this.#n}_hcm_filter`,Pt=this.#l=this.#y(Ct);this.#g(St,St,St,Pt),this.#p(Pt);const ot=(ft,mt)=>{const _t=ut[ft]/255,xt=pt[ft]/255,wt=new Array(mt+1);for(let Bt=0;Bt<=mt;Bt++)wt[Bt]=_t+Bt/mt*(xt-_t);return wt.join(",")};return this.#g(ot(0,5),ot(1,5),ot(2,5),Pt),this.#r=`url(#${Ct})`,this.#r}addHighlightHCMFilter(Tt,ht,lt,ut){const pt=`${Tt}-${ht}-${lt}-${ut}`;if(this.#u===pt)return this.#s;if(this.#u=pt,this.#s="none",this.#l?.remove(),!Tt||!ht)return this.#s;const[Et,St]=[Tt,ht].map(this.#c.bind(this));let Ct=Math.round(.2126*Et[0]+.7152*Et[1]+.0722*Et[2]),Pt=Math.round(.2126*St[0]+.7152*St[1]+.0722*St[2]),[ot,ft]=[lt,ut].map(this.#c.bind(this));Pt<Ct&&([Ct,Pt,ot,ft]=[Pt,Ct,ft,ot]),this.#h.style.color="";const mt=(wt,Bt,kt)=>{const jt=new Array(256),Mt=(Pt-Ct)/kt,Dt=wt/255,Ut=(Bt-wt)/(255*kt);let Ot=0;for(let Gt=0;Gt<=kt;Gt++){const qt=Math.round(Ct+Gt*Mt),Wt=Dt+Gt*Ut;for(let Jt=Ot;Jt<=qt;Jt++)jt[Jt]=Wt;Ot=qt+1}for(let Gt=Ot;Gt<256;Gt++)jt[Gt]=jt[Ot-1];return jt.join(",")},_t=`g_${this.#n}_hcm_highlight_filter`,xt=this.#l=this.#y(_t);return this.#p(xt),this.#g(mt(ot[0],ft[0],5),mt(ot[1],ft[1],5),mt(ot[2],ft[2],5),xt),this.#s=`url(#${_t})`,this.#s}destroy(Tt=!1){Tt&&(this.#r||this.#s)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(Tt){const ht=this.#i.createElementNS(c,"feColorMatrix");ht.setAttribute("type","matrix"),ht.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Tt.append(ht)}#y(Tt){const ht=this.#i.createElementNS(c,"filter");return ht.setAttribute("color-interpolation-filters","sRGB"),ht.setAttribute("id",Tt),this.#h.append(ht),ht}#m(Tt,ht,lt){const ut=this.#i.createElementNS(c,ht);ut.setAttribute("type","discrete"),ut.setAttribute("tableValues",lt),Tt.append(ut)}#g(Tt,ht,lt,ut){const pt=this.#i.createElementNS(c,"feComponentTransfer");ut.append(pt),this.#m(pt,"feFuncR",Tt),this.#m(pt,"feFuncG",ht),this.#m(pt,"feFuncB",lt)}#c(Tt){return this.#h.style.color=Tt,Vt(getComputedStyle(this.#h).getPropertyValue("color"))}}e.DOMFilterFactory=_;class j extends o.BaseCanvasFactory{constructor({ownerDocument:Tt=globalThis.document}={}){super(),this._document=Tt}_createCanvas(Tt,ht){const lt=this._document.createElement("canvas");return lt.width=Tt,lt.height=ht,lt}}e.DOMCanvasFactory=j;async function h(Ft,Tt=!1){if(ct(Ft,document.baseURI)){const ht=await fetch(Ft);if(!ht.ok)throw new Error(ht.statusText);return Tt?new Uint8Array(await ht.arrayBuffer()):(0,a.stringToBytes)(await ht.text())}return new Promise((ht,lt)=>{const ut=new XMLHttpRequest;ut.open("GET",Ft,!0),Tt&&(ut.responseType="arraybuffer"),ut.onreadystatechange=()=>{if(ut.readyState===XMLHttpRequest.DONE){if(ut.status===200||ut.status===0){let pt;if(Tt&&ut.response?pt=new Uint8Array(ut.response):!Tt&&ut.responseText&&(pt=(0,a.stringToBytes)(ut.responseText)),pt){ht(pt);return}}lt(new Error(ut.statusText))}},ut.send(null)})}class g extends o.BaseCMapReaderFactory{_fetchData(Tt,ht){return h(Tt,this.isCompressed).then(lt=>({cMapData:lt,compressionType:ht}))}}e.DOMCMapReaderFactory=g;class b extends o.BaseStandardFontDataFactory{_fetchData(Tt){return h(Tt,!0)}}e.DOMStandardFontDataFactory=b;class $ extends o.BaseSVGFactory{_createSVG(Tt){return document.createElementNS(c,Tt)}}e.DOMSVGFactory=$;class et{constructor({viewBox:Tt,scale:ht,rotation:lt,offsetX:ut=0,offsetY:pt=0,dontFlip:Et=!1}){this.viewBox=Tt,this.scale=ht,this.rotation=lt,this.offsetX=ut,this.offsetY=pt;const St=(Tt[2]+Tt[0])/2,Ct=(Tt[3]+Tt[1])/2;let Pt,ot,ft,mt;switch(lt%=360,lt<0&&(lt+=360),lt){case 180:Pt=-1,ot=0,ft=0,mt=1;break;case 90:Pt=0,ot=1,ft=1,mt=0;break;case 270:Pt=0,ot=-1,ft=-1,mt=0;break;case 0:Pt=1,ot=0,ft=0,mt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Et&&(ft=-ft,mt=-mt);let _t,xt,wt,Bt;Pt===0?(_t=Math.abs(Ct-Tt[1])*ht+ut,xt=Math.abs(St-Tt[0])*ht+pt,wt=(Tt[3]-Tt[1])*ht,Bt=(Tt[2]-Tt[0])*ht):(_t=Math.abs(St-Tt[0])*ht+ut,xt=Math.abs(Ct-Tt[1])*ht+pt,wt=(Tt[2]-Tt[0])*ht,Bt=(Tt[3]-Tt[1])*ht),this.transform=[Pt*ht,ot*ht,ft*ht,mt*ht,_t-Pt*ht*St-ft*ht*Ct,xt-ot*ht*St-mt*ht*Ct],this.width=wt,this.height=Bt}get rawDims(){const{viewBox:Tt}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:Tt[2]-Tt[0],pageHeight:Tt[3]-Tt[1],pageX:Tt[0],pageY:Tt[1]})}clone({scale:Tt=this.scale,rotation:ht=this.rotation,offsetX:lt=this.offsetX,offsetY:ut=this.offsetY,dontFlip:pt=!1}={}){return new et({viewBox:this.viewBox.slice(),scale:Tt,rotation:ht,offsetX:lt,offsetY:ut,dontFlip:pt})}convertToViewportPoint(Tt,ht){return a.Util.applyTransform([Tt,ht],this.transform)}convertToViewportRectangle(Tt){const ht=a.Util.applyTransform([Tt[0],Tt[1]],this.transform),lt=a.Util.applyTransform([Tt[2],Tt[3]],this.transform);return[ht[0],ht[1],lt[0],lt[1]]}convertToPdfPoint(Tt,ht){return a.Util.applyInverseTransform([Tt,ht],this.transform)}}e.PageViewport=et;class _e extends a.BaseException{constructor(Tt,ht=0){super(Tt,"RenderingCancelledException"),this.extraDelay=ht}}e.RenderingCancelledException=_e;function nt(Ft){const Tt=Ft.length;let ht=0;for(;ht<Tt&&Ft[ht].trim()==="";)ht++;return Ft.substring(ht,ht+5).toLowerCase()==="data:"}function st(Ft){return typeof Ft=="string"&&/\.pdf$/i.test(Ft)}function tt(Ft,Tt=!1){return Tt||([Ft]=Ft.split(/[#?]/,1)),Ft.substring(Ft.lastIndexOf("/")+1)}function it(Ft,Tt="document.pdf"){if(typeof Ft!="string")return Tt;if(nt(Ft))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Tt;const ht=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,lt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ut=ht.exec(Ft);let pt=lt.exec(ut[1])||lt.exec(ut[2])||lt.exec(ut[3]);if(pt&&(pt=pt[0],pt.includes("%")))try{pt=lt.exec(decodeURIComponent(pt))[0]}catch{}return pt||Tt}class at{started=Object.create(null);times=[];time(Tt){Tt in this.started&&(0,a.warn)(`Timer is already running for ${Tt}`),this.started[Tt]=Date.now()}timeEnd(Tt){Tt in this.started||(0,a.warn)(`Timer has not been started for ${Tt}`),this.times.push({name:Tt,start:this.started[Tt],end:Date.now()}),delete this.started[Tt]}toString(){const Tt=[];let ht=0;for(const{name:lt}of this.times)ht=Math.max(lt.length,ht);for(const{name:lt,start:ut,end:pt}of this.times)Tt.push(`${lt.padEnd(ht)} ${pt-ut}ms
`);return Tt.join("")}}e.StatTimer=at;function ct(Ft,Tt){try{const{protocol:ht}=Tt?new URL(Ft,Tt):new URL(Ft);return ht==="http:"||ht==="https:"}catch{return!1}}function rt(Ft){Ft.preventDefault()}function dt(Ft,Tt=!1){return new Promise((ht,lt)=>{const ut=document.createElement("script");ut.src=Ft,ut.onload=function(pt){Tt&&ut.remove(),ht(pt)},ut.onerror=function(){lt(new Error(`Cannot load script at: ${ut.src}`))},(document.head||document.documentElement).append(ut)})}function yt(Ft){console.log("Deprecated API usage: "+Ft)}let vt;class gt{static toDateObject(Tt){if(!Tt||typeof Tt!="string")return null;vt||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const ht=vt.exec(Tt);if(!ht)return null;const lt=parseInt(ht[1],10);let ut=parseInt(ht[2],10);ut=ut>=1&&ut<=12?ut-1:0;let pt=parseInt(ht[3],10);pt=pt>=1&&pt<=31?pt:1;let Et=parseInt(ht[4],10);Et=Et>=0&&Et<=23?Et:0;let St=parseInt(ht[5],10);St=St>=0&&St<=59?St:0;let Ct=parseInt(ht[6],10);Ct=Ct>=0&&Ct<=59?Ct:0;const Pt=ht[7]||"Z";let ot=parseInt(ht[8],10);ot=ot>=0&&ot<=23?ot:0;let ft=parseInt(ht[9],10)||0;return ft=ft>=0&&ft<=59?ft:0,Pt==="-"?(Et+=ot,St+=ft):Pt==="+"&&(Et-=ot,St-=ft),new Date(Date.UTC(lt,ut,pt,Et,St,Ct))}}e.PDFDateString=gt;function At(Ft,{scale:Tt=1,rotation:ht=0}){const{width:lt,height:ut}=Ft.attributes.style,pt=[0,0,parseInt(lt),parseInt(ut)];return new et({viewBox:pt,scale:Tt,rotation:ht})}function Vt(Ft){if(Ft.startsWith("#")){const Tt=parseInt(Ft.slice(1),16);return[(Tt&16711680)>>16,(Tt&65280)>>8,Tt&255]}return Ft.startsWith("rgb(")?Ft.slice(4,-1).split(",").map(Tt=>parseInt(Tt)):Ft.startsWith("rgba(")?Ft.slice(5,-1).split(",").map(Tt=>parseInt(Tt)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Ft}"`),[0,0,0])}function Nt(Ft){const Tt=document.createElement("span");Tt.style.visibility="hidden",document.body.append(Tt);for(const ht of Ft.keys()){Tt.style.color=ht;const lt=window.getComputedStyle(Tt).color;Ft.set(ht,Vt(lt))}Tt.remove()}function It(Ft){const{a:Tt,b:ht,c:lt,d:ut,e:pt,f:Et}=Ft.getTransform();return[Tt,ht,lt,ut,pt,Et]}function Lt(Ft){const{a:Tt,b:ht,c:lt,d:ut,e:pt,f:Et}=Ft.getTransform().invertSelf();return[Tt,ht,lt,ut,pt,Et]}function zt(Ft,Tt,ht=!1,lt=!0){if(Tt instanceof et){const{pageWidth:ut,pageHeight:pt}=Tt.rawDims,{style:Et}=Ft,St=a.FeatureTest.isCSSRoundSupported,Ct=`var(--scale-factor) * ${ut}px`,Pt=`var(--scale-factor) * ${pt}px`,ot=St?`round(${Ct}, 1px)`:`calc(${Ct})`,ft=St?`round(${Pt}, 1px)`:`calc(${Pt})`;!ht||Tt.rotation%180===0?(Et.width=ot,Et.height=ft):(Et.width=ft,Et.height=ot)}lt&&Ft.setAttribute("data-main-rotation",Tt.rotation)}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var o=s(1);class a{constructor(){this.constructor===a&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(g){return"none"}addHCMFilter(g,b){return"none"}addHighlightHCMFilter(g,b,$,et){return"none"}destroy(g=!1){}}e.BaseFilterFactory=a;class c{constructor(){this.constructor===c&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,b){if(g<=0||b<=0)throw new Error("Invalid canvas size");const $=this._createCanvas(g,b);return{canvas:$,context:$.getContext("2d")}}reset(g,b,$){if(!g.canvas)throw new Error("Canvas is not specified");if(b<=0||$<=0)throw new Error("Invalid canvas size");g.canvas.width=b,g.canvas.height=$}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,b){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=c;class d{constructor({baseUrl:g=null,isCompressed:b=!0}){this.constructor===d&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=b}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const b=this.baseUrl+g+(this.isCompressed?".bcmap":""),$=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(b,$).catch(et=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${b}`)})}_fetchData(g,b){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=d;class _{constructor({baseUrl:g=null}){this.constructor===_&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const b=`${this.baseUrl}${g}`;return this._fetchData(b).catch($=>{throw new Error(`Unable to load font data at: ${b}`)})}_fetchData(g){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=_;class j{constructor(){this.constructor===j&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,b,$=!1){if(g<=0||b<=0)throw new Error("Invalid SVG dimensions");const et=this._createSVG("svg:svg");return et.setAttribute("version","1.1"),$||(et.setAttribute("width",`${g}px`),et.setAttribute("height",`${b}px`)),et.setAttribute("preserveAspectRatio","none"),et.setAttribute("viewBox",`0 0 ${g} ${b}`),et}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,o.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var o=s(1);const a=3285377520,c=4294901760,d=65535;class _{constructor(h){this.h1=h?h&4294967295:a,this.h2=h?h&4294967295:a}update(h){let g,b;if(typeof h=="string"){g=new Uint8Array(h.length*2),b=0;for(let yt=0,vt=h.length;yt<vt;yt++){const gt=h.charCodeAt(yt);gt<=255?g[b++]=gt:(g[b++]=gt>>>8,g[b++]=gt&255)}}else if((0,o.isArrayBuffer)(h))g=h.slice(),b=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const $=b>>2,et=b-$*4,_e=new Uint32Array(g.buffer,0,$);let nt=0,st=0,tt=this.h1,it=this.h2;const at=3432918353,ct=461845907,rt=at&d,dt=ct&d;for(let yt=0;yt<$;yt++)yt&1?(nt=_e[yt],nt=nt*at&c|nt*rt&d,nt=nt<<15|nt>>>17,nt=nt*ct&c|nt*dt&d,tt^=nt,tt=tt<<13|tt>>>19,tt=tt*5+3864292196):(st=_e[yt],st=st*at&c|st*rt&d,st=st<<15|st>>>17,st=st*ct&c|st*dt&d,it^=st,it=it<<13|it>>>19,it=it*5+3864292196);switch(nt=0,et){case 3:nt^=g[$*4+2]<<16;case 2:nt^=g[$*4+1]<<8;case 1:nt^=g[$*4],nt=nt*at&c|nt*rt&d,nt=nt<<15|nt>>>17,nt=nt*ct&c|nt*dt&d,$&1?tt^=nt:it^=nt}this.h1=tt,this.h2=it}hexdigest(){let h=this.h1,g=this.h2;return h^=g>>>1,h=h*3981806797&c|h*36045&d,g=g*4283543511&c|((g<<16|h>>>16)*2950163797&c)>>>16,h^=g>>>1,h=h*444984403&c|h*60499&d,g=g*3301882366&c|((g<<16|h>>>16)*3120437893&c)>>>16,h^=g>>>1,(h>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var o=s(1);class a{#e=new Set;constructor({ownerDocument:_=globalThis.document,styleElement:j=null}){this._document=_,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(_){this.nativeFontFaces.add(_),this._document.fonts.add(_)}removeNativeFontFace(_){this.nativeFontFaces.delete(_),this._document.fonts.delete(_)}insertRule(_){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const j=this.styleElement.sheet;j.insertRule(_,j.cssRules.length)}clear(){for(const _ of this.nativeFontFaces)this._document.fonts.delete(_);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(_){if(!(!_||this.#e.has(_.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:j,src:h,style:g}=_,b=new FontFace(j,h,g);this.addNativeFontFace(b);try{await b.load(),this.#e.add(j)}catch{(0,o.warn)(`Cannot load system font: ${_.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(b)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(_){if(_.attached||_.missingFile&&!_.systemFontInfo)return;if(_.attached=!0,_.systemFontInfo){await this.loadSystemFont(_.systemFontInfo);return}if(this.isFontLoadingAPISupported){const h=_.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(g){throw(0,o.warn)(`Failed to load font '${h.family}': '${g}'.`),_.disableFontFace=!0,g}}return}const j=_.createFontFaceRule();if(j){if(this.insertRule(j),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const g=this._queueLoadingCallback(h);this._prepareFontLoadEvent(_,g)})}}get isFontLoadingAPISupported(){const _=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",_)}get isSyncFontLoadingSupported(){let _=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(_=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",_)}_queueLoadingCallback(_){function j(){for((0,o.assert)(!g.done,"completeRequest() cannot be called twice."),g.done=!0;h.length>0&&h[0].done;){const b=h.shift();setTimeout(b.callback,0)}}const{loadingRequests:h}=this,g={done:!1,complete:j,callback:_};return h.push(g),g}get _loadTestFont(){const _=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",_)}_prepareFontLoadEvent(_,j){function h(At,Vt){return At.charCodeAt(Vt)<<24|At.charCodeAt(Vt+1)<<16|At.charCodeAt(Vt+2)<<8|At.charCodeAt(Vt+3)&255}function g(At,Vt,Nt,It){const Lt=At.substring(0,Vt),zt=At.substring(Vt+Nt);return Lt+It+zt}let b,$;const et=this._document.createElement("canvas");et.width=1,et.height=1;const _e=et.getContext("2d");let nt=0;function st(At,Vt){if(++nt>30){(0,o.warn)("Load test font never loaded."),Vt();return}if(_e.font="30px "+At,_e.fillText(".",0,20),_e.getImageData(0,0,1,1).data[3]>0){Vt();return}setTimeout(st.bind(null,At,Vt))}const tt=`lt${Date.now()}${this.loadTestFontId++}`;let it=this._loadTestFont;it=g(it,976,tt.length,tt);const ct=16,rt=1482184792;let dt=h(it,ct);for(b=0,$=tt.length-3;b<$;b+=4)dt=dt-rt+h(tt,b)|0;b<tt.length&&(dt=dt-rt+h(tt+"XXX",b)|0),it=g(it,ct,4,(0,o.string32)(dt));const yt=`url(data:font/opentype;base64,${btoa(it)});`,vt=`@font-face {font-family:"${tt}";src:${yt}}`;this.insertRule(vt);const gt=this._document.createElement("div");gt.style.visibility="hidden",gt.style.width=gt.style.height="10px",gt.style.position="absolute",gt.style.top=gt.style.left="0px";for(const At of[_.loadedName,tt]){const Vt=this._document.createElement("span");Vt.textContent="Hi",Vt.style.fontFamily=At,gt.append(Vt)}this._document.body.append(gt),st(tt,()=>{gt.remove(),j.complete()})}}e.FontLoader=a;class c{constructor(_,{isEvalSupported:j=!0,disableFontFace:h=!1,ignoreErrors:g=!1,inspectFont:b=null}){this.compiledGlyphs=Object.create(null);for(const $ in _)this[$]=_[$];this.isEvalSupported=j!==!1,this.disableFontFace=h===!0,this.ignoreErrors=g===!0,this._inspectFont=b}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let _;if(!this.cssFontInfo)_=new FontFace(this.loadedName,this.data,{});else{const j={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(j.style=`oblique ${this.cssFontInfo.italicAngle}deg`),_=new FontFace(this.cssFontInfo.fontFamily,this.data,j)}return this._inspectFont?.(this),_}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const _=(0,o.bytesToString)(this.data),j=`url(data:${this.mimetype};base64,${btoa(_)});`;let h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${j}}`;else{let g=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(g+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${g}src:${j}}`}return this._inspectFont?.(this,j),h}getPathGenerator(_,j){if(this.compiledGlyphs[j]!==void 0)return this.compiledGlyphs[j];let h;try{h=_.get(this.loadedName+"_path_"+j)}catch(g){if(!this.ignoreErrors)throw g;return(0,o.warn)(`getPathGenerator - ignoring character: "${g}".`),this.compiledGlyphs[j]=function(b,$){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const g=[];for(const b of h){const $=b.args!==void 0?b.args.join(","):"";g.push("c.",b.cmd,"(",$,`);
`)}return this.compiledGlyphs[j]=new Function("c","size",g.join(""))}return this.compiledGlyphs[j]=function(g,b){for(const $ of h)$.cmd==="scale"&&($.args=[b,-b]),g[$.cmd].apply(g,$.args)}}}e.FontFaceObject=c},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var o=s(7);s(1);const a=function(h){return new Promise((g,b)=>{require$$5.readFile(h,(et,_e)=>{if(et||!_e){b(new Error(et));return}g(new Uint8Array(_e))})})};class c extends o.BaseFilterFactory{}e.NodeFilterFactory=c;class d extends o.BaseCanvasFactory{_createCanvas(g,b){return require$$5.createCanvas(g,b)}}e.NodeCanvasFactory=d;class _ extends o.BaseCMapReaderFactory{_fetchData(g,b){return a(g).then($=>({cMapData:$,compressionType:b}))}}e.NodeCMapReaderFactory=_;class j extends o.BaseStandardFontDataFactory{_fetchData(g){return a(g)}}e.NodeStandardFontDataFactory=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var o=s(1),a=s(6),c=s(12),d=s(13);const _=16,j=100,h=4096,g=15,b=10,$=1e3,et=16;function _e(ht,lt){if(ht._removeMirroring)throw new Error("Context is already forwarding operations.");ht.__originalSave=ht.save,ht.__originalRestore=ht.restore,ht.__originalRotate=ht.rotate,ht.__originalScale=ht.scale,ht.__originalTranslate=ht.translate,ht.__originalTransform=ht.transform,ht.__originalSetTransform=ht.setTransform,ht.__originalResetTransform=ht.resetTransform,ht.__originalClip=ht.clip,ht.__originalMoveTo=ht.moveTo,ht.__originalLineTo=ht.lineTo,ht.__originalBezierCurveTo=ht.bezierCurveTo,ht.__originalRect=ht.rect,ht.__originalClosePath=ht.closePath,ht.__originalBeginPath=ht.beginPath,ht._removeMirroring=()=>{ht.save=ht.__originalSave,ht.restore=ht.__originalRestore,ht.rotate=ht.__originalRotate,ht.scale=ht.__originalScale,ht.translate=ht.__originalTranslate,ht.transform=ht.__originalTransform,ht.setTransform=ht.__originalSetTransform,ht.resetTransform=ht.__originalResetTransform,ht.clip=ht.__originalClip,ht.moveTo=ht.__originalMoveTo,ht.lineTo=ht.__originalLineTo,ht.bezierCurveTo=ht.__originalBezierCurveTo,ht.rect=ht.__originalRect,ht.closePath=ht.__originalClosePath,ht.beginPath=ht.__originalBeginPath,delete ht._removeMirroring},ht.save=function(){lt.save(),this.__originalSave()},ht.restore=function(){lt.restore(),this.__originalRestore()},ht.translate=function(pt,Et){lt.translate(pt,Et),this.__originalTranslate(pt,Et)},ht.scale=function(pt,Et){lt.scale(pt,Et),this.__originalScale(pt,Et)},ht.transform=function(pt,Et,St,Ct,Pt,ot){lt.transform(pt,Et,St,Ct,Pt,ot),this.__originalTransform(pt,Et,St,Ct,Pt,ot)},ht.setTransform=function(pt,Et,St,Ct,Pt,ot){lt.setTransform(pt,Et,St,Ct,Pt,ot),this.__originalSetTransform(pt,Et,St,Ct,Pt,ot)},ht.resetTransform=function(){lt.resetTransform(),this.__originalResetTransform()},ht.rotate=function(pt){lt.rotate(pt),this.__originalRotate(pt)},ht.clip=function(pt){lt.clip(pt),this.__originalClip(pt)},ht.moveTo=function(ut,pt){lt.moveTo(ut,pt),this.__originalMoveTo(ut,pt)},ht.lineTo=function(ut,pt){lt.lineTo(ut,pt),this.__originalLineTo(ut,pt)},ht.bezierCurveTo=function(ut,pt,Et,St,Ct,Pt){lt.bezierCurveTo(ut,pt,Et,St,Ct,Pt),this.__originalBezierCurveTo(ut,pt,Et,St,Ct,Pt)},ht.rect=function(ut,pt,Et,St){lt.rect(ut,pt,Et,St),this.__originalRect(ut,pt,Et,St)},ht.closePath=function(){lt.closePath(),this.__originalClosePath()},ht.beginPath=function(){lt.beginPath(),this.__originalBeginPath()}}class nt{constructor(lt){this.canvasFactory=lt,this.cache=Object.create(null)}getCanvas(lt,ut,pt){let Et;return this.cache[lt]!==void 0?(Et=this.cache[lt],this.canvasFactory.reset(Et,ut,pt)):(Et=this.canvasFactory.create(ut,pt),this.cache[lt]=Et),Et}delete(lt){delete this.cache[lt]}clear(){for(const lt in this.cache){const ut=this.cache[lt];this.canvasFactory.destroy(ut),delete this.cache[lt]}}}function st(ht,lt,ut,pt,Et,St,Ct,Pt,ot,ft){const[mt,_t,xt,wt,Bt,kt]=(0,a.getCurrentTransform)(ht);if(_t===0&&xt===0){const Dt=Ct*mt+Bt,Ut=Math.round(Dt),Ot=Pt*wt+kt,Gt=Math.round(Ot),qt=(Ct+ot)*mt+Bt,Wt=Math.abs(Math.round(qt)-Ut)||1,Jt=(Pt+ft)*wt+kt,Kt=Math.abs(Math.round(Jt)-Gt)||1;return ht.setTransform(Math.sign(mt),0,0,Math.sign(wt),Ut,Gt),ht.drawImage(lt,ut,pt,Et,St,0,0,Wt,Kt),ht.setTransform(mt,_t,xt,wt,Bt,kt),[Wt,Kt]}if(mt===0&&wt===0){const Dt=Pt*xt+Bt,Ut=Math.round(Dt),Ot=Ct*_t+kt,Gt=Math.round(Ot),qt=(Pt+ft)*xt+Bt,Wt=Math.abs(Math.round(qt)-Ut)||1,Jt=(Ct+ot)*_t+kt,Kt=Math.abs(Math.round(Jt)-Gt)||1;return ht.setTransform(0,Math.sign(_t),Math.sign(xt),0,Ut,Gt),ht.drawImage(lt,ut,pt,Et,St,0,0,Kt,Wt),ht.setTransform(mt,_t,xt,wt,Bt,kt),[Kt,Wt]}ht.drawImage(lt,ut,pt,Et,St,Ct,Pt,ot,ft);const jt=Math.hypot(mt,_t),Mt=Math.hypot(xt,wt);return[jt*ot,Mt*ft]}function tt(ht){const{width:lt,height:ut}=ht;if(lt>$||ut>$)return null;const pt=1e3,Et=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),St=lt+1;let Ct=new Uint8Array(St*(ut+1)),Pt,ot,ft;const mt=lt+7&-8;let _t=new Uint8Array(mt*ut),xt=0;for(const Mt of ht.data){let Dt=128;for(;Dt>0;)_t[xt++]=Mt&Dt?0:255,Dt>>=1}let wt=0;for(xt=0,_t[xt]!==0&&(Ct[0]=1,++wt),ot=1;ot<lt;ot++)_t[xt]!==_t[xt+1]&&(Ct[ot]=_t[xt]?2:1,++wt),xt++;for(_t[xt]!==0&&(Ct[ot]=2,++wt),Pt=1;Pt<ut;Pt++){xt=Pt*mt,ft=Pt*St,_t[xt-mt]!==_t[xt]&&(Ct[ft]=_t[xt]?1:8,++wt);let Mt=(_t[xt]?4:0)+(_t[xt-mt]?8:0);for(ot=1;ot<lt;ot++)Mt=(Mt>>2)+(_t[xt+1]?4:0)+(_t[xt-mt+1]?8:0),Et[Mt]&&(Ct[ft+ot]=Et[Mt],++wt),xt++;if(_t[xt-mt]!==_t[xt]&&(Ct[ft+ot]=_t[xt]?2:4,++wt),wt>pt)return null}for(xt=mt*(ut-1),ft=Pt*St,_t[xt]!==0&&(Ct[ft]=8,++wt),ot=1;ot<lt;ot++)_t[xt]!==_t[xt+1]&&(Ct[ft+ot]=_t[xt]?4:8,++wt),xt++;if(_t[xt]!==0&&(Ct[ft+ot]=4,++wt),wt>pt)return null;const Bt=new Int32Array([0,St,-1,0,-St,0,0,0,1]),kt=new Path2D;for(Pt=0;wt&&Pt<=ut;Pt++){let Mt=Pt*St;const Dt=Mt+lt;for(;Mt<Dt&&!Ct[Mt];)Mt++;if(Mt===Dt)continue;kt.moveTo(Mt%St,Pt);const Ut=Mt;let Ot=Ct[Mt];do{const Gt=Bt[Ot];do Mt+=Gt;while(!Ct[Mt]);const qt=Ct[Mt];qt!==5&&qt!==10?(Ot=qt,Ct[Mt]=0):(Ot=qt&51*Ot>>4,Ct[Mt]&=Ot>>2|Ot<<2),kt.lineTo(Mt%St,Mt/St|0),Ct[Mt]||--wt}while(Ut!==Mt);--Pt}return _t=null,Ct=null,function(Mt){Mt.save(),Mt.scale(1/lt,-1/ut),Mt.translate(0,-ut),Mt.fill(kt),Mt.beginPath(),Mt.restore()}}class it{constructor(lt,ut){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,lt,ut])}clone(){const lt=Object.create(this);return lt.clipBox=this.clipBox.slice(),lt}setCurrentPoint(lt,ut){this.x=lt,this.y=ut}updatePathMinMax(lt,ut,pt){[ut,pt]=o.Util.applyTransform([ut,pt],lt),this.minX=Math.min(this.minX,ut),this.minY=Math.min(this.minY,pt),this.maxX=Math.max(this.maxX,ut),this.maxY=Math.max(this.maxY,pt)}updateRectMinMax(lt,ut){const pt=o.Util.applyTransform(ut,lt),Et=o.Util.applyTransform(ut.slice(2),lt);this.minX=Math.min(this.minX,pt[0],Et[0]),this.minY=Math.min(this.minY,pt[1],Et[1]),this.maxX=Math.max(this.maxX,pt[0],Et[0]),this.maxY=Math.max(this.maxY,pt[1],Et[1])}updateScalingPathMinMax(lt,ut){o.Util.scaleMinMax(lt,ut),this.minX=Math.min(this.minX,ut[0]),this.maxX=Math.max(this.maxX,ut[1]),this.minY=Math.min(this.minY,ut[2]),this.maxY=Math.max(this.maxY,ut[3])}updateCurvePathMinMax(lt,ut,pt,Et,St,Ct,Pt,ot,ft,mt){const _t=o.Util.bezierBoundingBox(ut,pt,Et,St,Ct,Pt,ot,ft);if(mt){mt[0]=Math.min(mt[0],_t[0],_t[2]),mt[1]=Math.max(mt[1],_t[0],_t[2]),mt[2]=Math.min(mt[2],_t[1],_t[3]),mt[3]=Math.max(mt[3],_t[1],_t[3]);return}this.updateRectMinMax(lt,_t)}getPathBoundingBox(lt=c.PathType.FILL,ut=null){const pt=[this.minX,this.minY,this.maxX,this.maxY];if(lt===c.PathType.STROKE){ut||(0,o.unreachable)("Stroke bounding box must include transform.");const Et=o.Util.singularValueDecompose2dScale(ut),St=Et[0]*this.lineWidth/2,Ct=Et[1]*this.lineWidth/2;pt[0]-=St,pt[1]-=Ct,pt[2]+=St,pt[3]+=Ct}return pt}updateClipFromPath(){const lt=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(lt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(lt){this.clipBox=lt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(lt=c.PathType.FILL,ut=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(lt,ut))}}function at(ht,lt){if(typeof ImageData<"u"&&lt instanceof ImageData){ht.putImageData(lt,0,0);return}const ut=lt.height,pt=lt.width,Et=ut%et,St=(ut-Et)/et,Ct=Et===0?St:St+1,Pt=ht.createImageData(pt,et);let ot=0,ft;const mt=lt.data,_t=Pt.data;let xt,wt,Bt,kt;if(lt.kind===o.ImageKind.GRAYSCALE_1BPP){const jt=mt.byteLength,Mt=new Uint32Array(_t.buffer,0,_t.byteLength>>2),Dt=Mt.length,Ut=pt+7>>3,Ot=4294967295,Gt=o.FeatureTest.isLittleEndian?4278190080:255;for(xt=0;xt<Ct;xt++){for(Bt=xt<St?et:Et,ft=0,wt=0;wt<Bt;wt++){const qt=jt-ot;let Wt=0;const Jt=qt>Ut?pt:qt*8-7,Kt=Jt&-8;let Yt=0,Qt=0;for(;Wt<Kt;Wt+=8)Qt=mt[ot++],Mt[ft++]=Qt&128?Ot:Gt,Mt[ft++]=Qt&64?Ot:Gt,Mt[ft++]=Qt&32?Ot:Gt,Mt[ft++]=Qt&16?Ot:Gt,Mt[ft++]=Qt&8?Ot:Gt,Mt[ft++]=Qt&4?Ot:Gt,Mt[ft++]=Qt&2?Ot:Gt,Mt[ft++]=Qt&1?Ot:Gt;for(;Wt<Jt;Wt++)Yt===0&&(Qt=mt[ot++],Yt=128),Mt[ft++]=Qt&Yt?Ot:Gt,Yt>>=1}for(;ft<Dt;)Mt[ft++]=0;ht.putImageData(Pt,0,xt*et)}}else if(lt.kind===o.ImageKind.RGBA_32BPP){for(wt=0,kt=pt*et*4,xt=0;xt<St;xt++)_t.set(mt.subarray(ot,ot+kt)),ot+=kt,ht.putImageData(Pt,0,wt),wt+=et;xt<Ct&&(kt=pt*Et*4,_t.set(mt.subarray(ot,ot+kt)),ht.putImageData(Pt,0,wt))}else if(lt.kind===o.ImageKind.RGB_24BPP)for(Bt=et,kt=pt*Bt,xt=0;xt<Ct;xt++){for(xt>=St&&(Bt=Et,kt=pt*Bt),ft=0,wt=kt;wt--;)_t[ft++]=mt[ot++],_t[ft++]=mt[ot++],_t[ft++]=mt[ot++],_t[ft++]=255;ht.putImageData(Pt,0,xt*et)}else throw new Error(`bad image kind: ${lt.kind}`)}function ct(ht,lt){if(lt.bitmap){ht.drawImage(lt.bitmap,0,0);return}const ut=lt.height,pt=lt.width,Et=ut%et,St=(ut-Et)/et,Ct=Et===0?St:St+1,Pt=ht.createImageData(pt,et);let ot=0;const ft=lt.data,mt=Pt.data;for(let _t=0;_t<Ct;_t++){const xt=_t<St?et:Et;({srcPos:ot}=(0,d.convertBlackAndWhiteToRGBA)({src:ft,srcPos:ot,dest:mt,width:pt,height:xt,nonBlackColor:0})),ht.putImageData(Pt,0,_t*et)}}function rt(ht,lt){const ut=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const pt of ut)ht[pt]!==void 0&&(lt[pt]=ht[pt]);ht.setLineDash!==void 0&&(lt.setLineDash(ht.getLineDash()),lt.lineDashOffset=ht.lineDashOffset)}function dt(ht){if(ht.strokeStyle=ht.fillStyle="#000000",ht.fillRule="nonzero",ht.globalAlpha=1,ht.lineWidth=1,ht.lineCap="butt",ht.lineJoin="miter",ht.miterLimit=10,ht.globalCompositeOperation="source-over",ht.font="10px sans-serif",ht.setLineDash!==void 0&&(ht.setLineDash([]),ht.lineDashOffset=0),!o.isNodeJS){const{filter:lt}=ht;lt!=="none"&&lt!==""&&(ht.filter="none")}}function yt(ht,lt,ut,pt){const Et=ht.length;for(let St=3;St<Et;St+=4){const Ct=ht[St];if(Ct===0)ht[St-3]=lt,ht[St-2]=ut,ht[St-1]=pt;else if(Ct<255){const Pt=255-Ct;ht[St-3]=ht[St-3]*Ct+lt*Pt>>8,ht[St-2]=ht[St-2]*Ct+ut*Pt>>8,ht[St-1]=ht[St-1]*Ct+pt*Pt>>8}}}function vt(ht,lt,ut){const pt=ht.length,Et=1/255;for(let St=3;St<pt;St+=4){const Ct=ut?ut[ht[St]]:ht[St];lt[St]=lt[St]*Ct*Et|0}}function gt(ht,lt,ut){const pt=ht.length;for(let Et=3;Et<pt;Et+=4){const St=ht[Et-3]*77+ht[Et-2]*152+ht[Et-1]*28;lt[Et]=ut?lt[Et]*ut[St>>8]>>8:lt[Et]*St>>16}}function At(ht,lt,ut,pt,Et,St,Ct,Pt,ot,ft,mt){const _t=!!St,xt=_t?St[0]:0,wt=_t?St[1]:0,Bt=_t?St[2]:0,kt=Et==="Luminosity"?gt:vt,Mt=Math.min(pt,Math.ceil(1048576/ut));for(let Dt=0;Dt<pt;Dt+=Mt){const Ut=Math.min(Mt,pt-Dt),Ot=ht.getImageData(Pt-ft,Dt+(ot-mt),ut,Ut),Gt=lt.getImageData(Pt,Dt+ot,ut,Ut);_t&&yt(Ot.data,xt,wt,Bt),kt(Ot.data,Gt.data,Ct),lt.putImageData(Gt,Pt,Dt+ot)}}function Vt(ht,lt,ut,pt){const Et=pt[0],St=pt[1],Ct=pt[2]-Et,Pt=pt[3]-St;Ct===0||Pt===0||(At(lt.context,ut,Ct,Pt,lt.subtype,lt.backdrop,lt.transferMap,Et,St,lt.offsetX,lt.offsetY),ht.save(),ht.globalAlpha=1,ht.globalCompositeOperation="source-over",ht.setTransform(1,0,0,1,0,0),ht.drawImage(ut.canvas,0,0),ht.restore())}function Nt(ht,lt){const ut=o.Util.singularValueDecompose2dScale(ht);ut[0]=Math.fround(ut[0]),ut[1]=Math.fround(ut[1]);const pt=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return lt!==void 0?lt:ut[0]<=pt||ut[1]<=pt}const It=["butt","round","square"],Lt=["miter","round","bevel"],zt={},Ft={};class Tt{constructor(lt,ut,pt,Et,St,{optionalContentConfig:Ct,markedContentStack:Pt=null},ot,ft){this.ctx=lt,this.current=new it(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ut,this.objs=pt,this.canvasFactory=Et,this.filterFactory=St,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Pt||[],this.optionalContentConfig=Ct,this.cachedCanvases=new nt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ot,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ft,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(lt,ut=null){return typeof lt=="string"?lt.startsWith("g_")?this.commonObjs.get(lt):this.objs.get(lt):ut}beginDrawing({transform:lt,viewport:ut,transparency:pt=!1,background:Et=null}){const St=this.ctx.canvas.width,Ct=this.ctx.canvas.height,Pt=this.ctx.fillStyle;if(this.ctx.fillStyle=Et||"#ffffff",this.ctx.fillRect(0,0,St,Ct),this.ctx.fillStyle=Pt,pt){const ot=this.cachedCanvases.getCanvas("transparent",St,Ct);this.compositeCtx=this.ctx,this.transparentCanvas=ot.canvas,this.ctx=ot.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),dt(this.ctx),lt&&(this.ctx.transform(...lt),this.outputScaleX=lt[0],this.outputScaleY=lt[0]),this.ctx.transform(...ut.transform),this.viewportScale=ut.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(lt,ut,pt,Et){const St=lt.argsArray,Ct=lt.fnArray;let Pt=ut||0;const ot=St.length;if(ot===Pt)return Pt;const ft=ot-Pt>b&&typeof pt=="function",mt=ft?Date.now()+g:0;let _t=0;const xt=this.commonObjs,wt=this.objs;let Bt;for(;;){if(Et!==void 0&&Pt===Et.nextBreakPoint)return Et.breakIt(Pt,pt),Pt;if(Bt=Ct[Pt],Bt!==o.OPS.dependency)this[Bt].apply(this,St[Pt]);else for(const kt of St[Pt]){const jt=kt.startsWith("g_")?xt:wt;if(!jt.has(kt))return jt.get(kt,pt),Pt}if(Pt++,Pt===ot)return Pt;if(ft&&++_t>b){if(Date.now()>mt)return pt(),Pt;_t=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const lt of this._cachedBitmapsMap.values()){for(const ut of lt.values())typeof HTMLCanvasElement<"u"&&ut instanceof HTMLCanvasElement&&(ut.width=ut.height=0);lt.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const lt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(lt!=="none"){const ut=this.ctx.filter;this.ctx.filter=lt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ut}}}_scaleImage(lt,ut){const pt=lt.width,Et=lt.height;let St=Math.max(Math.hypot(ut[0],ut[1]),1),Ct=Math.max(Math.hypot(ut[2],ut[3]),1),Pt=pt,ot=Et,ft="prescale1",mt,_t;for(;St>2&&Pt>1||Ct>2&&ot>1;){let xt=Pt,wt=ot;St>2&&Pt>1&&(xt=Pt>=16384?Math.floor(Pt/2)-1||1:Math.ceil(Pt/2),St/=Pt/xt),Ct>2&&ot>1&&(wt=ot>=16384?Math.floor(ot/2)-1||1:Math.ceil(ot)/2,Ct/=ot/wt),mt=this.cachedCanvases.getCanvas(ft,xt,wt),_t=mt.context,_t.clearRect(0,0,xt,wt),_t.drawImage(lt,0,0,Pt,ot,0,0,xt,wt),lt=mt.canvas,Pt=xt,ot=wt,ft=ft==="prescale1"?"prescale2":"prescale1"}return{img:lt,paintWidth:Pt,paintHeight:ot}}_createMaskCanvas(lt){const ut=this.ctx,{width:pt,height:Et}=lt,St=this.current.fillColor,Ct=this.current.patternFill,Pt=(0,a.getCurrentTransform)(ut);let ot,ft,mt,_t;if((lt.bitmap||lt.data)&&lt.count>1){const Wt=lt.bitmap||lt.data.buffer;ft=JSON.stringify(Ct?Pt:[Pt.slice(0,4),St]),ot=this._cachedBitmapsMap.get(Wt),ot||(ot=new Map,this._cachedBitmapsMap.set(Wt,ot));const Jt=ot.get(ft);if(Jt&&!Ct){const Kt=Math.round(Math.min(Pt[0],Pt[2])+Pt[4]),Yt=Math.round(Math.min(Pt[1],Pt[3])+Pt[5]);return{canvas:Jt,offsetX:Kt,offsetY:Yt}}mt=Jt}mt||(_t=this.cachedCanvases.getCanvas("maskCanvas",pt,Et),ct(_t.context,lt));let xt=o.Util.transform(Pt,[1/pt,0,0,-1/Et,0,0]);xt=o.Util.transform(xt,[1,0,0,1,0,-Et]);const wt=o.Util.applyTransform([0,0],xt),Bt=o.Util.applyTransform([pt,Et],xt),kt=o.Util.normalizeRect([wt[0],wt[1],Bt[0],Bt[1]]),jt=Math.round(kt[2]-kt[0])||1,Mt=Math.round(kt[3]-kt[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",jt,Mt),Ut=Dt.context,Ot=Math.min(wt[0],Bt[0]),Gt=Math.min(wt[1],Bt[1]);Ut.translate(-Ot,-Gt),Ut.transform(...xt),mt||(mt=this._scaleImage(_t.canvas,(0,a.getCurrentTransformInverse)(Ut)),mt=mt.img,ot&&Ct&&ot.set(ft,mt)),Ut.imageSmoothingEnabled=Nt((0,a.getCurrentTransform)(Ut),lt.interpolate),st(Ut,mt,0,0,mt.width,mt.height,0,0,pt,Et),Ut.globalCompositeOperation="source-in";const qt=o.Util.transform((0,a.getCurrentTransformInverse)(Ut),[1,0,0,1,-Ot,-Gt]);return Ut.fillStyle=Ct?St.getPattern(ut,this,qt,c.PathType.FILL):St,Ut.fillRect(0,0,pt,Et),ot&&!Ct&&(this.cachedCanvases.delete("fillCanvas"),ot.set(ft,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(Ot),offsetY:Math.round(Gt)}}setLineWidth(lt){lt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=lt,this.ctx.lineWidth=lt}setLineCap(lt){this.ctx.lineCap=It[lt]}setLineJoin(lt){this.ctx.lineJoin=Lt[lt]}setMiterLimit(lt){this.ctx.miterLimit=lt}setDash(lt,ut){const pt=this.ctx;pt.setLineDash!==void 0&&(pt.setLineDash(lt),pt.lineDashOffset=ut)}setRenderingIntent(lt){}setFlatness(lt){}setGState(lt){for(const[ut,pt]of lt)switch(ut){case"LW":this.setLineWidth(pt);break;case"LC":this.setLineCap(pt);break;case"LJ":this.setLineJoin(pt);break;case"ML":this.setMiterLimit(pt);break;case"D":this.setDash(pt[0],pt[1]);break;case"RI":this.setRenderingIntent(pt);break;case"FL":this.setFlatness(pt);break;case"Font":this.setFont(pt[0],pt[1]);break;case"CA":this.current.strokeAlpha=pt;break;case"ca":this.current.fillAlpha=pt,this.ctx.globalAlpha=pt;break;case"BM":this.ctx.globalCompositeOperation=pt;break;case"SMask":this.current.activeSMask=pt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(pt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const lt=this.inSMaskMode;this.current.activeSMask&&!lt?this.beginSMaskMode():!this.current.activeSMask&&lt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const lt=this.ctx.canvas.width,ut=this.ctx.canvas.height,pt="smaskGroupAt"+this.groupLevel,Et=this.cachedCanvases.getCanvas(pt,lt,ut);this.suspendedCtx=this.ctx,this.ctx=Et.context;const St=this.ctx;St.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),rt(this.suspendedCtx,St),_e(St,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),rt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(lt){if(!this.current.activeSMask)return;lt?(lt[0]=Math.floor(lt[0]),lt[1]=Math.floor(lt[1]),lt[2]=Math.ceil(lt[2]),lt[3]=Math.ceil(lt[3])):lt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ut=this.current.activeSMask,pt=this.suspendedCtx;Vt(pt,ut,this.ctx,lt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(rt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const lt=this.current;this.stateStack.push(lt),this.current=lt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),rt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(lt,ut,pt,Et,St,Ct){this.ctx.transform(lt,ut,pt,Et,St,Ct),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(lt,ut,pt){const Et=this.ctx,St=this.current;let Ct=St.x,Pt=St.y,ot,ft;const mt=(0,a.getCurrentTransform)(Et),_t=mt[0]===0&&mt[3]===0||mt[1]===0&&mt[2]===0,xt=_t?pt.slice(0):null;for(let wt=0,Bt=0,kt=lt.length;wt<kt;wt++)switch(lt[wt]|0){case o.OPS.rectangle:Ct=ut[Bt++],Pt=ut[Bt++];const jt=ut[Bt++],Mt=ut[Bt++],Dt=Ct+jt,Ut=Pt+Mt;Et.moveTo(Ct,Pt),jt===0||Mt===0?Et.lineTo(Dt,Ut):(Et.lineTo(Dt,Pt),Et.lineTo(Dt,Ut),Et.lineTo(Ct,Ut)),_t||St.updateRectMinMax(mt,[Ct,Pt,Dt,Ut]),Et.closePath();break;case o.OPS.moveTo:Ct=ut[Bt++],Pt=ut[Bt++],Et.moveTo(Ct,Pt),_t||St.updatePathMinMax(mt,Ct,Pt);break;case o.OPS.lineTo:Ct=ut[Bt++],Pt=ut[Bt++],Et.lineTo(Ct,Pt),_t||St.updatePathMinMax(mt,Ct,Pt);break;case o.OPS.curveTo:ot=Ct,ft=Pt,Ct=ut[Bt+4],Pt=ut[Bt+5],Et.bezierCurveTo(ut[Bt],ut[Bt+1],ut[Bt+2],ut[Bt+3],Ct,Pt),St.updateCurvePathMinMax(mt,ot,ft,ut[Bt],ut[Bt+1],ut[Bt+2],ut[Bt+3],Ct,Pt,xt),Bt+=6;break;case o.OPS.curveTo2:ot=Ct,ft=Pt,Et.bezierCurveTo(Ct,Pt,ut[Bt],ut[Bt+1],ut[Bt+2],ut[Bt+3]),St.updateCurvePathMinMax(mt,ot,ft,Ct,Pt,ut[Bt],ut[Bt+1],ut[Bt+2],ut[Bt+3],xt),Ct=ut[Bt+2],Pt=ut[Bt+3],Bt+=4;break;case o.OPS.curveTo3:ot=Ct,ft=Pt,Ct=ut[Bt+2],Pt=ut[Bt+3],Et.bezierCurveTo(ut[Bt],ut[Bt+1],Ct,Pt,Ct,Pt),St.updateCurvePathMinMax(mt,ot,ft,ut[Bt],ut[Bt+1],Ct,Pt,Ct,Pt,xt),Bt+=4;break;case o.OPS.closePath:Et.closePath();break}_t&&St.updateScalingPathMinMax(mt,xt),St.setCurrentPoint(Ct,Pt)}closePath(){this.ctx.closePath()}stroke(lt=!0){const ut=this.ctx,pt=this.current.strokeColor;ut.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof pt=="object"&&pt?.getPattern?(ut.save(),ut.strokeStyle=pt.getPattern(ut,this,(0,a.getCurrentTransformInverse)(ut),c.PathType.STROKE),this.rescaleAndStroke(!1),ut.restore()):this.rescaleAndStroke(!0)),lt&&this.consumePath(this.current.getClippedPathBoundingBox()),ut.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(lt=!0){const ut=this.ctx,pt=this.current.fillColor,Et=this.current.patternFill;let St=!1;Et&&(ut.save(),ut.fillStyle=pt.getPattern(ut,this,(0,a.getCurrentTransformInverse)(ut),c.PathType.FILL),St=!0);const Ct=this.current.getClippedPathBoundingBox();this.contentVisible&&Ct!==null&&(this.pendingEOFill?(ut.fill("evenodd"),this.pendingEOFill=!1):ut.fill()),St&&ut.restore(),lt&&this.consumePath(Ct)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=zt}eoClip(){this.pendingClip=Ft}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const lt=this.pendingTextPaths,ut=this.ctx;if(lt===void 0){ut.beginPath();return}ut.save(),ut.beginPath();for(const pt of lt)ut.setTransform(...pt.transform),ut.translate(pt.x,pt.y),pt.addToPath(ut,pt.fontSize);ut.restore(),ut.clip(),ut.beginPath(),delete this.pendingTextPaths}setCharSpacing(lt){this.current.charSpacing=lt}setWordSpacing(lt){this.current.wordSpacing=lt}setHScale(lt){this.current.textHScale=lt/100}setLeading(lt){this.current.leading=-lt}setFont(lt,ut){const pt=this.commonObjs.get(lt),Et=this.current;if(!pt)throw new Error(`Can't find font for ${lt}`);if(Et.fontMatrix=pt.fontMatrix||o.FONT_IDENTITY_MATRIX,(Et.fontMatrix[0]===0||Et.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+lt),ut<0?(ut=-ut,Et.fontDirection=-1):Et.fontDirection=1,this.current.font=pt,this.current.fontSize=ut,pt.isType3Font)return;const St=pt.loadedName||"sans-serif",Ct=pt.systemFontInfo?.css||`"${St}", ${pt.fallbackName}`;let Pt="normal";pt.black?Pt="900":pt.bold&&(Pt="bold");const ot=pt.italic?"italic":"normal";let ft=ut;ut<_?ft=_:ut>j&&(ft=j),this.current.fontSizeScale=ut/ft,this.ctx.font=`${ot} ${Pt} ${ft}px ${Ct}`}setTextRenderingMode(lt){this.current.textRenderingMode=lt}setTextRise(lt){this.current.textRise=lt}moveText(lt,ut){this.current.x=this.current.lineX+=lt,this.current.y=this.current.lineY+=ut}setLeadingMoveText(lt,ut){this.setLeading(-ut),this.moveText(lt,ut)}setTextMatrix(lt,ut,pt,Et,St,Ct){this.current.textMatrix=[lt,ut,pt,Et,St,Ct],this.current.textMatrixScale=Math.hypot(lt,ut),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(lt,ut,pt,Et){const St=this.ctx,Ct=this.current,Pt=Ct.font,ot=Ct.textRenderingMode,ft=Ct.fontSize/Ct.fontSizeScale,mt=ot&o.TextRenderingMode.FILL_STROKE_MASK,_t=!!(ot&o.TextRenderingMode.ADD_TO_PATH_FLAG),xt=Ct.patternFill&&!Pt.missingFile;let wt;(Pt.disableFontFace||_t||xt)&&(wt=Pt.getPathGenerator(this.commonObjs,lt)),Pt.disableFontFace||xt?(St.save(),St.translate(ut,pt),St.beginPath(),wt(St,ft),Et&&St.setTransform(...Et),(mt===o.TextRenderingMode.FILL||mt===o.TextRenderingMode.FILL_STROKE)&&St.fill(),(mt===o.TextRenderingMode.STROKE||mt===o.TextRenderingMode.FILL_STROKE)&&St.stroke(),St.restore()):((mt===o.TextRenderingMode.FILL||mt===o.TextRenderingMode.FILL_STROKE)&&St.fillText(lt,ut,pt),(mt===o.TextRenderingMode.STROKE||mt===o.TextRenderingMode.FILL_STROKE)&&St.strokeText(lt,ut,pt)),_t&&(this.pendingTextPaths||=[]).push({transform:(0,a.getCurrentTransform)(St),x:ut,y:pt,fontSize:ft,addToPath:wt})}get isFontSubpixelAAEnabled(){const{context:lt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);lt.scale(1.5,1),lt.fillText("I",0,10);const ut=lt.getImageData(0,0,10,10).data;let pt=!1;for(let Et=3;Et<ut.length;Et+=4)if(ut[Et]>0&&ut[Et]<255){pt=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",pt)}showText(lt){const ut=this.current,pt=ut.font;if(pt.isType3Font)return this.showType3Text(lt);const Et=ut.fontSize;if(Et===0)return;const St=this.ctx,Ct=ut.fontSizeScale,Pt=ut.charSpacing,ot=ut.wordSpacing,ft=ut.fontDirection,mt=ut.textHScale*ft,_t=lt.length,xt=pt.vertical,wt=xt?1:-1,Bt=pt.defaultVMetrics,kt=Et*ut.fontMatrix[0],jt=ut.textRenderingMode===o.TextRenderingMode.FILL&&!pt.disableFontFace&&!ut.patternFill;St.save(),St.transform(...ut.textMatrix),St.translate(ut.x,ut.y+ut.textRise),ft>0?St.scale(mt,-1):St.scale(mt,1);let Mt;if(ut.patternFill){St.save();const qt=ut.fillColor.getPattern(St,this,(0,a.getCurrentTransformInverse)(St),c.PathType.FILL);Mt=(0,a.getCurrentTransform)(St),St.restore(),St.fillStyle=qt}let Dt=ut.lineWidth;const Ut=ut.textMatrixScale;if(Ut===0||Dt===0){const qt=ut.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(qt===o.TextRenderingMode.STROKE||qt===o.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=Ut;if(Ct!==1&&(St.scale(Ct,Ct),Dt/=Ct),St.lineWidth=Dt,pt.isInvalidPDFjsFont){const qt=[];let Wt=0;for(const Jt of lt)qt.push(Jt.unicode),Wt+=Jt.width;St.fillText(qt.join(""),0,0),ut.x+=Wt*kt*mt,St.restore(),this.compose();return}let Ot=0,Gt;for(Gt=0;Gt<_t;++Gt){const qt=lt[Gt];if(typeof qt=="number"){Ot+=wt*qt*Et/1e3;continue}let Wt=!1;const Jt=(qt.isSpace?ot:0)+Pt,Kt=qt.fontChar,Yt=qt.accent;let Qt,on,nn=qt.width;if(xt){const sn=qt.vmetric||Bt,ln=-(qt.vmetric?sn[1]:nn*.5)*kt,_n=sn[2]*kt;nn=sn?-sn[0]:nn,Qt=ln/Ct,on=(Ot+_n)/Ct}else Qt=Ot/Ct,on=0;if(pt.remeasure&&nn>0){const sn=St.measureText(Kt).width*1e3/Et*Ct;if(nn<sn&&this.isFontSubpixelAAEnabled){const ln=nn/sn;Wt=!0,St.save(),St.scale(ln,1),Qt/=ln}else nn!==sn&&(Qt+=(nn-sn)/2e3*Et/Ct)}if(this.contentVisible&&(qt.isInFont||pt.missingFile)){if(jt&&!Yt)St.fillText(Kt,Qt,on);else if(this.paintChar(Kt,Qt,on,Mt),Yt){const sn=Qt+Et*Yt.offset.x/Ct,ln=on-Et*Yt.offset.y/Ct;this.paintChar(Yt.fontChar,sn,ln,Mt)}}const dn=xt?nn*kt-Jt*ft:nn*kt+Jt*ft;Ot+=dn,Wt&&St.restore()}xt?ut.y-=Ot:ut.x+=Ot*mt,St.restore(),this.compose()}showType3Text(lt){const ut=this.ctx,pt=this.current,Et=pt.font,St=pt.fontSize,Ct=pt.fontDirection,Pt=Et.vertical?1:-1,ot=pt.charSpacing,ft=pt.wordSpacing,mt=pt.textHScale*Ct,_t=pt.fontMatrix||o.FONT_IDENTITY_MATRIX,xt=lt.length,wt=pt.textRenderingMode===o.TextRenderingMode.INVISIBLE;let Bt,kt,jt,Mt;if(!(wt||St===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ut.save(),ut.transform(...pt.textMatrix),ut.translate(pt.x,pt.y),ut.scale(mt,Ct),Bt=0;Bt<xt;++Bt){if(kt=lt[Bt],typeof kt=="number"){Mt=Pt*kt*St/1e3,this.ctx.translate(Mt,0),pt.x+=Mt*mt;continue}const Dt=(kt.isSpace?ft:0)+ot,Ut=Et.charProcOperatorList[kt.operatorListId];if(!Ut){(0,o.warn)(`Type3 character "${kt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=kt,this.save(),ut.scale(St,St),ut.transform(..._t),this.executeOperatorList(Ut),this.restore()),jt=o.Util.applyTransform([kt.width,0],_t)[0]*St+Dt,ut.translate(jt,0),pt.x+=jt*mt}ut.restore(),this.processingType3=null}}setCharWidth(lt,ut){}setCharWidthAndBounds(lt,ut,pt,Et,St,Ct){this.ctx.rect(pt,Et,St-pt,Ct-Et),this.ctx.clip(),this.endPath()}getColorN_Pattern(lt){let ut;if(lt[0]==="TilingPattern"){const pt=lt[1],Et=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),St={createCanvasGraphics:Ct=>new Tt(Ct,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};ut=new c.TilingPattern(lt,pt,this.ctx,St,Et)}else ut=this._getPattern(lt[1],lt[2]);return ut}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(lt,ut,pt){const Et=o.Util.makeHexColor(lt,ut,pt);this.ctx.strokeStyle=Et,this.current.strokeColor=Et}setFillRGBColor(lt,ut,pt){const Et=o.Util.makeHexColor(lt,ut,pt);this.ctx.fillStyle=Et,this.current.fillColor=Et,this.current.patternFill=!1}_getPattern(lt,ut=null){let pt;return this.cachedPatterns.has(lt)?pt=this.cachedPatterns.get(lt):(pt=(0,c.getShadingPattern)(this.getObject(lt)),this.cachedPatterns.set(lt,pt)),ut&&(pt.matrix=ut),pt}shadingFill(lt){if(!this.contentVisible)return;const ut=this.ctx;this.save();const pt=this._getPattern(lt);ut.fillStyle=pt.getPattern(ut,this,(0,a.getCurrentTransformInverse)(ut),c.PathType.SHADING);const Et=(0,a.getCurrentTransformInverse)(ut);if(Et){const{width:St,height:Ct}=ut.canvas,[Pt,ot,ft,mt]=o.Util.getAxialAlignedBoundingBox([0,0,St,Ct],Et);this.ctx.fillRect(Pt,ot,ft-Pt,mt-ot)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(lt,ut){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(lt)&&lt.length===6&&this.transform(...lt),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),ut)){const pt=ut[2]-ut[0],Et=ut[3]-ut[1];this.ctx.rect(ut[0],ut[1],pt,Et),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),ut),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(lt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ut=this.ctx;lt.isolated||(0,o.info)("TODO: Support non-isolated groups."),lt.knockout&&(0,o.warn)("Knockout groups not supported.");const pt=(0,a.getCurrentTransform)(ut);if(lt.matrix&&ut.transform(...lt.matrix),!lt.bbox)throw new Error("Bounding box is required.");let Et=o.Util.getAxialAlignedBoundingBox(lt.bbox,(0,a.getCurrentTransform)(ut));const St=[0,0,ut.canvas.width,ut.canvas.height];Et=o.Util.intersect(Et,St)||[0,0,0,0];const Ct=Math.floor(Et[0]),Pt=Math.floor(Et[1]);let ot=Math.max(Math.ceil(Et[2])-Ct,1),ft=Math.max(Math.ceil(Et[3])-Pt,1),mt=1,_t=1;ot>h&&(mt=ot/h,ot=h),ft>h&&(_t=ft/h,ft=h),this.current.startNewPathAndClipBox([0,0,ot,ft]);let xt="groupAt"+this.groupLevel;lt.smask&&(xt+="_smask_"+this.smaskCounter++%2);const wt=this.cachedCanvases.getCanvas(xt,ot,ft),Bt=wt.context;Bt.scale(1/mt,1/_t),Bt.translate(-Ct,-Pt),Bt.transform(...pt),lt.smask?this.smaskStack.push({canvas:wt.canvas,context:Bt,offsetX:Ct,offsetY:Pt,scaleX:mt,scaleY:_t,subtype:lt.smask.subtype,backdrop:lt.smask.backdrop,transferMap:lt.smask.transferMap||null,startTransformInverse:null}):(ut.setTransform(1,0,0,1,0,0),ut.translate(Ct,Pt),ut.scale(mt,_t),ut.save()),rt(ut,Bt),this.ctx=Bt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ut),this.groupLevel++}endGroup(lt){if(!this.contentVisible)return;this.groupLevel--;const ut=this.ctx,pt=this.groupStack.pop();if(this.ctx=pt,this.ctx.imageSmoothingEnabled=!1,lt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Et=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Et);const St=o.Util.getAxialAlignedBoundingBox([0,0,ut.canvas.width,ut.canvas.height],Et);this.ctx.drawImage(ut.canvas,0,0),this.ctx.restore(),this.compose(St)}}beginAnnotation(lt,ut,pt,Et,St){if(this.#e(),dt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(ut)&&ut.length===4){const Ct=ut[2]-ut[0],Pt=ut[3]-ut[1];if(St&&this.annotationCanvasMap){pt=pt.slice(),pt[4]-=ut[0],pt[5]-=ut[1],ut=ut.slice(),ut[0]=ut[1]=0,ut[2]=Ct,ut[3]=Pt;const[ot,ft]=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:mt}=this,_t=Math.ceil(Ct*this.outputScaleX*mt),xt=Math.ceil(Pt*this.outputScaleY*mt);this.annotationCanvas=this.canvasFactory.create(_t,xt);const{canvas:wt,context:Bt}=this.annotationCanvas;this.annotationCanvasMap.set(lt,wt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Bt,this.ctx.save(),this.ctx.setTransform(ot,0,0,-ft,0,Pt*ft),dt(this.ctx)}else dt(this.ctx),this.ctx.rect(ut[0],ut[1],Ct,Pt),this.ctx.clip(),this.endPath()}this.current=new it(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...pt),this.transform(...Et)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(lt){if(!this.contentVisible)return;const ut=lt.count;lt=this.getObject(lt.data,lt),lt.count=ut;const pt=this.ctx,Et=this.processingType3;if(Et&&(Et.compiled===void 0&&(Et.compiled=tt(lt)),Et.compiled)){Et.compiled(pt);return}const St=this._createMaskCanvas(lt),Ct=St.canvas;pt.save(),pt.setTransform(1,0,0,1,0,0),pt.drawImage(Ct,St.offsetX,St.offsetY),pt.restore(),this.compose()}paintImageMaskXObjectRepeat(lt,ut,pt=0,Et=0,St,Ct){if(!this.contentVisible)return;lt=this.getObject(lt.data,lt);const Pt=this.ctx;Pt.save();const ot=(0,a.getCurrentTransform)(Pt);Pt.transform(ut,pt,Et,St,0,0);const ft=this._createMaskCanvas(lt);Pt.setTransform(1,0,0,1,ft.offsetX-ot[4],ft.offsetY-ot[5]);for(let mt=0,_t=Ct.length;mt<_t;mt+=2){const xt=o.Util.transform(ot,[ut,pt,Et,St,Ct[mt],Ct[mt+1]]),[wt,Bt]=o.Util.applyTransform([0,0],xt);Pt.drawImage(ft.canvas,wt,Bt)}Pt.restore(),this.compose()}paintImageMaskXObjectGroup(lt){if(!this.contentVisible)return;const ut=this.ctx,pt=this.current.fillColor,Et=this.current.patternFill;for(const St of lt){const{data:Ct,width:Pt,height:ot,transform:ft}=St,mt=this.cachedCanvases.getCanvas("maskCanvas",Pt,ot),_t=mt.context;_t.save();const xt=this.getObject(Ct,St);ct(_t,xt),_t.globalCompositeOperation="source-in",_t.fillStyle=Et?pt.getPattern(_t,this,(0,a.getCurrentTransformInverse)(ut),c.PathType.FILL):pt,_t.fillRect(0,0,Pt,ot),_t.restore(),ut.save(),ut.transform(...ft),ut.scale(1,-1),st(ut,mt.canvas,0,0,Pt,ot,0,-1,1,1),ut.restore()}this.compose()}paintImageXObject(lt){if(!this.contentVisible)return;const ut=this.getObject(lt);if(!ut){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(ut)}paintImageXObjectRepeat(lt,ut,pt,Et){if(!this.contentVisible)return;const St=this.getObject(lt);if(!St){(0,o.warn)("Dependent image isn't ready yet");return}const Ct=St.width,Pt=St.height,ot=[];for(let ft=0,mt=Et.length;ft<mt;ft+=2)ot.push({transform:[ut,0,0,pt,Et[ft],Et[ft+1]],x:0,y:0,w:Ct,h:Pt});this.paintInlineImageXObjectGroup(St,ot)}applyTransferMapsToCanvas(lt){return this.current.transferMaps!=="none"&&(lt.filter=this.current.transferMaps,lt.drawImage(lt.canvas,0,0),lt.filter="none"),lt.canvas}applyTransferMapsToBitmap(lt){if(this.current.transferMaps==="none")return lt.bitmap;const{bitmap:ut,width:pt,height:Et}=lt,St=this.cachedCanvases.getCanvas("inlineImage",pt,Et),Ct=St.context;return Ct.filter=this.current.transferMaps,Ct.drawImage(ut,0,0),Ct.filter="none",St.canvas}paintInlineImageXObject(lt){if(!this.contentVisible)return;const ut=lt.width,pt=lt.height,Et=this.ctx;if(this.save(),!o.isNodeJS){const{filter:Pt}=Et;Pt!=="none"&&Pt!==""&&(Et.filter="none")}Et.scale(1/ut,-1/pt);let St;if(lt.bitmap)St=this.applyTransferMapsToBitmap(lt);else if(typeof HTMLElement=="function"&&lt instanceof HTMLElement||!lt.data)St=lt;else{const ot=this.cachedCanvases.getCanvas("inlineImage",ut,pt).context;at(ot,lt),St=this.applyTransferMapsToCanvas(ot)}const Ct=this._scaleImage(St,(0,a.getCurrentTransformInverse)(Et));Et.imageSmoothingEnabled=Nt((0,a.getCurrentTransform)(Et),lt.interpolate),st(Et,Ct.img,0,0,Ct.paintWidth,Ct.paintHeight,0,-pt,ut,pt),this.compose(),this.restore()}paintInlineImageXObjectGroup(lt,ut){if(!this.contentVisible)return;const pt=this.ctx;let Et;if(lt.bitmap)Et=lt.bitmap;else{const St=lt.width,Ct=lt.height,ot=this.cachedCanvases.getCanvas("inlineImage",St,Ct).context;at(ot,lt),Et=this.applyTransferMapsToCanvas(ot)}for(const St of ut)pt.save(),pt.transform(...St.transform),pt.scale(1,-1),st(pt,Et,St.x,St.y,St.w,St.h,0,-1,1,1),pt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(lt){}markPointProps(lt,ut){}beginMarkedContent(lt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(lt,ut){lt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ut)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(lt){const ut=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(lt);const pt=this.ctx;this.pendingClip&&(ut||(this.pendingClip===Ft?pt.clip("evenodd"):pt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),pt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const lt=(0,a.getCurrentTransform)(this.ctx);if(lt[1]===0&&lt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(lt[0]),Math.abs(lt[3]));else{const ut=Math.abs(lt[0]*lt[3]-lt[2]*lt[1]),pt=Math.hypot(lt[0],lt[2]),Et=Math.hypot(lt[1],lt[3]);this._cachedGetSinglePixelWidth=Math.max(pt,Et)/ut}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:lt}=this.current,{a:ut,b:pt,c:Et,d:St}=this.ctx.getTransform();let Ct,Pt;if(pt===0&&Et===0){const ot=Math.abs(ut),ft=Math.abs(St);if(ot===ft)if(lt===0)Ct=Pt=1/ot;else{const mt=ot*lt;Ct=Pt=mt<1?1/mt:1}else if(lt===0)Ct=1/ot,Pt=1/ft;else{const mt=ot*lt,_t=ft*lt;Ct=mt<1?1/mt:1,Pt=_t<1?1/_t:1}}else{const ot=Math.abs(ut*St-pt*Et),ft=Math.hypot(ut,pt),mt=Math.hypot(Et,St);if(lt===0)Ct=mt/ot,Pt=ft/ot;else{const _t=lt*ot;Ct=mt>_t?mt/_t:1,Pt=ft>_t?ft/_t:1}}this._cachedScaleForStroking[0]=Ct,this._cachedScaleForStroking[1]=Pt}return this._cachedScaleForStroking}rescaleAndStroke(lt){const{ctx:ut}=this,{lineWidth:pt}=this.current,[Et,St]=this.getScaleForStroking();if(ut.lineWidth=pt||1,Et===1&&St===1){ut.stroke();return}const Ct=ut.getLineDash();if(lt&&ut.save(),ut.scale(Et,St),Ct.length>0){const Pt=Math.max(Et,St);ut.setLineDash(Ct.map(ot=>ot/Pt)),ut.lineDashOffset/=Pt}ut.stroke(),lt&&ut.restore()}isContentVisible(){for(let lt=this.markedContentStack.length-1;lt>=0;lt--)if(!this.markedContentStack[lt].visible)return!1;return!0}}e.CanvasGraphics=Tt;for(const ht in o.OPS)Tt.prototype[ht]!==void 0&&(Tt.prototype[o.OPS[ht]]=Tt.prototype[ht])},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=et;var o=s(1),a=s(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=c;function d(st,tt){if(!tt)return;const it=tt[2]-tt[0],at=tt[3]-tt[1],ct=new Path2D;ct.rect(tt[0],tt[1],it,at),st.clip(ct)}class _{constructor(){this.constructor===_&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class j extends _{constructor(tt){super(),this._type=tt[1],this._bbox=tt[2],this._colorStops=tt[3],this._p0=tt[4],this._p1=tt[5],this._r0=tt[6],this._r1=tt[7],this.matrix=null}_createGradient(tt){let it;this._type==="axial"?it=tt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(it=tt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const at of this._colorStops)it.addColorStop(at[0],at[1]);return it}getPattern(tt,it,at,ct){let rt;if(ct===c.STROKE||ct===c.FILL){const dt=it.current.getClippedPathBoundingBox(ct,(0,a.getCurrentTransform)(tt))||[0,0,0,0],yt=Math.ceil(dt[2]-dt[0])||1,vt=Math.ceil(dt[3]-dt[1])||1,gt=it.cachedCanvases.getCanvas("pattern",yt,vt,!0),At=gt.context;At.clearRect(0,0,At.canvas.width,At.canvas.height),At.beginPath(),At.rect(0,0,At.canvas.width,At.canvas.height),At.translate(-dt[0],-dt[1]),at=o.Util.transform(at,[1,0,0,1,dt[0],dt[1]]),At.transform(...it.baseTransform),this.matrix&&At.transform(...this.matrix),d(At,this._bbox),At.fillStyle=this._createGradient(At),At.fill(),rt=tt.createPattern(gt.canvas,"no-repeat");const Vt=new DOMMatrix(at);rt.setTransform(Vt)}else d(tt,this._bbox),rt=this._createGradient(tt);return rt}}function h(st,tt,it,at,ct,rt,dt,yt){const vt=tt.coords,gt=tt.colors,At=st.data,Vt=st.width*4;let Nt;vt[it+1]>vt[at+1]&&(Nt=it,it=at,at=Nt,Nt=rt,rt=dt,dt=Nt),vt[at+1]>vt[ct+1]&&(Nt=at,at=ct,ct=Nt,Nt=dt,dt=yt,yt=Nt),vt[it+1]>vt[at+1]&&(Nt=it,it=at,at=Nt,Nt=rt,rt=dt,dt=Nt);const It=(vt[it]+tt.offsetX)*tt.scaleX,Lt=(vt[it+1]+tt.offsetY)*tt.scaleY,zt=(vt[at]+tt.offsetX)*tt.scaleX,Ft=(vt[at+1]+tt.offsetY)*tt.scaleY,Tt=(vt[ct]+tt.offsetX)*tt.scaleX,ht=(vt[ct+1]+tt.offsetY)*tt.scaleY;if(Lt>=ht)return;const lt=gt[rt],ut=gt[rt+1],pt=gt[rt+2],Et=gt[dt],St=gt[dt+1],Ct=gt[dt+2],Pt=gt[yt],ot=gt[yt+1],ft=gt[yt+2],mt=Math.round(Lt),_t=Math.round(ht);let xt,wt,Bt,kt,jt,Mt,Dt,Ut;for(let Ot=mt;Ot<=_t;Ot++){if(Ot<Ft){const Kt=Ot<Lt?0:(Lt-Ot)/(Lt-Ft);xt=It-(It-zt)*Kt,wt=lt-(lt-Et)*Kt,Bt=ut-(ut-St)*Kt,kt=pt-(pt-Ct)*Kt}else{let Kt;Ot>ht?Kt=1:Ft===ht?Kt=0:Kt=(Ft-Ot)/(Ft-ht),xt=zt-(zt-Tt)*Kt,wt=Et-(Et-Pt)*Kt,Bt=St-(St-ot)*Kt,kt=Ct-(Ct-ft)*Kt}let Gt;Ot<Lt?Gt=0:Ot>ht?Gt=1:Gt=(Lt-Ot)/(Lt-ht),jt=It-(It-Tt)*Gt,Mt=lt-(lt-Pt)*Gt,Dt=ut-(ut-ot)*Gt,Ut=pt-(pt-ft)*Gt;const qt=Math.round(Math.min(xt,jt)),Wt=Math.round(Math.max(xt,jt));let Jt=Vt*Ot+qt*4;for(let Kt=qt;Kt<=Wt;Kt++)Gt=(xt-Kt)/(xt-jt),Gt<0?Gt=0:Gt>1&&(Gt=1),At[Jt++]=wt-(wt-Mt)*Gt|0,At[Jt++]=Bt-(Bt-Dt)*Gt|0,At[Jt++]=kt-(kt-Ut)*Gt|0,At[Jt++]=255}}function g(st,tt,it){const at=tt.coords,ct=tt.colors;let rt,dt;switch(tt.type){case"lattice":const yt=tt.verticesPerRow,vt=Math.floor(at.length/yt)-1,gt=yt-1;for(rt=0;rt<vt;rt++){let At=rt*yt;for(let Vt=0;Vt<gt;Vt++,At++)h(st,it,at[At],at[At+1],at[At+yt],ct[At],ct[At+1],ct[At+yt]),h(st,it,at[At+yt+1],at[At+1],at[At+yt],ct[At+yt+1],ct[At+1],ct[At+yt])}break;case"triangles":for(rt=0,dt=at.length;rt<dt;rt+=3)h(st,it,at[rt],at[rt+1],at[rt+2],ct[rt],ct[rt+1],ct[rt+2]);break;default:throw new Error("illegal figure")}}class b extends _{constructor(tt){super(),this._coords=tt[2],this._colors=tt[3],this._figures=tt[4],this._bounds=tt[5],this._bbox=tt[7],this._background=tt[8],this.matrix=null}_createMeshCanvas(tt,it,at){const yt=Math.floor(this._bounds[0]),vt=Math.floor(this._bounds[1]),gt=Math.ceil(this._bounds[2])-yt,At=Math.ceil(this._bounds[3])-vt,Vt=Math.min(Math.ceil(Math.abs(gt*tt[0]*1.1)),3e3),Nt=Math.min(Math.ceil(Math.abs(At*tt[1]*1.1)),3e3),It=gt/Vt,Lt=At/Nt,zt={coords:this._coords,colors:this._colors,offsetX:-yt,offsetY:-vt,scaleX:1/It,scaleY:1/Lt},Ft=Vt+2*2,Tt=Nt+2*2,ht=at.getCanvas("mesh",Ft,Tt,!1),lt=ht.context,ut=lt.createImageData(Vt,Nt);if(it){const Et=ut.data;for(let St=0,Ct=Et.length;St<Ct;St+=4)Et[St]=it[0],Et[St+1]=it[1],Et[St+2]=it[2],Et[St+3]=255}for(const Et of this._figures)g(ut,Et,zt);return lt.putImageData(ut,2,2),{canvas:ht.canvas,offsetX:yt-2*It,offsetY:vt-2*Lt,scaleX:It,scaleY:Lt}}getPattern(tt,it,at,ct){d(tt,this._bbox);let rt;if(ct===c.SHADING)rt=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(tt));else if(rt=o.Util.singularValueDecompose2dScale(it.baseTransform),this.matrix){const yt=o.Util.singularValueDecompose2dScale(this.matrix);rt=[rt[0]*yt[0],rt[1]*yt[1]]}const dt=this._createMeshCanvas(rt,ct===c.SHADING?null:this._background,it.cachedCanvases);return ct!==c.SHADING&&(tt.setTransform(...it.baseTransform),this.matrix&&tt.transform(...this.matrix)),tt.translate(dt.offsetX,dt.offsetY),tt.scale(dt.scaleX,dt.scaleY),tt.createPattern(dt.canvas,"no-repeat")}}class $ extends _{getPattern(){return"hotpink"}}function et(st){switch(st[0]){case"RadialAxial":return new j(st);case"Mesh":return new b(st);case"Dummy":return new $}throw new Error(`Unknown IR type: ${st[0]}`)}const _e={COLORED:1,UNCOLORED:2};class nt{static MAX_PATTERN_SIZE=3e3;constructor(tt,it,at,ct,rt){this.operatorList=tt[2],this.matrix=tt[3]||[1,0,0,1,0,0],this.bbox=tt[4],this.xstep=tt[5],this.ystep=tt[6],this.paintType=tt[7],this.tilingType=tt[8],this.color=it,this.ctx=at,this.canvasGraphicsFactory=ct,this.baseTransform=rt}createPatternCanvas(tt){const it=this.operatorList,at=this.bbox,ct=this.xstep,rt=this.ystep,dt=this.paintType,yt=this.tilingType,vt=this.color,gt=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+yt);const At=at[0],Vt=at[1],Nt=at[2],It=at[3],Lt=o.Util.singularValueDecompose2dScale(this.matrix),zt=o.Util.singularValueDecompose2dScale(this.baseTransform),Ft=[Lt[0]*zt[0],Lt[1]*zt[1]],Tt=this.getSizeAndScale(ct,this.ctx.canvas.width,Ft[0]),ht=this.getSizeAndScale(rt,this.ctx.canvas.height,Ft[1]),lt=tt.cachedCanvases.getCanvas("pattern",Tt.size,ht.size,!0),ut=lt.context,pt=gt.createCanvasGraphics(ut);pt.groupLevel=tt.groupLevel,this.setFillAndStrokeStyleToContext(pt,dt,vt);let Et=At,St=Vt,Ct=Nt,Pt=It;return At<0&&(Et=0,Ct+=Math.abs(At)),Vt<0&&(St=0,Pt+=Math.abs(Vt)),ut.translate(-(Tt.scale*Et),-(ht.scale*St)),pt.transform(Tt.scale,0,0,ht.scale,0,0),ut.save(),this.clipBbox(pt,Et,St,Ct,Pt),pt.baseTransform=(0,a.getCurrentTransform)(pt.ctx),pt.executeOperatorList(it),pt.endDrawing(),{canvas:lt.canvas,scaleX:Tt.scale,scaleY:ht.scale,offsetX:Et,offsetY:St}}getSizeAndScale(tt,it,at){tt=Math.abs(tt);const ct=Math.max(nt.MAX_PATTERN_SIZE,it);let rt=Math.ceil(tt*at);return rt>=ct?rt=ct:at=rt/tt,{scale:at,size:rt}}clipBbox(tt,it,at,ct,rt){const dt=ct-it,yt=rt-at;tt.ctx.rect(it,at,dt,yt),tt.current.updateRectMinMax((0,a.getCurrentTransform)(tt.ctx),[it,at,ct,rt]),tt.clip(),tt.endPath()}setFillAndStrokeStyleToContext(tt,it,at){const ct=tt.ctx,rt=tt.current;switch(it){case _e.COLORED:const dt=this.ctx;ct.fillStyle=dt.fillStyle,ct.strokeStyle=dt.strokeStyle,rt.fillColor=dt.fillStyle,rt.strokeColor=dt.strokeStyle;break;case _e.UNCOLORED:const yt=o.Util.makeHexColor(at[0],at[1],at[2]);ct.fillStyle=yt,ct.strokeStyle=yt,rt.fillColor=yt,rt.strokeColor=yt;break;default:throw new o.FormatError(`Unsupported paint type: ${it}`)}}getPattern(tt,it,at,ct){let rt=at;ct!==c.SHADING&&(rt=o.Util.transform(rt,it.baseTransform),this.matrix&&(rt=o.Util.transform(rt,this.matrix)));const dt=this.createPatternCanvas(it);let yt=new DOMMatrix(rt);yt=yt.translate(dt.offsetX,dt.offsetY),yt=yt.scale(1/dt.scaleX,1/dt.scaleY);const vt=tt.createPattern(dt.canvas,"repeat");return vt.setTransform(yt),vt}}e.TilingPattern=nt},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=c,e.convertToRGBA=a,e.grayToRGBA=_;var o=s(1);function a(j){switch(j.kind){case o.ImageKind.GRAYSCALE_1BPP:return c(j);case o.ImageKind.RGB_24BPP:return d(j)}return null}function c({src:j,srcPos:h=0,dest:g,width:b,height:$,nonBlackColor:et=4294967295,inverseDecode:_e=!1}){const nt=o.FeatureTest.isLittleEndian?4278190080:255,[st,tt]=_e?[et,nt]:[nt,et],it=b>>3,at=b&7,ct=j.length;g=new Uint32Array(g.buffer);let rt=0;for(let dt=0;dt<$;dt++){for(const vt=h+it;h<vt;h++){const gt=h<ct?j[h]:255;g[rt++]=gt&128?tt:st,g[rt++]=gt&64?tt:st,g[rt++]=gt&32?tt:st,g[rt++]=gt&16?tt:st,g[rt++]=gt&8?tt:st,g[rt++]=gt&4?tt:st,g[rt++]=gt&2?tt:st,g[rt++]=gt&1?tt:st}if(at===0)continue;const yt=h<ct?j[h++]:255;for(let vt=0;vt<at;vt++)g[rt++]=yt&1<<7-vt?tt:st}return{srcPos:h,destPos:rt}}function d({src:j,srcPos:h=0,dest:g,destPos:b=0,width:$,height:et}){let _e=0;const nt=j.length>>2,st=new Uint32Array(j.buffer,h,nt);if(o.FeatureTest.isLittleEndian){for(;_e<nt-2;_e+=3,b+=4){const tt=st[_e],it=st[_e+1],at=st[_e+2];g[b]=tt|4278190080,g[b+1]=tt>>>24|it<<8|4278190080,g[b+2]=it>>>16|at<<16|4278190080,g[b+3]=at>>>8|4278190080}for(let tt=_e*4,it=j.length;tt<it;tt+=3)g[b++]=j[tt]|j[tt+1]<<8|j[tt+2]<<16|4278190080}else{for(;_e<nt-2;_e+=3,b+=4){const tt=st[_e],it=st[_e+1],at=st[_e+2];g[b]=tt|255,g[b+1]=tt<<24|it>>>8|255,g[b+2]=it<<16|at>>>16|255,g[b+3]=at<<8|255}for(let tt=_e*4,it=j.length;tt<it;tt+=3)g[b++]=j[tt]<<24|j[tt+1]<<16|j[tt+2]<<8|255}return{srcPos:h,destPos:b}}function _(j,h){if(o.FeatureTest.isLittleEndian)for(let g=0,b=j.length;g<b;g++)h[g]=j[g]*65793|4278190080;else for(let g=0,b=j.length;g<b;g++)h[g]=j[g]*16843008|255}},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var o=s(1);const a={DATA:1,ERROR:2},c={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(j){switch(j instanceof Error||typeof j=="object"&&j!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),j.name){case"AbortException":return new o.AbortException(j.message);case"MissingPDFException":return new o.MissingPDFException(j.message);case"PasswordException":return new o.PasswordException(j.message,j.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(j.message,j.status);case"UnknownErrorException":return new o.UnknownErrorException(j.message,j.details);default:return new o.UnknownErrorException(j.message,j.toString())}}class _{constructor(h,g,b){this.sourceName=h,this.targetName=g,this.comObj=b,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=$=>{const et=$.data;if(et.targetName!==this.sourceName)return;if(et.stream){this.#t(et);return}if(et.callback){const nt=et.callbackId,st=this.callbackCapabilities[nt];if(!st)throw new Error(`Cannot resolve callback ${nt}`);if(delete this.callbackCapabilities[nt],et.callback===a.DATA)st.resolve(et.data);else if(et.callback===a.ERROR)st.reject(d(et.reason));else throw new Error("Unexpected callback case");return}const _e=this.actionHandler[et.action];if(!_e)throw new Error(`Unknown action from worker: ${et.action}`);if(et.callbackId){const nt=this.sourceName,st=et.sourceName;new Promise(function(tt){tt(_e(et.data))}).then(function(tt){b.postMessage({sourceName:nt,targetName:st,callback:a.DATA,callbackId:et.callbackId,data:tt})},function(tt){b.postMessage({sourceName:nt,targetName:st,callback:a.ERROR,callbackId:et.callbackId,reason:d(tt)})});return}if(et.streamId){this.#e(et);return}_e(et.data)},b.addEventListener("message",this._onComObjOnMessage)}on(h,g){const b=this.actionHandler;if(b[h])throw new Error(`There is already an actionName called "${h}"`);b[h]=g}send(h,g,b){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:g},b)}sendWithPromise(h,g,b){const $=this.callbackId++,et=new o.PromiseCapability;this.callbackCapabilities[$]=et;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:$,data:g},b)}catch(_e){et.reject(_e)}return et.promise}sendWithStream(h,g,b,$){const et=this.streamId++,_e=this.sourceName,nt=this.targetName,st=this.comObj;return new ReadableStream({start:tt=>{const it=new o.PromiseCapability;return this.streamControllers[et]={controller:tt,startCall:it,pullCall:null,cancelCall:null,isClosed:!1},st.postMessage({sourceName:_e,targetName:nt,action:h,streamId:et,data:g,desiredSize:tt.desiredSize},$),it.promise},pull:tt=>{const it=new o.PromiseCapability;return this.streamControllers[et].pullCall=it,st.postMessage({sourceName:_e,targetName:nt,stream:c.PULL,streamId:et,desiredSize:tt.desiredSize}),it.promise},cancel:tt=>{(0,o.assert)(tt instanceof Error,"cancel must have a valid reason");const it=new o.PromiseCapability;return this.streamControllers[et].cancelCall=it,this.streamControllers[et].isClosed=!0,st.postMessage({sourceName:_e,targetName:nt,stream:c.CANCEL,streamId:et,reason:d(tt)}),it.promise}},b)}#e(h){const g=h.streamId,b=this.sourceName,$=h.sourceName,et=this.comObj,_e=this,nt=this.actionHandler[h.action],st={enqueue(tt,it=1,at){if(this.isCancelled)return;const ct=this.desiredSize;this.desiredSize-=it,ct>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),et.postMessage({sourceName:b,targetName:$,stream:c.ENQUEUE,streamId:g,chunk:tt},at)},close(){this.isCancelled||(this.isCancelled=!0,et.postMessage({sourceName:b,targetName:$,stream:c.CLOSE,streamId:g}),delete _e.streamSinks[g])},error(tt){(0,o.assert)(tt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,et.postMessage({sourceName:b,targetName:$,stream:c.ERROR,streamId:g,reason:d(tt)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};st.sinkCapability.resolve(),st.ready=st.sinkCapability.promise,this.streamSinks[g]=st,new Promise(function(tt){tt(nt(h.data,st))}).then(function(){et.postMessage({sourceName:b,targetName:$,stream:c.START_COMPLETE,streamId:g,success:!0})},function(tt){et.postMessage({sourceName:b,targetName:$,stream:c.START_COMPLETE,streamId:g,reason:d(tt)})})}#t(h){const g=h.streamId,b=this.sourceName,$=h.sourceName,et=this.comObj,_e=this.streamControllers[g],nt=this.streamSinks[g];switch(h.stream){case c.START_COMPLETE:h.success?_e.startCall.resolve():_e.startCall.reject(d(h.reason));break;case c.PULL_COMPLETE:h.success?_e.pullCall.resolve():_e.pullCall.reject(d(h.reason));break;case c.PULL:if(!nt){et.postMessage({sourceName:b,targetName:$,stream:c.PULL_COMPLETE,streamId:g,success:!0});break}nt.desiredSize<=0&&h.desiredSize>0&&nt.sinkCapability.resolve(),nt.desiredSize=h.desiredSize,new Promise(function(st){st(nt.onPull?.())}).then(function(){et.postMessage({sourceName:b,targetName:$,stream:c.PULL_COMPLETE,streamId:g,success:!0})},function(st){et.postMessage({sourceName:b,targetName:$,stream:c.PULL_COMPLETE,streamId:g,reason:d(st)})});break;case c.ENQUEUE:if((0,o.assert)(_e,"enqueue should have stream controller"),_e.isClosed)break;_e.controller.enqueue(h.chunk);break;case c.CLOSE:if((0,o.assert)(_e,"close should have stream controller"),_e.isClosed)break;_e.isClosed=!0,_e.controller.close(),this.#n(_e,g);break;case c.ERROR:(0,o.assert)(_e,"error should have stream controller"),_e.controller.error(d(h.reason)),this.#n(_e,g);break;case c.CANCEL_COMPLETE:h.success?_e.cancelCall.resolve():_e.cancelCall.reject(d(h.reason)),this.#n(_e,g);break;case c.CANCEL:if(!nt)break;new Promise(function(st){st(nt.onCancel?.(d(h.reason)))}).then(function(){et.postMessage({sourceName:b,targetName:$,stream:c.CANCEL_COMPLETE,streamId:g,success:!0})},function(st){et.postMessage({sourceName:b,targetName:$,stream:c.CANCEL_COMPLETE,streamId:g,reason:d(st)})}),nt.sinkCapability.reject(d(h.reason)),nt.isCancelled=!0,delete this.streamSinks[g];break;default:throw new Error("Unexpected stream case")}}async#n(h,g){await Promise.allSettled([h.startCall?.promise,h.pullCall?.promise,h.cancelCall?.promise]),delete this.streamControllers[g]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var o=s(1);class a{#e;#t;constructor({parsedData:d,rawData:_}){this.#e=d,this.#t=_}getRaw(){return this.#t}get(d){return this.#e.get(d)??null}getAll(){return(0,o.objectFromMap)(this.#e)}has(d){return this.#e.has(d)}}e.Metadata=a},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var o=s(1),a=s(8);const c=Symbol("INTERNAL");class d{#e=!0;constructor(h,g){this.name=h,this.intent=g}get visible(){return this.#e}_setVisible(h,g){h!==c&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#e=g}}class _{#e=null;#t=new Map;#n=null;#i=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#i=h.order;for(const g of h.groups)this.#t.set(g.id,new d(g.name,g.intent));if(h.baseState==="OFF")for(const g of this.#t.values())g._setVisible(c,!1);for(const g of h.on)this.#t.get(g)._setVisible(c,!0);for(const g of h.off)this.#t.get(g)._setVisible(c,!1);this.#n=this.getHash()}}#a(h){const g=h.length;if(g<2)return!0;const b=h[0];for(let $=1;$<g;$++){const et=h[$];let _e;if(Array.isArray(et))_e=this.#a(et);else if(this.#t.has(et))_e=this.#t.get(et).visible;else return(0,o.warn)(`Optional content group not found: ${et}`),!0;switch(b){case"And":if(!_e)return!1;break;case"Or":if(_e)return!0;break;case"Not":return!_e;default:return!0}}return b==="And"}isVisible(h){if(this.#t.size===0)return!0;if(!h)return(0,o.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#t.has(h.id)?this.#t.get(h.id).visible:((0,o.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#a(h.expression);if(!h.policy||h.policy==="AnyOn"){for(const g of h.ids){if(!this.#t.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(this.#t.get(g).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const g of h.ids){if(!this.#t.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(!this.#t.get(g).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const g of h.ids){if(!this.#t.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(!this.#t.get(g).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const g of h.ids){if(!this.#t.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(this.#t.get(g).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,o.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,g=!0){if(!this.#t.has(h)){(0,o.warn)(`Optional content group not found: ${h}`);return}this.#t.get(h)._setVisible(c,!!g),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}getGroup(h){return this.#t.get(h)||null}getHash(){if(this.#e!==null)return this.#e;const h=new a.MurmurHash3_64;for(const[g,b]of this.#t)h.update(`${g}:${b.visible}`);return this.#e=h.hexdigest()}}e.OptionalContentConfig=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var o=s(1),a=s(6);class c{constructor({length:h,initialData:g,progressiveDone:b=!1,contentDispositionFilename:$=null,disableRange:et=!1,disableStream:_e=!1},nt){if((0,o.assert)(nt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=b,this._contentDispositionFilename=$,g?.length>0){const st=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(st)}this._pdfDataRangeTransport=nt,this._isStreamingSupported=!_e,this._isRangeSupported=!et,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((st,tt)=>{this._onReceiveData({begin:st,chunk:tt})}),this._pdfDataRangeTransport.addProgressListener((st,tt)=>{this._onProgress({loaded:st,total:tt})}),this._pdfDataRangeTransport.addProgressiveReadListener(st=>{this._onReceiveData({chunk:st})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:h,chunk:g}){const b=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(b):this._queuedChunks.push(b);else{const $=this._rangeReaders.some(function(et){return et._begin!==h?!1:(et._enqueue(b),!0)});(0,o.assert)($,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(h){h.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:h.loaded}):this._fullRequestReader?.onProgress?.({loaded:h.loaded,total:h.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const g=this._rangeReaders.indexOf(h);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new d(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,g){if(g<=this._progressiveDataLength)return null;const b=new _(this,h,g);return this._pdfDataRangeTransport.requestDataRange(h,g),this._rangeReaders.push(b),b}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const g of this._rangeReaders.slice(0))g.cancel(h);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=c;class d{constructor(h,g,b=!1,$=null){this._stream=h,this._done=b||!1,this._filename=(0,a.isPdfFile)($)?$:null,this._queuedChunks=g||[],this._loaded=0;for(const et of this._queuedChunks)this._loaded+=et.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=new o.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(h,g,b){this._stream=h,this._begin=g,this._end=b,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const h=new o.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var o=s(1),a=s(20);function c(b,$,et){return{method:"GET",headers:b,signal:et.signal,mode:"cors",credentials:$?"include":"same-origin",redirect:"follow"}}function d(b){const $=new Headers;for(const et in b){const _e=b[et];_e!==void 0&&$.append(et,_e)}return $}function _(b){return b instanceof Uint8Array?b.buffer:b instanceof ArrayBuffer?b:((0,o.warn)(`getArrayBuffer - unexpected data format: ${b}`),new Uint8Array(b).buffer)}class j{constructor($){this.source=$,this.isHttp=/^https?:/i.test($.url),this.httpHeaders=this.isHttp&&$.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader($,et){if(et<=this._progressiveDataLength)return null;const _e=new g(this,$,et);return this._rangeRequestReaders.push(_e),_e}cancelAllRequests($){this._fullRequestReader?.cancel($);for(const et of this._rangeRequestReaders.slice(0))et.cancel($)}}e.PDFFetchStream=j;class h{constructor($){this._stream=$,this._reader=null,this._loaded=0,this._filename=null;const et=$.source;this._withCredentials=et.withCredentials||!1,this._contentLength=et.length,this._headersCapability=new o.PromiseCapability,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._headers=d(this._stream.httpHeaders);const _e=et.url;fetch(_e,c(this._headers,this._withCredentials,this._abortController)).then(nt=>{if(!(0,a.validateResponseStatus)(nt.status))throw(0,a.createResponseStatusError)(nt.status,_e);this._reader=nt.body.getReader(),this._headersCapability.resolve();const st=at=>nt.headers.get(at),{allowRangeRequests:tt,suggestedLength:it}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:st,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=tt,this._contentLength=it||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(st),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:$,done:et}=await this._reader.read();return et?{value:$,done:et}:(this._loaded+=$.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:_($),done:!1})}cancel($){this._reader?.cancel($),this._abortController.abort()}}class g{constructor($,et,_e){this._stream=$,this._reader=null,this._loaded=0;const nt=$.source;this._withCredentials=nt.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!nt.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${et}-${_e-1}`);const st=nt.url;fetch(st,c(this._headers,this._withCredentials,this._abortController)).then(tt=>{if(!(0,a.validateResponseStatus)(tt.status))throw(0,a.createResponseStatusError)(tt.status,st);this._readCapability.resolve(),this._reader=tt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:$,done:et}=await this._reader.read();return et?{value:$,done:et}:(this._loaded+=$.byteLength,this.onProgress?.({loaded:this._loaded}),{value:_($),done:!1})}cancel($){this._reader?.cancel($),this._abortController.abort()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=j,e.extractFilenameFromHeader=_,e.validateRangeRequestCapabilities=d,e.validateResponseStatus=h;var o=s(1),a=s(21),c=s(6);function d({getResponseHeader:g,isHttp:b,rangeChunkSize:$,disableRange:et}){const _e={allowRangeRequests:!1,suggestedLength:void 0},nt=parseInt(g("Content-Length"),10);return!Number.isInteger(nt)||(_e.suggestedLength=nt,nt<=2*$)||et||!b||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(_e.allowRangeRequests=!0),_e}function _(g){const b=g("Content-Disposition");if(b){let $=(0,a.getFilenameFromContentDispositionHeader)(b);if($.includes("%"))try{$=decodeURIComponent($)}catch{}if((0,c.isPdfFile)($))return $}return null}function j(g,b){return g===404||g===0&&b.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+b+'".'):new o.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${b}".`,g)}function h(g){return g===200||g===206}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=a;var o=s(1);function a(c){let d=!0,_=j("filename\\*","i").exec(c);if(_){_=_[1];let nt=$(_);return nt=unescape(nt),nt=et(nt),nt=_e(nt),g(nt)}if(_=b(c),_){const nt=_e(_);return g(nt)}if(_=j("filename","i").exec(c),_){_=_[1];let nt=$(_);return nt=_e(nt),g(nt)}function j(nt,st){return new RegExp("(?:^|;)\\s*"+nt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',st)}function h(nt,st){if(nt){if(!/^[\x00-\xFF]+$/.test(st))return st;try{const tt=new TextDecoder(nt,{fatal:!0}),it=(0,o.stringToBytes)(st);st=tt.decode(it),d=!1}catch{}}return st}function g(nt){return d&&/[\x80-\xff]/.test(nt)&&(nt=h("utf-8",nt),d&&(nt=h("iso-8859-1",nt))),nt}function b(nt){const st=[];let tt;const it=j("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(tt=it.exec(nt))!==null;){let[,ct,rt,dt]=tt;if(ct=parseInt(ct,10),ct in st){if(ct===0)break;continue}st[ct]=[rt,dt]}const at=[];for(let ct=0;ct<st.length&&ct in st;++ct){let[rt,dt]=st[ct];dt=$(dt),rt&&(dt=unescape(dt),ct===0&&(dt=et(dt))),at.push(dt)}return at.join("")}function $(nt){if(nt.startsWith('"')){const st=nt.slice(1).split('\\"');for(let tt=0;tt<st.length;++tt){const it=st[tt].indexOf('"');it!==-1&&(st[tt]=st[tt].slice(0,it),st.length=tt+1),st[tt]=st[tt].replaceAll(/\\(.)/g,"$1")}nt=st.join('"')}return nt}function et(nt){const st=nt.indexOf("'");if(st===-1)return nt;const tt=nt.slice(0,st),at=nt.slice(st+1).replace(/^[^']*'/,"");return h(tt,at)}function _e(nt){return!nt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(nt)?nt:nt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(st,tt,it,at){if(it==="q"||it==="Q")return at=at.replaceAll("_"," "),at=at.replaceAll(/=([0-9a-fA-F]{2})/g,function(ct,rt){return String.fromCharCode(parseInt(rt,16))}),h(tt,at);try{at=atob(at)}catch{}return h(tt,at)})}return""}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var o=s(1),a=s(20);const c=200,d=206;function _($){const et=$.response;return typeof et!="string"?et:(0,o.stringToBytes)(et).buffer}class j{constructor(et,_e={}){this.url=et,this.isHttp=/^https?:/i.test(et),this.httpHeaders=this.isHttp&&_e.httpHeaders||Object.create(null),this.withCredentials=_e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(et,_e,nt){const st={begin:et,end:_e};for(const tt in nt)st[tt]=nt[tt];return this.request(st)}requestFull(et){return this.request(et)}request(et){const _e=new XMLHttpRequest,nt=this.currXhrId++,st=this.pendingRequests[nt]={xhr:_e};_e.open("GET",this.url),_e.withCredentials=this.withCredentials;for(const tt in this.httpHeaders){const it=this.httpHeaders[tt];it!==void 0&&_e.setRequestHeader(tt,it)}return this.isHttp&&"begin"in et&&"end"in et?(_e.setRequestHeader("Range",`bytes=${et.begin}-${et.end-1}`),st.expectedStatus=d):st.expectedStatus=c,_e.responseType="arraybuffer",et.onError&&(_e.onerror=function(tt){et.onError(_e.status)}),_e.onreadystatechange=this.onStateChange.bind(this,nt),_e.onprogress=this.onProgress.bind(this,nt),st.onHeadersReceived=et.onHeadersReceived,st.onDone=et.onDone,st.onError=et.onError,st.onProgress=et.onProgress,_e.send(null),nt}onProgress(et,_e){const nt=this.pendingRequests[et];nt&&nt.onProgress?.(_e)}onStateChange(et,_e){const nt=this.pendingRequests[et];if(!nt)return;const st=nt.xhr;if(st.readyState>=2&&nt.onHeadersReceived&&(nt.onHeadersReceived(),delete nt.onHeadersReceived),st.readyState!==4||!(et in this.pendingRequests))return;if(delete this.pendingRequests[et],st.status===0&&this.isHttp){nt.onError?.(st.status);return}const tt=st.status||c;if(!(tt===c&&nt.expectedStatus===d)&&tt!==nt.expectedStatus){nt.onError?.(st.status);return}const at=_(st);if(tt===d){const ct=st.getResponseHeader("Content-Range"),rt=/bytes (\d+)-(\d+)\/(\d+)/.exec(ct);nt.onDone({begin:parseInt(rt[1],10),chunk:at})}else at?nt.onDone({begin:0,chunk:at}):nt.onError?.(st.status)}getRequestXhr(et){return this.pendingRequests[et].xhr}isPendingRequest(et){return et in this.pendingRequests}abortRequest(et){const _e=this.pendingRequests[et].xhr;delete this.pendingRequests[et],_e.abort()}}class h{constructor(et){this._source=et,this._manager=new j(et.url,{httpHeaders:et.httpHeaders,withCredentials:et.withCredentials}),this._rangeChunkSize=et.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(et){const _e=this._rangeRequestReaders.indexOf(et);_e>=0&&this._rangeRequestReaders.splice(_e,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(et,_e){const nt=new b(this._manager,et,_e);return nt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(nt),nt}cancelAllRequests(et){this._fullRequestReader?.cancel(et);for(const _e of this._rangeRequestReaders.slice(0))_e.cancel(et)}}e.PDFNetworkStream=h;class g{constructor(et,_e){this._manager=et;const nt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_e.url,this._fullRequestId=et.requestFull(nt),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=_e.disableRange||!1,this._contentLength=_e.length,this._rangeChunkSize=_e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const et=this._fullRequestId,_e=this._manager.getRequestXhr(et),nt=it=>_e.getResponseHeader(it),{allowRangeRequests:st,suggestedLength:tt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:nt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});st&&(this._isRangeSupported=!0),this._contentLength=tt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(nt),this._isRangeSupported&&this._manager.abortRequest(et),this._headersReceivedCapability.resolve()}_onDone(et){if(et&&(this._requests.length>0?this._requests.shift().resolve({value:et.chunk,done:!1}):this._cachedChunks.push(et.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const _e of this._requests)_e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(et){this._storedError=(0,a.createResponseStatusError)(et,this._url),this._headersReceivedCapability.reject(this._storedError);for(const _e of this._requests)_e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(et){this.onProgress?.({loaded:et.loaded,total:et.lengthComputable?et.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const et=new o.PromiseCapability;return this._requests.push(et),et.promise}cancel(et){this._done=!0,this._headersReceivedCapability.reject(et);for(const _e of this._requests)_e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class b{constructor(et,_e,nt){this._manager=et;const st={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._requestId=et.requestRange(_e,nt,st),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(et){const _e=et.chunk;this._requests.length>0?this._requests.shift().resolve({value:_e,done:!1}):this._queuedChunk=_e,this._done=!0;for(const nt of this._requests)nt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(et){this._storedError=(0,a.createResponseStatusError)(et,this._url);for(const _e of this._requests)_e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(et){this.isStreamingSupported||this.onProgress?.({loaded:et.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const _e=this._queuedChunk;return this._queuedChunk=null,{value:_e,done:!1}}if(this._done)return{value:void 0,done:!0};const et=new o.PromiseCapability;return this._requests.push(et),et.promise}cancel(et){this._done=!0;for(const _e of this._requests)_e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var o=s(1),a=s(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function d(nt){const st=require$$5,tt=st.parse(nt);return tt.protocol==="file:"||tt.host?tt:/^[a-z]:[/\\]/i.test(nt)?st.parse(`file:///${nt}`):(tt.host||(tt.protocol="file:"),tt)}class _{constructor(st){this.source=st,this.url=d(st.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&st.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new et(this):new b(this),this._fullRequestReader}getRangeReader(st,tt){if(tt<=this._progressiveDataLength)return null;const it=this.isFsUrl?new _e(this,st,tt):new $(this,st,tt);return this._rangeRequestReaders.push(it),it}cancelAllRequests(st){this._fullRequestReader?.cancel(st);for(const tt of this._rangeRequestReaders.slice(0))tt.cancel(st)}}e.PDFNodeStream=_;class j{constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null;const tt=st.source;this._contentLength=tt.length,this._loaded=0,this._filename=null,this._disableRange=tt.disableRange||!1,this._rangeChunkSize=tt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!tt.disableStream,this._isRangeSupported=!tt.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=st.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",tt=>{this._error(tt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const tt=st.source;this._isStreamingSupported=!tt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=st.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",tt=>{this._error(tt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(nt,st){return{protocol:nt.protocol,auth:nt.auth,host:nt.hostname,port:nt.port,path:nt.path,method:"GET",headers:st}}class b extends j{constructor(st){super(st);const tt=it=>{if(it.statusCode===404){const dt=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=dt,this._headersCapability.reject(dt);return}this._headersCapability.resolve(),this._setReadableStream(it);const at=dt=>this._readableStream.headers[dt.toLowerCase()],{allowRangeRequests:ct,suggestedLength:rt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:at,isHttp:st.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ct,this._contentLength=rt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(at)};if(this._request=null,this._url.protocol==="http:"){const it=require$$5;this._request=it.request(g(this._url,st.httpHeaders),tt)}else{const it=require$$5;this._request=it.request(g(this._url,st.httpHeaders),tt)}this._request.on("error",it=>{this._storedError=it,this._headersCapability.reject(it)}),this._request.end()}}class $ extends h{constructor(st,tt,it){super(st),this._httpHeaders={};for(const ct in st.httpHeaders){const rt=st.httpHeaders[ct];rt!==void 0&&(this._httpHeaders[ct]=rt)}this._httpHeaders.Range=`bytes=${tt}-${it-1}`;const at=ct=>{if(ct.statusCode===404){const rt=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=rt;return}this._setReadableStream(ct)};if(this._request=null,this._url.protocol==="http:"){const ct=require$$5;this._request=ct.request(g(this._url,this._httpHeaders),at)}else{const ct=require$$5;this._request=ct.request(g(this._url,this._httpHeaders),at)}this._request.on("error",ct=>{this._storedError=ct}),this._request.end()}}class et extends j{constructor(st){super(st);let tt=decodeURIComponent(this._url.path);c.test(this._url.href)&&(tt=tt.replace(/^\//,""));const it=require$$5;it.lstat(tt,(at,ct)=>{if(at){at.code==="ENOENT"&&(at=new o.MissingPDFException(`Missing PDF "${tt}".`)),this._storedError=at,this._headersCapability.reject(at);return}this._contentLength=ct.size,this._setReadableStream(it.createReadStream(tt)),this._headersCapability.resolve()})}}class _e extends h{constructor(st,tt,it){super(st);let at=decodeURIComponent(this._url.path);c.test(this._url.href)&&(at=at.replace(/^\//,""));const ct=require$$5;this._setReadableStream(ct.createReadStream(at,{start:tt,end:it-1}))}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var o=s(6),a=s(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",j=["butt","round","square"],h=["miter","round","bevel"],g=function(ct,rt="",dt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!dt)return URL.createObjectURL(new Blob([ct],{type:rt}));const yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let vt=`data:${rt};base64,`;for(let gt=0,At=ct.length;gt<At;gt+=3){const Vt=ct[gt]&255,Nt=ct[gt+1]&255,It=ct[gt+2]&255,Lt=Vt>>2,zt=(Vt&3)<<4|Nt>>4,Ft=gt+1<At?(Nt&15)<<2|It>>6:64,Tt=gt+2<At?It&63:64;vt+=yt[Lt]+yt[zt]+yt[Ft]+yt[Tt]}return vt},b=function(){const ct=new Uint8Array([137,80,78,71,13,10,26,10]),rt=12,dt=new Int32Array(256);for(let It=0;It<256;It++){let Lt=It;for(let zt=0;zt<8;zt++)Lt=Lt&1?3988292384^Lt>>1&2147483647:Lt>>1&2147483647;dt[It]=Lt}function yt(It,Lt,zt){let Ft=-1;for(let Tt=Lt;Tt<zt;Tt++){const ht=(Ft^It[Tt])&255,lt=dt[ht];Ft=Ft>>>8^lt}return Ft^-1}function vt(It,Lt,zt,Ft){let Tt=Ft;const ht=Lt.length;zt[Tt]=ht>>24&255,zt[Tt+1]=ht>>16&255,zt[Tt+2]=ht>>8&255,zt[Tt+3]=ht&255,Tt+=4,zt[Tt]=It.charCodeAt(0)&255,zt[Tt+1]=It.charCodeAt(1)&255,zt[Tt+2]=It.charCodeAt(2)&255,zt[Tt+3]=It.charCodeAt(3)&255,Tt+=4,zt.set(Lt,Tt),Tt+=Lt.length;const lt=yt(zt,Ft+4,Tt);zt[Tt]=lt>>24&255,zt[Tt+1]=lt>>16&255,zt[Tt+2]=lt>>8&255,zt[Tt+3]=lt&255}function gt(It,Lt,zt){let Ft=1,Tt=0;for(let ht=Lt;ht<zt;++ht)Ft=(Ft+(It[ht]&255))%65521,Tt=(Tt+Ft)%65521;return Tt<<16|Ft}function At(It){if(!a.isNodeJS)return Vt(It);try{const Lt=parseInt(process.versions.node)>=8?It:Buffer.from(It),zt=require$$5.deflateSync(Lt,{level:9});return zt instanceof Uint8Array?zt:new Uint8Array(zt)}catch(Lt){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Lt)}return Vt(It)}function Vt(It){let Lt=It.length;const zt=65535,Ft=Math.ceil(Lt/zt),Tt=new Uint8Array(2+Lt+Ft*5+4);let ht=0;Tt[ht++]=120,Tt[ht++]=156;let lt=0;for(;Lt>zt;)Tt[ht++]=0,Tt[ht++]=255,Tt[ht++]=255,Tt[ht++]=0,Tt[ht++]=0,Tt.set(It.subarray(lt,lt+zt),ht),ht+=zt,lt+=zt,Lt-=zt;Tt[ht++]=1,Tt[ht++]=Lt&255,Tt[ht++]=Lt>>8&255,Tt[ht++]=~Lt&65535&255,Tt[ht++]=(~Lt&65535)>>8&255,Tt.set(It.subarray(lt),ht),ht+=It.length-lt;const ut=gt(It,0,It.length);return Tt[ht++]=ut>>24&255,Tt[ht++]=ut>>16&255,Tt[ht++]=ut>>8&255,Tt[ht++]=ut&255,Tt}function Nt(It,Lt,zt,Ft){const Tt=It.width,ht=It.height;let lt,ut,pt;const Et=It.data;switch(Lt){case a.ImageKind.GRAYSCALE_1BPP:ut=0,lt=1,pt=Tt+7>>3;break;case a.ImageKind.RGB_24BPP:ut=2,lt=8,pt=Tt*3;break;case a.ImageKind.RGBA_32BPP:ut=6,lt=8,pt=Tt*4;break;default:throw new Error("invalid format")}const St=new Uint8Array((1+pt)*ht);let Ct=0,Pt=0;for(let wt=0;wt<ht;++wt)St[Ct++]=0,St.set(Et.subarray(Pt,Pt+pt),Ct),Pt+=pt,Ct+=pt;if(Lt===a.ImageKind.GRAYSCALE_1BPP&&Ft){Ct=0;for(let wt=0;wt<ht;wt++){Ct++;for(let Bt=0;Bt<pt;Bt++)St[Ct++]^=255}}const ot=new Uint8Array([Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255,ht>>24&255,ht>>16&255,ht>>8&255,ht&255,lt,ut,0,0,0]),ft=At(St),mt=ct.length+rt*3+ot.length+ft.length,_t=new Uint8Array(mt);let xt=0;return _t.set(ct,xt),xt+=ct.length,vt("IHDR",ot,_t,xt),xt+=rt+ot.length,vt("IDATA",ft,_t,xt),xt+=rt+ft.length,vt("IEND",new Uint8Array(0),_t,xt),g(_t,"image/png",zt)}return function(Lt,zt,Ft){const Tt=Lt.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:Lt.kind;return Nt(Lt,Tt,zt,Ft)}}();class ${constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(rt,dt){this.x=rt,this.y=dt}}function et(ct){let rt=[];const dt=[];for(const yt of ct){if(yt.fn==="save"){rt.push({fnId:92,fn:"group",items:[]}),dt.push(rt),rt=rt.at(-1).items;continue}yt.fn==="restore"?rt=dt.pop():rt.push(yt)}return rt}function _e(ct){if(Number.isInteger(ct))return ct.toString();const rt=ct.toFixed(10);let dt=rt.length-1;if(rt[dt]!=="0")return rt;do dt--;while(rt[dt]==="0");return rt.substring(0,rt[dt]==="."?dt:dt+1)}function nt(ct){if(ct[4]===0&&ct[5]===0){if(ct[1]===0&&ct[2]===0)return ct[0]===1&&ct[3]===1?"":`scale(${_e(ct[0])} ${_e(ct[3])})`;if(ct[0]===ct[3]&&ct[1]===-ct[2]){const rt=Math.acos(ct[0])*180/Math.PI;return`rotate(${_e(rt)})`}}else if(ct[0]===1&&ct[1]===0&&ct[2]===0&&ct[3]===1)return`translate(${_e(ct[4])} ${_e(ct[5])})`;return`matrix(${_e(ct[0])} ${_e(ct[1])} ${_e(ct[2])} ${_e(ct[3])} ${_e(ct[4])} ${_e(ct[5])})`}let st=0,tt=0,it=0;class at{constructor(rt,dt,yt=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new $,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=rt,this.objs=dt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!yt,this._operatorIdMapping=[];for(const vt in a.OPS)this._operatorIdMapping[a.OPS[vt]]=vt}getObject(rt,dt=null){return typeof rt=="string"?rt.startsWith("g_")?this.commonObjs.get(rt):this.objs.get(rt):dt}save(){this.transformStack.push(this.transformMatrix);const rt=this.current;this.extraStack.push(rt),this.current=rt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(rt){this.save(),this.executeOpTree(rt),this.restore()}loadDependencies(rt){const dt=rt.fnArray,yt=rt.argsArray;for(let vt=0,gt=dt.length;vt<gt;vt++)if(dt[vt]===a.OPS.dependency)for(const At of yt[vt]){const Vt=At.startsWith("g_")?this.commonObjs:this.objs,Nt=new Promise(It=>{Vt.get(At,It)});this.current.dependencies.push(Nt)}return Promise.all(this.current.dependencies)}transform(rt,dt,yt,vt,gt,At){const Vt=[rt,dt,yt,vt,gt,At];this.transformMatrix=a.Util.transform(this.transformMatrix,Vt),this.tgrp=null}getSVG(rt,dt){this.viewport=dt;const yt=this._initialize(dt);return this.loadDependencies(rt).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(rt)),yt))}convertOpList(rt){const dt=this._operatorIdMapping,yt=rt.argsArray,vt=rt.fnArray,gt=[];for(let At=0,Vt=vt.length;At<Vt;At++){const Nt=vt[At];gt.push({fnId:Nt,fn:dt[Nt],args:yt[At]})}return et(gt)}executeOpTree(rt){for(const dt of rt){const yt=dt.fn,vt=dt.fnId,gt=dt.args;switch(vt|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(gt);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(gt[0],gt[1]);break;case a.OPS.setFont:this.setFont(gt);break;case a.OPS.showText:this.showText(gt[0]);break;case a.OPS.showSpacedText:this.showText(gt[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(gt[0],gt[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(gt[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(gt[0]);break;case a.OPS.setHScale:this.setHScale(gt[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5]);break;case a.OPS.setTextRise:this.setTextRise(gt[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(gt[0]);break;case a.OPS.setLineWidth:this.setLineWidth(gt[0]);break;case a.OPS.setLineJoin:this.setLineJoin(gt[0]);break;case a.OPS.setLineCap:this.setLineCap(gt[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(gt[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(gt[0],gt[1],gt[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(gt[0],gt[1],gt[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(gt);break;case a.OPS.setFillColorN:this.setFillColorN(gt);break;case a.OPS.shadingFill:this.shadingFill(gt[0]);break;case a.OPS.setDash:this.setDash(gt[0],gt[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(gt[0]);break;case a.OPS.setFlatness:this.setFlatness(gt[0]);break;case a.OPS.setGState:this.setGState(gt[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(gt[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(gt[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(gt[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(gt[0],gt[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5]);break;case a.OPS.constructPath:this.constructPath(gt[0],gt[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(dt.items);break;default:(0,a.warn)(`Unimplemented operator ${yt}`);break}}}setWordSpacing(rt){this.current.wordSpacing=rt}setCharSpacing(rt){this.current.charSpacing=rt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(rt,dt,yt,vt,gt,At){const Vt=this.current;Vt.textMatrix=Vt.lineMatrix=[rt,dt,yt,vt,gt,At],Vt.textMatrixScale=Math.hypot(rt,dt),Vt.x=Vt.lineX=0,Vt.y=Vt.lineY=0,Vt.xcoords=[],Vt.ycoords=[],Vt.tspan=this.svgFactory.createElement("svg:tspan"),Vt.tspan.setAttributeNS(null,"font-family",Vt.fontFamily),Vt.tspan.setAttributeNS(null,"font-size",`${_e(Vt.fontSize)}px`),Vt.tspan.setAttributeNS(null,"y",_e(-Vt.y)),Vt.txtElement=this.svgFactory.createElement("svg:text"),Vt.txtElement.append(Vt.tspan)}beginText(){const rt=this.current;rt.x=rt.lineX=0,rt.y=rt.lineY=0,rt.textMatrix=a.IDENTITY_MATRIX,rt.lineMatrix=a.IDENTITY_MATRIX,rt.textMatrixScale=1,rt.tspan=this.svgFactory.createElement("svg:tspan"),rt.txtElement=this.svgFactory.createElement("svg:text"),rt.txtgrp=this.svgFactory.createElement("svg:g"),rt.xcoords=[],rt.ycoords=[]}moveText(rt,dt){const yt=this.current;yt.x=yt.lineX+=rt,yt.y=yt.lineY+=dt,yt.xcoords=[],yt.ycoords=[],yt.tspan=this.svgFactory.createElement("svg:tspan"),yt.tspan.setAttributeNS(null,"font-family",yt.fontFamily),yt.tspan.setAttributeNS(null,"font-size",`${_e(yt.fontSize)}px`),yt.tspan.setAttributeNS(null,"y",_e(-yt.y))}showText(rt){const dt=this.current,yt=dt.font,vt=dt.fontSize;if(vt===0)return;const gt=dt.fontSizeScale,At=dt.charSpacing,Vt=dt.wordSpacing,Nt=dt.fontDirection,It=dt.textHScale*Nt,Lt=yt.vertical,zt=Lt?1:-1,Ft=yt.defaultVMetrics,Tt=vt*dt.fontMatrix[0];let ht=0;for(const pt of rt){if(pt===null){ht+=Nt*Vt;continue}else if(typeof pt=="number"){ht+=zt*pt*vt/1e3;continue}const Et=(pt.isSpace?Vt:0)+At,St=pt.fontChar;let Ct,Pt,ot=pt.width;if(Lt){let mt;const _t=pt.vmetric||Ft;mt=pt.vmetric?_t[1]:ot*.5,mt=-mt*Tt;const xt=_t[2]*Tt;ot=_t?-_t[0]:ot,Ct=mt/gt,Pt=(ht+xt)/gt}else Ct=ht/gt,Pt=0;(pt.isInFont||yt.missingFile)&&(dt.xcoords.push(dt.x+Ct),Lt&&dt.ycoords.push(-dt.y+Pt),dt.tspan.textContent+=St);const ft=Lt?ot*Tt-Et*Nt:ot*Tt+Et*Nt;ht+=ft}dt.tspan.setAttributeNS(null,"x",dt.xcoords.map(_e).join(" ")),Lt?dt.tspan.setAttributeNS(null,"y",dt.ycoords.map(_e).join(" ")):dt.tspan.setAttributeNS(null,"y",_e(-dt.y)),Lt?dt.y-=ht:dt.x+=ht*It,dt.tspan.setAttributeNS(null,"font-family",dt.fontFamily),dt.tspan.setAttributeNS(null,"font-size",`${_e(dt.fontSize)}px`),dt.fontStyle!==c.fontStyle&&dt.tspan.setAttributeNS(null,"font-style",dt.fontStyle),dt.fontWeight!==c.fontWeight&&dt.tspan.setAttributeNS(null,"font-weight",dt.fontWeight);const lt=dt.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(lt===a.TextRenderingMode.FILL||lt===a.TextRenderingMode.FILL_STROKE?(dt.fillColor!==c.fillColor&&dt.tspan.setAttributeNS(null,"fill",dt.fillColor),dt.fillAlpha<1&&dt.tspan.setAttributeNS(null,"fill-opacity",dt.fillAlpha)):dt.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?dt.tspan.setAttributeNS(null,"fill","transparent"):dt.tspan.setAttributeNS(null,"fill","none"),lt===a.TextRenderingMode.STROKE||lt===a.TextRenderingMode.FILL_STROKE){const pt=1/(dt.textMatrixScale||1);this._setStrokeAttributes(dt.tspan,pt)}let ut=dt.textMatrix;dt.textRise!==0&&(ut=ut.slice(),ut[5]+=dt.textRise),dt.txtElement.setAttributeNS(null,"transform",`${nt(ut)} scale(${_e(It)}, -1)`),dt.txtElement.setAttributeNS(d,"xml:space","preserve"),dt.txtElement.append(dt.tspan),dt.txtgrp.append(dt.txtElement),this._ensureTransformGroup().append(dt.txtElement)}setLeadingMoveText(rt,dt){this.setLeading(-dt),this.moveText(rt,dt)}addFontStyle(rt){if(!rt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const dt=g(rt.data,rt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${rt.loadedName}"; src: url(${dt}); }
`}setFont(rt){const dt=this.current,yt=this.commonObjs.get(rt[0]);let vt=rt[1];dt.font=yt,this.embedFonts&&!yt.missingFile&&!this.embeddedFonts[yt.loadedName]&&(this.addFontStyle(yt),this.embeddedFonts[yt.loadedName]=yt),dt.fontMatrix=yt.fontMatrix||a.FONT_IDENTITY_MATRIX;let gt="normal";yt.black?gt="900":yt.bold&&(gt="bold");const At=yt.italic?"italic":"normal";vt<0?(vt=-vt,dt.fontDirection=-1):dt.fontDirection=1,dt.fontSize=vt,dt.fontFamily=yt.loadedName,dt.fontWeight=gt,dt.fontStyle=At,dt.tspan=this.svgFactory.createElement("svg:tspan"),dt.tspan.setAttributeNS(null,"y",_e(-dt.y)),dt.xcoords=[],dt.ycoords=[]}endText(){const rt=this.current;rt.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&rt.txtElement?.hasChildNodes()&&(rt.element=rt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(rt){rt>0&&(this.current.lineWidth=rt)}setLineCap(rt){this.current.lineCap=j[rt]}setLineJoin(rt){this.current.lineJoin=h[rt]}setMiterLimit(rt){this.current.miterLimit=rt}setStrokeAlpha(rt){this.current.strokeAlpha=rt}setStrokeRGBColor(rt,dt,yt){this.current.strokeColor=a.Util.makeHexColor(rt,dt,yt)}setFillAlpha(rt){this.current.fillAlpha=rt}setFillRGBColor(rt,dt,yt){this.current.fillColor=a.Util.makeHexColor(rt,dt,yt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(rt){this.current.strokeColor=this._makeColorN_Pattern(rt)}setFillColorN(rt){this.current.fillColor=this._makeColorN_Pattern(rt)}shadingFill(rt){const{width:dt,height:yt}=this.viewport,vt=a.Util.inverseTransform(this.transformMatrix),[gt,At,Vt,Nt]=a.Util.getAxialAlignedBoundingBox([0,0,dt,yt],vt),It=this.svgFactory.createElement("svg:rect");It.setAttributeNS(null,"x",gt),It.setAttributeNS(null,"y",At),It.setAttributeNS(null,"width",Vt-gt),It.setAttributeNS(null,"height",Nt-At),It.setAttributeNS(null,"fill",this._makeShadingPattern(rt)),this.current.fillAlpha<1&&It.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(It)}_makeColorN_Pattern(rt){return rt[0]==="TilingPattern"?this._makeTilingPattern(rt):this._makeShadingPattern(rt)}_makeTilingPattern(rt){const dt=rt[1],yt=rt[2],vt=rt[3]||a.IDENTITY_MATRIX,[gt,At,Vt,Nt]=rt[4],It=rt[5],Lt=rt[6],zt=rt[7],Ft=`shading${it++}`,[Tt,ht,lt,ut]=a.Util.normalizeRect([...a.Util.applyTransform([gt,At],vt),...a.Util.applyTransform([Vt,Nt],vt)]),[pt,Et]=a.Util.singularValueDecompose2dScale(vt),St=It*pt,Ct=Lt*Et,Pt=this.svgFactory.createElement("svg:pattern");Pt.setAttributeNS(null,"id",Ft),Pt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Pt.setAttributeNS(null,"width",St),Pt.setAttributeNS(null,"height",Ct),Pt.setAttributeNS(null,"x",`${Tt}`),Pt.setAttributeNS(null,"y",`${ht}`);const ot=this.svg,ft=this.transformMatrix,mt=this.current.fillColor,_t=this.current.strokeColor,xt=this.svgFactory.create(lt-Tt,ut-ht);if(this.svg=xt,this.transformMatrix=vt,zt===2){const wt=a.Util.makeHexColor(...dt);this.current.fillColor=wt,this.current.strokeColor=wt}return this.executeOpTree(this.convertOpList(yt)),this.svg=ot,this.transformMatrix=ft,this.current.fillColor=mt,this.current.strokeColor=_t,Pt.append(xt.childNodes[0]),this.defs.append(Pt),`url(#${Ft})`}_makeShadingPattern(rt){switch(typeof rt=="string"&&(rt=this.objs.get(rt)),rt[0]){case"RadialAxial":const dt=`shading${it++}`,yt=rt[3];let vt;switch(rt[1]){case"axial":const gt=rt[4],At=rt[5];vt=this.svgFactory.createElement("svg:linearGradient"),vt.setAttributeNS(null,"id",dt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"x1",gt[0]),vt.setAttributeNS(null,"y1",gt[1]),vt.setAttributeNS(null,"x2",At[0]),vt.setAttributeNS(null,"y2",At[1]);break;case"radial":const Vt=rt[4],Nt=rt[5],It=rt[6],Lt=rt[7];vt=this.svgFactory.createElement("svg:radialGradient"),vt.setAttributeNS(null,"id",dt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"cx",Nt[0]),vt.setAttributeNS(null,"cy",Nt[1]),vt.setAttributeNS(null,"r",Lt),vt.setAttributeNS(null,"fx",Vt[0]),vt.setAttributeNS(null,"fy",Vt[1]),vt.setAttributeNS(null,"fr",It);break;default:throw new Error(`Unknown RadialAxial type: ${rt[1]}`)}for(const gt of yt){const At=this.svgFactory.createElement("svg:stop");At.setAttributeNS(null,"offset",gt[0]),At.setAttributeNS(null,"stop-color",gt[1]),vt.append(At)}return this.defs.append(vt),`url(#${dt})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${rt[0]}`)}}setDash(rt,dt){this.current.dashArray=rt,this.current.dashPhase=dt}constructPath(rt,dt){const yt=this.current;let vt=yt.x,gt=yt.y,At=[],Vt=0;for(const Nt of rt)switch(Nt|0){case a.OPS.rectangle:vt=dt[Vt++],gt=dt[Vt++];const It=dt[Vt++],Lt=dt[Vt++],zt=vt+It,Ft=gt+Lt;At.push("M",_e(vt),_e(gt),"L",_e(zt),_e(gt),"L",_e(zt),_e(Ft),"L",_e(vt),_e(Ft),"Z");break;case a.OPS.moveTo:vt=dt[Vt++],gt=dt[Vt++],At.push("M",_e(vt),_e(gt));break;case a.OPS.lineTo:vt=dt[Vt++],gt=dt[Vt++],At.push("L",_e(vt),_e(gt));break;case a.OPS.curveTo:vt=dt[Vt+4],gt=dt[Vt+5],At.push("C",_e(dt[Vt]),_e(dt[Vt+1]),_e(dt[Vt+2]),_e(dt[Vt+3]),_e(vt),_e(gt)),Vt+=6;break;case a.OPS.curveTo2:At.push("C",_e(vt),_e(gt),_e(dt[Vt]),_e(dt[Vt+1]),_e(dt[Vt+2]),_e(dt[Vt+3])),vt=dt[Vt+2],gt=dt[Vt+3],Vt+=4;break;case a.OPS.curveTo3:vt=dt[Vt+2],gt=dt[Vt+3],At.push("C",_e(dt[Vt]),_e(dt[Vt+1]),_e(vt),_e(gt),_e(vt),_e(gt)),Vt+=4;break;case a.OPS.closePath:At.push("Z");break}At=At.join(" "),yt.path&&rt.length>0&&rt[0]!==a.OPS.rectangle&&rt[0]!==a.OPS.moveTo?At=yt.path.getAttributeNS(null,"d")+At:(yt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(yt.path)),yt.path.setAttributeNS(null,"d",At),yt.path.setAttributeNS(null,"fill","none"),yt.element=yt.path,yt.setCurrentPoint(vt,gt)}endPath(){const rt=this.current;if(rt.path=null,!this.pendingClip)return;if(!rt.element){this.pendingClip=null;return}const dt=`clippath${st++}`,yt=this.svgFactory.createElement("svg:clipPath");yt.setAttributeNS(null,"id",dt),yt.setAttributeNS(null,"transform",nt(this.transformMatrix));const vt=rt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?vt.setAttributeNS(null,"clip-rule","evenodd"):vt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,yt.append(vt),this.defs.append(yt),rt.activeClipUrl){rt.clipGroup=null;for(const gt of this.extraStack)gt.clipGroup=null;yt.setAttributeNS(null,"clip-path",rt.activeClipUrl)}rt.activeClipUrl=`url(#${dt})`,this.tgrp=null}clip(rt){this.pendingClip=rt}closePath(){const rt=this.current;if(rt.path){const dt=`${rt.path.getAttributeNS(null,"d")}Z`;rt.path.setAttributeNS(null,"d",dt)}}setLeading(rt){this.current.leading=-rt}setTextRise(rt){this.current.textRise=rt}setTextRenderingMode(rt){this.current.textRenderingMode=rt}setHScale(rt){this.current.textHScale=rt/100}setRenderingIntent(rt){}setFlatness(rt){}setGState(rt){for(const[dt,yt]of rt)switch(dt){case"LW":this.setLineWidth(yt);break;case"LC":this.setLineCap(yt);break;case"LJ":this.setLineJoin(yt);break;case"ML":this.setMiterLimit(yt);break;case"D":this.setDash(yt[0],yt[1]);break;case"RI":this.setRenderingIntent(yt);break;case"FL":this.setFlatness(yt);break;case"Font":this.setFont(yt);break;case"CA":this.setStrokeAlpha(yt);break;case"ca":this.setFillAlpha(yt);break;default:(0,a.warn)(`Unimplemented graphic state operator ${dt}`);break}}fill(){const rt=this.current;rt.element&&(rt.element.setAttributeNS(null,"fill",rt.fillColor),rt.element.setAttributeNS(null,"fill-opacity",rt.fillAlpha),this.endPath())}stroke(){const rt=this.current;rt.element&&(this._setStrokeAttributes(rt.element),rt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(rt,dt=1){const yt=this.current;let vt=yt.dashArray;dt!==1&&vt.length>0&&(vt=vt.map(function(gt){return dt*gt})),rt.setAttributeNS(null,"stroke",yt.strokeColor),rt.setAttributeNS(null,"stroke-opacity",yt.strokeAlpha),rt.setAttributeNS(null,"stroke-miterlimit",_e(yt.miterLimit)),rt.setAttributeNS(null,"stroke-linecap",yt.lineCap),rt.setAttributeNS(null,"stroke-linejoin",yt.lineJoin),rt.setAttributeNS(null,"stroke-width",_e(dt*yt.lineWidth)+"px"),rt.setAttributeNS(null,"stroke-dasharray",vt.map(_e).join(" ")),rt.setAttributeNS(null,"stroke-dashoffset",_e(dt*yt.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const rt=this.svgFactory.createElement("svg:rect");rt.setAttributeNS(null,"x","0"),rt.setAttributeNS(null,"y","0"),rt.setAttributeNS(null,"width","1px"),rt.setAttributeNS(null,"height","1px"),rt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(rt)}paintImageXObject(rt){const dt=this.getObject(rt);if(!dt){(0,a.warn)(`Dependent image with object ID ${rt} is not ready yet`);return}this.paintInlineImageXObject(dt)}paintInlineImageXObject(rt,dt){const yt=rt.width,vt=rt.height,gt=b(rt,this.forceDataSchema,!!dt),At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x","0"),At.setAttributeNS(null,"y","0"),At.setAttributeNS(null,"width",_e(yt)),At.setAttributeNS(null,"height",_e(vt)),this.current.element=At,this.clip("nonzero");const Vt=this.svgFactory.createElement("svg:image");Vt.setAttributeNS(_,"xlink:href",gt),Vt.setAttributeNS(null,"x","0"),Vt.setAttributeNS(null,"y",_e(-vt)),Vt.setAttributeNS(null,"width",_e(yt)+"px"),Vt.setAttributeNS(null,"height",_e(vt)+"px"),Vt.setAttributeNS(null,"transform",`scale(${_e(1/yt)} ${_e(-1/vt)})`),dt?dt.append(Vt):this._ensureTransformGroup().append(Vt)}paintImageMaskXObject(rt){const dt=this.getObject(rt.data,rt);if(dt.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const yt=this.current,vt=dt.width,gt=dt.height,At=yt.fillColor;yt.maskId=`mask${tt++}`;const Vt=this.svgFactory.createElement("svg:mask");Vt.setAttributeNS(null,"id",yt.maskId);const Nt=this.svgFactory.createElement("svg:rect");Nt.setAttributeNS(null,"x","0"),Nt.setAttributeNS(null,"y","0"),Nt.setAttributeNS(null,"width",_e(vt)),Nt.setAttributeNS(null,"height",_e(gt)),Nt.setAttributeNS(null,"fill",At),Nt.setAttributeNS(null,"mask",`url(#${yt.maskId})`),this.defs.append(Vt),this._ensureTransformGroup().append(Nt),this.paintInlineImageXObject(dt,Vt)}paintFormXObjectBegin(rt,dt){if(Array.isArray(rt)&&rt.length===6&&this.transform(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5]),dt){const yt=dt[2]-dt[0],vt=dt[3]-dt[1],gt=this.svgFactory.createElement("svg:rect");gt.setAttributeNS(null,"x",dt[0]),gt.setAttributeNS(null,"y",dt[1]),gt.setAttributeNS(null,"width",_e(yt)),gt.setAttributeNS(null,"height",_e(vt)),this.current.element=gt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(rt){const dt=this.svgFactory.create(rt.width,rt.height),yt=this.svgFactory.createElement("svg:defs");dt.append(yt),this.defs=yt;const vt=this.svgFactory.createElement("svg:g");return vt.setAttributeNS(null,"transform",nt(rt.transform)),dt.append(vt),this.svg=vt,dt}_ensureClipGroup(){if(!this.current.clipGroup){const rt=this.svgFactory.createElement("svg:g");rt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(rt),this.current.clipGroup=rt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",nt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=at},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(a){const c=[],d={items:c,styles:Object.create(null)};function _(j){if(!j)return;let h=null;const g=j.name;if(g==="#text")h=j.value;else if(s.shouldBuildText(g))j?.attributes?.textContent?h=j.attributes.textContent:j.value&&(h=j.value);else return;if(h!==null&&c.push({str:h}),!!j.children)for(const b of j.children)_(b)}return _(a),d}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}e.XfaText=s},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=nt,e.updateTextLayer=st;var o=s(1),a=s(6);const c=1e5,d=30,_=.8,j=new Map;function h(tt,it){let at;if(it&&o.FeatureTest.isOffscreenCanvasSupported)at=new OffscreenCanvas(tt,tt).getContext("2d",{alpha:!1});else{const ct=document.createElement("canvas");ct.width=ct.height=tt,at=ct.getContext("2d",{alpha:!1})}return at}function g(tt,it){const at=j.get(tt);if(at)return at;const ct=h(d,it);ct.font=`${d}px ${tt}`;const rt=ct.measureText("");let dt=rt.fontBoundingBoxAscent,yt=Math.abs(rt.fontBoundingBoxDescent);if(dt){const gt=dt/(dt+yt);return j.set(tt,gt),ct.canvas.width=ct.canvas.height=0,gt}ct.strokeStyle="red",ct.clearRect(0,0,d,d),ct.strokeText("g",0,0);let vt=ct.getImageData(0,0,d,d).data;yt=0;for(let gt=vt.length-1-3;gt>=0;gt-=4)if(vt[gt]>0){yt=Math.ceil(gt/4/d);break}ct.clearRect(0,0,d,d),ct.strokeText("A",0,d),vt=ct.getImageData(0,0,d,d).data,dt=0;for(let gt=0,At=vt.length;gt<At;gt+=4)if(vt[gt]>0){dt=d-Math.floor(gt/4/d);break}if(ct.canvas.width=ct.canvas.height=0,dt){const gt=dt/(dt+yt);return j.set(tt,gt),gt}return j.set(tt,_),_}function b(tt,it,at){const ct=document.createElement("span"),rt={angle:0,canvasWidth:0,hasText:it.str!=="",hasEOL:it.hasEOL,fontSize:0};tt._textDivs.push(ct);const dt=o.Util.transform(tt._transform,it.transform);let yt=Math.atan2(dt[1],dt[0]);const vt=at[it.fontName];vt.vertical&&(yt+=Math.PI/2);const gt=Math.hypot(dt[2],dt[3]),At=gt*g(vt.fontFamily,tt._isOffscreenCanvasSupported);let Vt,Nt;yt===0?(Vt=dt[4],Nt=dt[5]-At):(Vt=dt[4]+At*Math.sin(yt),Nt=dt[5]-At*Math.cos(yt));const It="calc(var(--scale-factor)*",Lt=ct.style;tt._container===tt._rootContainer?(Lt.left=`${(100*Vt/tt._pageWidth).toFixed(2)}%`,Lt.top=`${(100*Nt/tt._pageHeight).toFixed(2)}%`):(Lt.left=`${It}${Vt.toFixed(2)}px)`,Lt.top=`${It}${Nt.toFixed(2)}px)`),Lt.fontSize=`${It}${gt.toFixed(2)}px)`,Lt.fontFamily=vt.fontFamily,rt.fontSize=gt,ct.setAttribute("role","presentation"),ct.textContent=it.str,ct.dir=it.dir,tt._fontInspectorEnabled&&(ct.dataset.fontName=it.fontName),yt!==0&&(rt.angle=yt*(180/Math.PI));let zt=!1;if(it.str.length>1)zt=!0;else if(it.str!==" "&&it.transform[0]!==it.transform[3]){const Ft=Math.abs(it.transform[0]),Tt=Math.abs(it.transform[3]);Ft!==Tt&&Math.max(Ft,Tt)/Math.min(Ft,Tt)>1.5&&(zt=!0)}zt&&(rt.canvasWidth=vt.vertical?it.height:it.width),tt._textDivProperties.set(ct,rt),tt._isReadableStream&&tt._layoutText(ct)}function $(tt){const{div:it,scale:at,properties:ct,ctx:rt,prevFontSize:dt,prevFontFamily:yt}=tt,{style:vt}=it;let gt="";if(ct.canvasWidth!==0&&ct.hasText){const{fontFamily:At}=vt,{canvasWidth:Vt,fontSize:Nt}=ct;(dt!==Nt||yt!==At)&&(rt.font=`${Nt*at}px ${At}`,tt.prevFontSize=Nt,tt.prevFontFamily=At);const{width:It}=rt.measureText(it.textContent);It>0&&(gt=`scaleX(${Vt*at/It})`)}ct.angle!==0&&(gt=`rotate(${ct.angle}deg) ${gt}`),gt.length>0&&(vt.transform=gt)}function et(tt){if(tt._canceled)return;const it=tt._textDivs,at=tt._capability;if(it.length>c){at.resolve();return}if(!tt._isReadableStream)for(const rt of it)tt._layoutText(rt);at.resolve()}class _e{constructor({textContentSource:it,container:at,viewport:ct,textDivs:rt,textDivProperties:dt,textContentItemsStr:yt,isOffscreenCanvasSupported:vt}){this._textContentSource=it,this._isReadableStream=it instanceof ReadableStream,this._container=this._rootContainer=at,this._textDivs=rt||[],this._textContentItemsStr=yt||[],this._isOffscreenCanvasSupported=vt,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=dt||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:ct.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,vt)};const{pageWidth:gt,pageHeight:At,pageX:Vt,pageY:Nt}=ct.rawDims;this._transform=[1,0,0,-1,-Vt,Nt+At],this._pageWidth=gt,this._pageHeight=At,(0,a.setLayerDimensions)(at,ct),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(it,at){for(const ct of it){if(ct.str===void 0){if(ct.type==="beginMarkedContentProps"||ct.type==="beginMarkedContent"){const rt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),ct.id!==null&&this._container.setAttribute("id",`${ct.id}`),rt.append(this._container)}else ct.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(ct.str),b(this,ct,at)}}_layoutText(it){const at=this._layoutTextParams.properties=this._textDivProperties.get(it);if(this._layoutTextParams.div=it,$(this._layoutTextParams),at.hasText&&this._container.append(it),at.hasEOL){const ct=document.createElement("br");ct.setAttribute("role","presentation"),this._container.append(ct)}}_render(){const it=new o.PromiseCapability;let at=Object.create(null);if(this._isReadableStream){const ct=()=>{this._reader.read().then(({value:rt,done:dt})=>{if(dt){it.resolve();return}Object.assign(at,rt.styles),this._processItems(rt.items,at),ct()},it.reject)};this._reader=this._textContentSource.getReader(),ct()}else if(this._textContentSource){const{items:ct,styles:rt}=this._textContentSource;this._processItems(ct,rt),it.resolve()}else throw new Error('No "textContentSource" parameter specified.');it.promise.then(()=>{at=null,et(this)},this._capability.reject)}}e.TextLayerRenderTask=_e;function nt(tt){!tt.textContentSource&&(tt.textContent||tt.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),tt.textContentSource=tt.textContent||tt.textContentStream);const{container:it,viewport:at}=tt,ct=getComputedStyle(it),rt=ct.getPropertyValue("visibility"),dt=parseFloat(ct.getPropertyValue("--scale-factor"));rt==="visible"&&(!dt||Math.abs(dt-at.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const yt=new _e(tt);return yt._render(),yt}function st({container:tt,viewport:it,textDivs:at,textDivProperties:ct,isOffscreenCanvasSupported:rt,mustRotate:dt=!0,mustRescale:yt=!0}){if(dt&&(0,a.setLayerDimensions)(tt,{rotation:it.rotation}),yt){const vt=h(0,rt),At={prevFontSize:null,prevFontFamily:null,div:null,scale:it.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:vt};for(const Vt of at)At.properties=ct.get(Vt),At.div=Vt,$(At)}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var o=s(1),a=s(4),c=s(28),d=s(33),_=s(6),j=s(34);class h{#e;#t=!1;#n=null;#i=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#o=new Map;#r=!1;#l=!1;#u=!1;#s;static _initialized=!1;constructor({uiManager:b,pageIndex:$,div:et,accessibilityManager:_e,annotationLayer:nt,viewport:st,l10n:tt}){const it=[c.FreeTextEditor,d.InkEditor,j.StampEditor];if(!h._initialized){h._initialized=!0;for(const at of it)at.initialize(tt)}b.registerEditorTypes(it),this.#s=b,this.pageIndex=$,this.div=et,this.#e=_e,this.#n=nt,this.viewport=st,this.#s.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(b){this.#s.updateToolbar(b)}updateMode(b=this.#s.getMode()){this.#p(),b===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),b!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",b===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",b===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",b===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(b){if(!b&&this.#s.getMode()!==o.AnnotationEditorType.INK)return;if(!b){for(const et of this.#o.values())if(et.isEmpty()){et.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(b){this.#s.setEditingState(b)}addCommands(b){this.#s.addCommands(b)}enable(){this.div.style.pointerEvents="auto";const b=new Set;for(const et of this.#o.values())et.enableEditing(),et.annotationElementId&&b.add(et.annotationElementId);if(!this.#n)return;const $=this.#n.getEditableAnnotations();for(const et of $){if(et.hide(),this.#s.isDeletedAnnotationElement(et.data.id)||b.has(et.data.id))continue;const _e=this.deserialize(et);_e&&(this.addOrRebuild(_e),_e.enableEditing())}}disable(){this.#u=!0,this.div.style.pointerEvents="none";const b=new Set;for(const $ of this.#o.values()){if($.disableEditing(),!$.annotationElementId||$.serialize()!==null){b.add($.annotationElementId);continue}this.getEditableAnnotation($.annotationElementId)?.show(),$.remove()}if(this.#n){const $=this.#n.getEditableAnnotations();for(const et of $){const{id:_e}=et.data;b.has(_e)||this.#s.isDeletedAnnotationElement(_e)||et.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#u=!1}getEditableAnnotation(b){return this.#n?.getEditableAnnotation(b)||null}setActiveEditor(b){this.#s.getActive()!==b&&this.#s.setActiveEditor(b)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#i)}attach(b){this.#o.set(b.id,b);const{annotationElementId:$}=b;$&&this.#s.isDeletedAnnotationElement($)&&this.#s.removeDeletedAnnotationElement(b)}detach(b){this.#o.delete(b.id),this.#e?.removePointerInTextLayer(b.contentDiv),!this.#u&&b.annotationElementId&&this.#s.addDeletedAnnotationElement(b)}remove(b){this.detach(b),this.#s.removeEditor(b),b.div.contains(document.activeElement)&&setTimeout(()=>{this.#s.focusMainContainer()},0),b.div.remove(),b.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(b){b.parent!==this&&(b.annotationElementId&&(this.#s.addDeletedAnnotationElement(b.annotationElementId),a.AnnotationEditor.deleteAnnotationElement(b),b.annotationElementId=null),this.attach(b),b.parent?.detach(b),b.setParent(this),b.div&&b.isAttachedToDOM&&(b.div.remove(),this.div.append(b.div)))}add(b){if(this.changeParent(b),this.#s.addEditor(b),this.attach(b),!b.isAttachedToDOM){const $=b.render();this.div.append($),b.isAttachedToDOM=!0}b.fixAndSetPosition(),b.onceAdded(),this.#s.addToAnnotationStorage(b)}moveEditorInDOM(b){if(!b.isAttachedToDOM)return;const{activeElement:$}=document;b.div.contains($)&&(b._focusEventsAllowed=!1,setTimeout(()=>{b.div.contains(document.activeElement)?b._focusEventsAllowed=!0:(b.div.addEventListener("focusin",()=>{b._focusEventsAllowed=!0},{once:!0}),$.focus())},0)),b._structTreeParentId=this.#e?.moveElementInDOM(this.div,b.div,b.contentDiv,!0)}addOrRebuild(b){b.needsToBeRebuilt()?b.rebuild():this.add(b)}addUndoableEditor(b){const $=()=>b._uiManager.rebuild(b),et=()=>{b.remove()};this.addCommands({cmd:$,undo:et,mustExec:!1})}getNextId(){return this.#s.getId()}#f(b){switch(this.#s.getMode()){case o.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(b);case o.AnnotationEditorType.INK:return new d.InkEditor(b);case o.AnnotationEditorType.STAMP:return new j.StampEditor(b)}return null}pasteEditor(b,$){this.#s.updateToolbar(b),this.#s.updateMode(b);const{offsetX:et,offsetY:_e}=this.#h(),nt=this.getNextId(),st=this.#f({parent:this,id:nt,x:et,y:_e,uiManager:this.#s,isCentered:!0,...$});st&&this.add(st)}deserialize(b){switch(b.annotationType??b.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(b,this,this.#s);case o.AnnotationEditorType.INK:return d.InkEditor.deserialize(b,this,this.#s);case o.AnnotationEditorType.STAMP:return j.StampEditor.deserialize(b,this,this.#s)}return null}#d(b,$){const et=this.getNextId(),_e=this.#f({parent:this,id:et,x:b.offsetX,y:b.offsetY,uiManager:this.#s,isCentered:$});return _e&&this.add(_e),_e}#h(){const{x:b,y:$,width:et,height:_e}=this.div.getBoundingClientRect(),nt=Math.max(0,b),st=Math.max(0,$),tt=Math.min(window.innerWidth,b+et),it=Math.min(window.innerHeight,$+_e),at=(nt+tt)/2-b,ct=(st+it)/2-$,[rt,dt]=this.viewport.rotation%180===0?[at,ct]:[ct,at];return{offsetX:rt,offsetY:dt}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(b){this.#s.setSelected(b)}toggleSelected(b){this.#s.toggleSelected(b)}isSelected(b){return this.#s.isSelected(b)}unselect(b){this.#s.unselect(b)}pointerup(b){const{isMac:$}=o.FeatureTest.platform;if(!(b.button!==0||b.ctrlKey&&$)&&b.target===this.div&&this.#r){if(this.#r=!1,!this.#t){this.#t=!0;return}if(this.#s.getMode()===o.AnnotationEditorType.STAMP){this.#s.unselectAll();return}this.#d(b,!1)}}pointerdown(b){if(this.#r){this.#r=!1;return}const{isMac:$}=o.FeatureTest.platform;if(b.button!==0||b.ctrlKey&&$||b.target!==this.div)return;this.#r=!0;const et=this.#s.getActive();this.#t=!et||et.isEmpty()}findNewParent(b,$,et){const _e=this.#s.findParent($,et);return _e===null||_e===this?!1:(_e.changeParent(b),!0)}destroy(){this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null));for(const b of this.#o.values())this.#e?.removePointerInTextLayer(b.contentDiv),b.setParent(null),b.isAttachedToDOM=!1,b.div.remove();this.div=null,this.#o.clear(),this.#s.removeLayer(this)}#p(){this.#l=!0;for(const b of this.#o.values())b.isEmpty()&&b.remove();this.#l=!1}render({viewport:b}){this.viewport=b,(0,_.setLayerDimensions)(this.div,b);for(const $ of this.#s.getEditors(this.pageIndex))this.add($);this.updateMode()}update({viewport:b}){this.#s.commitOrRemove(),this.viewport=b,(0,_.setLayerDimensions)(this.div,{rotation:b.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:b,pageHeight:$}=this.viewport.rawDims;return[b,$]}}e.AnnotationEditorLayer=h},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var o=s(1),a=s(5),c=s(4),d=s(29);class _ extends c.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#a;#o="";#r=`${this.id}-editor`;#l;#u=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const h=_.prototype,g=et=>et.isEmpty(),b=a.AnnotationEditorUIManager.TRANSLATE_SMALL,$=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],h.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],h.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],h._translateEmpty,{args:[-b,0],checker:g}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],h._translateEmpty,{args:[-$,0],checker:g}],[["ArrowRight","mac+ArrowRight"],h._translateEmpty,{args:[b,0],checker:g}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],h._translateEmpty,{args:[$,0],checker:g}],[["ArrowUp","mac+ArrowUp"],h._translateEmpty,{args:[0,-b],checker:g}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],h._translateEmpty,{args:[0,-$],checker:g}],[["ArrowDown","mac+ArrowDown"],h._translateEmpty,{args:[0,b],checker:g}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],h._translateEmpty,{args:[0,$],checker:g}]]))}static _type="freetext";constructor(h){super({...h,name:"freeTextEditor"}),this.#a=h.color||_._defaultColor||c.AnnotationEditor._defaultLineColor,this.#l=h.fontSize||_._defaultFontSize}static initialize(h){c.AnnotationEditor.initialize(h,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const g=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(g.getPropertyValue("--freetext-padding"))}static updateDefaultParams(h,g){switch(h){case o.AnnotationEditorParamsType.FREETEXT_SIZE:_._defaultFontSize=g;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:_._defaultColor=g;break}}updateParams(h,g){switch(h){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(g);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(g);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,_._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,_._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#s(h){const g=$=>{this.editorDiv.style.fontSize=`calc(${$}px * var(--scale-factor))`,this.translate(0,-($-this.#l)*this.parentScale),this.#l=$,this.#h()},b=this.#l;this.addCommands({cmd:()=>{g(h)},undo:()=>{g(b)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(h){const g=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=h},undo:()=>{this.#a=this.editorDiv.style.color=g},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(h,g){this._uiManager.translateSelectedEditors(h,g,!0)}getInitialTranslation(){const h=this.parentScale;return[-_._internalPadding*h,-(_._internalPadding+this.#l)*h]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(h){this._focusEventsAllowed&&(super.focusin(h),h.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const h=this.editorDiv.getElementsByTagName("div");if(h.length===0)return this.editorDiv.innerText;const g=[];for(const b of h)g.push(b.innerText.replace(/\r\n?|\n/,""));return g.join(`
`)}#h(){const[h,g]=this.parentDimensions;let b;if(this.isAttachedToDOM)b=this.div.getBoundingClientRect();else{const{currentLayer:$,div:et}=this,_e=et.style.display;et.style.display="hidden",$.div.append(this.div),b=et.getBoundingClientRect(),et.remove(),et.style.display=_e}this.rotation%180===this.parentRotation%180?(this.width=b.width/h,this.height=b.height/g):(this.width=b.height/h,this.height=b.width/g),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const h=this.#o,g=this.#o=this.#d().trimEnd();if(h===g)return;const b=$=>{if(this.#o=$,!$){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{b(g)},undo:()=>{b(h)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(h){this.enterInEditMode()}keydown(h){h.target===this.div&&h.key==="Enter"&&(this.enterInEditMode(),h.preventDefault())}editorDivKeydown(h){_._keyboardManager.exec(this,h)}editorDivFocus(h){this.isEditing=!0}editorDivBlur(h){this.isEditing=!1}editorDivInput(h){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let h,g;this.width&&(h=this.x,g=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then($=>this.editorDiv?.setAttribute("aria-label",$)),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then($=>this.editorDiv?.setAttribute("default-content",$)),this.editorDiv.contentEditable=!0;const{style:b}=this.editorDiv;if(b.fontSize=`calc(${this.#l}px * var(--scale-factor))`,b.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[$,et]=this.parentDimensions;if(this.annotationElementId){const{position:_e}=this.#u;let[nt,st]=this.getInitialTranslation();[nt,st]=this.pageTranslationToScreen(nt,st);const[tt,it]=this.pageDimensions,[at,ct]=this.pageTranslation;let rt,dt;switch(this.rotation){case 0:rt=h+(_e[0]-at)/tt,dt=g+this.height-(_e[1]-ct)/it;break;case 90:rt=h+(_e[0]-at)/tt,dt=g-(_e[1]-ct)/it,[nt,st]=[st,-nt];break;case 180:rt=h-this.width+(_e[0]-at)/tt,dt=g-(_e[1]-ct)/it,[nt,st]=[-nt,-st];break;case 270:rt=h+(_e[0]-at-this.height*it)/tt,dt=g+(_e[1]-ct-this.width*tt)/it,[nt,st]=[-st,nt];break}this.setAt(rt*$,dt*et,nt,st)}else this.setAt(h*$,g*et,this.width*$,this.height*et);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(const h of this.#o.split(`
`)){const g=document.createElement("div");g.append(h?document.createTextNode(h):document.createElement("br")),this.editorDiv.append(g)}}get contentDiv(){return this.editorDiv}static deserialize(h,g,b){let $=null;if(h instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:_e,fontColor:nt},rect:st,rotation:tt,id:it},textContent:at,textPosition:ct,parent:{page:{pageNumber:rt}}}=h;if(!at||at.length===0)return null;$=h={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(nt),fontSize:_e,value:at.join(`
`),position:ct,pageIndex:rt-1,rect:st,rotation:tt,id:it,deleted:!1}}const et=super.deserialize(h,g,b);return et.#l=h.fontSize,et.#a=o.Util.makeHexColor(...h.color),et.#o=h.value,et.annotationElementId=h.id||null,et.#u=$,et}serialize(h=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const g=_._internalPadding*this.parentScale,b=this.getRect(g,g),$=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),et={annotationType:o.AnnotationEditorType.FREETEXT,color:$,fontSize:this.#l,value:this.#o,pageIndex:this.pageIndex,rect:b,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return h?et:this.annotationElementId&&!this.#y(et)?null:(et.id=this.annotationElementId,et)}#y(h){const{value:g,fontSize:b,color:$,rect:et,pageIndex:_e}=this.#u;return h.value!==g||h.fontSize!==b||h.rect.some((nt,st)=>Math.abs(nt-et[st])>=1)||h.color.some((nt,st)=>nt!==$[st])||h.pageIndex!==_e}#m(h=!1){if(!this.annotationElementId)return;if(this.#h(),!h&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const g=_._internalPadding*this.parentScale;this.#u.rect=this.getRect(g,g)}}e.FreeTextEditor=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var o=s(1),a=s(6),c=s(3),d=s(30),_=s(31),j=s(32);const h=1e3,g=9,b=new WeakSet;function $(Pt){return{width:Pt[2]-Pt[0],height:Pt[3]-Pt[1]}}class et{static create(ot){switch(ot.data.annotationType){case o.AnnotationType.LINK:return new nt(ot);case o.AnnotationType.TEXT:return new st(ot);case o.AnnotationType.WIDGET:switch(ot.data.fieldType){case"Tx":return new it(ot);case"Btn":return ot.data.radioButton?new rt(ot):ot.data.checkBox?new ct(ot):new dt(ot);case"Ch":return new yt(ot);case"Sig":return new at(ot)}return new tt(ot);case o.AnnotationType.POPUP:return new vt(ot);case o.AnnotationType.FREETEXT:return new At(ot);case o.AnnotationType.LINE:return new Vt(ot);case o.AnnotationType.SQUARE:return new Nt(ot);case o.AnnotationType.CIRCLE:return new It(ot);case o.AnnotationType.POLYLINE:return new Lt(ot);case o.AnnotationType.CARET:return new Ft(ot);case o.AnnotationType.INK:return new Tt(ot);case o.AnnotationType.POLYGON:return new zt(ot);case o.AnnotationType.HIGHLIGHT:return new ht(ot);case o.AnnotationType.UNDERLINE:return new lt(ot);case o.AnnotationType.SQUIGGLY:return new ut(ot);case o.AnnotationType.STRIKEOUT:return new pt(ot);case o.AnnotationType.STAMP:return new Et(ot);case o.AnnotationType.FILEATTACHMENT:return new St(ot);default:return new _e(ot)}}}class _e{#e=!1;constructor(ot,{isRenderable:ft=!1,ignoreBorder:mt=!1,createQuadrilaterals:_t=!1}={}){this.isRenderable=ft,this.data=ot.data,this.layer=ot.layer,this.linkService=ot.linkService,this.downloadManager=ot.downloadManager,this.imageResourcesPath=ot.imageResourcesPath,this.renderForms=ot.renderForms,this.svgFactory=ot.svgFactory,this.annotationStorage=ot.annotationStorage,this.enableScripting=ot.enableScripting,this.hasJSActions=ot.hasJSActions,this._fieldObjects=ot.fieldObjects,this.parent=ot.parent,ft&&(this.container=this._createContainer(mt)),_t&&this._createQuadrilaterals()}static _hasPopupData({titleObj:ot,contentsObj:ft,richText:mt}){return!!(ot?.str||ft?.str||mt?.str)}get hasPopupData(){return _e._hasPopupData(this.data)}_createContainer(ot){const{data:ft,parent:{page:mt,viewport:_t}}=this,xt=document.createElement("section");xt.setAttribute("data-annotation-id",ft.id),this instanceof tt||(xt.tabIndex=h),xt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&xt.setAttribute("aria-haspopup","dialog"),ft.noRotate&&xt.classList.add("norotate");const{pageWidth:wt,pageHeight:Bt,pageX:kt,pageY:jt}=_t.rawDims;if(!ft.rect||this instanceof vt){const{rotation:Gt}=ft;return!ft.hasOwnCanvas&&Gt!==0&&this.setRotation(Gt,xt),xt}const{width:Mt,height:Dt}=$(ft.rect),Ut=o.Util.normalizeRect([ft.rect[0],mt.view[3]-ft.rect[1]+mt.view[1],ft.rect[2],mt.view[3]-ft.rect[3]+mt.view[1]]);if(!ot&&ft.borderStyle.width>0){xt.style.borderWidth=`${ft.borderStyle.width}px`;const Gt=ft.borderStyle.horizontalCornerRadius,qt=ft.borderStyle.verticalCornerRadius;if(Gt>0||qt>0){const Jt=`calc(${Gt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;xt.style.borderRadius=Jt}else if(this instanceof rt){const Jt=`calc(${Mt}px * var(--scale-factor)) / calc(${Dt}px * var(--scale-factor))`;xt.style.borderRadius=Jt}switch(ft.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:xt.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:xt.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:xt.style.borderBottomStyle="solid";break}const Wt=ft.borderColor||null;Wt?(this.#e=!0,xt.style.borderColor=o.Util.makeHexColor(Wt[0]|0,Wt[1]|0,Wt[2]|0)):xt.style.borderWidth=0}xt.style.left=`${100*(Ut[0]-kt)/wt}%`,xt.style.top=`${100*(Ut[1]-jt)/Bt}%`;const{rotation:Ot}=ft;return ft.hasOwnCanvas||Ot===0?(xt.style.width=`${100*Mt/wt}%`,xt.style.height=`${100*Dt/Bt}%`):this.setRotation(Ot,xt),xt}setRotation(ot,ft=this.container){if(!this.data.rect)return;const{pageWidth:mt,pageHeight:_t}=this.parent.viewport.rawDims,{width:xt,height:wt}=$(this.data.rect);let Bt,kt;ot%180===0?(Bt=100*xt/mt,kt=100*wt/_t):(Bt=100*wt/mt,kt=100*xt/_t),ft.style.width=`${Bt}%`,ft.style.height=`${kt}%`,ft.setAttribute("data-main-rotation",(360-ot)%360)}get _commonActions(){const ot=(ft,mt,_t)=>{const xt=_t.detail[ft],wt=xt[0],Bt=xt.slice(1);_t.target.style[mt]=d.ColorConverters[`${wt}_HTML`](Bt),this.annotationStorage.setValue(this.data.id,{[mt]:d.ColorConverters[`${wt}_rgb`](Bt)})};return(0,o.shadow)(this,"_commonActions",{display:ft=>{const{display:mt}=ft.detail,_t=mt%2===1;this.container.style.visibility=_t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:_t,noPrint:mt===1||mt===2})},print:ft=>{this.annotationStorage.setValue(this.data.id,{noPrint:!ft.detail.print})},hidden:ft=>{const{hidden:mt}=ft.detail;this.container.style.visibility=mt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:mt,noView:mt})},focus:ft=>{setTimeout(()=>ft.target.focus({preventScroll:!1}),0)},userName:ft=>{ft.target.title=ft.detail.userName},readonly:ft=>{ft.target.disabled=ft.detail.readonly},required:ft=>{this._setRequired(ft.target,ft.detail.required)},bgColor:ft=>{ot("bgColor","backgroundColor",ft)},fillColor:ft=>{ot("fillColor","backgroundColor",ft)},fgColor:ft=>{ot("fgColor","color",ft)},textColor:ft=>{ot("textColor","color",ft)},borderColor:ft=>{ot("borderColor","borderColor",ft)},strokeColor:ft=>{ot("strokeColor","borderColor",ft)},rotation:ft=>{const mt=ft.detail.rotation;this.setRotation(mt),this.annotationStorage.setValue(this.data.id,{rotation:mt})}})}_dispatchEventFromSandbox(ot,ft){const mt=this._commonActions;for(const _t of Object.keys(ft.detail))(ot[_t]||mt[_t])?.(ft)}_setDefaultPropertiesFromJS(ot){if(!this.enableScripting)return;const ft=this.annotationStorage.getRawValue(this.data.id);if(!ft)return;const mt=this._commonActions;for(const[_t,xt]of Object.entries(ft)){const wt=mt[_t];if(wt){const Bt={detail:{[_t]:xt},target:ot};wt(Bt),delete ft[_t]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:ot}=this.data;if(!ot)return;const[ft,mt,_t,xt]=this.data.rect;if(ot.length===1){const[,{x:qt,y:Wt},{x:Jt,y:Kt}]=ot[0];if(_t===qt&&xt===Wt&&ft===Jt&&mt===Kt)return}const{style:wt}=this.container;let Bt;if(this.#e){const{borderColor:qt,borderWidth:Wt}=wt;wt.borderWidth=0,Bt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${qt}" stroke-width="${Wt}">`],this.container.classList.add("hasBorder")}const kt=_t-ft,jt=xt-mt,{svgFactory:Mt}=this,Dt=Mt.createElement("svg");Dt.classList.add("quadrilateralsContainer"),Dt.setAttribute("width",0),Dt.setAttribute("height",0);const Ut=Mt.createElement("defs");Dt.append(Ut);const Ot=Mt.createElement("clipPath"),Gt=`clippath_${this.data.id}`;Ot.setAttribute("id",Gt),Ot.setAttribute("clipPathUnits","objectBoundingBox"),Ut.append(Ot);for(const[,{x:qt,y:Wt},{x:Jt,y:Kt}]of ot){const Yt=Mt.createElement("rect"),Qt=(Jt-ft)/kt,on=(xt-Wt)/jt,nn=(qt-Jt)/kt,dn=(Wt-Kt)/jt;Yt.setAttribute("x",Qt),Yt.setAttribute("y",on),Yt.setAttribute("width",nn),Yt.setAttribute("height",dn),Ot.append(Yt),Bt?.push(`<rect vector-effect="non-scaling-stroke" x="${Qt}" y="${on}" width="${nn}" height="${dn}"/>`)}this.#e&&(Bt.push("</g></svg>')"),wt.backgroundImage=Bt.join("")),this.container.append(Dt),this.container.style.clipPath=`url(#${Gt})`}_createPopup(){const{container:ot,data:ft}=this;ot.setAttribute("aria-haspopup","dialog");const mt=new vt({data:{color:ft.color,titleObj:ft.titleObj,modificationDate:ft.modificationDate,contentsObj:ft.contentsObj,richText:ft.richText,parentRect:ft.rect,borderStyle:0,id:`popup_${ft.id}`,rotation:ft.rotation},parent:this.parent,elements:[this]});this.parent.div.append(mt.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(ot,ft=null){const mt=[];if(this._fieldObjects){const _t=this._fieldObjects[ot];if(_t)for(const{page:xt,id:wt,exportValues:Bt}of _t){if(xt===-1||wt===ft)continue;const kt=typeof Bt=="string"?Bt:null,jt=document.querySelector(`[data-element-id="${wt}"]`);if(jt&&!b.has(jt)){(0,o.warn)(`_getElementsByName - element not allowed: ${wt}`);continue}mt.push({id:wt,exportValue:kt,domElement:jt})}return mt}for(const _t of document.getElementsByName(ot)){const{exportValue:xt}=_t,wt=_t.getAttribute("data-element-id");wt!==ft&&b.has(_t)&&mt.push({id:wt,exportValue:xt,domElement:_t})}return mt}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const ot=this.getElementsToTriggerPopup();if(Array.isArray(ot))for(const ft of ot)ft.classList.add("highlightArea");else ot.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:ot,data:{id:ft}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:ot,editId:ft})})}}class nt extends _e{constructor(ot,ft=null){super(ot,{isRenderable:!0,ignoreBorder:!!ft?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=ot.data.isTooltipOnly}render(){const{data:ot,linkService:ft}=this,mt=document.createElement("a");mt.setAttribute("data-element-id",ot.id);let _t=!1;return ot.url?(ft.addLinkAttributes(mt,ot.url,ot.newWindow),_t=!0):ot.action?(this._bindNamedAction(mt,ot.action),_t=!0):ot.attachment?(this._bindAttachment(mt,ot.attachment),_t=!0):ot.setOCGState?(this.#t(mt,ot.setOCGState),_t=!0):ot.dest?(this._bindLink(mt,ot.dest),_t=!0):(ot.actions&&(ot.actions.Action||ot.actions["Mouse Up"]||ot.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(mt,ot),_t=!0),ot.resetForm?(this._bindResetFormAction(mt,ot.resetForm),_t=!0):this.isTooltipOnly&&!_t&&(this._bindLink(mt,""),_t=!0)),this.container.classList.add("linkAnnotation"),_t&&this.container.append(mt),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(ot,ft){ot.href=this.linkService.getDestinationHash(ft),ot.onclick=()=>(ft&&this.linkService.goToDestination(ft),!1),(ft||ft==="")&&this.#e()}_bindNamedAction(ot,ft){ot.href=this.linkService.getAnchorUrl(""),ot.onclick=()=>(this.linkService.executeNamedAction(ft),!1),this.#e()}_bindAttachment(ot,ft){ot.href=this.linkService.getAnchorUrl(""),ot.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,ft.content,ft.filename),!1),this.#e()}#t(ot,ft){ot.href=this.linkService.getAnchorUrl(""),ot.onclick=()=>(this.linkService.executeSetOCGState(ft),!1),this.#e()}_bindJSAction(ot,ft){ot.href=this.linkService.getAnchorUrl("");const mt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const _t of Object.keys(ft.actions)){const xt=mt.get(_t);xt&&(ot[xt]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ft.id,name:_t}}),!1))}ot.onclick||(ot.onclick=()=>!1),this.#e()}_bindResetFormAction(ot,ft){const mt=ot.onclick;if(mt||(ot.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),mt||(ot.onclick=()=>!1);return}ot.onclick=()=>{mt?.();const{fields:_t,refs:xt,include:wt}=ft,Bt=[];if(_t.length!==0||xt.length!==0){const Mt=new Set(xt);for(const Dt of _t){const Ut=this._fieldObjects[Dt]||[];for(const{id:Ot}of Ut)Mt.add(Ot)}for(const Dt of Object.values(this._fieldObjects))for(const Ut of Dt)Mt.has(Ut.id)===wt&&Bt.push(Ut)}else for(const Mt of Object.values(this._fieldObjects))Bt.push(...Mt);const kt=this.annotationStorage,jt=[];for(const Mt of Bt){const{id:Dt}=Mt;switch(jt.push(Dt),Mt.type){case"text":{const Ot=Mt.defaultValue||"";kt.setValue(Dt,{value:Ot});break}case"checkbox":case"radiobutton":{const Ot=Mt.defaultValue===Mt.exportValues;kt.setValue(Dt,{value:Ot});break}case"combobox":case"listbox":{const Ot=Mt.defaultValue||"";kt.setValue(Dt,{value:Ot});break}default:continue}const Ut=document.querySelector(`[data-element-id="${Dt}"]`);if(Ut){if(!b.has(Ut)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${Dt}`);continue}}else continue;Ut.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:jt,name:"ResetForm"}}),!1}}}class st extends _e{constructor(ot){super(ot,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const ot=document.createElement("img");return ot.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",ot.alt="[{{type}} Annotation]",ot.dataset.l10nId="text_annotation_type",ot.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(ot),this.container}}class tt extends _e{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(ot){this.data.hasOwnCanvas&&(ot.previousSibling?.nodeName==="CANVAS"&&(ot.previousSibling.hidden=!0),ot.hidden=!1)}_getKeyModifier(ot){const{isWin:ft,isMac:mt}=o.FeatureTest.platform;return ft&&ot.ctrlKey||mt&&ot.metaKey}_setEventListener(ot,ft,mt,_t,xt){mt.includes("mouse")?ot.addEventListener(mt,wt=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_t,value:xt(wt),shift:wt.shiftKey,modifier:this._getKeyModifier(wt)}})}):ot.addEventListener(mt,wt=>{if(mt==="blur"){if(!ft.focused||!wt.relatedTarget)return;ft.focused=!1}else if(mt==="focus"){if(ft.focused)return;ft.focused=!0}xt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_t,value:xt(wt)}})})}_setEventListeners(ot,ft,mt,_t){for(const[xt,wt]of mt)(wt==="Action"||this.data.actions?.[wt])&&((wt==="Focus"||wt==="Blur")&&(ft||={focused:!1}),this._setEventListener(ot,ft,xt,wt,_t),wt==="Focus"&&!this.data.actions?.Blur?this._setEventListener(ot,ft,"blur","Blur",null):wt==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(ot,ft,"focus","Focus",null))}_setBackgroundColor(ot){const ft=this.data.backgroundColor||null;ot.style.backgroundColor=ft===null?"transparent":o.Util.makeHexColor(ft[0],ft[1],ft[2])}_setTextStyle(ot){const ft=["left","center","right"],{fontColor:mt}=this.data.defaultAppearanceData,_t=this.data.defaultAppearanceData.fontSize||g,xt=ot.style;let wt;const Bt=2,kt=jt=>Math.round(10*jt)/10;if(this.data.multiLine){const jt=Math.abs(this.data.rect[3]-this.data.rect[1]-Bt),Mt=Math.round(jt/(o.LINE_FACTOR*_t))||1,Dt=jt/Mt;wt=Math.min(_t,kt(Dt/o.LINE_FACTOR))}else{const jt=Math.abs(this.data.rect[3]-this.data.rect[1]-Bt);wt=Math.min(_t,kt(jt/o.LINE_FACTOR))}xt.fontSize=`calc(${wt}px * var(--scale-factor))`,xt.color=o.Util.makeHexColor(mt[0],mt[1],mt[2]),this.data.textAlignment!==null&&(xt.textAlign=ft[this.data.textAlignment])}_setRequired(ot,ft){ft?ot.setAttribute("required",!0):ot.removeAttribute("required"),ot.setAttribute("aria-required",ft)}}class it extends tt{constructor(ot){const ft=ot.renderForms||!ot.data.hasAppearance&&!!ot.data.fieldValue;super(ot,{isRenderable:ft})}setPropertyOnSiblings(ot,ft,mt,_t){const xt=this.annotationStorage;for(const wt of this._getElementsByName(ot.name,ot.id))wt.domElement&&(wt.domElement[ft]=mt),xt.setValue(wt.id,{[_t]:mt})}render(){const ot=this.annotationStorage,ft=this.data.id;this.container.classList.add("textWidgetAnnotation");let mt=null;if(this.renderForms){const _t=ot.getValue(ft,{value:this.data.fieldValue});let xt=_t.value||"";const wt=ot.getValue(ft,{charLimit:this.data.maxLen}).charLimit;wt&&xt.length>wt&&(xt=xt.slice(0,wt));let Bt=_t.formattedValue||this.data.textContent?.join(`
`)||null;Bt&&this.data.comb&&(Bt=Bt.replaceAll(/\s+/g,""));const kt={userValue:xt,formattedValue:Bt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(mt=document.createElement("textarea"),mt.textContent=Bt??xt,this.data.doNotScroll&&(mt.style.overflowY="hidden")):(mt=document.createElement("input"),mt.type="text",mt.setAttribute("value",Bt??xt),this.data.doNotScroll&&(mt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(mt.hidden=!0),b.add(mt),mt.setAttribute("data-element-id",ft),mt.disabled=this.data.readOnly,mt.name=this.data.fieldName,mt.tabIndex=h,this._setRequired(mt,this.data.required),wt&&(mt.maxLength=wt),mt.addEventListener("input",Mt=>{ot.setValue(ft,{value:Mt.target.value}),this.setPropertyOnSiblings(mt,"value",Mt.target.value,"value"),kt.formattedValue=null}),mt.addEventListener("resetform",Mt=>{const Dt=this.data.defaultFieldValue??"";mt.value=kt.userValue=Dt,kt.formattedValue=null});let jt=Mt=>{const{formattedValue:Dt}=kt;Dt!=null&&(Mt.target.value=Dt),Mt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){mt.addEventListener("focus",Dt=>{if(kt.focused)return;const{target:Ut}=Dt;kt.userValue&&(Ut.value=kt.userValue),kt.lastCommittedValue=Ut.value,kt.commitKey=1,kt.focused=!0}),mt.addEventListener("updatefromsandbox",Dt=>{this.showElementAndHideCanvas(Dt.target);const Ut={value(Ot){kt.userValue=Ot.detail.value??"",ot.setValue(ft,{value:kt.userValue.toString()}),Ot.target.value=kt.userValue},formattedValue(Ot){const{formattedValue:Gt}=Ot.detail;kt.formattedValue=Gt,Gt!=null&&Ot.target!==document.activeElement&&(Ot.target.value=Gt),ot.setValue(ft,{formattedValue:Gt})},selRange(Ot){Ot.target.setSelectionRange(...Ot.detail.selRange)},charLimit:Ot=>{const{charLimit:Gt}=Ot.detail,{target:qt}=Ot;if(Gt===0){qt.removeAttribute("maxLength");return}qt.setAttribute("maxLength",Gt);let Wt=kt.userValue;!Wt||Wt.length<=Gt||(Wt=Wt.slice(0,Gt),qt.value=kt.userValue=Wt,ot.setValue(ft,{value:Wt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ft,name:"Keystroke",value:Wt,willCommit:!0,commitKey:1,selStart:qt.selectionStart,selEnd:qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ut,Dt)}),mt.addEventListener("keydown",Dt=>{kt.commitKey=1;let Ut=-1;if(Dt.key==="Escape"?Ut=0:Dt.key==="Enter"&&!this.data.multiLine?Ut=2:Dt.key==="Tab"&&(kt.commitKey=3),Ut===-1)return;const{value:Ot}=Dt.target;kt.lastCommittedValue!==Ot&&(kt.lastCommittedValue=Ot,kt.userValue=Ot,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ft,name:"Keystroke",value:Ot,willCommit:!0,commitKey:Ut,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}}))});const Mt=jt;jt=null,mt.addEventListener("blur",Dt=>{if(!kt.focused||!Dt.relatedTarget)return;kt.focused=!1;const{value:Ut}=Dt.target;kt.userValue=Ut,kt.lastCommittedValue!==Ut&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ft,name:"Keystroke",value:Ut,willCommit:!0,commitKey:kt.commitKey,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}}),Mt(Dt)}),this.data.actions?.Keystroke&&mt.addEventListener("beforeinput",Dt=>{kt.lastCommittedValue=null;const{data:Ut,target:Ot}=Dt,{value:Gt,selectionStart:qt,selectionEnd:Wt}=Ot;let Jt=qt,Kt=Wt;switch(Dt.inputType){case"deleteWordBackward":{const Yt=Gt.substring(0,qt).match(/\w*[^\w]*$/);Yt&&(Jt-=Yt[0].length);break}case"deleteWordForward":{const Yt=Gt.substring(qt).match(/^[^\w]*\w*/);Yt&&(Kt+=Yt[0].length);break}case"deleteContentBackward":qt===Wt&&(Jt-=1);break;case"deleteContentForward":qt===Wt&&(Kt+=1);break}Dt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ft,name:"Keystroke",value:Gt,change:Ut||"",willCommit:!1,selStart:Jt,selEnd:Kt}})}),this._setEventListeners(mt,kt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Dt=>Dt.target.value)}if(jt&&mt.addEventListener("blur",jt),this.data.comb){const Dt=(this.data.rect[2]-this.data.rect[0])/wt;mt.classList.add("comb"),mt.style.letterSpacing=`calc(${Dt}px * var(--scale-factor) - 1ch)`}}else mt=document.createElement("div"),mt.textContent=this.data.fieldValue,mt.style.verticalAlign="middle",mt.style.display="table-cell";return this._setTextStyle(mt),this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class at extends tt{constructor(ot){super(ot,{isRenderable:!!ot.data.hasOwnCanvas})}}class ct extends tt{constructor(ot){super(ot,{isRenderable:ot.renderForms})}render(){const ot=this.annotationStorage,ft=this.data,mt=ft.id;let _t=ot.getValue(mt,{value:ft.exportValue===ft.fieldValue}).value;typeof _t=="string"&&(_t=_t!=="Off",ot.setValue(mt,{value:_t})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const xt=document.createElement("input");return b.add(xt),xt.setAttribute("data-element-id",mt),xt.disabled=ft.readOnly,this._setRequired(xt,this.data.required),xt.type="checkbox",xt.name=ft.fieldName,_t&&xt.setAttribute("checked",!0),xt.setAttribute("exportValue",ft.exportValue),xt.tabIndex=h,xt.addEventListener("change",wt=>{const{name:Bt,checked:kt}=wt.target;for(const jt of this._getElementsByName(Bt,mt)){const Mt=kt&&jt.exportValue===ft.exportValue;jt.domElement&&(jt.domElement.checked=Mt),ot.setValue(jt.id,{value:Mt})}ot.setValue(mt,{value:kt})}),xt.addEventListener("resetform",wt=>{const Bt=ft.defaultFieldValue||"Off";wt.target.checked=Bt===ft.exportValue}),this.enableScripting&&this.hasJSActions&&(xt.addEventListener("updatefromsandbox",wt=>{const Bt={value(kt){kt.target.checked=kt.detail.value!=="Off",ot.setValue(mt,{value:kt.target.checked})}};this._dispatchEventFromSandbox(Bt,wt)}),this._setEventListeners(xt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],wt=>wt.target.checked)),this._setBackgroundColor(xt),this._setDefaultPropertiesFromJS(xt),this.container.append(xt),this.container}}class rt extends tt{constructor(ot){super(ot,{isRenderable:ot.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const ot=this.annotationStorage,ft=this.data,mt=ft.id;let _t=ot.getValue(mt,{value:ft.fieldValue===ft.buttonValue}).value;typeof _t=="string"&&(_t=_t!==ft.buttonValue,ot.setValue(mt,{value:_t}));const xt=document.createElement("input");if(b.add(xt),xt.setAttribute("data-element-id",mt),xt.disabled=ft.readOnly,this._setRequired(xt,this.data.required),xt.type="radio",xt.name=ft.fieldName,_t&&xt.setAttribute("checked",!0),xt.tabIndex=h,xt.addEventListener("change",wt=>{const{name:Bt,checked:kt}=wt.target;for(const jt of this._getElementsByName(Bt,mt))ot.setValue(jt.id,{value:!1});ot.setValue(mt,{value:kt})}),xt.addEventListener("resetform",wt=>{const Bt=ft.defaultFieldValue;wt.target.checked=Bt!=null&&Bt===ft.buttonValue}),this.enableScripting&&this.hasJSActions){const wt=ft.buttonValue;xt.addEventListener("updatefromsandbox",Bt=>{const kt={value:jt=>{const Mt=wt===jt.detail.value;for(const Dt of this._getElementsByName(jt.target.name)){const Ut=Mt&&Dt.id===mt;Dt.domElement&&(Dt.domElement.checked=Ut),ot.setValue(Dt.id,{value:Ut})}}};this._dispatchEventFromSandbox(kt,Bt)}),this._setEventListeners(xt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.checked)}return this._setBackgroundColor(xt),this._setDefaultPropertiesFromJS(xt),this.container.append(xt),this.container}}class dt extends nt{constructor(ot){super(ot,{ignoreBorder:ot.data.hasAppearance})}render(){const ot=super.render();ot.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(ot.title=this.data.alternativeText);const ft=ot.lastChild;return this.enableScripting&&this.hasJSActions&&ft&&(this._setDefaultPropertiesFromJS(ft),ft.addEventListener("updatefromsandbox",mt=>{this._dispatchEventFromSandbox({},mt)})),ot}}class yt extends tt{constructor(ot){super(ot,{isRenderable:ot.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const ot=this.annotationStorage,ft=this.data.id,mt=ot.getValue(ft,{value:this.data.fieldValue}),_t=document.createElement("select");b.add(_t),_t.setAttribute("data-element-id",ft),_t.disabled=this.data.readOnly,this._setRequired(_t,this.data.required),_t.name=this.data.fieldName,_t.tabIndex=h;let xt=this.data.combo&&this.data.options.length>0;this.data.combo||(_t.size=this.data.options.length,this.data.multiSelect&&(_t.multiple=!0)),_t.addEventListener("resetform",Mt=>{const Dt=this.data.defaultFieldValue;for(const Ut of _t.options)Ut.selected=Ut.value===Dt});for(const Mt of this.data.options){const Dt=document.createElement("option");Dt.textContent=Mt.displayValue,Dt.value=Mt.exportValue,mt.value.includes(Mt.exportValue)&&(Dt.setAttribute("selected",!0),xt=!1),_t.append(Dt)}let wt=null;if(xt){const Mt=document.createElement("option");Mt.value=" ",Mt.setAttribute("hidden",!0),Mt.setAttribute("selected",!0),_t.prepend(Mt),wt=()=>{Mt.remove(),_t.removeEventListener("input",wt),wt=null},_t.addEventListener("input",wt)}const Bt=Mt=>{const Dt=Mt?"value":"textContent",{options:Ut,multiple:Ot}=_t;return Ot?Array.prototype.filter.call(Ut,Gt=>Gt.selected).map(Gt=>Gt[Dt]):Ut.selectedIndex===-1?null:Ut[Ut.selectedIndex][Dt]};let kt=Bt(!1);const jt=Mt=>{const Dt=Mt.target.options;return Array.prototype.map.call(Dt,Ut=>({displayValue:Ut.textContent,exportValue:Ut.value}))};return this.enableScripting&&this.hasJSActions?(_t.addEventListener("updatefromsandbox",Mt=>{const Dt={value(Ut){wt?.();const Ot=Ut.detail.value,Gt=new Set(Array.isArray(Ot)?Ot:[Ot]);for(const qt of _t.options)qt.selected=Gt.has(qt.value);ot.setValue(ft,{value:Bt(!0)}),kt=Bt(!1)},multipleSelection(Ut){_t.multiple=!0},remove(Ut){const Ot=_t.options,Gt=Ut.detail.remove;Ot[Gt].selected=!1,_t.remove(Gt),Ot.length>0&&Array.prototype.findIndex.call(Ot,Wt=>Wt.selected)===-1&&(Ot[0].selected=!0),ot.setValue(ft,{value:Bt(!0),items:jt(Ut)}),kt=Bt(!1)},clear(Ut){for(;_t.length!==0;)_t.remove(0);ot.setValue(ft,{value:null,items:[]}),kt=Bt(!1)},insert(Ut){const{index:Ot,displayValue:Gt,exportValue:qt}=Ut.detail.insert,Wt=_t.children[Ot],Jt=document.createElement("option");Jt.textContent=Gt,Jt.value=qt,Wt?Wt.before(Jt):_t.append(Jt),ot.setValue(ft,{value:Bt(!0),items:jt(Ut)}),kt=Bt(!1)},items(Ut){const{items:Ot}=Ut.detail;for(;_t.length!==0;)_t.remove(0);for(const Gt of Ot){const{displayValue:qt,exportValue:Wt}=Gt,Jt=document.createElement("option");Jt.textContent=qt,Jt.value=Wt,_t.append(Jt)}_t.options.length>0&&(_t.options[0].selected=!0),ot.setValue(ft,{value:Bt(!0),items:jt(Ut)}),kt=Bt(!1)},indices(Ut){const Ot=new Set(Ut.detail.indices);for(const Gt of Ut.target.options)Gt.selected=Ot.has(Gt.index);ot.setValue(ft,{value:Bt(!0)}),kt=Bt(!1)},editable(Ut){Ut.target.disabled=!Ut.detail.editable}};this._dispatchEventFromSandbox(Dt,Mt)}),_t.addEventListener("input",Mt=>{const Dt=Bt(!0);ot.setValue(ft,{value:Dt}),Mt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ft,name:"Keystroke",value:kt,changeEx:Dt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(_t,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Mt=>Mt.target.value)):_t.addEventListener("input",function(Mt){ot.setValue(ft,{value:Bt(!0)})}),this.data.combo&&this._setTextStyle(_t),this._setBackgroundColor(_t),this._setDefaultPropertiesFromJS(_t),this.container.append(_t),this.container}}class vt extends _e{constructor(ot){const{data:ft,elements:mt}=ot;super(ot,{isRenderable:_e._hasPopupData(ft)}),this.elements=mt}render(){this.container.classList.add("popupAnnotation");const ot=new gt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),ft=[];for(const mt of this.elements)mt.popup=ot,ft.push(mt.data.id),mt.addHighlightArea();return this.container.setAttribute("aria-controls",ft.map(mt=>`${o.AnnotationPrefix}${mt}`).join(",")),this.container}}class gt{#e=null;#t=this.#c.bind(this);#n=this.#x.bind(this);#i=this.#S.bind(this);#a=this.#v.bind(this);#o=null;#r=null;#l=null;#u=null;#s=null;#f=null;#d=!1;#h=null;#p=null;#y=null;#m=null;#g=!1;constructor({container:ot,color:ft,elements:mt,titleObj:_t,modificationDate:xt,contentsObj:wt,richText:Bt,parent:kt,rect:jt,parentRect:Mt,open:Dt}){this.#r=ot,this.#m=_t,this.#l=wt,this.#y=Bt,this.#s=kt,this.#o=ft,this.#p=jt,this.#f=Mt,this.#u=mt;const Ut=a.PDFDateString.toDateObject(xt);Ut&&(this.#e=kt.l10n.get("annotation_date_string",{date:Ut.toLocaleDateString(),time:Ut.toLocaleTimeString()})),this.trigger=mt.flatMap(Ot=>Ot.getElementsToTriggerPopup());for(const Ot of this.trigger)Ot.addEventListener("click",this.#a),Ot.addEventListener("mouseenter",this.#i),Ot.addEventListener("mouseleave",this.#n),Ot.classList.add("popupTriggerArea");for(const Ot of mt)Ot.container?.addEventListener("keydown",this.#t);this.#r.hidden=!0,Dt&&this.#v()}render(){if(this.#h)return;const{page:{view:ot},viewport:{rawDims:{pageWidth:ft,pageHeight:mt,pageX:_t,pageY:xt}}}=this.#s,wt=this.#h=document.createElement("div");if(wt.className="popup",this.#o){const Yt=wt.style.outlineColor=o.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?wt.style.backgroundColor=`color-mix(in srgb, ${Yt} 30%, white)`:wt.style.backgroundColor=o.Util.makeHexColor(...this.#o.map(on=>Math.floor(.7*(255-on)+on)))}const Bt=document.createElement("span");Bt.className="header";const kt=document.createElement("h1");if(Bt.append(kt),{dir:kt.dir,str:kt.textContent}=this.#m,wt.append(Bt),this.#e){const Yt=document.createElement("span");Yt.classList.add("popupDate"),this.#e.then(Qt=>{Yt.textContent=Qt}),Bt.append(Yt)}const jt=this.#l,Mt=this.#y;if(Mt?.str&&(!jt?.str||jt.str===Mt.str))j.XfaLayer.render({xfaHtml:Mt.html,intent:"richText",div:wt}),wt.lastChild.classList.add("richText","popupContent");else{const Yt=this._formatContents(jt);wt.append(Yt)}let Dt=!!this.#f,Ut=Dt?this.#f:this.#p;for(const Yt of this.#u)if(!Ut||o.Util.intersect(Yt.data.rect,Ut)!==null){Ut=Yt.data.rect,Dt=!0;break}const Ot=o.Util.normalizeRect([Ut[0],ot[3]-Ut[1]+ot[1],Ut[2],ot[3]-Ut[3]+ot[1]]),qt=Dt?Ut[2]-Ut[0]+5:0,Wt=Ot[0]+qt,Jt=Ot[1],{style:Kt}=this.#r;Kt.left=`${100*(Wt-_t)/ft}%`,Kt.top=`${100*(Jt-xt)/mt}%`,this.#r.append(wt)}_formatContents({str:ot,dir:ft}){const mt=document.createElement("p");mt.classList.add("popupContent"),mt.dir=ft;const _t=ot.split(/(?:\r\n?|\n)/);for(let xt=0,wt=_t.length;xt<wt;++xt){const Bt=_t[xt];mt.append(document.createTextNode(Bt)),xt<wt-1&&mt.append(document.createElement("br"))}return mt}#c(ot){ot.altKey||ot.shiftKey||ot.ctrlKey||ot.metaKey||(ot.key==="Enter"||ot.key==="Escape"&&this.#d)&&this.#v()}#v(){this.#d=!this.#d,this.#d?(this.#S(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#t)):(this.#x(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#t))}#S(){this.#h||this.render(),this.isVisible?this.#d&&this.#r.classList.add("focused"):(this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#x(){this.#r.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#r.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class At extends _e{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0}),this.textContent=ot.data.textContent,this.textPosition=ot.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const ot=document.createElement("div");ot.classList.add("annotationTextContent"),ot.setAttribute("role","comment");for(const ft of this.textContent){const mt=document.createElement("span");mt.textContent=ft,ot.append(mt)}this.container.append(ot)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=At;class Vt extends _e{#e=null;constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const ot=this.data,{width:ft,height:mt}=$(ot.rect),_t=this.svgFactory.create(ft,mt,!0),xt=this.#e=this.svgFactory.createElement("svg:line");return xt.setAttribute("x1",ot.rect[2]-ot.lineCoordinates[0]),xt.setAttribute("y1",ot.rect[3]-ot.lineCoordinates[1]),xt.setAttribute("x2",ot.rect[2]-ot.lineCoordinates[2]),xt.setAttribute("y2",ot.rect[3]-ot.lineCoordinates[3]),xt.setAttribute("stroke-width",ot.borderStyle.width||1),xt.setAttribute("stroke","transparent"),xt.setAttribute("fill","transparent"),_t.append(xt),this.container.append(_t),!ot.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Nt extends _e{#e=null;constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const ot=this.data,{width:ft,height:mt}=$(ot.rect),_t=this.svgFactory.create(ft,mt,!0),xt=ot.borderStyle.width,wt=this.#e=this.svgFactory.createElement("svg:rect");return wt.setAttribute("x",xt/2),wt.setAttribute("y",xt/2),wt.setAttribute("width",ft-xt),wt.setAttribute("height",mt-xt),wt.setAttribute("stroke-width",xt||1),wt.setAttribute("stroke","transparent"),wt.setAttribute("fill","transparent"),_t.append(wt),this.container.append(_t),!ot.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class It extends _e{#e=null;constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const ot=this.data,{width:ft,height:mt}=$(ot.rect),_t=this.svgFactory.create(ft,mt,!0),xt=ot.borderStyle.width,wt=this.#e=this.svgFactory.createElement("svg:ellipse");return wt.setAttribute("cx",ft/2),wt.setAttribute("cy",mt/2),wt.setAttribute("rx",ft/2-xt/2),wt.setAttribute("ry",mt/2-xt/2),wt.setAttribute("stroke-width",xt||1),wt.setAttribute("stroke","transparent"),wt.setAttribute("fill","transparent"),_t.append(wt),this.container.append(_t),!ot.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Lt extends _e{#e=null;constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const ot=this.data,{width:ft,height:mt}=$(ot.rect),_t=this.svgFactory.create(ft,mt,!0);let xt=[];for(const Bt of ot.vertices){const kt=Bt.x-ot.rect[0],jt=ot.rect[3]-Bt.y;xt.push(kt+","+jt)}xt=xt.join(" ");const wt=this.#e=this.svgFactory.createElement(this.svgElementName);return wt.setAttribute("points",xt),wt.setAttribute("stroke-width",ot.borderStyle.width||1),wt.setAttribute("stroke","transparent"),wt.setAttribute("fill","transparent"),_t.append(wt),this.container.append(_t),!ot.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class zt extends Lt{constructor(ot){super(ot),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ft extends _e{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Tt extends _e{#e=[];constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const ot=this.data,{width:ft,height:mt}=$(ot.rect),_t=this.svgFactory.create(ft,mt,!0);for(const xt of ot.inkLists){let wt=[];for(const kt of xt){const jt=kt.x-ot.rect[0],Mt=ot.rect[3]-kt.y;wt.push(`${jt},${Mt}`)}wt=wt.join(" ");const Bt=this.svgFactory.createElement(this.svgElementName);this.#e.push(Bt),Bt.setAttribute("points",wt),Bt.setAttribute("stroke-width",ot.borderStyle.width||1),Bt.setAttribute("stroke","transparent"),Bt.setAttribute("fill","transparent"),!ot.popupRef&&this.hasPopupData&&this._createPopup(),_t.append(Bt)}return this.container.append(_t),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=Tt;class ht extends _e{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class lt extends _e{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ut extends _e{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pt extends _e{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Et extends _e{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Et;class St extends _e{#e=null;constructor(ot){super(ot,{isRenderable:!0});const{filename:ft,content:mt}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(ft,!0),this.content=mt,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:ft,content:mt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:ot,data:ft}=this;let mt;ft.hasAppearance||ft.fillAlpha===0?mt=document.createElement("div"):(mt=document.createElement("img"),mt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ft.name)?"paperclip":"pushpin"}.svg`,ft.fillAlpha&&ft.fillAlpha<1&&(mt.style=`filter: opacity(${Math.round(ft.fillAlpha*100)}%);`)),mt.addEventListener("dblclick",this.#t.bind(this)),this.#e=mt;const{isMac:_t}=o.FeatureTest.platform;return ot.addEventListener("keydown",xt=>{xt.key==="Enter"&&(_t?xt.metaKey:xt.ctrlKey)&&this.#t()}),!ft.popupRef&&this.hasPopupData?this._createPopup():mt.classList.add("popupTriggerArea"),ot.append(mt),ot}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class Ct{#e=null;#t=null;#n=new Map;constructor({div:ot,accessibilityManager:ft,annotationCanvasMap:mt,l10n:_t,page:xt,viewport:wt}){this.div=ot,this.#e=ft,this.#t=mt,this.l10n=_t,this.page=xt,this.viewport=wt,this.zIndex=0,this.l10n||=_.NullL10n}#i(ot,ft){const mt=ot.firstChild||ot;mt.id=`${o.AnnotationPrefix}${ft}`,this.div.append(ot),this.#e?.moveElementInDOM(this.div,ot,mt,!1)}async render(ot){const{annotations:ft}=ot,mt=this.div;(0,a.setLayerDimensions)(mt,this.viewport);const _t=new Map,xt={data:null,layer:mt,linkService:ot.linkService,downloadManager:ot.downloadManager,imageResourcesPath:ot.imageResourcesPath||"",renderForms:ot.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:ot.annotationStorage||new c.AnnotationStorage,enableScripting:ot.enableScripting===!0,hasJSActions:ot.hasJSActions,fieldObjects:ot.fieldObjects,parent:this,elements:null};for(const wt of ft){if(wt.noHTML)continue;const Bt=wt.annotationType===o.AnnotationType.POPUP;if(Bt){const Mt=_t.get(wt.id);if(!Mt)continue;xt.elements=Mt}else{const{width:Mt,height:Dt}=$(wt.rect);if(Mt<=0||Dt<=0)continue}xt.data=wt;const kt=et.create(xt);if(!kt.isRenderable)continue;if(!Bt&&wt.popupRef){const Mt=_t.get(wt.popupRef);Mt?Mt.push(kt):_t.set(wt.popupRef,[kt])}kt.annotationEditorType>0&&this.#n.set(kt.data.id,kt);const jt=kt.render();wt.hidden&&(jt.style.visibility="hidden"),this.#i(jt,wt.id)}this.#a(),await this.l10n.translate(mt)}update({viewport:ot}){const ft=this.div;this.viewport=ot,(0,a.setLayerDimensions)(ft,{rotation:ot.rotation}),this.#a(),ft.hidden=!1}#a(){if(!this.#t)return;const ot=this.div;for(const[ft,mt]of this.#t){const _t=ot.querySelector(`[data-annotation-id="${ft}"]`);if(!_t)continue;const{firstChild:xt}=_t;xt?xt.nodeName==="CANVAS"?xt.replaceWith(mt):xt.before(mt):_t.append(mt)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(ot){return this.#n.get(ot)}}e.AnnotationLayer=Ct},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function o(c){return Math.max(0,Math.min(255,255*c))}class a{static CMYK_G([d,_,j,h]){return["G",1-Math.min(1,.3*d+.59*j+.11*_+h)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=o(d),[d,d,d]}static G_HTML([d]){const _=s(d);return`#${_}${_}${_}`}static RGB_G([d,_,j]){return["G",.3*d+.59*_+.11*j]}static RGB_rgb(d){return d.map(o)}static RGB_HTML(d){return`#${d.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,_,j,h]){return["RGB",1-Math.min(1,d+h),1-Math.min(1,j+h),1-Math.min(1,_+h)]}static CMYK_rgb([d,_,j,h]){return[o(1-Math.min(1,d+h)),o(1-Math.min(1,j+h)),o(1-Math.min(1,_+h))]}static CMYK_HTML(d){const _=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(_)}static RGB_CMYK([d,_,j]){const h=1-d,g=1-_,b=1-j,$=Math.min(h,g,b);return["CMYK",h,g,b,$]}}e.ColorConverters=a},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=o;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function o(d,_){switch(d){case"find_match_count":d=`find_match_count[${_.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${_.limit===1?"one":"other"}]`;break}return s[d]||""}function a(d,_){return _?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(j,h)=>h in _?_[h]:"{{"+h+"}}"):d}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,_=null,j=o(d,_)){return a(j,_)},async translate(d){}};e.NullL10n=c},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var o=s(25);class a{static setupStorage(d,_,j,h,g){const b=h.getValue(_,{value:null});switch(j.name){case"textarea":if(b.value!==null&&(d.textContent=b.value),g==="print")break;d.addEventListener("input",$=>{h.setValue(_,{value:$.target.value})});break;case"input":if(j.attributes.type==="radio"||j.attributes.type==="checkbox"){if(b.value===j.attributes.xfaOn?d.setAttribute("checked",!0):b.value===j.attributes.xfaOff&&d.removeAttribute("checked"),g==="print")break;d.addEventListener("change",$=>{h.setValue(_,{value:$.target.checked?$.target.getAttribute("xfaOn"):$.target.getAttribute("xfaOff")})})}else{if(b.value!==null&&d.setAttribute("value",b.value),g==="print")break;d.addEventListener("input",$=>{h.setValue(_,{value:$.target.value})})}break;case"select":if(b.value!==null){d.setAttribute("value",b.value);for(const $ of j.children)$.attributes.value===b.value?$.attributes.selected=!0:$.attributes.hasOwnProperty("selected")&&delete $.attributes.selected}d.addEventListener("input",$=>{const et=$.target.options,_e=et.selectedIndex===-1?"":et[et.selectedIndex].value;h.setValue(_,{value:_e})});break}}static setAttributes({html:d,element:_,storage:j=null,intent:h,linkService:g}){const{attributes:b}=_,$=d instanceof HTMLAnchorElement;b.type==="radio"&&(b.name=`${b.name}-${h}`);for(const[et,_e]of Object.entries(b))if(_e!=null)switch(et){case"class":_e.length&&d.setAttribute(et,_e.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",_e);break;case"style":Object.assign(d.style,_e);break;case"textContent":d.textContent=_e;break;default:(!$||et!=="href"&&et!=="newWindow")&&d.setAttribute(et,_e)}$&&g.addLinkAttributes(d,b.href,b.newWindow),j&&b.dataId&&this.setupStorage(d,b.dataId,_,j)}static render(d){const _=d.annotationStorage,j=d.linkService,h=d.xfaHtml,g=d.intent||"display",b=document.createElement(h.name);h.attributes&&this.setAttributes({html:b,element:h,intent:g,linkService:j});const $=[[h,-1,b]],et=d.div;if(et.append(b),d.viewport){const nt=`matrix(${d.viewport.transform.join(",")})`;et.style.transform=nt}g!=="richText"&&et.setAttribute("class","xfaLayer xfaFont");const _e=[];for(;$.length>0;){const[nt,st,tt]=$.at(-1);if(st+1===nt.children.length){$.pop();continue}const it=nt.children[++$.at(-1)[1]];if(it===null)continue;const{name:at}=it;if(at==="#text"){const rt=document.createTextNode(it.value);_e.push(rt),tt.append(rt);continue}const ct=it?.attributes?.xmlns?document.createElementNS(it.attributes.xmlns,at):document.createElement(at);if(tt.append(ct),it.attributes&&this.setAttributes({html:ct,element:it,storage:_,intent:g,linkService:j}),it.children&&it.children.length>0)$.push([it,-1,ct]);else if(it.value){const rt=document.createTextNode(it.value);o.XfaText.shouldBuildText(at)&&_e.push(rt),ct.append(rt)}}for(const nt of et.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))nt.setAttribute("readOnly",!0);return{textDivs:_e}}static update(d){const _=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=_,d.div.hidden=!1}}e.XfaLayer=a},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var o=s(1),a=s(4),c=s(29),d=s(6),_=s(5);class j extends a.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#a=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#r=new Path2D;#l=!1;#u=!1;#s=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(g){super({...g,name:"inkEditor"}),this.color=g.color||null,this.thickness=g.thickness||null,this.opacity=g.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(g){a.AnnotationEditor.initialize(g,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(g,b){switch(g){case o.AnnotationEditorParamsType.INK_THICKNESS:j._defaultThickness=b;break;case o.AnnotationEditorParamsType.INK_COLOR:j._defaultColor=b;break;case o.AnnotationEditorParamsType.INK_OPACITY:j._defaultOpacity=b/100;break}}updateParams(g,b){switch(g){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#y(b);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#m(b);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#g(b);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,j._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,j._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(j._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||j._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||j._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??j._defaultOpacity))]]}#y(g){const b=this.thickness;this.addCommands({cmd:()=>{this.thickness=g,this.#T()},undo:()=>{this.thickness=b,this.#T()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(g){const b=this.color;this.addCommands({cmd:()=>{this.color=g,this.#P()},undo:()=>{this.color=b,this.#P()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(g){g/=100;const b=this.opacity;this.addCommands({cmd:()=>{this.opacity=g,this.#P()},undo:()=>{this.opacity=b,this.#P()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#B(),this.#R()),this.isAttachedToDOM||(this.parent.add(this),this.#_()),this.#T()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(g){!this.parent&&g?this._uiManager.removeShouldRescale(this):this.parent&&g===null&&this._uiManager.addShouldRescale(this),super.setParent(g)}onScaleChanging(){const[g,b]=this.parentDimensions,$=this.width*g,et=this.height*b;this.setDimensions($,et)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#c(){const{parentRotation:g,parentDimensions:[b,$]}=this;switch(g){case 90:return[0,$,$,b];case 180:return[b,$,b,$];case 270:return[b,0,$,b];default:return[0,0,b,$]}}#v(){const{ctx:g,color:b,opacity:$,thickness:et,parentScale:_e,scaleFactor:nt}=this;g.lineWidth=et*_e/nt,g.lineCap="round",g.lineJoin="round",g.miterLimit=10,g.strokeStyle=`${b}${(0,_.opacityToHex)($)}`}#S(g,b){this.canvas.addEventListener("contextmenu",d.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#a),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#s||(this.#s=!0,this.#_(),this.thickness||=j._defaultThickness,this.color||=j._defaultColor||a.AnnotationEditor._defaultLineColor,this.opacity??=j._defaultOpacity),this.currentPath.push([g,b]),this.#u=!1,this.#v(),this.#p=()=>{this.#M(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#x(g,b){const[$,et]=this.currentPath.at(-1);if(this.currentPath.length>1&&g===$&&b===et)return;const _e=this.currentPath;let nt=this.#r;if(_e.push([g,b]),this.#u=!0,_e.length<=2){nt.moveTo(..._e[0]),nt.lineTo(g,b);return}_e.length===3&&(this.#r=nt=new Path2D,nt.moveTo(..._e[0])),this.#N(nt,..._e.at(-3),..._e.at(-2),g,b)}#C(){if(this.currentPath.length===0)return;const g=this.currentPath.at(-1);this.#r.lineTo(...g)}#V(g,b){this.#p=null,g=Math.min(Math.max(g,0),this.canvas.width),b=Math.min(Math.max(b,0),this.canvas.height),this.#x(g,b),this.#C();let $;if(this.currentPath.length!==1)$=this.#F();else{const tt=[g,b];$=[[tt,tt.slice(),tt.slice(),tt]]}const et=this.#r,_e=this.currentPath;this.currentPath=[],this.#r=new Path2D;const nt=()=>{this.allRawPaths.push(_e),this.paths.push($),this.bezierPath2D.push(et),this.rebuild()},st=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#B(),this.#R()),this.#T())};this.addCommands({cmd:nt,undo:st,mustExec:!0})}#M(){if(!this.#u)return;this.#u=!1;const g=Math.ceil(this.thickness*this.parentScale),b=this.currentPath.slice(-3),$=b.map(nt=>nt[0]),et=b.map(nt=>nt[1]);Math.min(...$)-g,Math.max(...$)+g,Math.min(...et)-g,Math.max(...et)+g;const{ctx:_e}=this;_e.save(),_e.clearRect(0,0,this.canvas.width,this.canvas.height);for(const nt of this.bezierPath2D)_e.stroke(nt);_e.stroke(this.#r),_e.restore()}#N(g,b,$,et,_e,nt,st){const tt=(b+et)/2,it=($+_e)/2,at=(et+nt)/2,ct=(_e+st)/2;g.bezierCurveTo(tt+2*(et-tt)/3,it+2*(_e-it)/3,at+2*(et-at)/3,ct+2*(_e-ct)/3,at,ct)}#F(){const g=this.currentPath;if(g.length<=2)return[[g[0],g[0],g.at(-1),g.at(-1)]];const b=[];let $,[et,_e]=g[0];for($=1;$<g.length-2;$++){const[rt,dt]=g[$],[yt,vt]=g[$+1],gt=(rt+yt)/2,At=(dt+vt)/2,Vt=[et+2*(rt-et)/3,_e+2*(dt-_e)/3],Nt=[gt+2*(rt-gt)/3,At+2*(dt-At)/3];b.push([[et,_e],Vt,Nt,[gt,At]]),[et,_e]=[gt,At]}const[nt,st]=g[$],[tt,it]=g[$+1],at=[et+2*(nt-et)/3,_e+2*(st-_e)/3],ct=[tt+2*(nt-tt)/3,it+2*(st-it)/3];return b.push([[et,_e],at,ct,[tt,it]]),b}#P(){if(this.isEmpty()){this.#A();return}this.#v();const{canvas:g,ctx:b}=this;b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,g.width,g.height),this.#A();for(const $ of this.bezierPath2D)b.stroke($)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#T(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(g){this._focusEventsAllowed&&(super.focusin(g),this.enableEditMode())}canvasPointerdown(g){g.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),g.preventDefault(),g.type!=="mouse"&&this.div.focus(),this.#S(g.offsetX,g.offsetY))}canvasPointermove(g){g.preventDefault(),this.#x(g.offsetX,g.offsetY)}canvasPointerup(g){g.preventDefault(),this.#k(g)}canvasPointerleave(g){this.#k(g)}#k(g){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#a),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",d.noContextMenu)},10),this.#V(g.offsetX,g.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#B(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(g=>this.canvas?.setAttribute("aria-label",g)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#R(){this.#f=new ResizeObserver(g=>{const b=g[0].contentRect;b.width&&b.height&&this.setDimensions(b.width,b.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let g,b;this.width&&(g=this.x,b=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(st=>this.div?.setAttribute("aria-label",st));const[$,et,_e,nt]=this.#c();if(this.setAt($,et,0,0),this.setDims(_e,nt),this.#B(),this.width){const[st,tt]=this.parentDimensions;this.setAspectRatio(this.width*st,this.height*tt),this.setAt(g*st,b*tt,this.width*st,this.height*tt),this.#s=!0,this.#_(),this.setDims(this.width*st,this.height*tt),this.#P(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#R(),this.div}#_(){if(!this.#s)return;const[g,b]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*g),this.canvas.height=Math.ceil(this.height*b),this.#A()}setDimensions(g,b){const $=Math.round(g),et=Math.round(b);if(this.#d===$&&this.#h===et)return;this.#d=$,this.#h=et,this.canvas.style.visibility="hidden";const[_e,nt]=this.parentDimensions;this.width=g/_e,this.height=b/nt,this.fixAndSetPosition(),this.#l&&this.#w(g,b),this.#_(),this.#P(),this.canvas.style.visibility="visible",this.fixDims()}#w(g,b){const $=this.#I(),et=(g-$)/this.#t,_e=(b-$)/this.#e;this.scaleFactor=Math.min(et,_e)}#A(){const g=this.#I()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+g,this.translationY*this.scaleFactor+g)}static#D(g){const b=new Path2D;for(let $=0,et=g.length;$<et;$++){const[_e,nt,st,tt]=g[$];$===0&&b.moveTo(..._e),b.bezierCurveTo(nt[0],nt[1],st[0],st[1],tt[0],tt[1])}return b}static#L(g,b,$){const[et,_e,nt,st]=b;switch($){case 0:for(let tt=0,it=g.length;tt<it;tt+=2)g[tt]+=et,g[tt+1]=st-g[tt+1];break;case 90:for(let tt=0,it=g.length;tt<it;tt+=2){const at=g[tt];g[tt]=g[tt+1]+et,g[tt+1]=at+_e}break;case 180:for(let tt=0,it=g.length;tt<it;tt+=2)g[tt]=nt-g[tt],g[tt+1]+=_e;break;case 270:for(let tt=0,it=g.length;tt<it;tt+=2){const at=g[tt];g[tt]=nt-g[tt+1],g[tt+1]=st-at}break;default:throw new Error("Invalid rotation")}return g}static#U(g,b,$){const[et,_e,nt,st]=b;switch($){case 0:for(let tt=0,it=g.length;tt<it;tt+=2)g[tt]-=et,g[tt+1]=st-g[tt+1];break;case 90:for(let tt=0,it=g.length;tt<it;tt+=2){const at=g[tt];g[tt]=g[tt+1]-_e,g[tt+1]=at-et}break;case 180:for(let tt=0,it=g.length;tt<it;tt+=2)g[tt]=nt-g[tt],g[tt+1]-=_e;break;case 270:for(let tt=0,it=g.length;tt<it;tt+=2){const at=g[tt];g[tt]=st-g[tt+1],g[tt+1]=nt-at}break;default:throw new Error("Invalid rotation")}return g}#O(g,b,$,et){const _e=[],nt=this.thickness/2,st=g*b+nt,tt=g*$+nt;for(const it of this.paths){const at=[],ct=[];for(let rt=0,dt=it.length;rt<dt;rt++){const[yt,vt,gt,At]=it[rt],Vt=g*yt[0]+st,Nt=g*yt[1]+tt,It=g*vt[0]+st,Lt=g*vt[1]+tt,zt=g*gt[0]+st,Ft=g*gt[1]+tt,Tt=g*At[0]+st,ht=g*At[1]+tt;rt===0&&(at.push(Vt,Nt),ct.push(Vt,Nt)),at.push(It,Lt,zt,Ft,Tt,ht),ct.push(It,Lt),rt===dt-1&&ct.push(Tt,ht)}_e.push({bezier:j.#L(at,et,this.rotation),points:j.#L(ct,et,this.rotation)})}return _e}#b(){let g=1/0,b=-1/0,$=1/0,et=-1/0;for(const _e of this.paths)for(const[nt,st,tt,it]of _e){const at=o.Util.bezierBoundingBox(...nt,...st,...tt,...it);g=Math.min(g,at[0]),$=Math.min($,at[1]),b=Math.max(b,at[2]),et=Math.max(et,at[3])}return[g,$,b,et]}#I(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#T(g=!1){if(this.isEmpty())return;if(!this.#l){this.#P();return}const b=this.#b(),$=this.#I();this.#t=Math.max(a.AnnotationEditor.MIN_SIZE,b[2]-b[0]),this.#e=Math.max(a.AnnotationEditor.MIN_SIZE,b[3]-b[1]);const et=Math.ceil($+this.#t*this.scaleFactor),_e=Math.ceil($+this.#e*this.scaleFactor),[nt,st]=this.parentDimensions;this.width=et/nt,this.height=_e/st,this.setAspectRatio(et,_e);const tt=this.translationX,it=this.translationY;this.translationX=-b[0],this.translationY=-b[1],this.#_(),this.#P(),this.#d=et,this.#h=_e,this.setDims(et,_e);const at=g?$/this.scaleFactor/2:0;this.translate(tt-this.translationX-at,it-this.translationY-at)}static deserialize(g,b,$){if(g instanceof c.InkAnnotationElement)return null;const et=super.deserialize(g,b,$);et.thickness=g.thickness,et.color=o.Util.makeHexColor(...g.color),et.opacity=g.opacity;const[_e,nt]=et.pageDimensions,st=et.width*_e,tt=et.height*nt,it=et.parentScale,at=g.thickness/2;et.#l=!0,et.#d=Math.round(st),et.#h=Math.round(tt);const{paths:ct,rect:rt,rotation:dt}=g;for(let{bezier:vt}of ct){vt=j.#U(vt,rt,dt);const gt=[];et.paths.push(gt);let At=it*(vt[0]-at),Vt=it*(vt[1]-at);for(let It=2,Lt=vt.length;It<Lt;It+=6){const zt=it*(vt[It]-at),Ft=it*(vt[It+1]-at),Tt=it*(vt[It+2]-at),ht=it*(vt[It+3]-at),lt=it*(vt[It+4]-at),ut=it*(vt[It+5]-at);gt.push([[At,Vt],[zt,Ft],[Tt,ht],[lt,ut]]),At=lt,Vt=ut}const Nt=this.#D(gt);et.bezierPath2D.push(Nt)}const yt=et.#b();return et.#t=Math.max(a.AnnotationEditor.MIN_SIZE,yt[2]-yt[0]),et.#e=Math.max(a.AnnotationEditor.MIN_SIZE,yt[3]-yt[1]),et.#w(st,tt),et}serialize(){if(this.isEmpty())return null;const g=this.getRect(0,0),b=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:b,thickness:this.thickness,opacity:this.opacity,paths:this.#O(this.scaleFactor/this.parentScale,this.translationX,this.translationY,g),pageIndex:this.pageIndex,rect:g,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}e.InkEditor=j},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var o=s(1),a=s(4),c=s(6),d=s(29);class _ extends a.AnnotationEditor{#e=null;#t=null;#n=null;#i=null;#a=null;#o=null;#r=null;#l=null;#u=!1;#s=!1;static _type="stamp";constructor(h){super({...h,name:"stampEditor"}),this.#i=h.bitmapUrl,this.#a=h.bitmapFile}static initialize(h){a.AnnotationEditor.initialize(h)}static get supportedTypes(){const h=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",h.map(g=>`image/${g}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(h){return this.supportedTypes.includes(h)}static paste(h,g){g.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:h.getAsFile()})}#f(h,g=!1){if(!h){this.remove();return}this.#e=h.bitmap,g||(this.#t=h.id,this.#u=h.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(g=>this.#f(g,!0)).finally(()=>this.#d());return}if(this.#i){const g=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(g).then(b=>this.#f(b)).finally(()=>this.#d());return}if(this.#a){const g=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(g).then(b=>this.#f(b)).finally(()=>this.#d());return}const h=document.createElement("input");h.type="file",h.accept=_.supportedTypesStr,this.#n=new Promise(g=>{h.addEventListener("change",async()=>{if(!h.files||h.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const b=await this._uiManager.imageManager.getFromFile(h.files[0]);this.#f(b)}g()}),h.addEventListener("cancel",()=>{this.remove(),g()})}).finally(()=>this.#d()),h.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#r?.disconnect(),this.#r=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let h,g;if(this.width&&(h=this.x,g=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){const[b,$]=this.parentDimensions;this.setAt(h*b,g*$,this.width*b,this.height*$)}return this.div}#p(){const{div:h}=this;let{width:g,height:b}=this.#e;const[$,et]=this.pageDimensions,_e=.75;if(this.width)g=this.width*$,b=this.height*et;else if(g>_e*$||b>_e*et){const it=Math.min(_e*$/g,_e*et/b);g*=it,b*=it}const[nt,st]=this.parentDimensions;this.setDims(g*nt/$,b*st/et),this._uiManager.enableWaiting(!1);const tt=this.#o=document.createElement("canvas");h.append(tt),h.hidden=!1,this.#g(g,b),this.#v(),this.#s||(this.parent.addUndoableEditor(this),this.#s=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(h,g){const[b,$]=this.parentDimensions;this.width=h/b,this.height=g/$,this.setDims(h,g),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const et=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(h,g)},et)}#m(h,g){const{width:b,height:$}=this.#e;let et=b,_e=$,nt=this.#e;for(;et>2*h||_e>2*g;){const st=et,tt=_e;et>2*h&&(et=et>=16384?Math.floor(et/2)-1:Math.ceil(et/2)),_e>2*g&&(_e=_e>=16384?Math.floor(_e/2)-1:Math.ceil(_e/2));const it=new OffscreenCanvas(et,_e);it.getContext("2d").drawImage(nt,0,0,st,tt,0,0,et,_e),nt=it.transferToImageBitmap()}return nt}#g(h,g){h=Math.ceil(h),g=Math.ceil(g);const b=this.#o;if(!b||b.width===h&&b.height===g)return;b.width=h,b.height=g;const $=this.#u?this.#e:this.#m(h,g),et=b.getContext("2d");et.filter=this._uiManager.hcmFilter,et.drawImage($,0,0,$.width,$.height,0,0,h,g)}#c(h){if(h){if(this.#u){const $=this._uiManager.imageManager.getSvgUrl(this.#t);if($)return $}const g=document.createElement("canvas");return{width:g.width,height:g.height}=this.#e,g.getContext("2d").drawImage(this.#e,0,0),g.toDataURL()}if(this.#u){const[g,b]=this.pageDimensions,$=Math.round(this.width*g*c.PixelsPerInch.PDF_TO_CSS_UNITS),et=Math.round(this.height*b*c.PixelsPerInch.PDF_TO_CSS_UNITS),_e=new OffscreenCanvas($,et);return _e.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,$,et),_e.transferToImageBitmap()}return structuredClone(this.#e)}#v(){this.#r=new ResizeObserver(h=>{const g=h[0].contentRect;g.width&&g.height&&this.#y(g.width,g.height)}),this.#r.observe(this.div)}static deserialize(h,g,b){if(h instanceof d.StampAnnotationElement)return null;const $=super.deserialize(h,g,b),{rect:et,bitmapUrl:_e,bitmapId:nt,isSvg:st,accessibilityData:tt}=h;nt&&b.imageManager.isValidId(nt)?$.#t=nt:$.#i=_e,$.#u=st;const[it,at]=$.pageDimensions;return $.width=(et[2]-et[0])/it,$.height=(et[3]-et[1])/at,tt&&($.altTextData=tt),$}serialize(h=!1,g=null){if(this.isEmpty())return null;const b={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(h)return b.bitmapUrl=this.#c(!0),b.accessibilityData=this.altTextData,b;const{decorative:$,altText:et}=this.altTextData;if(!$&&et&&(b.accessibilityData={type:"Figure",alt:et}),g===null)return b;g.stamps||=new Map;const _e=this.#u?(b.rect[2]-b.rect[0])*(b.rect[3]-b.rect[1]):null;if(!g.stamps.has(this.#t))g.stamps.set(this.#t,{area:_e,serialized:b}),b.bitmap=this.#c(!1);else if(this.#u){const nt=g.stamps.get(this.#t);_e>nt.area&&(nt.area=_e,nt.serialized.bitmap.close(),nt.serialized.bitmap=this.#c(!1))}return b}}e.StampEditor=_}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var e=__webpack_module_cache__[i];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[i]={exports:{}};return __webpack_modules__[i](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(i,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(i,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(i,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(i,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return _.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(i,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return j.GlobalWorkerOptions}}),Object.defineProperty(i,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(i,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return h.XfaLayer}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(i,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(i,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(i,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(i,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),_=__w_pdfjs_require__(29),j=__w_pdfjs_require__(14),h=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,define_process_env_default={};pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";function ResumeValidator({settings:i}){const[e,s]=reactExports.useState("text"),[o,a]=reactExports.useState(""),[c,d]=reactExports.useState(""),[_,j]=reactExports.useState(!1),[h,g]=reactExports.useState(!1),[b,$]=reactExports.useState(null),[et,_e]=reactExports.useState(null),[nt,st]=reactExports.useState(null),tt=reactExports.useRef(null),it=54,at=2*Math.PI*it,ct=async vt=>{g(!0),st(null);try{const gt=await vt.arrayBuffer(),At=await pdfExports.getDocument({data:gt}).promise;let Vt="";for(let Nt=1;Nt<=At.numPages;Nt++){const zt=(await(await At.getPage(Nt)).getTextContent()).items.map(Ft=>Ft.str).join(" ");Vt+=zt+`
`}if(!Vt.trim())throw new Error("Could not extract any text from this PDF. It might be an image-only scan.");a(Vt),$(vt.name)}catch(gt){console.error(gt),st(gt.message||"Failed to parse PDF. Please try pasting the text instead."),$(null),a("")}finally{g(!1)}},rt=vt=>{const gt=vt.target.files?.[0];if(gt){if(gt.type!=="application/pdf"){st("Please upload a PDF file.");return}ct(gt)}},dt=()=>{$(null),a(""),tt.current&&(tt.current.value="")},yt=async()=>{if(!o||!c){st("Please provide both your resume content and a job description.");return}if(!i?.geminiApiKey&&!define_process_env_default.GEMINI_API_KEY){st("Please add your Gemini API key in Settings first.");return}j(!0),st(null);try{const vt=await analyzeResume(o,c,i);_e(vt)}catch(vt){console.error(vt),st(vt.message||"Failed to analyze resume. Please ensure your API key is valid.")}finally{j(!1)}};return jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-y-auto custom-scrollbar",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Resume Lab"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Validate and tailor your resume against specific job descriptions."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-1",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{size:16,className:"text-violet-400"}),"Resume Input"]}),jsxRuntimeExports.jsxs("div",{className:"flex bg-white/5 p-1 rounded-lg border border-white/10",children:[jsxRuntimeExports.jsx("button",{onClick:()=>s("text"),className:`px-3 py-1 text-xs rounded-md transition-all ${e==="text"?"bg-violet-600 text-white shadow-lg shadow-violet-600/20":"text-gray-500 hover:text-gray-300"}`,children:"Text"}),jsxRuntimeExports.jsx("button",{onClick:()=>s("pdf"),className:`px-3 py-1 text-xs rounded-md transition-all ${e==="pdf"?"bg-violet-600 text-white shadow-lg shadow-violet-600/20":"text-gray-500 hover:text-gray-300"}`,children:"PDF"})]})]}),e==="text"?jsxRuntimeExports.jsx("textarea",{value:o,onChange:vt=>a(vt.target.value),placeholder:"Paste your resume content here...",className:"flex-1 min-h-[300px] glass rounded-2xl p-4 bg-white/5 border border-white/10 focus:border-violet-500 focus:ring-1 focus:ring-violet-500 outline-none text-sm resize-none transition-all placeholder:text-gray-600"}):jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-[300px] flex flex-col",children:b?jsxRuntimeExports.jsxs("div",{className:"flex-1 glass rounded-2xl p-6 border border-violet-500/30 flex flex-col items-center justify-center text-center animate-in zoom-in-95",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-violet-600/20 rounded-2xl mb-4 text-violet-400",children:jsxRuntimeExports.jsx(FileUp,{size:48})}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium mb-1 truncate max-w-full px-4",children:b}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-6",children:"Text extracted successfully"}),jsxRuntimeExports.jsxs("button",{onClick:dt,className:"flex items-center gap-2 px-4 py-2 text-xs font-semibold text-red-400 hover:bg-red-400/10 rounded-lg transition-all",children:[jsxRuntimeExports.jsx(X,{size:14})," Remove File"]})]}):jsxRuntimeExports.jsxs("label",{className:"flex-1 glass rounded-2xl border-2 border-dashed border-white/10 hover:border-violet-500/50 transition-all cursor-pointer flex flex-col items-center justify-center text-center group active:scale-[0.99]",children:[jsxRuntimeExports.jsx("input",{type:"file",ref:tt,onChange:rt,accept:".pdf",className:"hidden"}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-white/5 rounded-2xl mb-4 text-gray-500 group-hover:text-violet-400 group-hover:bg-violet-500/5 transition-all",children:h?jsxRuntimeExports.jsx(LoaderCircle,{size:40,className:"animate-spin"}):jsxRuntimeExports.jsx(Upload,{size:40})}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 font-medium",children:h?"Reading PDF...":"Drop your resume PDF here"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"or click to browse files"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2 px-1",children:[jsxRuntimeExports.jsx(Search,{size:16,className:"text-blue-400"}),"Target Job Description"]}),jsxRuntimeExports.jsx("textarea",{value:c,onChange:vt=>d(vt.target.value),placeholder:"Paste the job requirements or description here...",className:"flex-1 min-h-[300px] glass rounded-2xl p-4 bg-white/5 border border-white/10 focus:border-violet-500 focus:ring-1 focus:ring-violet-500 outline-none text-sm resize-none transition-all placeholder:text-gray-600"})]})]}),jsxRuntimeExports.jsx("button",{onClick:yt,disabled:_||!o||!c||h,className:"w-full py-4 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-800 disabled:text-gray-600 rounded-2xl font-bold text-white flex items-center justify-center gap-2 transition-all active:scale-[0.98] glow mb-12 shadow-lg shadow-violet-600/10",children:_?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin",size:20}),"Astra is analyzing your match..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Send,{size:20}),"Validate Alignment"]})}),nt&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl text-red-400 flex items-start gap-3 mb-8 animate-in slide-in-from-top-2",children:[jsxRuntimeExports.jsx(CircleAlert,{size:20,className:"mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:nt})]}),et&&jsxRuntimeExports.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/10 flex flex-col items-center text-center relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:jsxRuntimeExports.jsx(Star,{size:120,className:"text-violet-500"})}),jsxRuntimeExports.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center mb-4",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 128 128",className:"absolute inset-0 w-full h-full -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"64",cy:"64",r:it,fill:"transparent",stroke:"rgba(255,255,255,0.05)",strokeWidth:"8"}),jsxRuntimeExports.jsx("circle",{cx:"64",cy:"64",r:it,fill:"transparent",stroke:"#8b5cf6",strokeWidth:"8",strokeDasharray:at,strokeDashoffset:at-at*et.rating/10,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),jsxRuntimeExports.jsxs("div",{className:"z-10 flex items-baseline gap-0.5",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl font-black text-white",children:et.rating}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-gray-500",children:"/10"})]})]}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Match Quality"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 max-w-md text-sm",children:"Based on ATS standards and specific job requirements analyzed by Astra AI."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 border border-white/10 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-2 -right-2 p-4 text-green-500/5",children:jsxRuntimeExports.jsx(CircleCheckBig,{size:80})}),jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 text-green-400 font-bold mb-4",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:18}),"Top Strengths"]}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:et.strengths.map((vt,gt)=>jsxRuntimeExports.jsx("li",{className:"text-sm text-gray-300 bg-white/5 p-3 rounded-xl border border-white/5 hover:border-green-500/20 transition-all",children:vt},gt))})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 border border-white/10 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-2 -right-2 p-4 text-red-500/5",children:jsxRuntimeExports.jsx(CircleAlert,{size:80})}),jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 text-red-400 font-bold mb-4",children:[jsxRuntimeExports.jsx(CircleAlert,{size:18}),"Critical Gaps"]}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:et.gaps.map((vt,gt)=>jsxRuntimeExports.jsx("li",{className:"text-sm text-gray-300 bg-white/5 p-3 rounded-xl border border-white/5 hover:border-red-500/20 transition-all",children:vt},gt))})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 border border-white/10",children:[jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 text-violet-400 font-bold mb-6",children:[jsxRuntimeExports.jsx(PenLine,{size:18}),"Strategic Recommendations"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-500"}),"Experience Refinement"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed bg-white/5 p-4 rounded-xl border border-white/5",children:et.suggestions.experience})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Skills & Keyword Optimization"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed bg-white/5 p-4 rounded-xl border border-white/5",children:et.suggestions.skills})]})]})]})]})]})})}const GMAIL_CLIENT_ID="992887115158-b77iu6co1laj7nj3jo34vajhori2a3dl.apps.googleusercontent.com",GMAIL_CLIENT_SECRET="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",GMAIL_SCOPES=OAUTH_CONFIG.SCOPES;function SettingsView({settings:i,onUpdate:e,onClearData:s,onLogout:o}){const[a,c]=reactExports.useState(!1),[d,_]=reactExports.useState(i.geminiApiKey||void 0||""),[j,h]=reactExports.useState(!1),g=it=>{const{name:at,value:ct}=it.target;e({...i,[at]:ct})},b=()=>{e({...i,geminiApiKey:d})},$=()=>{_(""),e({...i,geminiApiKey:""})},et=async()=>{h(!0);try{const it=window.location.href.split("?")[0].split("#")[0],at=new URL("https://accounts.google.com/o/oauth2/v2/auth");at.searchParams.set("client_id",GMAIL_CLIENT_ID),at.searchParams.set("redirect_uri",it),at.searchParams.set("response_type","code"),at.searchParams.set("access_type","offline"),at.searchParams.set("scope",GMAIL_SCOPES),at.searchParams.set("prompt","consent"),window.open(at.toString(),"gmail-oauth","width=500,height=600,scrollbars=yes");const ct=async rt=>{if(rt.origin===window.location.origin&&(rt.data.type==="gmail-oauth-success"||rt.data.type==="gmail-oauth-error"))if(window.removeEventListener("message",ct),rt.data.type==="gmail-oauth-success")try{const{code:dt}=rt.data;if(dt){const yt=await exchangeCodeForTokens(dt,GMAIL_CLIENT_ID,GMAIL_CLIENT_SECRET,it),vt=await fetchUserInfo(yt.access_token);e({...i,isGmailConnected:!0,gmailAccessToken:yt.access_token,gmailRefreshToken:yt.refresh_token,userEmail:vt?.email||i.userEmail,userName:vt?.name||i.userName})}}catch(dt){console.error("Token exchange failed:",dt),alert("Gmail connection failed during token exchange.")}finally{h(!1)}else console.error("Gmail OAuth error:",rt.data.error),h(!1)};window.addEventListener("message",ct),setTimeout(()=>{h(!1)},12e4)}catch(it){console.error("Gmail connection error:",it),h(!1)}},_e=()=>{e({...i,isGmailConnected:!1,gmailAccessToken:"",gmailRefreshToken:"",userEmail:""})},nt=()=>{const it=localStorage.getItem(STORAGE_KEYS.JOBS);if(!it)return;const at=new Blob([it],{type:"application/json"}),ct=URL.createObjectURL(at),rt=document.createElement("a");rt.href=ct,rt.download=`astra-career-export-${new Date().toISOString().split("T")[0]}.json`,rt.click()},st=()=>{window.confirm("Are you sure? This will delete all tracked applications permanently.")&&s()},tt=i.geminiApiKey||void 0;return jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-y-auto custom-scrollbar",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Settings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Personalize your Astra experience and manage your data."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 glass rounded-3xl p-8 border border-white/10 space-y-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Key,{size:20,className:"text-yellow-400"}),"Gemini API Key"]}),!tt&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-2xl flex items-start gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{size:20,className:"text-yellow-400 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-200",children:"API key required"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-yellow-200/60 mt-1",children:"You need a Gemini API key to use voice and text chat features."})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Your Gemini API Key"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx("input",{type:a?"text":"password",value:d,onChange:it=>_(it.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 pr-10 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white font-mono text-sm",placeholder:"AIzaSy..."}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:a?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{onClick:b,disabled:!d||d===i.geminiApiKey,className:"px-4 py-2.5 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-800 disabled:text-gray-600 text-white rounded-xl font-semibold transition-all",children:"Save"}),i.geminiApiKey&&jsxRuntimeExports.jsx("button",{onClick:$,className:"px-4 py-2.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-xl font-semibold transition-all",children:"Clear"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:["Get your API key from",jsxRuntimeExports.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-violet-400 hover:text-violet-300 inline-flex items-center gap-1",children:["Google AI Studio ",jsxRuntimeExports.jsx(ExternalLink,{size:12})]})]})]}),i.geminiApiKey&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-xl flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-green-400",children:"API key configured"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/10 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(User,{size:20,className:"text-violet-400"}),"User Profile"]}),i.userEmail&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 bg-white/5 px-4 py-1.5 rounded-full border border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-wider leading-none mb-1",children:"Verified Account"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-violet-400 font-medium leading-none",children:i.userEmail})]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Your Name"}),jsxRuntimeExports.jsx("input",{type:"text",name:"userName",value:i.userName,onChange:g,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white",placeholder:"How should I call you?"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Target Career Role"}),jsxRuntimeExports.jsx("input",{type:"text",name:"targetRole",value:i.targetRole,onChange:g,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white",placeholder:"e.g. Senior Frontend Engineer"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Globe,{size:14,className:"text-violet-400"}),"Your Region (Timezone)"]}),jsxRuntimeExports.jsx("select",{name:"timezone",value:i.timezone||"UTC",onChange:g,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white appearance-none",children:Timezones.map(it=>jsxRuntimeExports.jsx("option",{value:it.value,className:"bg-gray-900",children:it.label},it.value))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/10 space-y-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mail,{size:20,className:"text-red-400"}),"Gmail Integration"]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg",children:jsxRuntimeExports.jsx(Mail,{size:20,className:"text-red-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-bold text-white",children:"Gmail Account"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:i.isGmailConnected?`Connected: ${i.userEmail||i.userName||"Account"}`:"Connect to auto-track applications"})]})]}),i.isGmailConnected?jsxRuntimeExports.jsx("button",{onClick:_e,className:"px-4 py-1.5 rounded-lg text-xs font-bold bg-red-500/20 text-red-400 border border-red-500/20 hover:bg-red-500/30 transition-all",children:"Disconnect"}):jsxRuntimeExports.jsx("button",{onClick:et,disabled:j,className:"px-4 py-1.5 rounded-lg text-xs font-bold bg-violet-600 text-white hover:bg-violet-500 glow transition-all disabled:opacity-50",children:j?"Connecting...":"Connect Gmail"})]}),i.isGmailConnected&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-xl flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-green-400",children:"Gmail connected successfully"})]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-gray-500 leading-relaxed italic",children:"* When connected, Astra can scan your inbox to automatically find and track job application emails, interview invitations, and status updates."})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/10 space-y-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{size:20,className:"text-blue-400"}),"Assistant Voice"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Voice Character"}),jsxRuntimeExports.jsxs("select",{name:"voiceName",value:i.voiceName,onChange:g,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all text-white appearance-none",children:[jsxRuntimeExports.jsx("option",{value:VoiceNames.ZEPHYR,className:"bg-gray-900",children:"Zephyr (Default)"}),jsxRuntimeExports.jsx("option",{value:VoiceNames.PUCK,className:"bg-gray-900",children:"Puck (Energetic)"}),jsxRuntimeExports.jsx("option",{value:VoiceNames.CHARON,className:"bg-gray-900",children:"Charon (Calm)"}),jsxRuntimeExports.jsx("option",{value:VoiceNames.KORE,className:"bg-gray-900",children:"Kore (Formal)"}),jsxRuntimeExports.jsx("option",{value:VoiceNames.FENRIR,className:"bg-gray-900",children:"Fenrir (Deep)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Response Detail Level"}),jsxRuntimeExports.jsx("div",{className:"flex bg-white/5 p-1 rounded-xl border border-white/10",children:Object.values(ConcisenessLevels).map(it=>jsxRuntimeExports.jsx("button",{onClick:()=>e({...i,conciseness:it}),className:`flex-1 py-1.5 text-xs rounded-lg transition-all ${i.conciseness===it?"bg-violet-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:it},it))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/10 space-y-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(RefreshCw,{size:20,className:"text-green-400"}),"Data & Privacy"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 bg-white/5 border border-white/5 rounded-2xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white mb-2",children:"Export Records"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Download your entire job tracker history as a JSON file."}),jsxRuntimeExports.jsxs("button",{onClick:nt,className:"w-full py-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl flex items-center justify-center gap-2 text-sm font-medium transition-all",children:[jsxRuntimeExports.jsx(Download,{size:16})," Export JSON"]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-red-500/5 border border-red-500/10 rounded-2xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-red-400 mb-2",children:"Danger Zone"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-900/60 mb-4",children:"Permanently clear all job applications from your local storage."}),jsxRuntimeExports.jsxs("button",{onClick:st,className:"w-full py-2.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 rounded-xl flex items-center justify-center gap-2 text-sm font-medium text-red-400 transition-all mb-3",children:[jsxRuntimeExports.jsx(Trash2,{size:16})," Reset All Data"]}),jsxRuntimeExports.jsxs("button",{onClick:o,className:"w-full py-2.5 bg-gray-800 hover:bg-gray-700 border border-white/10 rounded-xl flex items-center justify-center gap-2 text-sm font-medium text-white transition-all",children:[jsxRuntimeExports.jsx(LogOut,{size:16})," Logout Gmail"]})]})]})]})]})]})})}function OAuthCallback({onSuccess:i,onError:e}){const s=React.useRef(!1);return reactExports.useEffect(()=>{(async()=>{if(s.current)return;const a=window.location.hash.substring(1),c=new URLSearchParams(a),d=c.get("access_token"),_=new URLSearchParams(window.location.search),j=_.get("code"),h=_.get("error")||c.get("error");d?(s.current=!0,i({accessToken:d}),window.history.replaceState(null,"",window.location.pathname)):j?(s.current=!0,window.opener?(window.opener.postMessage({type:"gmail-oauth-success",code:j},window.location.origin),window.close()):(i({code:j}),window.history.replaceState(null,"",window.location.pathname))):h&&(s.current=!0,window.opener?(window.opener.postMessage({type:"gmail-oauth-error",error:h},window.location.origin),window.close()):(e(h),window.history.replaceState(null,"",window.location.pathname)))})()},[i,e]),jsxRuntimeExports.jsx("div",{className:"flex h-screen bg-gray-950 text-gray-100 items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-3 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Completing Gmail authorization..."})]})})}function App(){const[i,e]=reactExports.useState(AppTab.ASSISTANT),[s,o]=reactExports.useState(!1),[a,c]=reactExports.useState(!1);reactExports.useEffect(()=>{const gt=new URL(window.location.href).searchParams,At=window.location.pathname,Vt=window.location.hash;(At.includes("/oauth/callback")||Vt.includes("access_token")||gt.get("code")||gt.get("error"))&&c(!0)},[]);const{applications:d,applicationsRef:_,saveJobApplication:j,deleteJobApplication:h,updateJobStatus:g,listJobs:b,findJobByCompany:$,clearAllJobs:et}=useJobApplications(),{settings:_e,settingsRef:nt,updateSettings:st}=useSettings(),[tt,it]=reactExports.useState(()=>_e.isGmailConnected),at=reactExports.useCallback(async gt=>{const{tokens:At,userInfo:Vt}=gt;let Nt=Vt;if(!Nt&&At?.access_token)try{const Lt=await fetchUserInfo(At.access_token);Lt&&(Nt={name:Lt.name||"",email:Lt.email||""})}catch(Lt){console.error("Failed to fetch user info in OAuth success:",Lt)}const It=nt.current.timezone==="UTC"?Intl.DateTimeFormat().resolvedOptions().timeZone:nt.current.timezone;st({...nt.current,isGmailConnected:!0,gmailAccessToken:At?.access_token||gt.accessToken||"",gmailRefreshToken:At?.refresh_token||"",userName:Nt?.name||nt.current.userName,userEmail:Nt?.email||nt.current.userEmail,userPicture:Nt?.picture||nt.current.userPicture,timezone:It}),it(!0),c(!1),e(AppTab.ASSISTANT)},[st,nt]),ct=reactExports.useCallback(gt=>{console.error("OAuth error:",gt),alert("Gmail connection failed: "+gt),c(!1)},[]),rt=reactExports.useCallback(gt=>{const{tokens:At,userInfo:Vt}=gt,Nt=nt.current.timezone==="UTC"?Intl.DateTimeFormat().resolvedOptions().timeZone:nt.current.timezone;st({...nt.current,isGmailConnected:!0,gmailAccessToken:At.access_token,gmailRefreshToken:At.refresh_token,userName:Vt?.name||nt.current.userName,userEmail:Vt?.email||nt.current.userEmail,userPicture:Vt?.picture||nt.current.userPicture,timezone:Nt}),it(!0)},[st,nt]),dt=reactExports.useCallback(async()=>{if(!(!_e.isGmailConnected||s)){o(!0);try{const gt=await syncGmailEmails(nt.current,_.current);gt.newAccessToken&&st({...nt.current,gmailAccessToken:gt.newAccessToken});for(const At of gt.functionCalls)if(At.functionCall){const Vt=At.functionCall;Vt.name==="save_job_application"?j(Vt.args):Vt.name==="update_job_status"&&g(Vt.args.company,Vt.args.status)}}catch(gt){console.error("Gmail sync failed",gt),alert(gt.message||"Gmail sync failed. Please try again.")}finally{o(!1)}}},[_e.isGmailConnected,s,nt,j,g,_,st]),yt={saveJobApplication:j,deleteJobApplication:h,updateJobStatus:g,listJobs:b,findJobByCompany:$,onSyncGmail:dt,applicationsRef:_},vt=reactExports.useCallback(()=>{st({...nt.current,isGmailConnected:!1,gmailAccessToken:"",gmailRefreshToken:"",userEmail:"",userName:""}),it(!1)},[st,nt]);return a?jsxRuntimeExports.jsx(OAuthCallback,{onSuccess:at,onError:ct}):tt?jsxRuntimeExports.jsxs("div",{className:"flex h-screen bg-gray-950 text-gray-100 overflow-hidden",children:[jsxRuntimeExports.jsx(Sidebar,{activeTab:i,onTabChange:e}),jsxRuntimeExports.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,_var(--tw-gradient-stops))] from-violet-900/10 via-transparent to-transparent pointer-events-none"}),i===AppTab.ASSISTANT&&jsxRuntimeExports.jsx(AssistantView,{settingsRef:nt,jobActions:yt,onSyncGmail:dt}),i===AppTab.DASHBOARD&&jsxRuntimeExports.jsx(JobDashboard,{applications:d,onDelete:h,onSave:j,isGmailConnected:_e.isGmailConnected,onSyncGmail:dt,isSyncing:s,timezone:_e.timezone}),i===AppTab.RESUME&&jsxRuntimeExports.jsx(ResumeValidator,{settings:_e}),i===AppTab.SETTINGS&&jsxRuntimeExports.jsx(SettingsView,{settings:_e,onUpdate:st,onClearData:et,onLogout:vt})]})]}):jsxRuntimeExports.jsx(LoginView,{onLoginSuccess:rt})}const rootElement=document.getElementById("root");if(!rootElement)throw new Error("Could not find root element to mount to");const root=client.createRoot(rootElement);root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
//# sourceMappingURL=index-gBBQyVeP.js.map
